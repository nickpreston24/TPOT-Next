!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=452)}([function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("path")},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGuid=t.calculateSha1=t.monotonicTime=t.headersArrayToObject=t.headersObjectToArray=t.mkdirIfNeeded=t.getAsBooleanFromENV=t.getFromENV=t.isUnderTest=t.setUnderTest=t.isDebugMode=t.isError=t.isObject=t.isRegExp=t.isString=t.debugAssert=t.assert=t.makeWaitForNextTask=void 0;const i=n(2),s=n(0),r=n(1),o=n(27),a=r.promisify(s.mkdir.bind(s));t.makeWaitForNextTask=function(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let e=!1;const t=[],n=()=>{const i=t.shift();i?(setImmediate(n),i()):e=!1};return i=>{t.push(i),e||(e=!0,setImmediate(n))}},t.assert=function(e,t){if(!e)throw new Error(t)},t.debugAssert=function(e,t){if(d()&&!e)throw new Error(t)},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isRegExp=function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isError=function(e){return e instanceof Error||e&&e.__proto__&&"Error"===e.__proto__.name};const l=!!h("PWDEBUG");t.isDebugMode=function(){return l};let c=!1;function d(){return c}function h(e){let t=process.env[e];return t=void 0===t?process.env["npm_config_"+e.toLowerCase()]:t,t=void 0===t?process.env["npm_package_config_"+e.toLowerCase()]:t,t}t.setUnderTest=function(){c=!0},t.isUnderTest=d,t.getFromENV=h,t.getAsBooleanFromENV=function(e){const t=h(e);return!!t&&"false"!==t&&"0"!==t},t.mkdirIfNeeded=async function(e){await a(i.dirname(e),{recursive:!0}).catch(()=>{})},t.headersObjectToArray=function(e){const t=[];for(const n in e)Object.is(e[n],void 0)||t.push({name:n,value:e[n]});return t},t.headersArrayToObject=function(e,t){const n={};for(const{name:i,value:s}of e)n[t?i.toLowerCase():i]=s;return n},t.monotonicTime=function(){const[e,t]=process.hrtime();return 1e3*e+(t/1e3|0)/1e3},t.calculateSha1=function(e){const t=o.createHash("sha1");return t.update(e),t.digest("hex")},t.createGuid=function(){return o.randomBytes(16).toString("hex")}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t){e.exports=require("os")},,function(e,t){e.exports=require("buffer")},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherConnection=t.Dispatcher=t.lookupNullableDispatcher=t.existingDispatcher=t.lookupDispatcher=t.dispatcherSymbol=void 0;const i=n(5),s=n(57),r=n(273),o=n(4),a=n(193),l=n(40);function c(e){const n=e[t.dispatcherSymbol];return o.debugAssert(n),n}t.dispatcherSymbol=Symbol("dispatcher"),t.lookupDispatcher=c,t.existingDispatcher=function(e){return e[t.dispatcherSymbol]},t.lookupNullableDispatcher=function(e){return e?c(e):void 0};class d extends i.EventEmitter{constructor(e,n,i,s,r,a=i+"@"+o.createGuid()){super(),this._dispatchers=new Map,this._disposed=!1,this._connection=e instanceof u?e:e._connection,this._isScope=!!r,this._parent=e instanceof u?void 0:e,this._scope=r?this:this._parent,o.assert(!this._connection._dispatchers.has(a)),this._connection._dispatchers.set(a,this),this._parent&&(o.assert(!this._parent._dispatchers.has(a)),this._parent._dispatchers.set(a,this)),this._type=i,this._guid=a,this._object=n,n[t.dispatcherSymbol]=this,this._parent&&this._connection.sendMessageToClient(this._parent._guid,"__create__",{type:i,initializer:s,guid:a})}_dispatchEvent(e,t={}){if(this._disposed){if(o.isUnderTest())throw new Error(`${this._guid} is sending "${e}" event after being disposed`)}else this._connection.sendMessageToClient(this._guid,e,t)}_dispose(){o.assert(!this._disposed),this._parent&&this._parent._dispatchers.delete(this._guid),this._connection._dispatchers.delete(this._guid);for(const e of[...this._dispatchers.values()])e._dispose();this._dispatchers.clear(),this._isScope&&this._connection.sendMessageToClient(this._guid,"__dispose__",{})}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._dispatchers.values()).map(e=>e._debugScopeState())}}}t.Dispatcher=d;class h extends d{constructor(e){super(e,{},"",{},!0,"")}}class u{constructor(){this._dispatchers=new Map,this.onmessage=e=>{},this._rootDispatcher=new h(this);const e=r.createScheme(e=>(t,n)=>{if(t&&"object"==typeof t&&"string"==typeof t.guid){const i=t.guid,s=this._dispatchers.get(i);if(!s)throw new r.ValidationError(`${n}: no object with guid ${i}`);if("*"!==e&&s._type!==e)throw new r.ValidationError(`${n}: object with guid ${i} has type ${s._type}, expected ${e}`);return s}throw new r.ValidationError(`${n}: expected ${e}`)});this._validateParams=(t,n,i)=>{const s=t+n[0].toUpperCase()+n.substring(1)+"Params";if(!e[s])throw new r.ValidationError(`Unknown scheme for ${t}.${n}`);return e[s](i,"")},this._validateMetadata=t=>a.tOptional(e.Metadata)(t,"")}sendMessageToClient(e,t,n){this.onmessage({guid:e,method:t,params:this._replaceDispatchersWithGuids(n)})}rootDispatcher(){return this._rootDispatcher}async dispatch(e){const{id:t,guid:n,method:i,params:r,metadata:o}=e,a=this._dispatchers.get(n);if(a)if("debugScopeState"!==i)try{const e=this._validateParams(a._type,i,r),n=await a[i](e,this._validateMetadata(o));this.onmessage({id:t,result:this._replaceDispatchersWithGuids(n)})}catch(e){this.onmessage({id:t,error:s.serializeError(e)})}else this.onmessage({id:t,result:this._rootDispatcher._debugScopeState()});else this.onmessage({id:t,error:s.serializeError(new Error(l.kBrowserOrContextClosedError))})}_replaceDispatchersWithGuids(e){if(!e)return e;if(e instanceof d)return{guid:e._guid};if(Array.isArray(e))return e.map(e=>this._replaceDispatchersWithGuids(e));if("object"==typeof e){const t={};for(const n of Object.keys(e))t[n]=this._replaceDispatchersWithGuids(e[n]);return t}return e}}t.DispatcherConnection=u},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helper=void 0;const i=n(258),s=n(1).promisify(i);t.helper=class{static addEventListener(e,t,n){return e.on(t,n),{emitter:e,eventName:t,handler:n}}static removeEventListeners(e){for(const t of e)t.emitter.removeListener(t.eventName,t.handler);e.splice(0,e.length)}static completeUserURL(e){return(e.startsWith("localhost")||e.startsWith("127.0.0.1"))&&(e="http://"+e),e}static enclosingIntRect(e){const t=Math.floor(e.x+.001),n=Math.floor(e.y+.001);return{x:t,y:n,width:Math.ceil(e.x+e.width-.001)-t,height:Math.ceil(e.y+e.height-.001)-n}}static enclosingIntSize(e){return{width:Math.floor(e.width+.001),height:Math.floor(e.height+.001)}}static getViewportSizeFromWindowFeatures(e){const t=e.find(e=>e.startsWith("width=")),n=e.find(e=>e.startsWith("height=")),i=t?parseInt(t.substring(6),10):NaN,s=n?parseInt(n.substring(7),10):NaN;return Number.isNaN(i)||Number.isNaN(s)?null:{width:i,height:s}}static async removeFolders(e){await Promise.all(e.map(e=>s(e).catch(e=>console.error(e))))}static waitForEvent(e,n,i,s){const r=[],o=new Promise((e,o)=>{r.push(t.helper.addEventListener(n,i,n=>{try{if(s&&!s(n))return;t.helper.removeEventListeners(r),e(n)}catch(e){t.helper.removeEventListeners(r),o(e)}}))}),a=()=>t.helper.removeEventListeners(r);return e&&e.cleanupWhenAborted(a),{promise:o,dispose:a}}static secondsToRoundishMillis(e){return(1e6*e|0)/1e3}static millisToRoundishMillis(e){return(1e3*e|0)/1e3}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageBinding=t.Worker=t.Page=void 0;const i=n(259),s=n(187),r=n(56),o=n(261),a=n(39),l=n(260),c=n(262),d=n(461),h=n(5),u=n(462),p=n(44),f=n(4),m=n(32);class _ extends h.EventEmitter{constructor(e,t){super(),this._closedState="open",this._disconnected=!1,this._pageBindings=new Map,this._evaluateOnNewDocumentSources=[],this._workers=new Map,this._video=null,this._webSocketFramesReportingEnabled=!1,this._delegate=e,this._closedCallback=()=>{},this._closedPromise=new Promise(e=>this._closedCallback=e),this._disconnectedCallback=()=>{},this._disconnectedPromise=new Promise(e=>this._disconnectedCallback=e),this._crashedCallback=()=>{},this._crashedPromise=new Promise(e=>this._crashedCallback=e),this._browserContext=t,this._state={viewportSize:t._options.viewport||null,mediaType:null,colorScheme:null,extraHTTPHeaders:null},this.accessibility=new d.Accessibility(e.getAccessibilityTree.bind(e)),this.keyboard=new s.Keyboard(e.rawKeyboard,this),this.mouse=new s.Mouse(e.rawMouse,this),this.touchscreen=new s.Touchscreen(e.rawTouchscreen,this),this._timeoutSettings=new a.TimeoutSettings(t._timeoutSettings),this._screenshotter=new o.Screenshotter(this),this._frameManager=new i.FrameManager(this),e.pdf&&(this.pdf=e.pdf.bind(e)),this.coverage=e.coverage?e.coverage():null,this.selectors=t.selectors()}async _doSlowMo(){const e=this._browserContext._browser._options.slowMo;e&&await new Promise(t=>setTimeout(t,e))}_didClose(){this._frameManager.dispose(),f.assert("closed"!==this._closedState,"Page closed twice"),this._closedState="closed",this.emit(_.Events.Close),this._closedCallback()}_didCrash(){this._frameManager.dispose(),this.emit(_.Events.Crash),this._crashedCallback(new Error("Page crashed"))}_didDisconnect(){this._frameManager.dispose(),f.assert(!this._disconnected,"Page disconnected twice"),this._disconnected=!0,this._disconnectedCallback(new Error("Page closed"))}async _onFileChooserOpened(e){const t=await e.evaluate(e=>!!e.multiple);if(!this.listenerCount(_.Events.FileChooser))return void e.dispose();const n=new u.FileChooser(this,e,t);this.emit(_.Events.FileChooser,n)}context(){return this._browserContext}async opener(){return await this._delegate.opener()}mainFrame(){return this._frameManager.mainFrame()}frames(){return this._frameManager.frames()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async exposeBinding(e,t,n){if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);if(this._browserContext._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered in the browser context`);const i=new w(e,n,t);this._pageBindings.set(e,i),await this._delegate.exposeBinding(i)}setExtraHTTPHeaders(e){return this._state.extraHTTPHeaders=e,this._delegate.updateExtraHTTPHeaders()}async _onBindingCalled(e,t){this._disconnected||"closed"===this._closedState||await w.dispatch(this,e,t)}_addConsoleMessage(e,t,n,i){const s=new c.ConsoleMessage(e,i,t,n);this._frameManager.interceptConsoleMessage(s)||!this.listenerCount(_.Events.Console)?t.forEach(e=>e.dispose()):this.emit(_.Events.Console,s)}async reload(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{const n=this.mainFrame()._waitForNavigation(e,t);return await this._delegate.reload(),n},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async goBack(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{const n=this.mainFrame()._waitForNavigation(e,t);return await this._delegate.goBack()?n:(n.catch(()=>{}),null)},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async goForward(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{const n=this.mainFrame()._waitForNavigation(e,t);return await this._delegate.goForward()?n:(n.catch(()=>{}),null)},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async emulateMedia(e){void 0!==e.media&&f.assert(null===e.media||l.mediaTypes.has(e.media),"media: expected one of (screen|print|null)"),void 0!==e.colorScheme&&f.assert(null===e.colorScheme||l.colorSchemes.has(e.colorScheme),"colorScheme: expected one of (dark|light|no-preference|null)"),void 0!==e.media&&(this._state.mediaType=e.media),void 0!==e.colorScheme&&(this._state.colorScheme=e.colorScheme),await this._delegate.updateEmulateMedia(),await this._doSlowMo()}async setViewportSize(e){this._state.viewportSize={...e},await this._delegate.setViewportSize(this._state.viewportSize),await this._doSlowMo()}viewportSize(){return this._state.viewportSize}async bringToFront(){await this._delegate.bringToFront()}async _addInitScriptExpression(e){this._evaluateOnNewDocumentSources.push(e),await this._delegate.evaluateOnNewDocument(e)}_needsRequestInterception(){return!!this._requestInterceptor||!!this._browserContext._requestInterceptor}async _setRequestInterceptor(e){this._requestInterceptor=e,await this._delegate.updateRequestInterception()}_requestStarted(e){this.emit(_.Events.Request,e);const t=e._route();t&&(this._requestInterceptor?this._requestInterceptor(t,e):this._browserContext._requestInterceptor?this._browserContext._requestInterceptor(t,e):t.continue())}async screenshot(e={}){return p.runAbortableTask(t=>this._screenshotter.screenshotPage(t,e),this._timeoutSettings.timeout(e))}async close(e){if("closed"===this._closedState)return;const t=!!e&&!!e.runBeforeUnload;"closing"!==this._closedState&&(this._closedState="closing",f.assert(!this._disconnected,"Protocol error: Connection closed. Most likely the page has been closed."),await this._delegate.closePage(t)),t||await this._closedPromise,this._ownedContext&&await this._ownedContext.close()}_setIsError(){this._frameManager.mainFrame()||this._frameManager.frameAttached("<dummy>",null)}isClosed(){return"closed"===this._closedState}_addWorker(e,t){this._workers.set(e,t),this.emit(_.Events.Worker,t)}_removeWorker(e){const t=this._workers.get(e);t&&(t.emit(g.Events.Close,t),this._workers.delete(e))}_clearWorkers(){for(const[e,t]of this._workers)t.emit(g.Events.Close,t),this._workers.delete(e)}async _setFileChooserIntercepted(e){await this._delegate.setFileChooserIntercepted(e)}_setWebSocketFramesReportingEnabled(e){this._webSocketFramesReportingEnabled=e}videoStarted(e){this._video=e,this.emit(_.Events.VideoStarted,e)}}t.Page=_,_.Events={Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker",VideoStarted:"videostarted"};class g extends h.EventEmitter{constructor(e){super(),this._existingExecutionContext=null,this._url=e,this._executionContextCallback=()=>{},this._executionContextPromise=new Promise(e=>this._executionContextCallback=e)}_createExecutionContext(e){this._existingExecutionContext=new r.ExecutionContext(e),this._executionContextCallback(this._existingExecutionContext)}url(){return this._url}async _evaluateExpression(e,t,n){return r.evaluateExpression(await this._executionContextPromise,!0,e,t,n)}async _evaluateExpressionHandle(e,t,n){return r.evaluateExpression(await this._executionContextPromise,!1,e,t,n)}}t.Worker=g,g.Events={Close:"close"};class w{constructor(e,t,n){this.name=e,this.playwrightFunction=t,this.source=`(${b.toString()})(${JSON.stringify(e)}, ${n})`,this.needsHandle=n}static async dispatch(e,t,n){const{name:i,seq:s,args:r}=JSON.parse(t);try{let t,o=e._pageBindings.get(i);if(o||(o=e._browserContext._pageBindings.get(i)),o.needsHandle){const r=await n.evaluateHandleInternal((function(e){const t=window[e.name].handles.get(e.seq);return window[e.name].handles.delete(e.seq),t}),{name:i,seq:s}).catch(e=>null);t=await o.playwrightFunction({frame:n.frame,page:e,context:e._browserContext},r)}else t=await o.playwrightFunction({frame:n.frame,page:e,context:e._browserContext},...r);n.evaluateInternal((function(e){window[e.name].callbacks.get(e.seq).resolve(e.result),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:s,result:t}).catch(e=>m.debugLogger.log("error",e))}catch(e){f.isError(e)?n.evaluateInternal((function(e){const t=new Error(e.message);t.stack=e.stack,window[e.name].callbacks.get(e.seq).reject(t),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:s,message:e.message,stack:e.stack}).catch(e=>m.debugLogger.log("error",e)):n.evaluateInternal((function(e){window[e.name].callbacks.get(e.seq).reject(e.error),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:s,error:e}).catch(e=>m.debugLogger.log("error",e))}}}function b(e,t){const n=window[e];n.__installed||(window[e]=(...i)=>{const s=window[e];if(t&&i.slice(1).some(e=>void 0!==e))throw new Error(`exposeBindingHandle supports a single argument, ${i.length} received`);let r=s.callbacks;r||(r=new Map,s.callbacks=r);const o=(s.lastSeq||0)+1;s.lastSeq=o;let a=s.handles;a||(a=new Map,s.handles=a);const l=new Promise((e,t)=>r.set(o,{resolve:e,reject:t}));return t?(a.set(o,i[0]),n(JSON.stringify({name:e,seq:o}))):n(JSON.stringify({name:e,seq:o,args:i})),l},window[e].__installed=!0)}t.PageBinding=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelOwner=void 0;const i=n(5),s=n(32),r=n(25);class o extends i.EventEmitter{constructor(e,t,n,s){super(),this._objects=new Map,this._connection=e instanceof o?e._connection:e,this._type=t,this._guid=n,this._parent=e instanceof o?e:void 0,this._connection._objects.set(n,this),this._parent&&(this._parent._objects.set(n,this),this._logger=this._parent._logger);const r=new i.EventEmitter;this._channel=new Proxy(r,{get:(e,t)=>String(t).startsWith("_")?e[t]:"then"===t?e.then:"emit"===t?e.emit:"on"===t?e.on:"once"===t?e.once:"addEventListener"===t?e.addListener:"removeEventListener"===t?e.removeListener:"domain"===t?e.domain:e=>this._connection.sendMessageToServer(this._type,n,String(t),e)}),this._channel._object=this,this._initializer=s}_dispose(){this._parent&&this._parent._objects.delete(this._guid),this._connection._objects.delete(this._guid);for(const e of[...this._objects.values()])e._dispose();this._objects.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._objects.values()).map(e=>e._debugScopeState())}}async _wrapApiCall(e,t,n){n=n||this._logger;try{a(n,`=> ${e} started`);const i=await t();return a(n,`<= ${e} succeeded`),i}catch(t){throw a(n,`<= ${e} failed`),r.rewriteErrorMessage(t,e+": "+t.message),t}}toJSON(){return{_type:this._type,_guid:this._guid}}}function a(e,t){e&&e.isEnabled("api","info")&&e.log("api","info",t,[],{color:"cyan"}),s.debugLogger.log("api",t)}t.ChannelOwner=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeProxySettings=t.verifyGeolocation=t.validateBrowserContextOptions=t.assertBrowserContextIsNotOwned=t.BrowserContext=t.contextListeners=t.runAction=t.Video=void 0;const i=n(5),s=n(39),r=n(4),o=n(16),a=n(31),l=n(17),c=n(44),d=n(188),h=n(2);t.Video=class{constructor(e,t,n){this._finishCallback=()=>{},this._videoId=t,this._path=n,this._relativePath=h.relative(e._options.recordVideo.dir,n),this._context=e,this._finishedPromise=new Promise(e=>this._finishCallback=e)}async _finish(){this._callbackOnFinish&&await this._callbackOnFinish(),this._finishCallback()}_waitForCallbackOnFinish(e){this._callbackOnFinish=e}},t.runAction=async function(e,t){const n=new c.ProgressController;return n.setListener(async e=>{for(const n of t.page._browserContext._actionListeners)await n.onAfterAction(e,t)}),await e(n)},t.contextListeners=new Set;class u extends i.EventEmitter{constructor(e,t,n){super(),this._timeoutSettings=new s.TimeoutSettings,this._pageBindings=new Map,this._closedStatus="open",this._permissions=new Map,this._downloads=new Set,this._actionListeners=new Set,this._browser=e,this._options=t,this._browserContextId=n,this._isPersistentContext=!n,this._closePromise=new Promise(e=>this._closePromiseFulfill=e)}_setSelectors(e){this._selectors=e}selectors(){return this._selectors||d.serverSelectors}async _initialize(){for(const e of t.contextListeners)await e.onContextCreated(this)}async _ensureVideosPath(){this._options.recordVideo&&await r.mkdirIfNeeded(h.join(this._options.recordVideo.dir,"dummy"))}_browserClosed(){for(const e of this.pages())e._didClose();this._didCloseInternal()}_didCloseInternal(){"closed"!==this._closedStatus&&(this._closedStatus="closed",this._downloads.clear(),this._closePromiseFulfill(new Error("Context closed")),this.emit(u.Events.Close))}async cookies(e=[]){return e&&!Array.isArray(e)&&(e=[e]),await this._doCookies(e)}setHTTPCredentials(e){return this._doSetHTTPCredentials(e)}async exposeBinding(e,t,n){for(const t of this.pages())if(t._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered in one of the pages`);if(this._pageBindings.has(e))throw new Error(`Function "${e}" has been already registered`);const i=new l.PageBinding(e,n,t);this._pageBindings.set(e,i),this._doExposeBinding(i)}async grantPermissions(e,t){let n="*";if(t){n=new URL(t).origin}const i=new Set(this._permissions.get(n)||[]);e.forEach(e=>i.add(e));const s=[...i.values()];this._permissions.set(n,s),await this._doGrantPermissions(n,s)}async clearPermissions(){this._permissions.clear(),await this._doClearPermissions()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async _loadDefaultContext(e){if(!this.pages().length){const t=o.helper.waitForEvent(e,this,u.Events.Page);e.cleanupWhenAborted(()=>t.dispose),await t.promise}const t=this.pages();if(await t[0].mainFrame()._waitForLoadState(e,"load"),1!==t.length||"about:blank"!==t[0].mainFrame().url())throw new Error(`Arguments can not specify page to be opened (first url is ${t[0].mainFrame().url()})`);if(this._options.isMobile||this._options.locale){const e=t[0];await this.newPage(),await e.close()}}_authenticateProxyViaHeader(){const e=this._options.proxy||this._browser._options.proxy||{username:void 0,password:void 0},{username:t,password:n}=e;if(t){this._options.httpCredentials={username:t,password:n};const e=Buffer.from(`${t}:${n}`).toString("base64");this._options.extraHTTPHeaders=a.mergeHeaders([this._options.extraHTTPHeaders,a.singleHeader("Proxy-Authorization","Basic "+e)])}}_authenticateProxyViaCredentials(){const e=this._options.proxy||this._browser._options.proxy;if(!e)return;const{username:t,password:n}=e;t&&n&&(this._options.httpCredentials={username:t,password:n})}async _setRequestInterceptor(e){this._requestInterceptor=e,await this._doUpdateRequestInterception()}isClosingOrClosed(){return"open"!==this._closedStatus}async close(){if("open"===this._closedStatus){this._closedStatus="closing";for(const e of t.contextListeners)await e.onContextWillDestroy(this);const e=[];for(const t of this._downloads)e.push(t.delete());for(const t of this._browser._idToVideo.values())t._context===this&&e.push(t._finishedPromise);this._isPersistentContext?await Promise.all(this.pages().map(e=>e.close())):await this._doClose(),await Promise.all(e),this._isPersistentContext&&await this._browser.close();for(const e of t.contextListeners)await e.onContextDidDestroy(this);this._didCloseInternal()}await this._closePromise}}function p(e){if(!e)return;e.accuracy=e.accuracy||0;const{longitude:t,latitude:n,accuracy:i}=e;if(t<-180||t>180)throw new Error("geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.");if(n<-90||n>90)throw new Error("geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.");if(i<0)throw new Error("geolocation.accuracy: precondition 0 <= ACCURACY failed.")}function f(e){let t,{server:n,bypass:i}=e;try{t=new URL(n),t.host&&t.protocol||(t=new URL("http://"+n))}catch(e){t=new URL("http://"+n)}return n=t.protocol+"//"+t.host,i&&(i=i.split(",").map(e=>e.trim()).join(",")),{...e,server:n,bypass:i}}t.BrowserContext=u,u.Events={Close:"close",Page:"page",VideoStarted:"videostarted"},t.assertBrowserContextIsNotOwned=function(e){for(const t of e.pages())if(t._ownedContext)throw new Error("Please use browser.newContext() for multi-page scripts that share the context.")},t.validateBrowserContextOptions=function(e,t){if(e.noDefaultViewport&&void 0!==e.deviceScaleFactor)throw new Error('"deviceScaleFactor" option is not supported with null "viewport"');if(e.noDefaultViewport&&void 0!==e.isMobile)throw new Error('"isMobile" option is not supported with null "viewport"');if(e.viewport||e.noDefaultViewport||(e.viewport={width:1280,height:720}),e.proxy){if(!t.proxy)throw new Error("Browser needs to be launched with the global proxy. If all contexts override the proxy, global proxy will be never used and can be any string, for example \"launch({ proxy: { server: 'per-context' } })\"");e.proxy=f(e.proxy)}p(e.geolocation)},t.verifyGeolocation=p,t.normalizeProxySettings=f},,function(e,t,n){try{var i=n(1);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(149)}},function(e,t){e.exports=require("assert")},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteErrorMessage=t.getCallerFilePath=void 0;const i=n(2),s=i.normalize(i.join(e,".."));function r(e){if(!(e=e.trim()).startsWith("at "))return null;let t,n;if((e=e.substring("at ".length)).startsWith("async ")&&(e=e.substring("async ".length)),e.endsWith(")")){const i=e.indexOf("(");t=e.substring(i+1,e.length-1),n=e.substring(0,i).trim()}else t=e,n="";const i=t.match(/^(?:async )?([^(]*):(\d+):(\d+)$/);if(!i)return null;return{filePath:i[1],functionName:n}}t.getCallerFilePath=function(e=s){const t=((new Error).stack||"").split("\n").slice(2);for(const n of t){const t=r(n);if(!t)return null;if(!t.filePath.startsWith(e))return t.filePath}return null},t.rewriteErrorMessage=function(e,t){if(e.stack){const n=e.stack.indexOf(e.message);-1!==n&&(e.stack=e.stack.substring(0,n)+t+e.stack.substring(n+e.message.length))}return e.message=t,e}}).call(this,"/")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("crypto")},,,function(e,t,n){"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeHeaders=t.singleHeader=t.STATUS_TEXTS=t.WebSocket=t.Response=t.Route=t.Request=t.rewriteCookies=t.filterCookies=void 0;const i=n(4),s=n(5);t.filterCookies=function(e,t){const n=t.map(e=>new URL(e));return e.filter(e=>{if(!n.length)return!0;for(const t of n)if(t.hostname===e.domain&&t.pathname.startsWith(e.path)&&"https:"===t.protocol===e.secure)return!0;return!1})},t.rewriteCookies=function(e){return e.map(e=>{i.assert(e.name,"Cookie should have a name"),i.assert(e.value,"Cookie should have a value"),i.assert(e.url||e.domain&&e.path,"Cookie should have a url or a domain/path pair"),i.assert(!(e.url&&e.domain),"Cookie should have either url or domain"),i.assert(!(e.url&&e.path),"Cookie should have either url or domain");const t={...e};if(t.url){i.assert("about:blank"!==t.url,`Blank page can not have cookie "${e.name}"`),i.assert(!t.url.startsWith("data:"),`Data URL page can not have cookie "${e.name}"`);const n=new URL(t.url);t.domain=n.hostname,t.path=n.pathname.substring(0,n.pathname.lastIndexOf("/")+1),t.secure="https:"===n.protocol}return t})};t.Request=class{constructor(e,t,n,s,r,o,a,l,c){this._response=null,this._redirectedTo=null,this._failureText=null,this._headersMap=new Map,this._waitForResponsePromiseCallback=()=>{},this._responseEndTiming=-1,i.assert(!r.startsWith("data:"),"Data urls should not fire requests"),i.assert(!(e&&n),"Should not be able to intercept redirects"),this._routeDelegate=e,this._frame=t,this._redirectedFrom=n,n&&(n._redirectedTo=this),this._documentId=s,this._url=function(e){if(!e.indexOf("#"))return e;const t=new URL(e);return t.hash="",t.href}(r),this._resourceType=o,this._method=a,this._postData=l,this._headers=c;for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);this._waitForResponsePromise=new Promise(e=>this._waitForResponsePromiseCallback=e),this._isFavicon=r.endsWith("/favicon.ico")}_setFailureText(e){this._failureText=e,this._waitForResponsePromiseCallback(null)}url(){return this._url}resourceType(){return this._resourceType}method(){return this._method}postDataBuffer(){return this._postData}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}response(){return this._waitForResponsePromise}_existingResponse(){return this._response}_setResponse(e){this._response=e,this._waitForResponsePromiseCallback(e)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}frame(){return this._frame}isNavigationRequest(){return!!this._documentId}redirectedFrom(){return this._redirectedFrom}failure(){return null===this._failureText?null:{errorText:this._failureText}}_route(){return this._routeDelegate?new r(this,this._routeDelegate):null}updateWithRawHeaders(e){this._headers=e,this._headersMap.clear();for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);if(!this._headersMap.has("host")){const e=new URL(this._url).host;this._headers.push({name:"host",value:e}),this._headersMap.set("host",e)}}};class r{constructor(e,t){this._handled=!1,this._request=e,this._delegate=t}request(){return this._request}async abort(e="failed"){i.assert(!this._handled,"Route is already handled!"),this._handled=!0,await this._delegate.abort(e)}async fulfill(e){i.assert(!this._handled,"Route is already handled!"),this._handled=!0,await this._delegate.fulfill({status:void 0===e.status?200:e.status,headers:e.headers||[],body:e.body||"",isBase64:e.isBase64||!1})}async continue(e={}){i.assert(!this._handled,"Route is already handled!"),await this._delegate.continue(e)}}t.Route=r;t.Response=class{constructor(e,t,n,i,s,r){this._contentPromise=null,this._finishedPromiseCallback=()=>{},this._headersMap=new Map,this._request=e,this._timing=s,this._status=t,this._statusText=n,this._url=e.url(),this._headers=i;for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);this._getResponseBodyCallback=r,this._finishedPromise=new Promise(e=>{this._finishedPromiseCallback=e}),this._request._setResponse(this)}_requestFinished(e,t){this._request._responseEndTiming=Math.max(e,this._timing.responseStart),this._finishedPromiseCallback({error:t})}url(){return this._url}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}finished(){return this._finishedPromise.then(({error:e})=>e?new Error(e):null)}timing(){return this._timing}body(){return this._contentPromise||(this._contentPromise=this._finishedPromise.then(async({error:e})=>{if(e)throw new Error(e);return this._getResponseBodyCallback()})),this._contentPromise}request(){return this._request}frame(){return this._request.frame()}};class o extends s.EventEmitter{constructor(e){super(),this._url=e}url(){return this._url}frameSent(e,t){this.emit(o.Events.FrameSent,{opcode:e,data:t})}frameReceived(e,t){this.emit(o.Events.FrameReceived,{opcode:e,data:t})}error(e){this.emit(o.Events.Error,e)}closed(){this.emit(o.Events.Close)}}t.WebSocket=o,o.Events={Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},t.STATUS_TEXTS={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},t.singleHeader=function(e,t){return[{name:e,value:t}]},t.mergeHeaders=function(e){const t=new Map,n=new Map;for(const i of e)if(i)for(const{name:e,value:s}of i){const i=e.toLowerCase();n.set(i,e),t.set(i,s)}const i=[];for(const[e,s]of t)i.push({name:n.get(e),value:s});return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;const i=n(34),s=n(0),r={api:45,protocol:34,browser:0,error:160,"channel:command":33,"channel:response":202,"channel:event":207};t.debugLogger=new class{constructor(){if(this._debuggers=new Map,process.env.DEBUG_FILE){const e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g"),t=s.createWriteStream(process.env.DEBUG_FILE);i.log=n=>{t.write(n.replace(e,"")),t.write("\n")}}}log(e,t){let n=this._debuggers.get(e);n||(n=i("pw:"+e),this._debuggers.set(e,n),n.color=r[e]),n(t)}isEnabled(e){return i.enabled("pw:"+e)}}},function(e,t){e.exports=require("http")},function(e,t,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(136):e.exports=n(138)},function(e,t){e.exports=require("child_process")},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutSettings=t.DEFAULT_TIMEOUT=void 0;const i=n(4);t.DEFAULT_TIMEOUT=3e4;const s=i.isDebugMode()?0:t.DEFAULT_TIMEOUT;t.TimeoutSettings=class{constructor(e){this._defaultTimeout=null,this._defaultNavigationTimeout=null,this._parent=e}setDefaultTimeout(e){this._defaultTimeout=e}setDefaultNavigationTimeout(e){this._defaultNavigationTimeout=e}navigationTimeout(e){return"number"==typeof e.timeout?e.timeout:null!==this._defaultNavigationTimeout?this._defaultNavigationTimeout:null!==this._defaultTimeout?this._defaultTimeout:this._parent?this._parent.navigationTimeout(e):s}timeout(e){return"number"==typeof e.timeout?e.timeout:null!==this._defaultTimeout?this._defaultTimeout:this._parent?this._parent.timeout(e):s}static timeout(e){return"number"==typeof e.timeout?e.timeout:s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafeCloseError=t.kBrowserOrContextClosedError=t.kBrowserClosedError=t.TimeoutError=void 0;class i extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}t.TimeoutError=class extends i{},t.kBrowserClosedError="Browser has been closed",t.kBrowserOrContextClosedError="Target page, context or browser has been closed",t.isSafeCloseError=function(e){return e.message.endsWith(t.kBrowserClosedError)||e.message.endsWith(t.kBrowserOrContextClosedError)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0,t.Events={Browser:{Disconnected:"disconnected"},BrowserContext:{Close:"close",Page:"page"},BrowserServer:{Close:"close"},Page:{Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker"},WebSocket:{Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},Worker:{Close:"close"},ChromiumBrowserContext:{BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"},ElectronApplication:{Close:"close",Window:"window"}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressController=t.runAbortableTask=void 0;const i=n(40),s=n(4),r=n(25),o=n(32);t.runAbortableTask=async function(e,t){return(new a).run(e,t)};class a{constructor(){this._forceAbort=()=>{},this._aborted=()=>{},this._cleanups=[],this._logName="api",this._state="before",this._deadline=0,this._timeout=0,this._logRecording=[],this._forceAbortPromise=new Promise((e,t)=>this._forceAbort=t),this._forceAbortPromise.catch(e=>null),this._abortedPromise=new Promise(e=>this._aborted=e)}setLogName(e){this._logName=e}setListener(e){this._listener=e}async run(e,t){t&&(this._timeout=t,this._deadline=t?s.monotonicTime()+t:0),s.assert("before"===this._state),this._state="running";const n={aborted:this._abortedPromise,log:e=>{"running"===this._state&&this._logRecording.push(e),o.debugLogger.log(this._logName,e)},timeUntilDeadline:()=>this._deadline?this._deadline-s.monotonicTime():2147483647,isRunning:()=>"running"===this._state,cleanupWhenAborted:e=>{"running"===this._state?this._cleanups.push(e):l(e)},throwIfAborted:()=>{if("aborted"===this._state)throw new d}},a=new i.TimeoutError(`Timeout ${this._timeout}ms exceeded.`),h=setTimeout(()=>this._forceAbort(a),n.timeUntilDeadline()),u=s.monotonicTime();try{const t=e(n),i=await Promise.race([t,this._forceAbortPromise]);return clearTimeout(h),this._state="finished",this._listener&&await this._listener({startTime:u,endTime:s.monotonicTime(),logs:this._logRecording}),this._logRecording=[],i}catch(e){throw this._aborted(),clearTimeout(h),this._state="aborted",await Promise.all(this._cleanups.splice(0).map(e=>l(e))),this._listener&&await this._listener({startTime:u,endTime:s.monotonicTime(),logs:this._logRecording,error:e}),r.rewriteErrorMessage(e,e.message+function(e){if(!e.length)return"";const t=(60-" logs ".length)/2,n=60-" logs ".length-t;return`\n${"=".repeat(t)} logs ${"=".repeat(n)}\n${e.join("\n")}\n${"=".repeat(60)}`}(this._logRecording)+c),this._logRecording=[],e}}abort(e){this._forceAbort(e)}}async function l(e){try{await e()}catch(e){}}t.ProgressController=a;const c="\nNote: use DEBUG=pw:api environment variable and rerun to capture Playwright logs.";class d extends Error{}},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t,n){var i=n(82);function s(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function r(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(s),e.exports.strict=i(r),s.proto=s((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return s(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})}))},function(e,t,n){e.exports=d,d.Minimatch=h;var i={sep:"/"};try{i=n(2)}catch(e){}var s=d.GLOBSTAR=h.GLOBSTAR={},r=n(146),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var l=/\/+/;function c(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function d(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new h(t,n).match(e))}function h(e,t){if(!(this instanceof h))return new h(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function u(e,t){if(t||(t=this instanceof h?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:r(e)}d.filter=function(e,t){return t=t||{},function(n,i,s){return d(n,e,t)}},d.defaults=function(e){if(!e||!Object.keys(e).length)return d;var t=d,n=function(n,i,s){return t.minimatch(n,i,c(e,s))};return n.Minimatch=function(n,i){return new t.Minimatch(n,c(e,i))},n},h.defaults=function(e){return e&&Object.keys(e).length?d.defaults(e).Minimatch:h},h.prototype.debug=function(){},h.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(l)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},h.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,i=0;if(n.nonegate)return;for(var s=0,r=e.length;s<r&&"!"===e.charAt(s);s++)t=!t,i++;i&&(this.pattern=e.substr(i));this.negate=t},d.braceExpand=function(e,t){return u(e,t)},h.prototype.braceExpand=u,h.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return s;if(""===e)return"";var i,r="",l=!!n.nocase,c=!1,d=[],h=[],u=!1,f=-1,m=-1,_="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function w(){if(i){switch(i){case"*":r+="[^/]*?",l=!0;break;case"?":r+="[^/]",l=!0;break;default:r+="\\"+i}g.debug("clearStateChar %j %j",i,r),i=!1}}for(var b,y=0,v=e.length;y<v&&(b=e.charAt(y));y++)if(this.debug("%s\t%s %s %j",e,y,r,b),c&&a[b])r+="\\"+b,c=!1;else switch(b){case"/":return!1;case"\\":w(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,y,r,b),u){this.debug("  in class"),"!"===b&&y===m+1&&(b="^"),r+=b;continue}g.debug("call clearStateChar %j",i),w(),i=b,n.noext&&w();continue;case"(":if(u){r+="(";continue}if(!i){r+="\\(";continue}d.push({type:i,start:y-1,reStart:r.length,open:o[i].open,close:o[i].close}),r+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,r),i=!1;continue;case")":if(u||!d.length){r+="\\)";continue}w(),l=!0;var x=d.pop();r+=x.close,"!"===x.type&&h.push(x),x.reEnd=r.length;continue;case"|":if(u||!d.length||c){r+="\\|",c=!1;continue}w(),r+="|";continue;case"[":if(w(),u){r+="\\"+b;continue}u=!0,m=y,f=r.length,r+=b;continue;case"]":if(y===m+1||!u){r+="\\"+b,c=!1;continue}if(u){var S=e.substring(m+1,y);try{RegExp("["+S+"]")}catch(e){var E=this.parse(S,p);r=r.substr(0,f)+"\\["+E[0]+"\\]",l=l||E[1],u=!1;continue}}l=!0,u=!1,r+=b;continue;default:w(),c?c=!1:!a[b]||"^"===b&&u||(r+="\\"),r+=b}u&&(S=e.substr(m+1),E=this.parse(S,p),r=r.substr(0,f)+"\\["+E[0],l=l||E[1]);for(x=d.pop();x;x=d.pop()){var k=r.slice(x.reStart+x.open.length);this.debug("setting tail",r,x),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",k,k,x,r);var C="*"===x.type?"[^/]*?":"?"===x.type?"[^/]":"\\"+x.type;l=!0,r=r.slice(0,x.reStart)+C+"\\("+k}w(),c&&(r+="\\\\");var P=!1;switch(r.charAt(0)){case".":case"[":case"(":P=!0}for(var T=h.length-1;T>-1;T--){var O=h[T],I=r.slice(0,O.reStart),A=r.slice(O.reStart,O.reEnd-8),M=r.slice(O.reEnd-8,O.reEnd),F=r.slice(O.reEnd);M+=F;var N=I.split("(").length-1,R=F;for(y=0;y<N;y++)R=R.replace(/\)[+*?]?/,"");var L="";""===(F=R)&&t!==p&&(L="$"),r=I+A+F+L+M}""!==r&&l&&(r="(?=.)"+r);P&&(r=_+r);if(t===p)return[r,l];if(!l)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var D=n.nocase?"i":"";try{var j=new RegExp("^"+r+"$",D)}catch(e){return new RegExp("$.")}return j._glob=e,j._src=r,j};var p={};d.makeRe=function(e,t){return new h(e,t||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",r=e.map((function(e){return e.map((function(e){return e===s?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,i)}catch(e){this.regexp=!1}return this.regexp},d.match=function(e,t,n){var i=new h(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},h.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/"));e=e.split(l),this.debug(this.pattern,"split",e);var s,r,o=this.set;for(this.debug(this.pattern,"set",o),r=e.length-1;r>=0&&!(s=e[r]);r--);for(r=0;r<o.length;r++){var a=o[r],c=e;if(n.matchBase&&1===a.length&&(c=[s]),this.matchOne(c,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},h.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var r=0,o=0,a=e.length,l=t.length;r<a&&o<l;r++,o++){this.debug("matchOne loop");var c,d=t[o],h=e[r];if(this.debug(t,d,h),!1===d)return!1;if(d===s){this.debug("GLOBSTAR",[t,d,h]);var u=r,p=o+1;if(p===l){for(this.debug("** at the end");r<a;r++)if("."===e[r]||".."===e[r]||!i.dot&&"."===e[r].charAt(0))return!1;return!0}for(;u<a;){var f=e[u];if(this.debug("\nglobstar while",e,u,t,p,f),this.matchOne(e.slice(u),t.slice(p),n))return this.debug("globstar found match!",u,a,f),!0;if("."===f||".."===f||!i.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,u,t,p);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!n||(this.debug("\n>>> no match, partial?",e,u,t,p),u!==a))}if("string"==typeof d?(c=i.nocase?h.toLowerCase()===d.toLowerCase():h===d,this.debug("string match",d,h,c)):(c=h.match(d),this.debug("pattern match",d,h,c)),!c)return!1}if(r===a&&o===l)return!0;if(r===a)return n;if(o===l)return r===a-1&&""===e[r];throw new Error("wtf?")}},function(e,t,n){"use strict";function i(e){return"/"===e.charAt(0)}function s(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?s:i,e.exports.posix=i,e.exports.win32=s},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnserializableValue=t.evaluateExpression=t.evaluate=t.JSHandle=t.ExecutionContext=void 0;const i=n(459),s=n(70),r=n(126);t.ExecutionContext=class{constructor(e){this._delegate=e}adoptIfNeeded(e){return null}utilityScript(){if(!this._utilityScriptPromise){const e=`new (${i.source})()`;this._utilityScriptPromise=this._delegate.rawEvaluate(e).then(e=>new o(this,"object",e))}return this._utilityScriptPromise}createHandle(e){return this._delegate.createHandle(this,e)}async doSlowMo(){}};class o{constructor(e,t,n,i){this._disposed=!1,this._context=e,this._objectId=n,this._value=i,this._objectType=t,this._objectId&&(this._value="JSHandle@"+this._objectType),this._preview="JSHandle@"+String(this._objectId?this._objectType:this._value)}async evaluate(e,t){return a(this._context,!0,e,this,t)}async evaluateHandle(e,t){return a(this._context,!1,e,this,t)}async _evaluateExpression(e,t,n,i){const s=await l(this._context,n,e,t,this,i);return await this._context.doSlowMo(),s}async getProperty(e){const t=await this.evaluateHandle((e,t)=>{const n={__proto__:null};return n[t]=e[t],n},e),n=(await t.getProperties()).get(e);return t.dispose(),n}getProperties(){return this._context._delegate.getProperties(this)}async jsonValue(){if(!this._objectId)return this._value;const e=await this._context.utilityScript(),t="(utilityScript, ...args) => utilityScript.jsonValue(...args)"+s.generateSourceUrl();return this._context._delegate.evaluateWithArguments(t,!0,e,[!0],[this._objectId])}asElement(){return null}async dispose(){this._disposed||(this._disposed=!0,await this._context._delegate.releaseHandle(this))}toString(){return this._preview}_setPreviewCallback(e){this._previewCallback=e}_setPreview(e){this._preview=e,this._previewCallback&&this._previewCallback(e)}}async function a(e,t,n,...i){return l(e,t,String(n),"function"==typeof n,...i)}async function l(e,t,n,i,...a){const l=await e.utilityScript();if(!i){const i="(utilityScript, ...args) => utilityScript.evaluate(...args)"+s.generateSourceUrl();return e._delegate.evaluateWithArguments(i,t,l,[t,s.ensureSourceUrl(n)],[])}let c=n;try{new Function("("+c+")")}catch(e){c=c.startsWith("async ")?"async function "+c.substring("async ".length):"function "+c;try{new Function("("+c+")")}catch(e){throw new Error("Passed function is not well-serializable!")}}const d=[],h=[],u=e=>(d.push(e),d.length-1);a=a.map(t=>r.serializeAsCallArgument(t,t=>{if(t instanceof o){if(!t._objectId)return{fallThrough:t._value};if(t._disposed)throw new Error("JSHandle is disposed!");const n=e.adoptIfNeeded(t);return null===n?{h:u(Promise.resolve(t))}:(h.push(n),{h:u(n)})}return{fallThrough:t}}));const p=[];for(const t of await Promise.all(d)){if(t._context!==e)throw new Error("JSHandles can be evaluated only in the context they were created!");p.push(t._objectId)}c+=await s.generateSourceMapUrl(n,c);const f=[t,c,a.length,...a],m="(utilityScript, ...args) => utilityScript.callFunction(...args)"+s.generateSourceUrl();try{return await e._delegate.evaluateWithArguments(m,t,l,f,p)}finally{h.map(e=>e.then(e=>e.dispose()))}}t.JSHandle=o,t.evaluate=a,t.evaluateExpression=l,t.parseUnserializableValue=function(e){return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:"-0"===e?-0:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeValue=t.parseSerializedValue=t.parseError=t.serializeError=void 0;const i=n(40);function s(e,t){if(void 0!==e.n)return e.n;if(void 0!==e.s)return e.s;if(void 0!==e.b)return e.b;if(void 0!==e.v){if("undefined"===e.v)return;if("null"===e.v)return null;if("NaN"===e.v)return NaN;if("Infinity"===e.v)return 1/0;if("-Infinity"===e.v)return-1/0;if("-0"===e.v)return-0}if(void 0!==e.d)return new Date(e.d);if(void 0!==e.r)return new RegExp(e.r.p,e.r.f);if(void 0!==e.a)return e.a.map(e=>s(e,t));if(void 0!==e.o){const n={};for(const{k:i,v:r}of e.o)n[i]=s(r,t);return n}if(void 0!==e.h){if(void 0===t)throw new Error("Unexpected handle");return t[e.h]}throw new Error("Unexpected value")}function r(e,t,n){const i=t(e);if(!("fallThrough"in i))return i;if(e=i.fallThrough,n.has(e))throw new Error("Argument is a circular structure");if("symbol"==typeof e)return{v:"undefined"};if(Object.is(e,void 0))return{v:"undefined"};if(Object.is(e,null))return{v:"null"};if(Object.is(e,NaN))return{v:"NaN"};if(Object.is(e,1/0))return{v:"Infinity"};if(Object.is(e,-1/0))return{v:"-Infinity"};if(Object.is(e,-0))return{v:"-0"};if("boolean"==typeof e)return{b:e};if("number"==typeof e)return{n:e};if("string"==typeof e)return{s:e};if(o(e)){const t=e;return"captureStackTrace"in global.Error?{s:t.stack||""}:{s:`${t.name}: ${t.message}\n${t.stack}`}}if((s=e)instanceof Date||"[object Date]"===Object.prototype.toString.call(s))return{d:e.toJSON()};var s;if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(e))return{r:{p:e.source,f:e.flags}};if(Array.isArray(e)){const i=[];n.add(e);for(let s=0;s<e.length;++s)i.push(r(e[s],t,n));return n.delete(e),{a:i}}if("object"==typeof e){const i=[];n.add(e);for(const s of Object.keys(e))i.push({k:s,v:r(e[s],t,n)});return n.delete(e),{o:i}}throw new Error("Unexpected value")}function o(e){return e instanceof Error||e&&e.__proto__&&"Error"===e.__proto__.name}t.serializeError=function(e){return o(e)?{error:{message:e.message,stack:e.stack,name:e.name}}:{value:r(e,e=>({fallThrough:e}),new Set)}},t.parseError=function(e){if(!e.error){if(void 0===e.value)throw new Error("Serialized error must have either an error or a value");return s(e.value,void 0)}if("TimeoutError"===e.error.name){const t=new i.TimeoutError(e.error.message);return t.stack=e.error.stack||"",t}const t=new Error(e.error.message);return t.stack=e.error.stack||"",t},t.parseSerializedValue=s,t.serializeValue=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertMaxArguments=t.parseResult=t.serializeArgument=t.JSHandle=void 0;const i=n(18),s=n(57);class r extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._preview=this._initializer.preview,this._channel.on("previewUpdated",({preview:e})=>this._preview=e)}static from(e){return e._object}async evaluate(e,t){return a((await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o(t)})).value)}async evaluateHandle(e,t){const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o(t)});return r.from(n.handle)}async getProperty(e){const t=await this._channel.getProperty({name:e});return r.from(t.handle)}async getProperties(){const e=new Map;for(const{name:t,value:n}of(await this._channel.getPropertyList()).properties)e.set(t,r.from(n));return e}async jsonValue(){return a((await this._channel.jsonValue()).value)}asElement(){return null}async dispose(){return await this._channel.dispose()}toString(){return this._preview}}function o(e){const t=[];return{value:s.serializeValue(e,e=>{return e instanceof r?{h:(n=e._channel,t.push(n),t.length-1)}:{fallThrough:e};var n},new Set),handles:t}}function a(e){return s.parseSerializedValue(e,void 0)}t.JSHandle=r,t.serializeArgument=o,t.parseResult=a,t.assertMaxArguments=function(e,t){if(e>t)throw new Error("Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globToRegex=t.urlMatches=t.evaluationScript=t.envObjectToArray=t.deprecate=void 0;const i=n(0),s=n(1),r=n(4),o=new Set;t.deprecate=function(e,t){o.has(e)||(o.add(e),console.warn(t))},t.envObjectToArray=function(e){const t=[];for(const n in e)Object.is(e[n],void 0)||t.push({name:n,value:String(e[n])});return t},t.evaluationScript=async function(e,t,n=!0){if("function"==typeof e){return`(${e.toString()})(${Object.is(t,void 0)?"undefined":JSON.stringify(t)})`}if(void 0!==t)throw new Error("Cannot evaluate a string with arguments");if(r.isString(e))return e;if(void 0!==e.content)return e.content;if(void 0!==e.path){let t=await s.promisify(i.readFile)(e.path,"utf8");return n&&(t+="//# sourceURL="+e.path.replace(/\n/g,"")),t}throw new Error("Either path or content property must be present")},t.urlMatches=function(e,t){if(void 0===t||""===t)return!0;if(r.isString(t)&&(t=l(t)),r.isRegExp(t))return t.test(e);if("string"==typeof t&&t===e)return!0;const n=new URL(e);if("string"==typeof t)return n.pathname===t;if("function"!=typeof t)throw new Error("url parameter should be string, RegExp or function");return t(n)};const a=new Set(["/","$","^","+",".","(",")","=","!","|"]);function l(e){const t=["^"];let n;for(let i=0;i<e.length;++i){const s=e[i];if(a.has(s))t.push("\\"+s);else if("*"!==s)switch(s){case"?":t.push(".");break;case"{":n=!0,t.push("(");break;case"}":n=!1,t.push(")");break;case",":if(n){t.push("|");break}t.push("\\"+s);break;default:t.push(s)}else{const n=e[i-1];let s=1;for(;"*"===e[i+1];)s++,i++;const r=e[i+1];s>1&&("/"===n||void 0===n)&&("/"===r||void 0===r)?(t.push("((?:[^/]*(?:/|$))*)"),i++):t.push("([^/]*)")}}return t.push("$"),new RegExp(t.join(""))}t.globToRegex=l},,,function(e,t,n){e.exports=b;var i=n(0),s=n(83),r=n(48),o=(r.Minimatch,n(22)),a=n(5).EventEmitter,l=n(2),c=n(23),d=n(49),h=n(150),u=n(84),p=(u.alphasort,u.alphasorti,u.setopts),f=u.ownProp,m=n(151),_=(n(1),u.childrenIgnored),g=u.isIgnored,w=n(47);function b(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return h(e,t)}return new v(e,t,n)}b.sync=h;var y=b.GlobSync=h.GlobSync;function v(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new y(e,t)}if(!(this instanceof v))return new v(e,t,n);p(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=w(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var s=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return o();for(var r=0;r<i;r++)this._process(this.minimatch.set[r],r,!1,o);function o(){--s._processing,s._processing<=0&&s._finish()}}b.glob=b,b.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}({},t);n.noprocess=!0;var i=new v(e,n).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if("string"!=typeof i[0][s])return!0;return!1},b.Glob=v,o(v,a),v.prototype._finish=function(){if(c(this instanceof v),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();u.finish(this),this.emit("end",this.found)}},v.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--e&&t._finish()}},v.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var i=Object.keys(n),r=this,o=i.length;if(0===o)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(n,i){n=r._makeAbs(n),s.realpath(n,r.realpathCache,(function(i,s){i?"stat"===i.syscall?a[n]=!0:r.emit("error",i):a[s]=!0,0==--o&&(r.matches[e]=a,t())}))}))},v.prototype._mark=function(e){return u.mark(this,e)},v.prototype._makeAbs=function(e){return u.makeAbs(this,e)},v.prototype.abort=function(){this.aborted=!0,this.emit("abort")},v.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},v.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<i.length;t++){var s=i[t];this._processing--,this._process(s[0],s[1],s[2],s[3])}}}},v.prototype._process=function(e,t,n,i){if(c(this instanceof v),c("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,i]);else{for(var s,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:s=null;break;default:s=e.slice(0,o).join("/")}var a,l=e.slice(o);null===s?a=".":d(s)||d(e.join("/"))?(s&&d(s)||(s="/"+s),a=s):a=s;var h=this._makeAbs(a);if(_(this,a))return i();l[0]===r.GLOBSTAR?this._processGlobStar(s,a,h,l,t,n,i):this._processReaddir(s,a,h,l,t,n,i)}},v.prototype._processReaddir=function(e,t,n,i,s,r,o){var a=this;this._readdir(n,r,(function(l,c){return a._processReaddir2(e,t,n,i,s,r,c,o)}))},v.prototype._processReaddir2=function(e,t,n,i,s,r,o,a){if(!o)return a();for(var c=i[0],d=!!this.minimatch.negate,h=c._glob,u=this.dot||"."===h.charAt(0),p=[],f=0;f<o.length;f++){if("."!==(_=o[f]).charAt(0)||u)(d&&!e?!_.match(c):_.match(c))&&p.push(_)}var m=p.length;if(0===m)return a();if(1===i.length&&!this.mark&&!this.stat){this.matches[s]||(this.matches[s]=Object.create(null));for(f=0;f<m;f++){var _=p[f];e&&(_="/"!==e?e+"/"+_:e+_),"/"!==_.charAt(0)||this.nomount||(_=l.join(this.root,_)),this._emitMatch(s,_)}return a()}i.shift();for(f=0;f<m;f++){_=p[f];e&&(_="/"!==e?e+"/"+_:e+_),this._process([_].concat(i),s,r,a)}a()},v.prototype._emitMatch=function(e,t){if(!this.aborted&&!g(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=d(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var s=this.statCache[n];s&&this.emit("stat",t,s),this.emit("match",t)}}},v.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,s=m("lstat\0"+e,(function(i,s){if(i&&"ENOENT"===i.code)return t();var r=s&&s.isSymbolicLink();n.symlinks[e]=r,r||!s||s.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));s&&i.lstat(e,s)}},v.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=m("readdir\0"+e+"\0"+t,n))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,n);if(f(this.cache,e)){var s=this.cache[e];if(!s||"FILE"===s)return n();if(Array.isArray(s))return n(null,s)}i.readdir(e,function(e,t,n){return function(i,s){i?e._readdirError(t,i,n):e._readdirEntries(t,s,n)}}(this,e,n))}},v.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var s=t[i];s="/"===e?e+s:e+"/"+s,this.cache[s]=!0}return this.cache[e]=t,n(null,t)}},v.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var s=new Error(t.code+" invalid cwd "+this.cwd);s.path=this.cwd,s.code=t.code,this.emit("error",s),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},v.prototype._processGlobStar=function(e,t,n,i,s,r,o){var a=this;this._readdir(n,r,(function(l,c){a._processGlobStar2(e,t,n,i,s,r,c,o)}))},v.prototype._processGlobStar2=function(e,t,n,i,s,r,o,a){if(!o)return a();var l=i.slice(1),c=e?[e]:[],d=c.concat(l);this._process(d,s,!1,a);var h=this.symlinks[n],u=o.length;if(h&&r)return a();for(var p=0;p<u;p++){if("."!==o[p].charAt(0)||this.dot){var f=c.concat(o[p],l);this._process(f,s,!0,a);var m=c.concat(o[p],i);this._process(m,s,!0,a)}}a()},v.prototype._processSimple=function(e,t,n){var i=this;this._stat(e,(function(s,r){i._processSimple2(e,t,s,r,n)}))},v.prototype._processSimple2=function(e,t,n,i,s){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return s();if(e&&d(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=l.join(this.root,e):(e=l.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),s()},v.prototype._stat=function(e,t){var n=this._makeAbs(e),s="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,n)){var r=this.cache[n];if(Array.isArray(r)&&(r="DIR"),!s||"DIR"===r)return t(null,r);if(s&&"FILE"===r)return t()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return t(null,o);var a=o.isDirectory()?"DIR":"FILE";return s&&"FILE"===a?t():t(null,a,o)}var l=this,c=m("stat\0"+n,(function(s,r){if(r&&r.isSymbolicLink())return i.stat(n,(function(i,s){i?l._stat2(e,n,null,r,t):l._stat2(e,n,i,s,t)}));l._stat2(e,n,s,r,t)}));c&&i.lstat(n,c)},v.prototype._stat2=function(e,t,n,i,s){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,s();var r="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return s(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,r&&"FILE"===o?s():s(null,o,i)}},,,function(e,t){e.exports=require("readline")},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSourceUrl=t.generateSourceMapUrl=t.ensureSourceUrl=t.isPlaywrightSourceUrl=void 0;const i=n(0),s=n(1),r=n(25),o=n(4);let a=0;const l=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;function c(){return`\n//# sourceURL=__playwright_evaluation_script__${a++}\n`}t.isPlaywrightSourceUrl=function(e){return e.startsWith("__playwright_evaluation_script__")},t.ensureSourceUrl=function(e){return l.test(e)?e:e+c()},t.generateSourceMapUrl=async function(e,t){return o.isDebugMode()&&await async function(e,t){const n=r.getCallerFilePath();if(!n)return;try{const r=t.indexOf(e);if(-1===r)return;const o=h(t,r),a=await s.promisify(i.readFile)(n,"utf8"),l=a.indexOf(e);if(-1===l)return;const c=h(a,l),p=h(e,e.length),f=function(e,t,n,i){const s=[];let r={line:0,column:0},o={line:0,column:0};for(let e=0;e<i.line;e++){const i=u(t,{line:e,column:0}),a=u(n,{line:e,column:0});for(;r.line<a.line;)s.push(";"),r.line++,r.column=0;s.push(d(a.column-r.column)),s.push(d(0)),s.push(d(i.line-o.line)),s.push(d(i.column-o.column)),r=a,o=i}return JSON.stringify({version:3,sources:["file://"+e],names:[],mappings:s.join("")})}(n,c,o,p);return`\n//# sourceMappingURL=data:application/json;base64,${Buffer.from(f).toString("base64")}\n`}catch(e){}}(e,t)||c()},t.generateSourceUrl=c;function d(e){e<0?e=-e<<1|1:e<<=1;let t="";do{let n=31&e;(e>>>=5)>0&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}while(e>0);return t}function h(e,t){const n={line:0,column:0};let i=0;for(;;){const s=e.indexOf("\n",i);if(-1===s||s>=t)break;n.line++,i=s+1}return n.column=t-i,n}function u(e,t){return{line:e.line+t.line,column:t.column+(t.line?0:e.column)}}},function(e,t,n){"use strict";const i=n(267);i.createWebSocketStream=n(479),i.Server=n(480),i.Receiver=n(268),i.Sender=n(270),e.exports=i},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;const i=n(104),s=n(18),r=n(41),o=n(40);class a extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._contexts=new Set,this._isConnected=!0,this._isRemote=!1,this._channel.on("close",()=>this._didClose()),this._closedPromise=new Promise(e=>this.once(r.Events.Browser.Disconnected,e))}static from(e){return e._object}static fromNullable(e){return e?a.from(e):null}async newContext(e={}){return this._wrapApiCall("browser.newContext",async()=>{if(this._isRemote&&e._tracePath)throw new Error('"_tracePath" is not supported in connected browser');const t=i.validateBrowserContextOptions(e),n=i.BrowserContext.from((await this._channel.newContext(t)).context);return n._options=t,this._contexts.add(n),n._logger=e.logger||this._logger,n})}contexts(){return[...this._contexts]}version(){return this._initializer.version}async newPage(e={}){const t=await this.newContext(e),n=await t.newPage();return n._ownedContext=t,t._ownerPage=n,n}isConnected(){return this._isConnected}async close(){try{await this._wrapApiCall("browser.close",async()=>{await this._channel.close(),await this._closedPromise})}catch(e){if(o.isSafeCloseError(e))return;throw e}}_didClose(){this._isConnected=!1,this.emit(r.Events.Browser.Disconnected)}}t.Browser=a},function(e,t,n){"use strict";const i={};function s(e,t,n){n||(n=Error);class s extends n{constructor(e,n,i){super(function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(e,n,i))}}s.prototype.name=n.name,s.prototype.code=e,i[e]=s}function r(e,t){if(Array.isArray(e)){const n=e.length;return e=e.map(e=>String(e)),n>2?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,n){let i;var s,o;let a;if("string"==typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a=`The ${e} ${i} ${r(t,"type")}`;else{a=`The "${e}" ${function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument"} ${i} ${r(t,"type")}`}return a+=". Received type "+typeof n,a}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},function(e,t,n){try{var i=n(1);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(539)}},function(e,t,n){"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var s=n(286),r=n(290);n(75)(c,s);for(var o=i(r.prototype),a=0;a<o.length;a++){var l=o[a];c.prototype[l]||(c.prototype[l]=r.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},,,function(e,t,n){e.exports=function(e){function t(e){let n;function r(...e){if(!r.enabled)return;const i=r,s=Number(new Date),o=s-(n||s);i.diff=o,i.prev=n,i.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return n;a++;const r=t.formatters[s];if("function"==typeof r){const t=e[a];n=r.call(i,t),e.splice(a,1),a--}return n}),t.formatArgs.call(i,e);(i.log||t.log).apply(i,e)}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=t.selectColor(e),r.destroy=i,r.extend=s,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function s(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),s=i.length;for(n=0;n<s;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(137),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},,function(e,t){e.exports=require("tls")},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),s=e[e.length-1];return"function"==typeof i&&i!==s&&Object.keys(s).forEach((function(e){i[e]=s[e]})),i}}},function(e,t,n){e.exports=d,d.realpath=d,d.sync=h,d.realpathSync=h,d.monkeypatch=function(){i.realpath=d,i.realpathSync=h},d.unmonkeypatch=function(){i.realpath=s,i.realpathSync=r};var i=n(0),s=i.realpath,r=i.realpathSync,o=process.version,a=/^v[0-5]\./.test(o),l=n(145);function c(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function d(e,t,n){if(a)return s(e,t,n);"function"==typeof t&&(n=t,t=null),s(e,t,(function(i,s){c(i)?l.realpath(e,t,n):n(i,s)}))}function h(e,t){if(a)return r(e,t);try{return r(e,t)}catch(n){if(c(n))return l.realpathSync(e,t);throw n}}},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=c,t.alphasorti=l,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(d))}(e,n),e.changedCwd=!1;var r=process.cwd();i(n,"cwd")?(e.cwd=s.resolve(n.cwd),e.changedCwd=e.cwd!==r):e.cwd=r;e.root=n.root||s.resolve(e.cwd,"/"),e.root=s.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=o(e.cwd)?e.cwd:h(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=h,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),i=0,s=e.matches.length;i<s;i++){var r=e.matches[i];if(r&&0!==Object.keys(r).length){var o=Object.keys(r);t?n.push.apply(n,o):o.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?l:c));if(e.mark){for(i=0;i<n.length;i++)n[i]=e._mark(n[i]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),i=e.cache[t]||e.cache[h(e,t)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n})))}e.ignore.length&&(n=n.filter((function(t){return!u(e,t)})));e.found=n},t.mark=function(e,t){var n=h(e,t),i=e.cache[n],s=t;if(i){var r="DIR"===i||Array.isArray(i),o="/"===t.slice(-1);if(r&&!o?s+="/":!r&&o&&(s=s.slice(0,-1)),s!==t){var a=h(e,s);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return s},t.isIgnored=u,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var s=n(2),r=n(48),o=n(49),a=r.Minimatch;function l(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function c(e,t){return e.localeCompare(t)}function d(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function h(e,t){var n=t;return n="/"===t.charAt(0)?s.join(e.root,t):o(t)||""===t?t:e.changedCwd?s.resolve(e.cwd,t):s.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function u(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},,,function(e,t,n){"use strict";let i=n(1),s=n(6),r=e.exports=function(){s.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(r,s),r.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},r.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let n;return n=Buffer.isBuffer(e)?e:Buffer.from(e,t||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},r.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},r.prototype.destroySoon=r.prototype.end,r.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},r.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},r.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},r.prototype._processRead=function(e){this._reads.shift();let t=0,n=0,i=Buffer.alloc(e.length);for(;t<e.length;){let s=this._buffers[n++],r=Math.min(s.length,e.length-t);s.copy(i,t,0,r),t+=r,r!==s.length&&(this._buffers[--n]=s.slice(r))}n>0&&this._buffers.splice(0,n),this._buffered-=e.length,e.func.call(this,i)},r.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}},function(e,t,n){"use strict";let i=n(89),s=n(90);function r(e,t,n){let i=e*t;return 8!==n&&(i=Math.ceil(i/(8/n))),i}let o=e.exports=function(e,t){let n=e.width,s=e.height,o=e.interlace,a=e.bpp,l=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],o){let e=i.getImagePasses(n,s);for(let t=0;t<e.length;t++)this._images.push({byteWidth:r(e[t].width,a,l),height:e[t].height,lineIndex:0})}else this._images.push({byteWidth:r(n,a,l),height:s,lineIndex:0});this._xComparison=8===l?a:16===l?2*a:1};o.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},o.prototype._unFilterType1=function(e,t,n){let i=this._xComparison,s=i-1;for(let r=0;r<n;r++){let n=e[1+r],o=r>s?t[r-i]:0;t[r]=n+o}},o.prototype._unFilterType2=function(e,t,n){let i=this._lastLine;for(let s=0;s<n;s++){let n=e[1+s],r=i?i[s]:0;t[s]=n+r}},o.prototype._unFilterType3=function(e,t,n){let i=this._xComparison,s=i-1,r=this._lastLine;for(let o=0;o<n;o++){let n=e[1+o],a=r?r[o]:0,l=o>s?t[o-i]:0,c=Math.floor((l+a)/2);t[o]=n+c}},o.prototype._unFilterType4=function(e,t,n){let i=this._xComparison,r=i-1,o=this._lastLine;for(let a=0;a<n;a++){let n=e[1+a],l=o?o[a]:0,c=a>r?t[a-i]:0,d=a>r&&o?o[a-i]:0,h=s(c,l,d);t[a]=n+h}},o.prototype._reverseFilterLine=function(e){let t,n=e[0],i=this._images[this._imageIndex],s=i.byteWidth;if(0===n)t=e.slice(1,s+1);else switch(t=Buffer.alloc(s),n){case 1:this._unFilterType1(e,t,s);break;case 2:this._unFilterType2(e,t,s);break;case 3:this._unFilterType3(e,t,s);break;case 4:this._unFilterType4(e,t,s);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},function(e,t,n){"use strict";let i=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){let n=[],s=e%8,r=t%8,o=(e-s)/8,a=(t-r)/8;for(let e=0;e<i.length;e++){let t=i[e],l=o*t.x.length,c=a*t.y.length;for(let e=0;e<t.x.length&&t.x[e]<s;e++)l++;for(let e=0;e<t.y.length&&t.y[e]<r;e++)c++;l>0&&c>0&&n.push({width:l,height:c,index:e})}return n},t.getInterlaceIterator=function(e){return function(t,n,s){let r=t%i[s].x.length,o=(t-r)/i[s].x.length*8+i[s].x[r],a=n%i[s].y.length;return 4*o+((n-a)/i[s].y.length*8+i[s].y[a])*e*4}}},function(e,t,n){"use strict";e.exports=function(e,t,n){let i=e+t-n,s=Math.abs(i-e),r=Math.abs(i-t),o=Math.abs(i-n);return s<=r&&s<=o?e:r<=o?t:n}},function(e,t,n){"use strict";let i=n(30),s=n(92),r=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[i.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[i.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[i.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[i.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[i.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[i.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};r.prototype.start=function(){this.read(i.PNG_SIGNATURE.length,this._parseSignature.bind(this))},r.prototype._parseSignature=function(e){let t=i.PNG_SIGNATURE;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},r.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),n=e.readUInt32BE(4),r="";for(let t=4;t<8;t++)r+=String.fromCharCode(e[t]);let o=Boolean(32&e[4]);if(this._hasIHDR||n===i.TYPE_IHDR){if(this._crc=new s,this._crc.write(Buffer.from(r)),this._chunks[n])return this._chunks[n](t);o?this.read(t+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+r))}else this.error(new Error("Expected IHDR on beggining"))},r.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},r.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},r.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),n=this._crc.crc32();this._options.checkCRC&&n!==t?this.error(new Error("Crc error - "+t+" - "+n)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},r.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},r.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),n=e.readUInt32BE(4),s=e[8],r=e[9],o=e[10],a=e[11],l=e[12];if(8!==s&&4!==s&&2!==s&&1!==s&&16!==s)return void this.error(new Error("Unsupported bit depth "+s));if(!(r in i.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==o)return void this.error(new Error("Unsupported compression method"));if(0!==a)return void this.error(new Error("Unsupported filter method"));if(0!==l&&1!==l)return void this.error(new Error("Unsupported interlace method"));this._colorType=r;let c=i.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:n,depth:s,interlace:Boolean(l),palette:Boolean(r&i.COLORTYPE_PALETTE),color:Boolean(r&i.COLORTYPE_COLOR),alpha:Boolean(r&i.COLORTYPE_ALPHA),bpp:c,colorType:r}),this._handleChunkEnd()},r.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},r.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let n=0;n<t;n++)this._palette.push([e[3*n],e[3*n+1],e[3*n+2],255]);this.palette(this._palette),this._handleChunkEnd()},r.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))},r.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===i.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===i.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===i.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},r.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},r.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/i.GAMMA_DIVISION),this._handleChunkEnd()},r.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))},r.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===i.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);let n=e-t.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},r.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},r.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},function(e,t,n){"use strict";let i=[];!function(){for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t}}();let s=e.exports=function(){this._crc=-1};s.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=i[255&(this._crc^e[t])]^this._crc>>>8;return!0},s.prototype.crc32=function(){return-1^this._crc},s.crc32=function(e){let t=-1;for(let n=0;n<e.length;n++)t=i[255&(t^e[n])]^t>>>8;return-1^t}},function(e,t,n){"use strict";let i=n(89),s=[function(){},function(e,t,n,i){if(i===t.length)throw new Error("Ran out of data");let s=t[i];e[n]=s,e[n+1]=s,e[n+2]=s,e[n+3]=255},function(e,t,n,i){if(i+1>=t.length)throw new Error("Ran out of data");let s=t[i];e[n]=s,e[n+1]=s,e[n+2]=s,e[n+3]=t[i+1]},function(e,t,n,i){if(i+2>=t.length)throw new Error("Ran out of data");e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=255},function(e,t,n,i){if(i+3>=t.length)throw new Error("Ran out of data");e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=t[i+3]}],r=[function(){},function(e,t,n,i){let s=t[0];e[n]=s,e[n+1]=s,e[n+2]=s,e[n+3]=i},function(e,t,n){let i=t[0];e[n]=i,e[n+1]=i,e[n+2]=i,e[n+3]=t[1]},function(e,t,n,i){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=i},function(e,t,n){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3]}];function o(e,t,n,i,r,o){let a=e.width,l=e.height,c=e.index;for(let e=0;e<l;e++)for(let l=0;l<a;l++){let a=n(l,e,c);s[i](t,r,a,o),o+=i}return o}function a(e,t,n,i,s,o){let a=e.width,l=e.height,c=e.index;for(let e=0;e<l;e++){for(let l=0;l<a;l++){let a=s.get(i),d=n(l,e,c);r[i](t,a,d,o)}s.resetAfterLine()}}t.dataToBitMap=function(e,t){let n,s,r=t.width,l=t.height,c=t.depth,d=t.bpp,h=t.interlace;8!==c&&(n=function(e,t){let n=[],i=0;function s(){if(i===e.length)throw new Error("Ran out of data");let s,r,o,a,l,c,d,h,u=e[i];switch(i++,t){default:throw new Error("unrecognised depth");case 16:d=e[i],i++,n.push((u<<8)+d);break;case 4:d=15&u,h=u>>4,n.push(h,d);break;case 2:l=3&u,c=u>>2&3,d=u>>4&3,h=u>>6&3,n.push(h,d,c,l);break;case 1:s=1&u,r=u>>1&1,o=u>>2&1,a=u>>3&1,l=u>>4&1,c=u>>5&1,d=u>>6&1,h=u>>7&1,n.push(h,d,c,l,a,o,r,s)}}return{get:function(e){for(;n.length<e;)s();let t=n.slice(0,e);return n=n.slice(e),t},resetAfterLine:function(){n.length=0},end:function(){if(i!==e.length)throw new Error("extra data found")}}}(e,c)),s=c<=8?Buffer.alloc(r*l*4):new Uint16Array(r*l*4);let u,p,f=Math.pow(2,c)-1,m=0;if(h)u=i.getImagePasses(r,l),p=i.getInterlaceIterator(r,l);else{let e=0;p=function(){let t=e;return e+=4,t},u=[{width:r,height:l}]}for(let t=0;t<u.length;t++)8===c?m=o(u[t],s,p,d,e,m):a(u[t],s,p,d,n,f);if(8===c){if(m!==e.length)throw new Error("extra data found")}else n.end();return s}},function(e,t,n){"use strict";e.exports=function(e,t){let n=t.depth,i=t.width,s=t.height,r=t.colorType,o=t.transColor,a=t.palette,l=e;return 3===r?function(e,t,n,i,s){let r=0;for(let o=0;o<i;o++)for(let i=0;i<n;i++){let n=s[e[r]];if(!n)throw new Error("index "+e[r]+" not in palette");for(let e=0;e<4;e++)t[r+e]=n[e];r+=4}}(e,l,i,s,a):(o&&function(e,t,n,i,s){let r=0;for(let o=0;o<i;o++)for(let i=0;i<n;i++){let n=!1;if(1===s.length?s[0]===e[r]&&(n=!0):s[0]===e[r]&&s[1]===e[r+1]&&s[2]===e[r+2]&&(n=!0),n)for(let e=0;e<4;e++)t[r+e]=0;r+=4}}(e,l,i,s,o),8!==n&&(16===n&&(l=Buffer.alloc(i*s*4)),function(e,t,n,i,s){let r=Math.pow(2,s)-1,o=0;for(let s=0;s<i;s++)for(let i=0;i<n;i++){for(let n=0;n<4;n++)t[o+n]=Math.floor(255*e[o+n]/r+.5);o+=4}}(e,l,i,s,n))),l}},function(e,t,n){"use strict";let i=n(30),s=n(92),r=n(168),o=n(169),a=n(7),l=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||a.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:i.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:i.COLORTYPE_COLOR_ALPHA,-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.colorType))throw new Error("option color type:"+e.colorType+" is not supported at present");if(-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};l.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},l.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},l.prototype.filterData=function(e,t,n){let s=r(e,t,n,this._options),a=i.COLORTYPE_TO_BPP_MAP[this._options.colorType];return o(s,t,n,this._options,a)},l.prototype._packChunk=function(e,t){let n=t?t.length:0,i=Buffer.alloc(n+12);return i.writeUInt32BE(n,0),i.writeUInt32BE(e,4),t&&t.copy(i,8),i.writeInt32BE(s.crc32(i.slice(4,i.length-4)),i.length-4),i},l.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*i.GAMMA_DIVISION),0),this._packChunk(i.TYPE_gAMA,t)},l.prototype.packIHDR=function(e,t){let n=Buffer.alloc(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(i.TYPE_IHDR,n)},l.prototype.packIDAT=function(e){return this._packChunk(i.TYPE_IDAT,e)},l.prototype.packIEND=function(){return this._packChunk(i.TYPE_IEND,null)}},function(e,t,n){"use strict";let i=e.exports=function(e){this._buffer=e,this._reads=[]};i.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},i.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;{this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},,,function(e,t,n){"use strict";var i=n(181);e.exports=new i(n(182),n(183))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRSession=t.CRSessionEvents=t.CRConnection=t.kBrowserCloseMessageId=t.ConnectionEvents=void 0;const i=n(4),s=n(5),r=n(25),o=n(32);t.ConnectionEvents={Disconnected:Symbol("ConnectionEvents.Disconnected")},t.kBrowserCloseMessageId=-9999;class a extends s.EventEmitter{constructor(e){super(),this._lastId=0,this._sessions=new Map,this._closed=!1,this._transport=e,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this.rootSession=new l(this,"","browser",""),this._sessions.set("",this.rootSession)}static fromSession(e){return e._connection}session(e){return this._sessions.get(e)||null}_rawSend(e,t,n){const i=++this._lastId,s={id:i,method:t,params:n};return e&&(s.sessionId=e),o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol","SEND  "+JSON.stringify(s)),this._transport.send(s),i}async _onMessage(e){if(o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol"," RECV "+JSON.stringify(e)),e.id===t.kBrowserCloseMessageId)return;if("Target.attachedToTarget"===e.method){const t=e.params.sessionId,n=e.sessionId||"",i=new l(this,n,e.params.targetInfo.type,t);this._sessions.set(t,i)}else if("Target.detachedFromTarget"===e.method){const t=this._sessions.get(e.params.sessionId);t&&(t._onClosed(),this._sessions.delete(e.params.sessionId))}const n=this._sessions.get(e.sessionId||"");n&&n._onMessage(e)}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;for(const e of this._sessions.values())e._onClosed();this._sessions.clear(),Promise.resolve().then(()=>this.emit(t.ConnectionEvents.Disconnected))}close(){this._closed||this._transport.close()}async createSession(e){const{sessionId:t}=await this.rootSession.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});return this._sessions.get(t)}async createBrowserSession(){const{sessionId:e}=await this.rootSession.send("Target.attachToBrowserTarget");return this._sessions.get(e)}}t.CRConnection=a,t.CRSessionEvents={Disconnected:Symbol("Events.CDPSession.Disconnected")};class l extends s.EventEmitter{constructor(e,t,n,i){super(),this._callbacks=new Map,this._crashed=!1,this._connection=e,this._rootSessionId=t,this._targetType=n,this._sessionId=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}_markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Error("Target crashed");if(!this._connection)throw new Error(`Protocol error (${e}): Session closed. Most likely the ${this._targetType} has been closed.`);const n=this._connection._rawSend(this._sessionId,e,t);return new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}_sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}_onMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(function(e,t,n){let i=`Protocol error (${t}): ${n.message}`;"data"in n&&(i+=" "+n.data);return r.rewriteErrorMessage(e,i)}(t.error,t.method,e.error)):t.resolve(e.result)}else i.assert(!e.id),Promise.resolve().then(()=>{this._eventListener&&this._eventListener(e.method,e.params),this.emit(e.method,e.params)})}async detach(){if(!this._connection)throw new Error(`Session already detached. Most likely the ${this._targetType} has been closed.`);const e=this._connection.session(this._rootSessionId);if(!e)throw new Error("Root session has been closed");await e.send("Target.detachFromTarget",{sessionId:this._sessionId})}_onClosed(){for(const e of this._callbacks.values())e.reject(r.rewriteErrorMessage(e.error,`Protocol error (${e.method}): Target closed.`));this._callbacks.clear(),this._connection=null,Promise.resolve().then(()=>this.emit(t.CRSessionEvents.Disconnected))}}t.CRSession=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSwappedOutError=t.createProtocolError=t.WKSession=t.WKConnection=t.kPageProxyMessageReceived=t.kBrowserCloseMessageId=void 0;const i=n(5),s=n(4),r=n(25),o=n(32);t.kBrowserCloseMessageId=-9999,t.kPageProxyMessageReceived="kPageProxyMessageReceived";t.WKConnection=class{constructor(e,t){this._lastId=0,this._closed=!1,this._transport=e,this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._onDisconnect=t,this.browserSession=new a(this,"","Browser has been closed.",e=>{this.rawSend(e)})}nextMessageId(){return++this._lastId}rawSend(e){o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol","SEND  "+JSON.stringify(e)),this._transport.send(e)}_dispatchMessage(e){if(o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol"," RECV "+JSON.stringify(e)),e.id!==t.kBrowserCloseMessageId)if(e.pageProxyId){const n={message:e,pageProxyId:e.pageProxyId};this.browserSession.dispatchMessage({method:t.kPageProxyMessageReceived,params:n})}else this.browserSession.dispatchMessage(e)}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this.browserSession.dispose(),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}};class a extends i.EventEmitter{constructor(e,t,n,i){super(),this._disposed=!1,this._callbacks=new Map,this._crashed=!1,this.connection=e,this.sessionId=t,this._rawSend=i,this.errorText=n,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){if(this._crashed)throw new Error("Target crashed");if(this._disposed)throw new Error(`Protocol error (${e}): ${this.errorText}`);const n=this.connection.nextMessageId(),i={id:n,method:e,params:t};return this._rawSend(i),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(){for(const e of this._callbacks.values())e.reject(r.rewriteErrorMessage(e.error,`Protocol error (${e.method}): ${this.errorText}`));this._callbacks.clear(),this._disposed=!0}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(l(t.error,t.method,e.error)):t.resolve(e.result)}else e.id&&!e.error?s.assert(this.isDisposed()):Promise.resolve().then(()=>this.emit(e.method,e.params))}}function l(e,t,n){let i=`Protocol error (${t}): ${n.message}`;return"data"in n&&(i+=" "+JSON.stringify(n.data)),r.rewriteErrorMessage(e,i)}t.WKSession=a,t.createProtocolError=l,t.isSwappedOutError=function(e){return e.message.includes("Target was swapped out.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementHandleDispatcher=t.createHandle=void 0;const i=n(12),s=n(131),r=n(20);t.createHandle=function(e,t){return t.asElement()?new o(e,t.asElement()):new s.JSHandleDispatcher(e,t)};class o extends s.JSHandleDispatcher{constructor(e,t){super(e,t),this._elementHandle=t}static createNullable(e,t){if(t)return new o(e,t)}async ownerFrame(){return{frame:i.lookupNullableDispatcher(await this._elementHandle.ownerFrame())}}async contentFrame(){return{frame:i.lookupNullableDispatcher(await this._elementHandle.contentFrame())}}async getAttribute(e){const t=await this._elementHandle.getAttribute(e.name);return{value:null===t?void 0:t}}async textContent(){const e=await this._elementHandle.textContent();return{value:null===e?void 0:e}}async innerText(){return{value:await this._elementHandle.innerText()}}async innerHTML(){return{value:await this._elementHandle.innerHTML()}}async dispatchEvent(e){await this._elementHandle.dispatchEvent(e.type,s.parseArgument(e.eventInit))}async scrollIntoViewIfNeeded(e){await this._elementHandle.scrollIntoViewIfNeeded(e)}async hover(e,t){return r.runAction(async t=>await this._elementHandle.hover(t,e),{...t,type:"hover",target:this._elementHandle,page:this._elementHandle._page})}async click(e,t){return r.runAction(async t=>await this._elementHandle.click(t,e),{...t,type:"click",target:this._elementHandle,page:this._elementHandle._page})}async dblclick(e,t){return r.runAction(async t=>await this._elementHandle.dblclick(t,e),{...t,type:"dblclick",target:this._elementHandle,page:this._elementHandle._page})}async tap(e,t){return r.runAction(async t=>await this._elementHandle.tap(t,e),{...t,type:"tap",target:this._elementHandle,page:this._elementHandle._page})}async selectOption(e,t){return r.runAction(async t=>{const n=(e.elements||[]).map(e=>e._elementHandle);return{values:await this._elementHandle.selectOption(t,n,e.options||[],e)}},{...t,type:"selectOption",target:this._elementHandle,page:this._elementHandle._page})}async fill(e,t){return r.runAction(async t=>await this._elementHandle.fill(t,e.value,e),{...t,type:"fill",value:e.value,target:this._elementHandle,page:this._elementHandle._page})}async selectText(e){await this._elementHandle.selectText(e)}async setInputFiles(e,t){return r.runAction(async t=>await this._elementHandle.setInputFiles(t,e.files,e),{...t,type:"setInputFiles",target:this._elementHandle,page:this._elementHandle._page})}async focus(){await this._elementHandle.focus()}async type(e,t){return r.runAction(async t=>await this._elementHandle.type(t,e.text,e),{...t,type:"type",value:e.text,target:this._elementHandle,page:this._elementHandle._page})}async press(e,t){return r.runAction(async t=>await this._elementHandle.press(t,e.key,e),{...t,type:"press",value:e.key,target:this._elementHandle,page:this._elementHandle._page})}async check(e,t){return r.runAction(async t=>await this._elementHandle.check(t,e),{...t,type:"check",target:this._elementHandle,page:this._elementHandle._page})}async uncheck(e,t){return r.runAction(async t=>await this._elementHandle.uncheck(t,e),{...t,type:"uncheck",target:this._elementHandle,page:this._elementHandle._page})}async boundingBox(){return{value:await this._elementHandle.boundingBox()||void 0}}async screenshot(e){return{binary:(await this._elementHandle.screenshot(e)).toString("base64")}}async querySelector(e){const t=await this._elementHandle.$(e.selector);return{element:t?new o(this._scope,t):void 0}}async querySelectorAll(e){return{elements:(await this._elementHandle.$$(e.selector)).map(e=>new o(this._scope,e))}}async evalOnSelector(e){return{value:s.serializeResult(await this._elementHandle._$evalExpression(e.selector,e.expression,e.isFunction,s.parseArgument(e.arg)))}}async evalOnSelectorAll(e){return{value:s.serializeResult(await this._elementHandle._$$evalExpression(e.selector,e.expression,e.isFunction,s.parseArgument(e.arg)))}}async waitForElementState(e){await this._elementHandle.waitForElementState(e.state,e)}async waitForSelector(e){return{element:o.createNullable(this._scope,await this._elementHandle.waitForSelector(e.selector,e))}}async createSelectorForTest(e){return{value:await this._elementHandle._page.selectors._createSelector(e.name,this._elementHandle)}}}t.ElementHandleDispatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBrowserContextOptions=t.BrowserContext=void 0;const i=n(132),s=n(134),r=n(18),o=n(59),a=n(73),l=n(41),c=n(39),d=n(105),h=n(4),u=n(40);class p extends r.ChannelOwner{constructor(e,t,n,r,o){super(e,t,n,r),this._pages=new Set,this._routes=[],this._browser=null,this._bindings=new Map,this._timeoutSettings=new c.TimeoutSettings,this._options={},e instanceof a.Browser&&(this._browser=e),this._browserName=o,this._channel.on("bindingCall",({binding:e})=>this._onBinding(i.BindingCall.from(e))),this._channel.on("close",()=>this._onClose()),this._channel.on("page",({page:e})=>this._onPage(i.Page.from(e))),this._channel.on("route",({route:e,request:t})=>this._onRoute(s.Route.from(e),s.Request.from(t))),this._closedPromise=new Promise(e=>this.once(l.Events.BrowserContext.Close,e))}static from(e){return e._object}static fromNullable(e){return e?p.from(e):null}_onPage(e){this._pages.add(e),this.emit(l.Events.BrowserContext.Page,e)}_onRoute(e,t){for(const{url:n,handler:i}of this._routes)if(o.urlMatches(t.url(),n))return void i(e,t);e.continue()}async _onBinding(e){const t=this._bindings.get(e._initializer.name);t&&e.call(t)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}browser(){return this._browser}pages(){return[...this._pages]}async newPage(){return this._wrapApiCall("browserContext.newPage",async()=>{if(this._ownerPage)throw new Error("Please use browser.newContext()");return i.Page.from((await this._channel.newPage()).page)})}async cookies(e){return e||(e=[]),e&&"string"==typeof e&&(e=[e]),this._wrapApiCall("browserContext.cookies",async()=>(await this._channel.cookies({urls:e})).cookies)}async addCookies(e){return this._wrapApiCall("browserContext.addCookies",async()=>{await this._channel.addCookies({cookies:e})})}async clearCookies(){return this._wrapApiCall("browserContext.clearCookies",async()=>{await this._channel.clearCookies()})}async grantPermissions(e,t){return this._wrapApiCall("browserContext.grantPermissions",async()=>{await this._channel.grantPermissions({permissions:e,...t})})}async clearPermissions(){return this._wrapApiCall("browserContext.clearPermissions",async()=>{await this._channel.clearPermissions()})}async setGeolocation(e){return this._wrapApiCall("browserContext.setGeolocation",async()=>{await this._channel.setGeolocation({geolocation:e||void 0})})}async setExtraHTTPHeaders(e){return this._wrapApiCall("browserContext.setExtraHTTPHeaders",async()=>{s.validateHeaders(e),await this._channel.setExtraHTTPHeaders({headers:h.headersObjectToArray(e)})})}async setOffline(e){return this._wrapApiCall("browserContext.setOffline",async()=>{await this._channel.setOffline({offline:e})})}async setHTTPCredentials(e){return h.isUnderTest()||o.deprecate("context.setHTTPCredentials","warning: method |context.setHTTPCredentials()| is deprecated. Instead of changing credentials, create another browser context with new credentials."),this._wrapApiCall("browserContext.setHTTPCredentials",async()=>{await this._channel.setHTTPCredentials({httpCredentials:e||void 0})})}async addInitScript(e,t){return this._wrapApiCall("browserContext.addInitScript",async()=>{const n=await o.evaluationScript(e,t);await this._channel.addInitScript({source:n})})}async exposeBinding(e,t,n={}){return this._wrapApiCall("browserContext.exposeBinding",async()=>{await this._channel.exposeBinding({name:e,needsHandle:n.handle}),this._bindings.set(e,t)})}async exposeFunction(e,t){return this._wrapApiCall("browserContext.exposeFunction",async()=>{await this._channel.exposeBinding({name:e});this._bindings.set(e,(e,...n)=>t(...n))})}async route(e,t){return this._wrapApiCall("browserContext.route",async()=>{this._routes.push({url:e,handler:t}),1===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall("browserContext.unroute",async()=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),0===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!1})})}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,s=new d.Waiter;s.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==l.Events.BrowserContext.Close&&s.rejectOnEvent(this,l.Events.BrowserContext.Close,new Error("Context closed"));const r=await s.waitForEvent(this,e,i);return s.dispose(),r}async _onClose(){this._browser&&this._browser._contexts.delete(this),this.emit(l.Events.BrowserContext.Close)}async close(){try{await this._wrapApiCall("browserContext.close",async()=>{await this._channel.close(),await this._closedPromise})}catch(e){if(u.isSafeCloseError(e))return;throw e}}}t.BrowserContext=p,t.validateBrowserContextOptions=function(e){if(e.videoSize&&!e.videosPath)throw new Error('"videoSize" option requires "videosPath" to be specified');e.extraHTTPHeaders&&s.validateHeaders(e.extraHTTPHeaders);const t={...e,viewport:null===e.viewport?void 0:e.viewport,noDefaultViewport:null===e.viewport,extraHTTPHeaders:e.extraHTTPHeaders?h.headersObjectToArray(e.extraHTTPHeaders):void 0};return!t.recordVideo&&e.videosPath&&(t.recordVideo={dir:e.videosPath,size:e.videoSize}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Waiter=void 0;const i=n(25),s=n(40);function r(e,t,n){let i;return{promise:new Promise((s,r)=>{i=o=>{try{if(n&&!n(o))return;e.removeListener(t,i),s(o)}catch(n){e.removeListener(t,i),r(n)}},e.addListener(t,i)}),dispose:()=>e.removeListener(t,i)}}t.Waiter=class{constructor(){this._dispose=[],this._failures=[],this._logs=[]}async waitForEvent(e,t,n){const{promise:i,dispose:s}=r(e,t,n);return this.waitForPromise(i,s)}rejectOnEvent(e,t,n,i){const{promise:s,dispose:o}=r(e,t,i);this._rejectOn(s.then(()=>{throw n}),o)}rejectOnTimeout(e,t){if(!e)return;const{promise:n,dispose:i}=function(e){let t;const n=new Promise(n=>t=setTimeout(n,e));return{promise:n,dispose:()=>clearTimeout(t)}}(e);this._rejectOn(n.then(()=>{throw new s.TimeoutError(t)}),i)}dispose(){for(const e of this._dispose)e()}async waitForPromise(e,t){try{const n=await Promise.race([e,...this._failures]);return t&&t(),n}catch(e){throw t&&t(),this.dispose(),i.rewriteErrorMessage(e,e.message+function(e){if(!e.length)return"";const t=(60-" logs ".length)/2,n=60-" logs ".length-t;return`\n${"=".repeat(t)} logs ${"=".repeat(n)}\n${e.join("\n")}\n${"=".repeat(60)}`}(this._logs)+o),e}}log(e){this._logs.push(e)}_rejectOn(e,t){this._failures.push(e),t&&this._dispose.push(t)}};const o="\nNote: use DEBUG=pw:api environment variable and rerun to capture Playwright logs."},function(e,t,n){var i=n(6);"disable"===process.env.READABLE_STREAM&&i?(e.exports=i.Readable,Object.assign(e.exports,i),e.exports.Stream=i):((t=e.exports=n(286)).Stream=i||t,t.Readable=t,t.Writable=n(290),t.Duplex=n(76),t.Transform=n(292),t.PassThrough=n(543),t.finished=n(201),t.pipeline=n(544))},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRBrowserContext=t.CRBrowser=void 0;const i=n(124),s=n(20),r=n(4),o=n(31),a=n(17),l=n(101),c=n(465),d=n(127),h=n(189);class u extends i.Browser{constructor(e,t){super(t),this._clientRootSessionPromise=null,this._contexts=new Map,this._crPages=new Map,this._backgroundPages=new Map,this._serviceWorkers=new Map,this._isMac=!1,this._version="",this._tracingRecording=!1,this._tracingPath="",this._connection=e,this._session=this._connection.rootSession,this._connection.on(l.ConnectionEvents.Disconnected,()=>this._didClose()),this._session.on("Target.attachedToTarget",this._onAttachedToTarget.bind(this)),this._session.on("Target.detachedFromTarget",this._onDetachedFromTarget.bind(this))}static async connect(e,t,n){const i=new l.CRConnection(e),s=new u(i,t);s._devtools=n;const r=i.rootSession,o=await r.send("Browser.getVersion");if(s._isMac=o.userAgent.includes("Macintosh"),s._version=o.product.substring(o.product.indexOf("/")+1),!t.persistent)return await r.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),s;s._defaultContext=new f(s,void 0,t.persistent);const a=[];function c({targetInfo:e}){"page"!==e.type&&"background_page"!==e.type&&"service_worker"!==e.type||a.push(r.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0}))}r.on("Target.targetCreated",c);const d=r.send("Target.setDiscoverTargets",{discover:!0}),h=r.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}).then(()=>(r.off("Target.targetCreated",c),r.send("Target.setDiscoverTargets",{discover:!1})));return await Promise.all([d,h,s._defaultContext._initialize()]),await Promise.all(a),s}async newContext(e={}){s.validateBrowserContextOptions(e,this._options);const{browserContextId:t}=await this._session.send("Target.createBrowserContext",{disposeOnDetach:!0,proxyServer:e.proxy?e.proxy.server:void 0,proxyBypassList:e.proxy?e.proxy.bypass:void 0}),n=new f(this,t,e);return await n._initialize(),this._contexts.set(t,n),n}contexts(){return Array.from(this._contexts.values())}version(){return this._version}isClank(){return"clank"===this._options.name}_onAttachedToTarget({targetInfo:e,sessionId:t,waitingForDebugger:n}){if("browser"===e.type)return;const i=this._connection.session(t);r.assert(e.browserContextId,"targetInfo: "+JSON.stringify(e,null,2));let o=this._contexts.get(e.browserContextId)||null;if(o||(o=this._defaultContext),"other"===e.type&&e.url.startsWith("devtools://devtools")&&this._devtools)this._devtools.install(i);else if("other"!==e.type&&o){if(r.assert(!this._crPages.has(e.targetId),"Duplicate target "+e.targetId),r.assert(!this._backgroundPages.has(e.targetId),"Duplicate target "+e.targetId),r.assert(!this._serviceWorkers.has(e.targetId),"Duplicate target "+e.targetId),"background_page"===e.type){const t=new c.CRPage(i,e.targetId,o,null,!1);return this._backgroundPages.set(e.targetId,t),void t.pageOrError().then(()=>{o.emit(f.CREvents.BackgroundPage,t._page)})}if("page"===e.type){const t=e.openerId&&this._crPages.get(e.openerId)||null,n=new c.CRPage(i,e.targetId,o,t,!0);return this._crPages.set(e.targetId,n),void n.pageOrError().then(e=>{const i=n._page;if(e instanceof Error){if(o.isClosingOrClosed())return;i._setIsError()}o.emit(s.BrowserContext.Events.Page,i),t&&t.pageOrError().then(e=>{e instanceof a.Page&&!e.isClosed()&&e.emit(a.Page.Events.Popup,i)})})}if("service_worker"===e.type){const t=new p(o,i,e.url);return this._serviceWorkers.set(e.targetId,t),void o.emit(f.CREvents.ServiceWorker,t)}r.assert(!1,"Unknown target type: "+e.type)}else n&&i._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._session._sendMayFail("Target.detachFromTarget",{sessionId:t})})}_onDetachedFromTarget(e){const t=e.targetId,n=this._crPages.get(t);if(n)return this._crPages.delete(t),void n.didClose();const i=this._backgroundPages.get(t);if(i)return this._backgroundPages.delete(t),void i.didClose();const s=this._serviceWorkers.get(t);return s?(this._serviceWorkers.delete(t),void s.emit(a.Worker.Events.Close)):void 0}async _closePage(e){await this._session.send("Target.closeTarget",{targetId:e._targetId})}async newBrowserCDPSession(){return await this._connection.createBrowserSession()}async startTracing(e,t={}){r.assert(!this._tracingRecording,"Cannot start recording trace while already recording trace."),this._tracingClient=e?e._delegate._mainFrameSession._client:this._session;const n=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler","disabled-by-default-v8.cpu_profiler.hires"],{path:i=null,screenshots:s=!1,categories:o=n}=t;s&&o.push("disabled-by-default-devtools.screenshot"),this._tracingPath=i,this._tracingRecording=!0,await this._tracingClient.send("Tracing.start",{transferMode:"ReturnAsStream",categories:o.join(",")})}async stopTracing(){r.assert(this._tracingClient,"Tracing was not started.");const[e]=await Promise.all([new Promise(e=>this._tracingClient.once("Tracing.tracingComplete",e)),this._tracingClient.send("Tracing.end")]),t=await d.readProtocolStream(this._tracingClient,e.stream,this._tracingPath);return this._tracingRecording=!1,t}isConnected(){return!this._connection._closed}async _clientRootSession(){return this._clientRootSessionPromise||(this._clientRootSessionPromise=this._connection.createBrowserSession()),this._clientRootSessionPromise}}t.CRBrowser=u;class p extends a.Worker{constructor(e,t,n){super(n),this._browserContext=e,t.once("Runtime.executionContextCreated",e=>{this._createExecutionContext(new h.CRExecutionContext(t,e.context))}),t.send("Runtime.enable",{}).catch(e=>{}),t.send("Runtime.runIfWaitingForDebugger").catch(e=>{})}}class f extends s.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaCredentials()}async _initialize(){r.assert(!Array.from(this._browser._crPages.values()).some(e=>e._browserContext===this));const e=[super._initialize()];this._browser._options.downloadsPath&&e.push(this._browser._session.send("Browser.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allowAndName":"deny",browserContextId:this._browserContextId,downloadPath:this._browser._options.downloadsPath})),this._options.permissions&&e.push(this.grantPermissions(this._options.permissions)),await Promise.all(e)}pages(){const e=[];for(const t of this._browser._crPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}async newPage(){s.assertBrowserContextIsNotOwned(this);const{targetId:e}=await this._browser._session.send("Target.createTarget",{url:"about:blank",browserContextId:this._browserContextId}),t=this._browser._crPages.get(e),n=await t.pageOrError();if(n instanceof a.Page){if(n.isClosed())throw new Error("Page has been closed.");return n}throw n}async _doCookies(e){const{cookies:t}=await this._browser._session.send("Storage.getCookies",{browserContextId:this._browserContextId});return o.filterCookies(t.map(e=>{const t={sameSite:"None",...e};return delete t.size,delete t.priority,delete t.session,t}),e)}async addCookies(e){await this._browser._session.send("Storage.setCookies",{cookies:o.rewriteCookies(e),browserContextId:this._browserContextId})}async clearCookies(){await this._browser._session.send("Storage.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){const n=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["midi-sysex","midiSysex"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._browser._session.send("Browser.grantPermissions",{origin:"*"===e?void 0:e,browserContextId:this._browserContextId,permissions:i})}async _doClearPermissions(){await this._browser._session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){s.verifyGeolocation(e),this._options.geolocation=e;for(const e of this.pages())await e._delegate.updateGeolocation()}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(const e of this.pages())await e._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(const e of this.pages())await e._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(const e of this.pages())await e._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(const t of this.pages())await t._delegate.evaluateOnNewDocument(e)}async _doExposeBinding(e){for(const t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(const e of this.pages())await e._delegate.updateRequestInterception()}async _doClose(){r.assert(this._browserContextId),await this._browser._session.send("Target.disposeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId);for(const[e,t]of this._browser._serviceWorkers)t._browserContext===this&&(t.emit(a.Worker.Events.Close),this._browser._serviceWorkers.delete(e))}backgroundPages(){const e=[];for(const t of this._browser._backgroundPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}serviceWorkers(){return Array.from(this._browser._serviceWorkers.values()).filter(e=>e._browserContext===this)}async newCDPSession(e){if(!(e instanceof a.Page))throw new Error("page: expected Page");const t=e._delegate._targetId,n=await this._browser._clientRootSession(),{sessionId:i}=await n.send("Target.attachToTarget",{targetId:t,flatten:!0});return this._browser._connection.session(i)}}t.CRBrowserContext=f,f.CREvents={BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;const i=n(20),s=n(17),r=n(5),o=n(464);class a extends r.EventEmitter{constructor(e){super(),this._downloads=new Map,this._defaultContext=null,this._startedClosing=!1,this._idToVideo=new Map,this._options=e}async newPage(e){const t=await this.newContext(e),n=await t.newPage();return n._ownedContext=t,n}_downloadCreated(e,t,n,i){const s=new o.Download(e,this._options.downloadsPath||"",t,n,i);this._downloads.set(t,s)}_downloadFilenameSuggested(e,t){const n=this._downloads.get(e);n&&n._filenameSuggested(t)}_downloadFinished(e,t){const n=this._downloads.get(e);n&&(n._reportFinished(t),this._downloads.delete(e))}_videoStarted(e,t,n,r){const o=new i.Video(e,t,n);this._idToVideo.set(t,o),e.emit(i.BrowserContext.Events.VideoStarted,o),r.then(e=>{e instanceof s.Page&&e.videoStarted(o)})}_videoFinished(e){const t=this._idToVideo.get(e);this._idToVideo.delete(e),t._finish()}_didClose(){for(const e of this.contexts())e._browserClosed();this._defaultContext&&this._defaultContext._browserClosed(),this.emit(a.Events.Disconnected)}async close(){this._startedClosing||(this._startedClosing=!0,await this._options.browserProcess.close()),this.isConnected()&&await new Promise(e=>this.once(a.Events.Disconnected,e))}}t.Browser=a,a.Events={Disconnected:"disconnected"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributeTask=t.innerHTMLTask=t.innerTextTask=t.textContentTask=t.dispatchEventTask=t.waitForSelectorTask=t.assertDone=t.throwFatalDOMError=t.InjectedScriptPollHandler=t.ElementHandle=t.FrameExecutionContext=void 0;const i=n(4),s=n(458),r=n(56),o=n(44);class a extends r.ExecutionContext{constructor(e,t){super(e),this.frame=t}adoptIfNeeded(e){return e instanceof l&&e._context!==this?this.frame._page._delegate.adoptElementHandle(e,this):null}async evaluateInternal(e,...t){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>r.evaluate(this,!0,e,...t))}async evaluateExpressionInternal(e,t,...n){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>r.evaluateExpression(this,!0,e,t,...n))}async evaluateHandleInternal(e,...t){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>r.evaluate(this,!1,e,...t))}async evaluateExpressionHandleInternal(e,t,...n){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>r.evaluateExpression(this,!1,e,t,...n))}createHandle(e){return this.frame._page._delegate.isElementHandle(e)?new l(this,e.objectId):super.createHandle(e)}injectedScript(){if(!this._injectedScriptPromise){const e=[];for(const[t,{source:n}]of this.frame._page.selectors._engines)e.push(`{ name: '${t}', engine: (${n}) }`);const t=`\n        new (${s.source})([\n          ${e.join(",\n")}\n        ])\n      `;this._injectedScriptPromise=this._delegate.rawEvaluate(t).then(e=>new r.JSHandle(this,"object",e))}return this._injectedScriptPromise}async doSlowMo(){return this.frame._page._doSlowMo()}}t.FrameExecutionContext=a;class l extends r.JSHandle{constructor(e,t){super(e,"node",t),this._objectId=t,this._context=e,this._page=e.frame._page,this._initializePreview().catch(e=>{})}async _initializePreview(){const e=await this._context.injectedScript();this._setPreview(await e.evaluate((e,t)=>"JSHandle@"+e.previewNode(t),this))}asElement(){return this}async _evaluateInMain(e,t){const n=await this._context.frame._mainContext();return n.evaluateInternal(e,[await n.injectedScript(),this,t])}async _evaluateInUtility(e,t){const n=await this._context.frame._utilityContext();return n.evaluateInternal(e,[await n.injectedScript(),this,t])}async _evaluateHandleInUtility(e,t){const n=await this._context.frame._utilityContext();return n.evaluateHandleInternal(e,[await n.injectedScript(),this,t])}async ownerFrame(){const e=await this._page._delegate.getOwnerFrame(this);if(!e)return null;const t=this._page._frameManager.frame(e);if(t)return t;for(const t of this._page._browserContext.pages()){const n=t._frameManager.frame(e);if(n)return n}return null}async contentFrame(){return await this._evaluateInUtility(([e,t])=>t&&("IFRAME"===t.nodeName||"FRAME"===t.nodeName),{})?this._page._delegate.getContentFrame(this):null}async getAttribute(e){return d(await this._evaluateInUtility(([e,t,n])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";return{value:t.getAttribute(n)}},e)).value}async textContent(){return this._evaluateInUtility(([e,t])=>t.textContent,{})}async innerText(){return d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";if("http://www.w3.org/1999/xhtml"!==t.namespaceURI)return"error:nothtmlelement";return{value:t.innerText}},{})).value}async innerHTML(){return d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";return{value:t.innerHTML}},{})).value}async dispatchEvent(e,t={}){await this._evaluateInMain(([e,t,{type:n,eventInit:i}])=>e.dispatchEvent(t,n,i),{type:e,eventInit:t}),await this._page._doSlowMo()}async _scrollRectIntoViewIfNeeded(e){return await this._page._delegate.scrollRectIntoViewIfNeeded(this,e)}async _waitAndScrollIntoViewIfNeeded(e){for(;e.isRunning();){h(await this._waitForDisplayedAtStablePosition(e,!1)),e.throwIfAborted();const t=h(await this._scrollRectIntoViewIfNeeded());if("error:notvisible"!==t)return}}async scrollIntoViewIfNeeded(e={}){return o.runAbortableTask(e=>this._waitAndScrollIntoViewIfNeeded(e),this._page._timeoutSettings.timeout(e))}async _clickablePoint(){const[e,t]=await Promise.all([this._page._delegate.getContentQuads(this),this._page.mainFrame()._utilityContext().then(e=>e.evaluateInternal(()=>({width:innerWidth,height:innerHeight})))]);if(!e||!e.length)return"error:notvisible";const n=e.map(e=>(e=>e.map(e=>({x:Math.min(Math.max(e.x,0),t.width),y:Math.min(Math.max(e.y,0),t.height)})))(e)).filter(e=>(e=>{let t=0;for(let n=0;n<e.length;++n){const i=e[n],s=e[(n+1)%e.length];t+=(i.x*s.y-s.x*i.y)/2}return Math.abs(t)})(e)>.99);if(!n.length)return"error:notinviewport";const i={x:0,y:0};for(const e of n[0])i.x+=e.x/4,i.y+=e.y/4;return function(e){const t=e.x-Math.floor(e.x);t>.49&&t<.51&&(e.x-=.02);const n=e.y-Math.floor(e.y);n>.49&&n<.51&&(e.y-=.02)}(i),i}async _offsetPoint(e){const[t,n]=await Promise.all([this.boundingBox(),this._evaluateInUtility(([e,t])=>e.getElementBorderWidth(t),{}).catch(e=>{})]);return t&&n?{x:t.x+n.left+e.x,y:t.y+n.top+e.y}:"error:notvisible"}async _retryPointerAction(e,t,n,i,s){let r=0;const o=[0,20,100,500];for(;e.isRunning();){if(r){e.log(`retrying ${t} action, attempt #${r}`);const n=o[Math.min(r-1,o.length-1)];n&&(e.log(`  waiting ${n}ms`),await this._evaluateInUtility(([e,t,n])=>new Promise(e=>setTimeout(e,n)),n))}else e.log(`attempting ${t} action`);const a=await this._performPointerAction(e,t,n,i,s);if(++r,"error:notvisible"!==a)if("error:notinviewport"!==a){if("object"!=typeof a||!("hitTargetDescription"in a))return a;if(s.force)throw new Error(`Element does not receive pointer events, ${a.hitTargetDescription} intercepts them`);e.log(`  ${a.hitTargetDescription} intercepts pointer events`)}else{if(s.force)throw new Error("Element is outside of the viewport");e.log("  element is outside of the viewport")}else{if(s.force)throw new Error("Element is not visible");e.log("  element is not visible")}}return"done"}async _performPointerAction(e,t,n,i,s){const{force:r=!1,position:o}=s;if(s.__testHookBeforeStable&&await s.__testHookBeforeStable(),!r){const t=await this._waitForDisplayedAtStablePosition(e,n);if("done"!==t)return t}s.__testHookAfterStable&&await s.__testHookAfterStable(),e.log("  scrolling into view if needed"),e.throwIfAborted();const a=await this._scrollRectIntoViewIfNeeded(o?{x:o.x,y:o.y,width:0,height:0}:void 0);if("done"!==a)return a;e.log("  done scrolling");const l=o?await this._offsetPoint(o):await this._clickablePoint();if("string"==typeof l)return l;const c=function(e){return{x:(100*e.x|0)/100,y:(100*e.y|0)/100}}(l);if(!r){s.__testHookBeforeHitTarget&&await s.__testHookBeforeHitTarget(),e.log(`  checking that element receives pointer events at (${c.x},${c.y})`);const t=await this._checkHitTargetAt(c);if("done"!==t)return t;e.log("  element does receive pointer events")}return await this._page._frameManager.waitForSignalsCreatedBy(e,s.noWaitAfter,async()=>{let n;s.__testHookBeforePointerAction&&await s.__testHookBeforePointerAction(),e.throwIfAborted(),s&&s.modifiers&&(n=await this._page.keyboard._ensureModifiers(s.modifiers)),e.log(`  performing ${t} action`),await i(c),e.log(`  ${t} action done`),e.log("  waiting for scheduled navigations to finish"),s.__testHookAfterPointerAction&&await s.__testHookAfterPointerAction(),n&&await this._page.keyboard._ensureModifiers(n)},"input"),e.log("  navigations have finished"),"done"}async hover(e,t){return e.run(async e=>{h(await this._hover(e,t))},this._page._timeoutSettings.timeout(t))}_hover(e,t){return this._retryPointerAction(e,"hover",!1,e=>this._page.mouse.move(e.x,e.y),t)}async click(e,t={}){return e.run(async e=>{h(await this._click(e,t))},this._page._timeoutSettings.timeout(t))}_click(e,t){return this._retryPointerAction(e,"click",!0,e=>this._page.mouse.click(e.x,e.y,t),t)}async dblclick(e,t){return e.run(async e=>{h(await this._dblclick(e,t))},this._page._timeoutSettings.timeout(t))}_dblclick(e,t){return this._retryPointerAction(e,"dblclick",!0,e=>this._page.mouse.dblclick(e.x,e.y,t),t)}async tap(e,t={}){return e.run(async e=>{h(await this._tap(e,t))},this._page._timeoutSettings.timeout(t))}_tap(e,t){return this._retryPointerAction(e,"tap",!0,e=>this._page.touchscreen.tap(e.x,e.y),t)}async selectOption(e,t,n,i){return e.run(async e=>h(await this._selectOption(e,t,n,i)),this._page._timeoutSettings.timeout(i))}async _selectOption(e,t,n,i){const s=[...t,...n];return this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{e.throwIfAborted();const t=await this._evaluateInUtility(([e,t,n])=>e.selectOptions(t,n),s);return await this._page._doSlowMo(),d(t)})}async fill(e,t,n={}){return e.run(async e=>{h(await this._fill(e,t,n))},this._page._timeoutSettings.timeout(n))}async _fill(e,t,n){return e.log(`elementHandle.fill("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{e.log("  waiting for element to be visible, enabled and editable");const n=await this._evaluateHandleInUtility(([e,t,n])=>e.waitForEnabledAndFill(t,n),t),i=new c(e,n),s=d(await i.finish());return e.throwIfAborted(),"error:notconnected"===s?s:(e.log("  element is visible, enabled and editable"),"needsinput"===s&&(e.throwIfAborted(),t?await this._page.keyboard.insertText(t):await this._page.keyboard.press("Delete")),"done")},"input")}async selectText(e={}){return o.runAbortableTask(async e=>{e.throwIfAborted();const t=await this._evaluateHandleInUtility(([e,t])=>e.waitForVisibleAndSelectText(t),{}),n=new c(e,t);h(d(await n.finish()))},this._page._timeoutSettings.timeout(e))}async setInputFiles(e,t,n){return e.run(async e=>{h(await this._setInputFiles(e,t,n))},this._page._timeoutSettings.timeout(n))}async _setInputFiles(e,t,n){const s=d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE||"INPUT"!==t.tagName)return"error:notinput";if(!t.isConnected)return"error:notconnected";return t.multiple},{}));return"string"==typeof s?s:(i.assert(s||t.length<=1,"Non-multiple file input can only accept single file!"),await this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{e.throwIfAborted(),await this._page._delegate.setInputFiles(this,t)}),await this._page._doSlowMo(),"done")}async focus(){await o.runAbortableTask(async e=>{const t=await this._focus(e);await this._page._doSlowMo(),h(t)},0)}async _focus(e,t){e.throwIfAborted();return d(await this._evaluateInUtility(([e,t,n])=>e.focusNode(t,n),t))}async type(e,t,n){return e.run(async e=>{h(await this._type(e,t,n))},this._page._timeoutSettings.timeout(n))}async _type(e,t,n){return e.log(`elementHandle.type("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{const i=await this._focus(e,!0);return"done"!==i?i:(e.throwIfAborted(),await this._page.keyboard.type(t,n),"done")},"input")}async press(e,t,n){return e.run(async e=>{h(await this._press(e,t,n))},this._page._timeoutSettings.timeout(n))}async _press(e,t,n){return e.log(`elementHandle.press("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{const i=await this._focus(e,!0);return"done"!==i?i:(e.throwIfAborted(),await this._page.keyboard.press(t,n),"done")},"input")}async check(e,t){return e.run(async e=>{h(await this._setChecked(e,!0,t))},this._page._timeoutSettings.timeout(t))}async uncheck(e,t){return e.run(async e=>{h(await this._setChecked(e,!1,t))},this._page._timeoutSettings.timeout(t))}async _setChecked(e,t,n){if(await this._evaluateInUtility(([e,t])=>e.isCheckboxChecked(t),{})===t)return"done";const i=await this._click(e,n);if("done"!==i)return i;if(await this._evaluateInUtility(([e,t])=>e.isCheckboxChecked(t),{})!==t)throw new Error("Unable to click checkbox");return"done"}async boundingBox(){return this._page._delegate.getBoundingBox(this)}async screenshot(e={}){return o.runAbortableTask(t=>this._page._screenshotter.screenshotElement(t,this,e),this._page._timeoutSettings.timeout(e))}async $(e){return this._page.selectors._query(this._context.frame,e,this)}async $$(e){return this._page.selectors._queryAll(this._context.frame,e,this,!0)}async _$evalExpression(e,t,n,i){const s=await this._page.selectors._query(this._context.frame,e,this);if(!s)throw new Error(`Error: failed to find element matching selector "${e}"`);const r=await s._evaluateExpression(t,n,!0,i);return s.dispose(),r}async _$$evalExpression(e,t,n,i){const s=await this._page.selectors._queryArray(this._context.frame,e,this),r=await s._evaluateExpression(t,n,!0,i);return s.dispose(),r}async waitForElementState(e,t={}){return o.runAbortableTask(async t=>{if(t.log("  waiting for element to be "+e),"visible"!==e)if("hidden"!==e)if("enabled"!==e)if("disabled"!==e){if("stable"!==e)throw new Error("state: expected one of (visible|hidden|stable|enabled)");{const e=this._page._delegate.rafCountForStablePosition(),n=await this._evaluateHandleInUtility(([e,t,n])=>e.waitForDisplayedAtStablePosition(t,n,!1),{rafCount:e,useTimeout:!!process.env.PW_USE_TIMEOUT_FOR_RAF}),i=new c(t,n);h(await i.finish())}}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeDisabled(t),{}),n=new c(t,e);h(await n.finish())}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeEnabled(t),{}),n=new c(t,e);h(await n.finish())}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeHidden(t),{}),n=new c(t,e);await n.finish()}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeVisible(t),{}),n=new c(t,e);h(await n.finish())}},this._page._timeoutSettings.timeout(t))}async waitForSelector(e,t={}){const{state:n="visible"}=t;if(!["attached","detached","visible","hidden"].includes(n))throw new Error("state: expected one of (attached|detached|visible|hidden)");const i=this._page.selectors._parseSelector(e),s=p(i,n,this);return o.runAbortableTask(async t=>{t.log(`waiting for selector "${e}"${"attached"===n?"":" to be "+n}`);const r=await this._context.frame._context(i.world),o=await r.injectedScript(),a=new c(t,await s(o)),l=await a.finishHandle();if(!l.asElement())return l.dispose(),null;return l.asElement()._adoptTo(await this._context.frame._mainContext())},this._page._timeoutSettings.timeout(t))}async _adoptTo(e){if(this._context!==e){const t=await this._page._delegate.adoptElementHandle(this,e);return this.dispose(),t}return this}async _waitForDisplayedAtStablePosition(e,t){t?e.log("  waiting for element to be visible, enabled and not moving"):e.log("  waiting for element to be visible and not moving");const n=this._page._delegate.rafCountForStablePosition(),i=this._evaluateHandleInUtility(([e,t,{rafOptions:n,waitForEnabled:i}])=>e.waitForDisplayedAtStablePosition(t,n,i),{rafOptions:{rafCount:n,useTimeout:!!process.env.PW_USE_TIMEOUT_FOR_RAF},waitForEnabled:t}),s=new c(e,await i),r=await s.finish();return t?e.log("  element is visible, enabled and does not move"):e.log("  element is visible and does not move"),r}async _checkHitTargetAt(e){const t=await this.ownerFrame();if(t&&t.parentFrame()){const n=await t.frameElement(),i=await n.boundingBox();if(!i)return"error:notconnected";e={x:e.x-i.x,y:e.y-i.y}}return this._evaluateInUtility(([e,t,n])=>e.checkHitTargetAt(t,n),e)}}t.ElementHandle=l;class c{constructor(e,t){this._progress=e,this._poll=t,this._progress.cleanupWhenAborted(()=>this.cancel()),this._streamLogs()}async _streamLogs(){for(;this._poll&&this._progress.isRunning();){const e=await this._poll.evaluate(e=>e.takeNextLogs()).catch(e=>[]);if(!this._poll||!this._progress.isRunning())return;for(const t of e)this._progress.log(t)}}async finishHandle(){try{const e=await this._poll.evaluateHandle(e=>e.result);return await this._finishInternal(),e}finally{await this.cancel()}}async finish(){try{const e=await this._poll.evaluate(e=>e.result);return await this._finishInternal(),e}finally{await this.cancel()}}async _finishInternal(){if(!this._poll)return;const e=await this._poll.evaluate(e=>e.takeLastLogs()).catch(e=>[]);for(const t of e)this._progress.log(t)}async cancel(){if(!this._poll)return;const e=this._poll;this._poll=null,await e.evaluate(e=>e.cancel()).catch(e=>{}),e.dispose()}}function d(e){if("error:notelement"===e)throw new Error("Node is not an element");if("error:nothtmlelement"===e)throw new Error("Not an HTMLElement");if("error:notfillableelement"===e)throw new Error("Element is not an <input>, <textarea> or [contenteditable] element");if("error:notfillableinputtype"===e)throw new Error("Input of this type cannot be filled");if("error:notfillablenumberinput"===e)throw new Error("Cannot type text into input[type=number]");if("error:notvaliddate"===e)throw new Error("Malformed value");if("error:notinput"===e)throw new Error("Node is not an HTMLInputElement");if("error:notselect"===e)throw new Error("Element is not a <select> element.");return e}function h(e){if("error:notconnected"===e)throw new Error("Element is not attached to the DOM");return e}function u(e){}function p(e,t,n){return i=>i.evaluateHandle((e,{parsed:t,state:n,root:i})=>{let s;return e.pollRaf((r,o)=>{const a=e.querySelector(t,i||document),l=!!a&&e.isVisible(a);switch(s!==a&&(s=a,a?r.log(`  selector resolved to ${l?"visible":"hidden"} ${e.previewNode(a)}`):r.log("  selector did not resolve to any element")),n){case"attached":return a||o;case"detached":return a?o:void 0;case"visible":return l?a:o;case"hidden":return l?o:void 0}})},{parsed:e.parsed,state:t,root:n})}t.InjectedScriptPollHandler=c,t.throwFatalDOMError=d,t.assertDone=u,t.waitForSelectorTask=p,t.dispatchEventTask=function(e,t,n){return i=>i.evaluateHandle((e,{parsed:t,type:n,eventInit:i})=>e.pollRaf((s,r)=>{const o=e.querySelector(t,document);if(!o)return r;s.log("  selector resolved to "+e.previewNode(o)),e.dispatchEvent(o,n,i)}),{parsed:e.parsed,type:t,eventInit:n})},t.textContentTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const s=e.querySelector(t,document);return s?(n.log("  selector resolved to "+e.previewNode(s)),s.textContent):i}),e.parsed)},t.innerTextTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const s=e.querySelector(t,document);return s?(n.log("  selector resolved to "+e.previewNode(s)),"http://www.w3.org/1999/xhtml"!==s.namespaceURI?"error:nothtmlelement":{innerText:s.innerText}):i}),e.parsed)},t.innerHTMLTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const s=e.querySelector(t,document);return s?(n.log("  selector resolved to "+e.previewNode(s)),s.innerHTML):i}),e.parsed)},t.getAttributeTask=function(e,t){return n=>n.evaluateHandle((e,{parsed:t,name:n})=>e.pollRaf((i,s)=>{const r=e.querySelector(t,document);return r?(i.log("  selector resolved to "+e.previewNode(r)),r.getAttribute(n)):s}),{parsed:e.parsed,name:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAsCallArgument=t.parseEvaluationResultValue=void 0,t.parseEvaluationResultValue=function e(t,n=[]){if(!Object.is(t,void 0)){if("object"==typeof t&&t){if("v"in t){if("undefined"===t.v)return;return"null"===t.v?null:"NaN"===t.v?NaN:"Infinity"===t.v?1/0:"-Infinity"===t.v?-1/0:"-0"===t.v?-0:void 0}if("d"in t)return new Date(t.d);if("r"in t)return new RegExp(t.r.p,t.r.f);if("a"in t)return t.a.map(t=>e(t,n));if("o"in t){const i={};for(const{k:s,v:r}of t.o)i[s]=e(r,n);return i}if("h"in t)return n[t.h]}return t}},t.serializeAsCallArgument=function(e,t){return function e(t,n,i){const s=n(t);if(!("fallThrough"in s))return s;t=s.fallThrough;if(i.has(t))throw new Error("Argument is a circular structure");if("symbol"==typeof t)return{v:"undefined"};if(Object.is(t,void 0))return{v:"undefined"};if(Object.is(t,null))return{v:"null"};if(Object.is(t,NaN))return{v:"NaN"};if(Object.is(t,1/0))return{v:"Infinity"};if(Object.is(t,-1/0))return{v:"-Infinity"};if(Object.is(t,-0))return{v:"-0"};if("boolean"==typeof t)return t;if("number"==typeof t)return t;if("string"==typeof t)return t;if(r=t,r instanceof Error||r&&r.__proto__&&"Error"===r.__proto__.name){const e=t;return"captureStackTrace"in global.Error?e.stack||"":`${e.name}: ${e.message}\n${e.stack}`}var r;if(function(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}(t))return{d:t.toJSON()};if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(t))return{r:{p:t.source,f:t.flags}};if(Array.isArray(t)){const s=[];i.add(t);for(let r=0;r<t.length;++r)s.push(e(t[r],n,i));return i.delete(t),{a:s}}if("object"==typeof t){const s=[];i.add(t);for(const r of Object.keys(t)){let o;try{o=t[r]}catch(e){continue}"toJSON"===r&&"function"==typeof o?s.push({k:r,v:{o:[]}}):s.push({k:r,v:e(o,n,i)})}return i.delete(t),{o:s}}}(e,t,new Set)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exceptionToError=t.toConsoleMessageLocation=t.readProtocolStream=t.releaseObject=t.getExceptionMessage=void 0;const i=n(0),s=n(1),r=n(4);function o(e){if(e.exception)return e.exception.description||String(e.exception.value);let t=e.text;if(e.stackTrace)for(const n of e.stackTrace.callFrames){const e=n.url+":"+n.lineNumber+":"+n.columnNumber;t+=`\n    at ${n.functionName||"<anonymous>"} (${e})`}return t}t.getExceptionMessage=o,t.releaseObject=async function(e,t){await e.send("Runtime.releaseObject",{objectId:t}).catch(e=>{})},t.readProtocolStream=async function(e,t,n){let o,a=!1;n&&(await r.mkdirIfNeeded(n),o=await s.promisify(i.open)(n,"w"));const l=[];for(;!a;){const r=await e.send("IO.read",{handle:t});a=r.eof;const c=Buffer.from(r.data,r.base64Encoded?"base64":void 0);l.push(c),n&&await s.promisify(i.write)(o,c)}return n&&await s.promisify(i.close)(o),await e.send("IO.close",{handle:t}),Buffer.concat(l)},t.toConsoleMessageLocation=function(e){return e&&e.callFrames.length?{url:e.callFrames[0].url,lineNumber:e.callFrames[0].lineNumber,columnNumber:e.callFrames[0].columnNumber}:{url:"",lineNumber:0,columnNumber:0}},t.exceptionToError=function(e){const t=o(e),n=t.split("\n"),i=n.findIndex(e=>e.startsWith("    at"));let s="",r="";-1===i?s=t:(s=n.slice(0,i).join("\n"),r=t);const a=s.match(/^[a-zA-Z0-0_]*Error: (.*)$/);a&&(s=a[1]);const l=new Error(s);return l.stack=r,l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserType=void 0;const i=n(0),s=n(8),r=n(2),o=n(1),a=n(20),l=n(265),c=n(191),d=n(472),h=n(44),u=n(39),p=n(473),f=n(4),m=o.promisify(i.mkdir),_=o.promisify(i.mkdtemp),g=r.join(s.tmpdir(),"playwright_downloads-");function w(e){const{devtools:t=!1,headless:n=!f.isDebugMode()&&!t}=e;return{...e,devtools:t,headless:n}}t.BrowserType=class{constructor(e,t){this._name=t.name;const n=l.browsersPath(e);this._browserDescriptor=t,this._browserPath=l.browserDirectory(n,t),this._executablePath=l.executablePath(this._browserPath,t)||""}executablePath(){return this._executablePath}name(){return this._name}async launch(e={}){e=w(e);const t=new h.ProgressController;t.setLogName("browser");return await t.run(t=>this._innerLaunch(t,e,void 0).catch(e=>{throw this._rewriteStartupError(e)}),u.TimeoutSettings.timeout(e))}async launchPersistentContext(e,t={}){const n=t=w(t),i=new h.ProgressController;i.setLogName("browser");return(await i.run(i=>this._innerLaunch(i,t,n,e).catch(e=>{throw this._rewriteStartupError(e)}),u.TimeoutSettings.timeout(t)))._defaultContext}async _innerLaunch(e,t,n,i){t.proxy=t.proxy?a.normalizeProxySettings(t.proxy):void 0;const{browserProcess:s,downloadsPath:r,transport:o}=await this._launchProcess(e,t,!!n,i);t.__testHookBeforeCreateBrowser&&await t.__testHookBeforeCreateBrowser();const l={name:this._name,slowMo:t.slowMo,persistent:n,headful:!t.headless,downloadsPath:r,browserProcess:s,proxy:t.proxy};n&&a.validateBrowserContextOptions(n,l),function(e,t){for(const[n,i]of Object.entries(e))n.startsWith("__testHook")&&(t[n]=i)}(t,l);const c=await this._connectToTransport(o,l);return n&&!t.ignoreAllDefaultArgs&&await c._defaultContext._loadDefaultContext(e),c}async _launchProcess(e,t,n,o){const{ignoreDefaultArgs:a,ignoreAllDefaultArgs:l,args:h=[],executablePath:u=null,handleSIGINT:f=!0,handleSIGTERM:w=!0,handleSIGHUP:b=!0}=t,y=t.env?c.envArrayToObject(t.env):process.env,v=[],x=await(async(e,t)=>{let n;return t?(n=t,await m(t,{recursive:!0})):(n=await _(e),v.push(n)),n})(g,t.downloadsPath);o||(o=await _(r.join(s.tmpdir(),`playwright_${this._name}dev_profile-`)),v.push(o));const S=[];l?S.push(...h):a?S.push(...this._defaultArgs(t,n,o).filter(e=>-1===a.indexOf(e))):S.push(...this._defaultArgs(t,n,o));const E=u||this.executablePath();if(!E)throw new Error('No executable path is specified. Pass "executablePath" option directly.');if(!await(e=>new Promise(t=>i.stat(e,e=>t(!e))))(E)){const e=[`Failed to launch ${this._name} because executable doesn't exist at ${E}`];throw u||e.push('Try re-installing playwright with "npm install playwright"'),new Error(e.join("\n"))}u||await p.validateHostRequirements(this._browserPath,this._browserDescriptor);let k=void 0,C=void 0;const{launchedProcess:P,gracefullyClose:T,kill:O}=await c.launchProcess({executablePath:E,args:S,env:this._amendEnvironment(y,o,E,S),handleSIGINT:f,handleSIGTERM:w,handleSIGHUP:b,progress:e,stdio:"pipe",tempDirectories:v,attemptToGracefullyClose:async()=>{t.__testHookGracefullyClose&&await t.__testHookGracefullyClose(),this._attemptToGracefullyCloseBrowser(k)},onExit:(e,t)=>{C&&C.onclose&&C.onclose(e,t)}});C={onclose:void 0,process:P,close:T,kill:O},e.cleanupWhenAborted(()=>C&&async function(e,t){let n;try{await Promise.race([e.close(),new Promise((e,i)=>n=setTimeout(i,t))])}catch(t){await e.kill().catch(e=>{})}finally{clearTimeout(n)}}(C,e.timeUntilDeadline()));const I=P.stdio;return k=new d.PipeTransport(I[3],I[4]),{browserProcess:C,downloadsPath:x,transport:k}}}},function(e,t,n){"use strict";const i=n(7),s=n(130),r=n(477),{kStatusCode:o,NOOP:a}=n(72),l=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),d=Symbol("total-length"),h=Symbol("callback"),u=Symbol("buffers"),p=Symbol("error");let f;function m(e){this[u].push(e),this[d]+=e.length}function _(e){this[d]+=e.length,this[c]._maxPayload<1||this[d]<=this[c]._maxPayload?this[u].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][o]=1009,this.removeListener("data",_),this.reset())}function g(e){this[c]._inflate=null,e[o]=1007,this[h](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new r(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){f.add(i=>{this._decompress(e,t,(e,t)=>{i(),n(e,t)})})}compress(e,t,n){f.add(i=>{this._compress(e,t,(e,t)=>{i(),n(e,t)})})}_decompress(e,t,n){const r=this._isServer?"client":"server";if(!this._inflate){const e=r+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[d]=0,this._inflate[u]=[],this._inflate.on("error",g),this._inflate.on("data",_)}this._inflate[h]=n,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=s.concat(this._inflate[u],this._inflate[d]);t&&this.params[r+"_no_context_takeover"]?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[u]=[]),n(null,i)})}_compress(e,t,n){const r=this._isServer?"server":"client";if(!this._deflate){const e=r+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[u]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[h]=n,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=s.concat(this._deflate[u],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),this._deflate[h]=null,t&&this.params[r+"_no_context_takeover"]?(this._deflate.close(),this._deflate=null):(this._deflate[d]=0,this._deflate[u]=[]),n(null,e)})}}},function(e,t,n){"use strict";const{EMPTY_BUFFER:i}=n(72);function s(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let s=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,s),s+=i.length}return s<t?n.slice(0,s):n}function r(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[r]^t[3&r]}function o(e,t){const n=e.length;for(let i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function l(e){if(l.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),l.readOnly=!1),t}try{const t=n(!function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()),i=t.BufferUtil||t;e.exports={concat:s,mask(e,t,n,s,o){o<48?r(e,t,n,s,o):i.mask(e,t,n,s,o)},toArrayBuffer:a,toBuffer:l,unmask(e,t){e.length<32?o(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:s,mask:r,toArrayBuffer:a,toBuffer:l,unmask:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeResult=t.parseValue=t.parseArgument=t.JSHandleDispatcher=void 0;const i=n(12),s=n(103),r=n(57);class o extends i.Dispatcher{constructor(e,t){super(e,t,t.asElement()?"ElementHandle":"JSHandle",{preview:t.toString()}),t._setPreviewCallback(e=>this._dispatchEvent("previewUpdated",{preview:e}))}async evaluateExpression(e){return{value:l(await this._object._evaluateExpression(e.expression,e.isFunction,!0,a(e.arg)))}}async evaluateExpressionHandle(e){const t=await this._object._evaluateExpression(e.expression,e.isFunction,!1,a(e.arg));return{handle:s.createHandle(this._scope,t)}}async getProperty(e){const t=await this._object.getProperty(e.name);return{handle:s.createHandle(this._scope,t)}}async getPropertyList(){const e=await this._object.getProperties(),t=[];for(const[n,i]of e)t.push({name:n,value:new o(this._scope,i)});return{properties:t}}async jsonValue(){return{value:l(await this._object.jsonValue())}}async dispose(){await this._object.dispose()}}function a(e){return r.parseSerializedValue(e.value,e.handles.map(e=>e._object))}function l(e){return r.serializeValue(e,e=>({fallThrough:e}),new Set)}t.JSHandleDispatcher=o,t.parseArgument=a,t.parseValue=function(e){return r.parseSerializedValue(e,[])},t.serializeResult=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCall=t.Page=void 0;const i=n(41),s=n(4),r=n(39),o=n(57),a=n(508),l=n(18),c=n(280),d=n(281),h=n(282),u=n(197),p=n(198),f=n(133),m=n(510),_=n(58),g=n(134),w=n(511),b=n(10),y=n(512),v=n(105),x=n(0),S=n(2),E=n(1),k=n(59),C=n(4),P=n(40),T=n(513),O=E.promisify(x.writeFile.bind(x)),I=E.promisify(x.mkdir);class A extends l.ChannelOwner{constructor(e,t,n,s){super(e,t,n,s),this._frames=new Set,this._workers=new Set,this._closed=!1,this._routes=[],this.coverage=null,this._bindings=new Map,this._isPageCall=!1,this._video=null,this.setMaxListeners(0),this._browserContext=e,this._timeoutSettings=new r.TimeoutSettings(this._browserContext._timeoutSettings),this.accessibility=new a.Accessibility(this._channel),this.keyboard=new m.Keyboard(this._channel),this.mouse=new m.Mouse(this._channel),this.touchscreen=new m.Touchscreen(this._channel),this._mainFrame=f.Frame.from(s.mainFrame),this._mainFrame._page=this,this._frames.add(this._mainFrame),this._viewportSize=s.viewportSize||null,this._closed=s.isClosed,this._channel.on("bindingCall",({binding:e})=>this._onBinding(M.from(e))),this._channel.on("close",()=>this._onClose()),this._channel.on("console",({message:e})=>this.emit(i.Events.Page.Console,c.ConsoleMessage.from(e))),this._channel.on("crash",()=>this._onCrash()),this._channel.on("dialog",({dialog:e})=>this.emit(i.Events.Page.Dialog,d.Dialog.from(e))),this._channel.on("domcontentloaded",()=>this.emit(i.Events.Page.DOMContentLoaded)),this._channel.on("download",({download:e})=>this.emit(i.Events.Page.Download,h.Download.from(e))),this._channel.on("fileChooser",({element:e,isMultiple:t})=>this.emit(i.Events.Page.FileChooser,new w.FileChooser(this,u.ElementHandle.from(e),t))),this._channel.on("frameAttached",({frame:e})=>this._onFrameAttached(f.Frame.from(e))),this._channel.on("frameDetached",({frame:e})=>this._onFrameDetached(f.Frame.from(e))),this._channel.on("load",()=>this.emit(i.Events.Page.Load)),this._channel.on("pageError",({error:e})=>this.emit(i.Events.Page.PageError,o.parseError(e))),this._channel.on("popup",({page:e})=>this.emit(i.Events.Page.Popup,A.from(e))),this._channel.on("request",({request:e})=>this.emit(i.Events.Page.Request,g.Request.from(e))),this._channel.on("requestFailed",({request:e,failureText:t,responseEndTiming:n})=>this._onRequestFailed(g.Request.from(e),n,t)),this._channel.on("requestFinished",({request:e,responseEndTiming:t})=>this._onRequestFinished(g.Request.from(e),t)),this._channel.on("response",({response:e})=>this.emit(i.Events.Page.Response,g.Response.from(e))),this._channel.on("route",({route:e,request:t})=>this._onRoute(g.Route.from(e),g.Request.from(t))),this._channel.on("video",({relativePath:e})=>this.video()._setRelativePath(e)),this._channel.on("webSocket",({webSocket:e})=>this.emit(i.Events.Page.WebSocket,g.WebSocket.from(e))),this._channel.on("worker",({worker:e})=>this._onWorker(p.Worker.from(e))),"chromium"===this._browserContext._browserName&&(this.coverage=new y.ChromiumCoverage(this._channel),this.pdf=e=>this._pdf(e))}static from(e){return e._object}static fromNullable(e){return e?A.from(e):null}_onRequestFailed(e,t,n){e._failureText=n||null,e._timing&&(e._timing.responseEnd=t),this.emit(i.Events.Page.RequestFailed,e)}_onRequestFinished(e,t){e._timing&&(e._timing.responseEnd=t),this.emit(i.Events.Page.RequestFinished,e)}_onFrameAttached(e){e._page=this,this._frames.add(e),e._parentFrame&&e._parentFrame._childFrames.add(e),this.emit(i.Events.Page.FrameAttached,e)}_onFrameDetached(e){this._frames.delete(e),e._detached=!0,e._parentFrame&&e._parentFrame._childFrames.delete(e),this.emit(i.Events.Page.FrameDetached,e)}_onRoute(e,t){for(const{url:n,handler:i}of this._routes)if(k.urlMatches(t.url(),n))return void i(e,t);this._browserContext._onRoute(e,t)}async _onBinding(e){const t=this._bindings.get(e._initializer.name);t?e.call(t):this._browserContext._onBinding(e)}_onWorker(e){this._workers.add(e),e._page=this,this.emit(i.Events.Page.Worker,e)}_onClose(){this._closed=!0,this._browserContext._pages.delete(this),this.emit(i.Events.Page.Close)}_onCrash(){this.emit(i.Events.Page.Crash)}context(){return this._browserContext}async opener(){return A.fromNullable((await this._channel.opener()).page)}mainFrame(){return this._mainFrame}frame(e){const t=C.isString(e)?e:e.name,n=C.isObject(e)?e.url:void 0;return s.assert(t||n,"Either name or url matcher should be specified"),this.frames().find(e=>t?e.name()===t:k.urlMatches(e.url(),n))||null}frames(){return[...this._frames]}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}video(){return this._video?this._video:this._browserContext._options.recordVideo?(this._video=new T.Video(this),this._initializer.videoRelativePath&&this._video._setRelativePath(this._initializer.videoRelativePath),this._video):null}_attributeToPage(e){try{return this._isPageCall=!0,e()}finally{this._isPageCall=!1}}async $(e){return this._attributeToPage(()=>this._mainFrame.$(e))}async waitForSelector(e,t){return this._attributeToPage(()=>this._mainFrame.waitForSelector(e,t))}async dispatchEvent(e,t,n,i){return this._attributeToPage(()=>this._mainFrame.dispatchEvent(e,t,n,i))}async evaluateHandle(e,t){return _.assertMaxArguments(arguments.length,2),this._attributeToPage(()=>this._mainFrame.evaluateHandle(e,t))}async $eval(e,t,n){return _.assertMaxArguments(arguments.length,3),this._attributeToPage(()=>this._mainFrame.$eval(e,t,n))}async $$eval(e,t,n){return _.assertMaxArguments(arguments.length,3),this._attributeToPage(()=>this._mainFrame.$$eval(e,t,n))}async $$(e){return this._attributeToPage(()=>this._mainFrame.$$(e))}async addScriptTag(e){return this._attributeToPage(()=>this._mainFrame.addScriptTag(e))}async addStyleTag(e){return this._attributeToPage(()=>this._mainFrame.addStyleTag(e))}async exposeFunction(e,t){return this._wrapApiCall("page.exposeFunction",async()=>{await this._channel.exposeBinding({name:e});this._bindings.set(e,(e,...n)=>t(...n))})}async exposeBinding(e,t,n={}){return this._wrapApiCall("page.exposeBinding",async()=>{await this._channel.exposeBinding({name:e,needsHandle:n.handle}),this._bindings.set(e,t)})}async setExtraHTTPHeaders(e){return this._wrapApiCall("page.setExtraHTTPHeaders",async()=>{g.validateHeaders(e),await this._channel.setExtraHTTPHeaders({headers:C.headersObjectToArray(e)})})}url(){return this._attributeToPage(()=>this._mainFrame.url())}async content(){return this._attributeToPage(()=>this._mainFrame.content())}async setContent(e,t){return this._attributeToPage(()=>this._mainFrame.setContent(e,t))}async goto(e,t){return this._attributeToPage(()=>this._mainFrame.goto(e,t))}async reload(e={}){return this._wrapApiCall("page.reload",async()=>{const t=f.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.reload({...e,waitUntil:t})).response)})}async waitForLoadState(e,t){return this._attributeToPage(()=>this._mainFrame.waitForLoadState(e,t))}async waitForNavigation(e){return this._attributeToPage(()=>this._mainFrame.waitForNavigation(e))}async waitForRequest(e,t={}){return this.waitForEvent(i.Events.Page.Request,{predicate:t=>C.isString(e)||C.isRegExp(e)?k.urlMatches(t.url(),e):e(t),timeout:t.timeout})}async waitForResponse(e,t={}){return this.waitForEvent(i.Events.Page.Response,{predicate:t=>C.isString(e)||C.isRegExp(e)?k.urlMatches(t.url(),e):e(t),timeout:t.timeout})}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),s="function"==typeof t?t:t.predicate,r=new v.Waiter;r.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==i.Events.Page.Crash&&r.rejectOnEvent(this,i.Events.Page.Crash,new Error("Page crashed")),e!==i.Events.Page.Close&&r.rejectOnEvent(this,i.Events.Page.Close,new Error("Page closed"));const o=await r.waitForEvent(this,e,s);return r.dispose(),o}async goBack(e={}){return this._wrapApiCall("page.goBack",async()=>{const t=f.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.goBack({...e,waitUntil:t})).response)})}async goForward(e={}){return this._wrapApiCall("page.goForward",async()=>{const t=f.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.goForward({...e,waitUntil:t})).response)})}async emulateMedia(e){return this._wrapApiCall("page.emulateMedia",async()=>{await this._channel.emulateMedia({media:null===e.media?"null":e.media,colorScheme:null===e.colorScheme?"null":e.colorScheme})})}async setViewportSize(e){return this._wrapApiCall("page.setViewportSize",async()=>{this._viewportSize=e,await this._channel.setViewportSize({viewportSize:e})})}viewportSize(){return this._viewportSize}async evaluate(e,t){return _.assertMaxArguments(arguments.length,2),this._attributeToPage(()=>this._mainFrame.evaluate(e,t))}async addInitScript(e,t){return this._wrapApiCall("page.addInitScript",async()=>{const n=await k.evaluationScript(e,t);await this._channel.addInitScript({source:n})})}async route(e,t){return this._wrapApiCall("page.route",async()=>{this._routes.push({url:e,handler:t}),1===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall("page.unroute",async()=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),0===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!1})})}async screenshot(e={}){return this._wrapApiCall("page.screenshot",async()=>{const t={...e};t.type||(t.type=u.determineScreenshotType(e));const n=await this._channel.screenshot(t),i=b.Buffer.from(n.binary,"base64");return e.path&&(await C.mkdirIfNeeded(e.path),await O(e.path,i)),i})}async title(){return this._attributeToPage(()=>this._mainFrame.title())}async bringToFront(){return this._wrapApiCall("page.bringToFront",async()=>{await this._channel.bringToFront()})}async close(e={runBeforeUnload:void 0}){try{await this._wrapApiCall("page.close",async()=>{await this._channel.close(e),this._ownedContext&&await this._ownedContext.close()})}catch(e){if(P.isSafeCloseError(e))return;throw e}}isClosed(){return this._closed}async click(e,t){return this._attributeToPage(()=>this._mainFrame.click(e,t))}async dblclick(e,t){return this._attributeToPage(()=>this._mainFrame.dblclick(e,t))}async tap(e,t){return this._attributeToPage(()=>this._mainFrame.tap(e,t))}async fill(e,t,n){return this._attributeToPage(()=>this._mainFrame.fill(e,t,n))}async focus(e,t){return this._attributeToPage(()=>this._mainFrame.focus(e,t))}async textContent(e,t){return this._attributeToPage(()=>this._mainFrame.textContent(e,t))}async innerText(e,t){return this._attributeToPage(()=>this._mainFrame.innerText(e,t))}async innerHTML(e,t){return this._attributeToPage(()=>this._mainFrame.innerHTML(e,t))}async getAttribute(e,t,n){return this._attributeToPage(()=>this._mainFrame.getAttribute(e,t,n))}async hover(e,t){return this._attributeToPage(()=>this._mainFrame.hover(e,t))}async selectOption(e,t,n){return this._attributeToPage(()=>this._mainFrame.selectOption(e,t,n))}async setInputFiles(e,t,n){return this._attributeToPage(()=>this._mainFrame.setInputFiles(e,t,n))}async type(e,t,n){return this._attributeToPage(()=>this._mainFrame.type(e,t,n))}async press(e,t,n){return this._attributeToPage(()=>this._mainFrame.press(e,t,n))}async check(e,t){return this._attributeToPage(()=>this._mainFrame.check(e,t))}async uncheck(e,t){return this._attributeToPage(()=>this._mainFrame.uncheck(e,t))}async waitForTimeout(e){await this._mainFrame.waitForTimeout(e)}async waitForFunction(e,t,n){return this._attributeToPage(()=>this._mainFrame.waitForFunction(e,t,n))}workers(){return[...this._workers]}on(e,t){return e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),e!==i.Events.Page.WebSocket||this.listenerCount(e)||this._channel.setWebSocketFramesReportingEnabledNoReply({enabled:!0}),super.on(e,t),this}addListener(e,t){return e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),e!==i.Events.Page.WebSocket||this.listenerCount(e)||this._channel.setWebSocketFramesReportingEnabledNoReply({enabled:!0}),super.addListener(e,t),this}off(e,t){return super.off(e,t),e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}removeListener(e,t){return super.removeListener(e,t),e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}async _pdf(e={}){const t={...e};t.margin&&(t.margin={...t.margin}),"number"==typeof e.width&&(t.width=e.width+"px"),"number"==typeof e.height&&(t.height=e.height+"px");for(const n of["top","right","bottom","left"]){const i=n;e.margin&&"number"==typeof e.margin[i]&&(t.margin[i]=t.margin[i]+"px")}const n=await this._channel.pdf(t),i=b.Buffer.from(n.pdf,"base64");return e.path&&(await I(S.dirname(e.path),{recursive:!0}),await O(e.path,i)),i}}t.Page=A;class M extends l.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}async call(e){try{const t=f.Frame.from(this._initializer.frame),n={context:t._page.context(),page:t._page,frame:t};let i;i=this._initializer.handle?await e(n,_.JSHandle.from(this._initializer.handle)):await e(n,...this._initializer.args.map(_.parseResult)),this._channel.resolve({result:_.serializeArgument(i)})}catch(e){this._channel.reject({error:o.serializeError(e)})}}}t.BindingCall=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyLoadState=t.Frame=void 0;const i=n(4),s=n(18),r=n(197),o=n(58),a=n(0),l=n(134),c=n(1),d=n(5),h=n(105),u=n(41),p=n(509),f=n(59),m=c.promisify(a.readFile.bind(a));class _ extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._parentFrame=null,this._url="",this._name="",this._detached=!1,this._childFrames=new Set,this._eventEmitter=new d.EventEmitter,this._eventEmitter.setMaxListeners(0),this._parentFrame=_.fromNullable(i.parentFrame),this._parentFrame&&this._parentFrame._childFrames.add(this),this._name=i.name,this._url=i.url,this._loadStates=new Set(i.loadStates),this._channel.on("loadstate",e=>{e.add&&(this._loadStates.add(e.add),this._eventEmitter.emit("loadstate",e.add)),e.remove&&this._loadStates.delete(e.remove)}),this._channel.on("navigated",e=>{this._url=e.url,this._name=e.name,this._eventEmitter.emit("navigated",e),!e.error&&this._page&&this._page.emit(u.Events.Page.FrameNavigated,this)})}static from(e){return e._object}static fromNullable(e){return e?_.from(e):null}_apiName(e){return this._page._isPageCall?"page."+e:"frame."+e}page(){return this._page}async goto(e,t={}){return this._wrapApiCall(this._apiName("goto"),async()=>{const n=g("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);return l.Response.fromNullable((await this._channel.goto({url:e,...t,waitUntil:n})).response)})}_setupNavigationWaiter(e){const t=new h.Waiter;t.rejectOnEvent(this._page,u.Events.Page.Close,new Error("Navigation failed because page was closed!")),t.rejectOnEvent(this._page,u.Events.Page.Crash,new Error("Navigation failed because page crashed!")),t.rejectOnEvent(this._page,u.Events.Page.FrameDetached,new Error("Navigating frame was detached!"),e=>e===this);const n=this._page._timeoutSettings.navigationTimeout(e);return t.rejectOnTimeout(n,`Timeout ${n}ms exceeded.`),t}async waitForNavigation(e={}){return this._wrapApiCall(this._apiName("waitForNavigation"),async()=>{const t=g("waitUntil",void 0===e.waitUntil?"load":e.waitUntil),n=this._setupNavigationWaiter(e),i="string"==typeof e.url?` to "${e.url}"`:"";n.log(`waiting for navigation${i} until "${t}"`);const s=await n.waitForEvent(this._eventEmitter,"navigated",t=>!!t.error||(n.log(`  navigated to "${t.url}"`),f.urlMatches(t.url,e.url)));if(s.error){const e=new Error(s.error);e.stack="",await n.waitForPromise(Promise.reject(e))}this._loadStates.has(t)||await n.waitForEvent(this._eventEmitter,"loadstate",e=>(n.log(`  "${e}" event fired`),e===t));const r=s.newDocument?l.Request.fromNullable(s.newDocument.request):null,o=r?await n.waitForPromise(r._finalRequest().response()):null;return n.dispose(),o})}async waitForLoadState(e="load",t={}){if(e=g("state",e),!this._loadStates.has(e))return this._wrapApiCall(this._apiName("waitForLoadState"),async()=>{const n=this._setupNavigationWaiter(t);await n.waitForEvent(this._eventEmitter,"loadstate",t=>(n.log(`  "${t}" event fired`),t===e)),n.dispose()})}async frameElement(){return this._wrapApiCall(this._apiName("frameElement"),async()=>r.ElementHandle.from((await this._channel.frameElement()).element))}async evaluateHandle(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluateHandle"),async()=>{const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(n.handle)})}async _evaluateHandleInUtility(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("_evaluateHandleInUtility"),async()=>{const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t),world:"utility"});return o.JSHandle.from(n.handle)})}async evaluate(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluate"),async()=>{const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.parseResult(n.value)})}async _evaluateInUtility(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluate"),async()=>{const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t),world:"utility"});return o.parseResult(n.value)})}async $(e){return this._wrapApiCall(this._apiName("$"),async()=>{const t=await this._channel.querySelector({selector:e});return r.ElementHandle.fromNullable(t.element)})}async waitForSelector(e,t={}){return this._wrapApiCall(this._apiName("waitForSelector"),async()=>{if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&"visible"!==t.waitFor)throw new Error("options.waitFor is not supported, did you mean options.state?");const n=await this._channel.waitForSelector({selector:e,...t});return r.ElementHandle.fromNullable(n.element)})}async dispatchEvent(e,t,n,i={}){return this._wrapApiCall(this._apiName("dispatchEvent"),async()=>{await this._channel.dispatchEvent({selector:e,type:t,eventInit:o.serializeArgument(n),...i})})}async $eval(e,t,n){return o.assertMaxArguments(arguments.length,3),this._wrapApiCall(this._apiName("$eval"),async()=>{const i=await this._channel.evalOnSelector({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:o.serializeArgument(n)});return o.parseResult(i.value)})}async $$eval(e,t,n){return o.assertMaxArguments(arguments.length,3),this._wrapApiCall(this._apiName("$$eval"),async()=>{const i=await this._channel.evalOnSelectorAll({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:o.serializeArgument(n)});return o.parseResult(i.value)})}async $$(e){return this._wrapApiCall(this._apiName("$$"),async()=>(await this._channel.querySelectorAll({selector:e})).elements.map(e=>r.ElementHandle.from(e)))}async content(){return this._wrapApiCall(this._apiName("content"),async()=>(await this._channel.content()).value)}async setContent(e,t={}){return this._wrapApiCall(this._apiName("setContent"),async()=>{const n=g("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);await this._channel.setContent({html:e,...t,waitUntil:n})})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}isDetached(){return this._detached}async addScriptTag(e){return this._wrapApiCall(this._apiName("addScriptTag"),async()=>{const t={...e};return t.path&&(t.content=(await m(t.path)).toString(),t.content+="//# sourceURL="+t.path.replace(/\n/g,"")),r.ElementHandle.from((await this._channel.addScriptTag({...t})).element)})}async addStyleTag(e){return this._wrapApiCall(this._apiName("addStyleTag"),async()=>{const t={...e};return t.path&&(t.content=(await m(t.path)).toString(),t.content+="/*# sourceURL="+t.path.replace(/\n/g,"")+"*/"),r.ElementHandle.from((await this._channel.addStyleTag({...t})).element)})}async click(e,t={}){return this._wrapApiCall(this._apiName("click"),async()=>await this._channel.click({selector:e,...t}))}async dblclick(e,t={}){return this._wrapApiCall(this._apiName("dblclick"),async()=>await this._channel.dblclick({selector:e,...t}))}async tap(e,t={}){return this._wrapApiCall(this._apiName("tap"),async()=>await this._channel.tap({selector:e,...t}))}async fill(e,t,n={}){return this._wrapApiCall(this._apiName("fill"),async()=>await this._channel.fill({selector:e,value:t,...n}))}async focus(e,t={}){return this._wrapApiCall(this._apiName("focus"),async()=>{await this._channel.focus({selector:e,...t})})}async textContent(e,t={}){return this._wrapApiCall(this._apiName("textContent"),async()=>{const n=(await this._channel.textContent({selector:e,...t})).value;return void 0===n?null:n})}async innerText(e,t={}){return this._wrapApiCall(this._apiName("innerText"),async()=>(await this._channel.innerText({selector:e,...t})).value)}async innerHTML(e,t={}){return this._wrapApiCall(this._apiName("innerHTML"),async()=>(await this._channel.innerHTML({selector:e,...t})).value)}async getAttribute(e,t,n={}){return this._wrapApiCall(this._apiName("getAttribute"),async()=>{const i=(await this._channel.getAttribute({selector:e,name:t,...n})).value;return void 0===i?null:i})}async hover(e,t={}){return this._wrapApiCall(this._apiName("hover"),async()=>{await this._channel.hover({selector:e,...t})})}async selectOption(e,t,n={}){return this._wrapApiCall(this._apiName("selectOption"),async()=>(await this._channel.selectOption({selector:e,...r.convertSelectOptionValues(t),...n})).values)}async setInputFiles(e,t,n={}){return this._wrapApiCall(this._apiName("setInputFiles"),async()=>{await this._channel.setInputFiles({selector:e,files:await r.convertInputFiles(t),...n})})}async type(e,t,n={}){return this._wrapApiCall(this._apiName("type"),async()=>{await this._channel.type({selector:e,text:t,...n})})}async press(e,t,n={}){return this._wrapApiCall(this._apiName("press"),async()=>{await this._channel.press({selector:e,key:t,...n})})}async check(e,t={}){return this._wrapApiCall(this._apiName("check"),async()=>{await this._channel.check({selector:e,...t})})}async uncheck(e,t={}){return this._wrapApiCall(this._apiName("uncheck"),async()=>{await this._channel.uncheck({selector:e,...t})})}async waitForTimeout(e){await new Promise(t=>setTimeout(t,e))}async waitForFunction(e,t,n={}){return this._wrapApiCall(this._apiName("waitForFunction"),async()=>{"string"==typeof n.polling&&i.assert("raf"===n.polling,"Unknown polling option: "+n.polling);const s=await this._channel.waitForFunction({...n,pollingInterval:"raf"===n.polling?void 0:n.polling,expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(s.handle)})}async title(){return this._wrapApiCall(this._apiName("title"),async()=>(await this._channel.title()).value)}async _extendInjectedScript(e,t){const n=await this._channel.extendInjectedScript({source:e,arg:o.serializeArgument(t)});return o.JSHandle.from(n.handle)}}function g(e,t){if("networkidle0"===t&&(t="networkidle"),!p.kLifecycleEvents.has(t))throw new Error(e+": expected one of (load|domcontentloaded|networkidle)");return t}t.Frame=_,t.verifyLoadState=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateHeaders=t.WebSocket=t.Response=t.Route=t.Request=void 0;const i=n(26),s=n(18),r=n(133),o=n(0),a=n(99),l=n(1),c=n(4),d=n(41),h=n(105);class u extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._redirectedFrom=null,this._redirectedTo=null,this._failureText=null,this._redirectedFrom=u.fromNullable(i.redirectedFrom),this._redirectedFrom&&(this._redirectedFrom._redirectedTo=this),this._headers=c.headersArrayToObject(i.headers,!0),this._postData=i.postData?Buffer.from(i.postData,"base64"):null,this._timing={startTime:0,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1,responseEnd:-1}}static from(e){return e._object}static fromNullable(e){return e?u.from(e):null}url(){return this._initializer.url}resourceType(){return this._initializer.resourceType}method(){return this._initializer.method}postData(){return this._postData?this._postData.toString("utf8"):null}postDataBuffer(){return this._postData}postDataJSON(){const e=this.postData();if(!e)return null;const t=this.headers()["content-type"];if(!t)return null;if("application/x-www-form-urlencoded"===t){const t={},n=new i.URLSearchParams(e);for(const[e,i]of n.entries())t[e]=i;return t}return JSON.parse(e)}headers(){return{...this._headers}}async response(){return f.fromNullable((await this._channel.response()).response)}frame(){return r.Frame.from(this._initializer.frame)}isNavigationRequest(){return this._initializer.isNavigationRequest}redirectedFrom(){return this._redirectedFrom}redirectedTo(){return this._redirectedTo}failure(){return null===this._failureText?null:{errorText:this._failureText}}timing(){return this._timing}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}}t.Request=u;class p extends s.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}request(){return u.from(this._initializer.request)}async abort(e){await this._channel.abort({errorCode:e})}async fulfill(e){let t="",n=!1,i=0;if(e.path){const s=await l.promisify(o.readFile)(e.path);t=s.toString("base64"),n=!0,i=s.length}else c.isString(e.body)?(t=e.body,n=!1,i=Buffer.byteLength(t)):e.body&&(t=e.body.toString("base64"),n=!0,i=e.body.length);const s={};for(const t of Object.keys(e.headers||{}))s[t.toLowerCase()]=String(e.headers[t]);e.contentType?s["content-type"]=String(e.contentType):e.path&&(s["content-type"]=a.getType(e.path)||"application/octet-stream"),i&&!("content-length"in s)&&(s["content-length"]=String(i)),await this._channel.fulfill({status:e.status||200,headers:c.headersObjectToArray(s),body:t,isBase64:n})}async continue(e={}){const t=c.isString(e.postData)?Buffer.from(e.postData,"utf8"):e.postData;await this._channel.continue({method:e.method,headers:e.headers?c.headersObjectToArray(e.headers):void 0,postData:t?t.toString("base64"):void 0})}}t.Route=p;class f extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._headers=c.headersArrayToObject(i.headers,!0),this._request=u.from(this._initializer.request),this._request._headers=c.headersArrayToObject(i.requestHeaders,!0),Object.assign(this._request._timing,this._initializer.timing)}static from(e){return e._object}static fromNullable(e){return e?f.from(e):null}url(){return this._initializer.url}ok(){return 0===this._initializer.status||this._initializer.status>=200&&this._initializer.status<=299}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return{...this._headers}}async finished(){const e=await this._channel.finished();return e.error?new Error(e.error):null}async body(){return Buffer.from((await this._channel.body()).binary,"base64")}async text(){return(await this.body()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}request(){return this._request}frame(){return this._request.frame()}}t.Response=f;class m extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._isClosed=!1,this._page=e,this._channel.on("frameSent",e=>{const t=2===e.opcode?Buffer.from(e.data,"base64"):e.data;this.emit(d.Events.WebSocket.FrameSent,{payload:t})}),this._channel.on("frameReceived",e=>{const t=2===e.opcode?Buffer.from(e.data,"base64"):e.data;this.emit(d.Events.WebSocket.FrameReceived,{payload:t})}),this._channel.on("error",({error:e})=>this.emit(d.Events.WebSocket.Error,e)),this._channel.on("close",()=>{this._isClosed=!0,this.emit(d.Events.WebSocket.Close)})}static from(e){return e._object}url(){return this._initializer.url}isClosed(){return this._isClosed}async waitForEvent(e,t={}){const n=this._page._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,s=new h.Waiter;s.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==d.Events.WebSocket.Error&&s.rejectOnEvent(this,d.Events.WebSocket.Error,new Error("Socket error")),e!==d.Events.WebSocket.Close&&s.rejectOnEvent(this,d.Events.WebSocket.Close,new Error("Socket closed")),s.rejectOnEvent(this._page,d.Events.Page.Close,new Error("Page closed"));const r=await s.waitForEvent(this,e,i);return s.dispose(),r}}t.WebSocket=m,t.validateHeaders=function(e){for(const t of Object.keys(e)){const n=e[t];if(!Object.is(n,void 0)&&!c.isString(n))throw new Error(`Expected value of header "${t}" to be String, but "${typeof n}" is found.`)}}},,function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(s=i))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(79)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,i=6e4,s=60*i,r=24*s;function o(e,t,n,i){var s=t>=1.5*n;return Math.round(e/n)+" "+i+(s?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=r)return o(e,t,r,"day");if(t>=s)return o(e,t,s,"hour");if(t>=i)return o(e,t,i,"minute");if(t>=n)return o(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=r)return Math.round(e/r)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){const i=n(139),s=n(1);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let i=0;i<n.length;i++)e.inspectOpts[n[i]]=t.inspectOpts[n[i]]},t.log=function(...e){return process.stderr.write(s.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:i,useColors:s}=this;if(s){const t=this.color,s="[3"+(t<8?t:"8;5;"+t),r=`  ${s};1m${i} [0m`;n[0]=r+n[0].split("\n").join("\n"+r),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+i+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{const e=n(140);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[n]=i,e},{}),e.exports=n(79)(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";const i=n(8),s=n(141),{env:r}=process;let o;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(0===o)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!e.isTTY&&void 0===o)return 0;const t=o||0;if("dumb"===r.TERM)return t;if("win32"===process.platform){const e=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in r)||"codeship"===r.CI_NAME?1:t;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("truecolor"===r.COLORTERM)return 3;if("TERM_PROGRAM"in r){const e=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:t}(e))}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?o=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(o=1),"FORCE_COLOR"in r&&(o=!0===r.FORCE_COLOR||"true"===r.FORCE_COLOR?1:!1===r.FORCE_COLOR||"false"===r.FORCE_COLOR?0:0===r.FORCE_COLOR.length?1:Math.min(parseInt(r.FORCE_COLOR,10),3)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(n+e),s=t.indexOf("--");return-1!==i&&(-1===s||i<s)}},,,,function(e,t,n){var i=n(2),s="win32"===process.platform,r=n(0),o=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(o){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}i.normalize;if(s)var l=/(.*?)(?:[\/\\]+|$)/g;else l=/(.*?)(?:[\/]+|$)/g;if(s)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,o,a,d,h=e,u={},p={};function f(){var t=c.exec(e);n=t[0].length,o=t[0],a=t[0],d="",s&&!p[a]&&(r.lstatSync(a),p[a]=!0)}for(f();n<e.length;){l.lastIndex=n;var m=l.exec(e);if(d=o,o+=m[0],a=d+m[1],n=l.lastIndex,!(p[a]||t&&t[a]===a)){var _;if(t&&Object.prototype.hasOwnProperty.call(t,a))_=t[a];else{var g=r.lstatSync(a);if(!g.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var w=null;if(!s){var b=g.dev.toString(32)+":"+g.ino.toString(32);u.hasOwnProperty(b)&&(w=u[b])}null===w&&(r.statSync(a),w=r.readlinkSync(a)),_=i.resolve(d,w),t&&(t[a]=_),s||(u[b]=w)}e=i.resolve(_,e.slice(n)),f()}}return t&&(t[h]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var o,d,h,u,p=e,f={},m={};function _(){var t=c.exec(e);o=t[0].length,d=t[0],h=t[0],u="",s&&!m[h]?r.lstat(h,(function(e){if(e)return n(e);m[h]=!0,g()})):process.nextTick(g)}function g(){if(o>=e.length)return t&&(t[p]=e),n(null,e);l.lastIndex=o;var i=l.exec(e);return u=d,d+=i[0],h=u+i[1],o=l.lastIndex,m[h]||t&&t[h]===h?process.nextTick(g):t&&Object.prototype.hasOwnProperty.call(t,h)?y(t[h]):r.lstat(h,w)}function w(e,i){if(e)return n(e);if(!i.isSymbolicLink())return m[h]=!0,t&&(t[h]=h),process.nextTick(g);if(!s){var o=i.dev.toString(32)+":"+i.ino.toString(32);if(f.hasOwnProperty(o))return b(null,f[o],h)}r.stat(h,(function(e){if(e)return n(e);r.readlink(h,(function(e,t){s||(f[o]=t),b(e,t)}))}))}function b(e,s,r){if(e)return n(e);var o=i.resolve(u,s);t&&(t[r]=o),y(o)}function y(t){e=i.resolve(t,e.slice(o)),_()}_()}},function(e,t,n){var i=n(147),s=n(148);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var r=[],o=s("{","}",t);if(!o||/\$$/.test(o.pre))return[t];var l,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),_=c||h,g=o.body.indexOf(",")>=0;if(!_&&!g)return o.post.match(/,.*\}/)?(t=o.pre+"{"+o.body+a+o.post,e(t)):[t];if(_)l=o.body.split(/\.\./);else{if(1===(l=function e(t){if(!t)return[""];var n=[],i=s("{","}",t);if(!i)return t.split(",");var r=i.pre,o=i.body,a=i.post,l=r.split(",");l[l.length-1]+="{"+o+"}";var c=e(a);a.length&&(l[l.length-1]+=c.shift(),l.push.apply(l,c));return n.push.apply(n,l),n}(o.body)).length)if(1===(l=e(l[0],!1).map(u)).length)return(y=o.post.length?e(o.post,!1):[""]).map((function(e){return o.pre+l[0]+e}))}var w,b=o.pre,y=o.post.length?e(o.post,!1):[""];if(_){var v=d(l[0]),x=d(l[1]),S=Math.max(l[0].length,l[1].length),E=3==l.length?Math.abs(d(l[2])):1,k=f;x<v&&(E*=-1,k=m);var C=l.some(p);w=[];for(var P=v;k(P,x);P+=E){var T;if(h)"\\"===(T=String.fromCharCode(P))&&(T="");else if(T=String(P),C){var O=S-T.length;if(O>0){var I=new Array(O+1).join("0");T=P<0?"-"+I+T.slice(1):I+T}}w.push(T)}}else w=i(l,(function(t){return e(t,!1)}));for(var A=0;A<w.length;A++)for(var M=0;M<y.length;M++){var F=b+w[A]+y[M];(!n||_||F)&&r.push(F)}return r}(function(e){return e.split("\\\\").join(r).split("\\{").join(o).split("\\}").join(a).split("\\,").join(l).split("\\.").join(c)}(e),!0).map(h)};var r="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function d(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function h(e){return e.split(r).join("\\").split(o).join("{").split(a).join("}").split(l).join(",").split(c).join(".")}function u(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],s=0;s<e.length;s++){var r=t(e[s],s);n(r)?i.push.apply(i,r):i.push(r)}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t,n){e instanceof RegExp&&(e=s(e,n)),t instanceof RegExp&&(t=s(t,n));var i=r(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function s(e,t){var n=t.match(e);return n?n[0]:null}function r(e,t,n){var i,s,r,o,a,l=n.indexOf(e),c=n.indexOf(t,l+1),d=l;if(l>=0&&c>0){for(i=[],r=n.length;d>=0&&!a;)d==l?(i.push(d),l=n.indexOf(e,d+1)):1==i.length?a=[i.pop(),c]:((s=i.pop())<r&&(r=s,o=c),c=n.indexOf(t,d+1)),d=l<c&&l>=0?l:c;i.length&&(a=[r,o])}return a}e.exports=i,i.range=r},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=f,f.GlobSync=m;var i=n(0),s=n(83),r=n(48),o=(r.Minimatch,n(62).Glob,n(1),n(2)),a=n(23),l=n(49),c=n(84),d=(c.alphasort,c.alphasorti,c.setopts),h=c.ownProp,u=c.childrenIgnored,p=c.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(d(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach((function(t,n){var i=e.matches[n]=Object.create(null);for(var r in t)try{r=e._makeAbs(r),i[s.realpathSync(r,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(r)]=!0}}))}c.finish(this)},m.prototype._process=function(e,t,n){a(this instanceof m);for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var o,c=e.slice(s);null===i?o=".":l(i)||l(e.join("/"))?(i&&l(i)||(i="/"+i),o=i):o=i;var d=this._makeAbs(o);u(this,o)||(c[0]===r.GLOBSTAR?this._processGlobStar(i,o,d,c,t,n):this._processReaddir(i,o,d,c,t,n))},m.prototype._processReaddir=function(e,t,n,i,s,r){var a=this._readdir(n,r);if(a){for(var l=i[0],c=!!this.minimatch.negate,d=l._glob,h=this.dot||"."===d.charAt(0),u=[],p=0;p<a.length;p++){if("."!==(_=a[p]).charAt(0)||h)(c&&!e?!_.match(l):_.match(l))&&u.push(_)}var f=u.length;if(0!==f)if(1!==i.length||this.mark||this.stat){i.shift();for(p=0;p<f;p++){var m;_=u[p];m=e?[e,_]:[_],this._process(m.concat(i),s,r)}}else{this.matches[s]||(this.matches[s]=Object.create(null));for(var p=0;p<f;p++){var _=u[p];e&&(_="/"!==e.slice(-1)?e+"/"+_:e+_),"/"!==_.charAt(0)||this.nomount||(_=o.join(this.root,_)),this._emitMatch(s,_)}}}},m.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=i.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var s=n&&n.isSymbolicLink();return this.symlinks[e]=s,s||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!h(this.symlinks,e))return this._readdirInGlobStar(e);if(h(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,i.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,n,i,s,r){var o=this._readdir(n,r);if(o){var a=i.slice(1),l=e?[e]:[],c=l.concat(a);this._process(c,s,!1);var d=o.length;if(!this.symlinks[n]||!r)for(var h=0;h<d;h++){if("."!==o[h].charAt(0)||this.dot){var u=l.concat(o[h],a);this._process(u,s,!0);var p=l.concat(o[h],i);this._process(p,s,!0)}}}},m.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&l(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=o.join(this.root,e):(e=o.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&h(this.cache,t)){var s=this.cache[t];if(Array.isArray(s)&&(s="DIR"),!n||"DIR"===s)return s;if(n&&"FILE"===s)return!1}var r=this.statCache[t];if(!r){var o;try{o=i.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{r=i.statSync(t)}catch(e){r=o}else r=o}this.statCache[t]=r;s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,(!n||"FILE"!==s)&&s},m.prototype._mark=function(e){return c.mark(this,e)},m.prototype._makeAbs=function(e){return c.makeAbs(this,e)}},function(e,t,n){var i=n(82),s=Object.create(null),r=n(47);function o(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i]=e[i];return n}e.exports=i((function(e,t){return s[e]?(s[e].push(t),null):(s[e]=[t],function(e){return r((function t(){var n=s[e],i=n.length,r=o(arguments);try{for(var a=0;a<i;a++)n[a].apply(null,r)}finally{n.length>i?(n.splice(0,i),process.nextTick((function(){t.apply(null,r)}))):delete s[e]}}))}(e))}))},,,function(e,t){e.exports=require("constants")},function(e,t){e.exports=require("string_decoder")},,,,,,function(e,t,n){var i=n(162),s=n(163);e.exports={encode:i,decode:s}},function(e,t,n){function i(e){Math.round;var t,n,i,s,r,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(65535),u=new Array(65535),p=new Array(64),f=new Array(64),m=[],_=0,g=7,w=new Array(64),b=new Array(64),y=new Array(64),v=new Array(256),x=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],A=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var n=0,i=0,s=new Array,r=1;r<=16;r++){for(var o=1;o<=e[r];o++)s[t[i]]=[],s[t[i]][0]=n,s[t[i]][1]=r,i++,n++;n*=2}return s}function F(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(_|=1<<g),n--,--g<0&&(255==_?(N(255),N(0)):N(_),g=7,_=0)}function N(e){m.push(e)}function R(e){N(e>>8&255),N(255&e)}function L(e,t,n,i,s){for(var r,o=s[0],a=s[240],l=function(e,t){var n,i,s,r,o,a,l,c,d,h,u=0;for(d=0;d<8;++d){n=e[u],i=e[u+1],s=e[u+2],r=e[u+3],o=e[u+4],a=e[u+5],l=e[u+6];var f=n+(c=e[u+7]),m=n-c,_=i+l,g=i-l,w=s+a,b=s-a,y=r+o,v=r-o,x=f+y,S=f-y,E=_+w,k=_-w;e[u]=x+E,e[u+4]=x-E;var C=.707106781*(k+S);e[u+2]=S+C,e[u+6]=S-C;var P=.382683433*((x=v+b)-(k=g+m)),T=.5411961*x+P,O=1.306562965*k+P,I=.707106781*(E=b+g),A=m+I,M=m-I;e[u+5]=M+T,e[u+3]=M-T,e[u+1]=A+O,e[u+7]=A-O,u+=8}for(u=0,d=0;d<8;++d){n=e[u],i=e[u+8],s=e[u+16],r=e[u+24],o=e[u+32],a=e[u+40],l=e[u+48];var F=n+(c=e[u+56]),N=n-c,R=i+l,L=i-l,D=s+a,j=s-a,B=r+o,q=r-o,H=F+B,W=F-B,z=R+D,U=R-D;e[u]=H+z,e[u+32]=H-z;var $=.707106781*(U+W);e[u+16]=W+$,e[u+48]=W-$;var K=.382683433*((H=q+j)-(U=L+N)),V=.5411961*H+K,G=1.306562965*U+K,Y=.707106781*(z=j+L),J=N+Y,X=N-Y;e[u+40]=X+V,e[u+24]=X-V,e[u+8]=J+G,e[u+56]=J-G,u++}for(d=0;d<64;++d)h=e[d]*t[d],p[d]=h>0?h+.5|0:h-.5|0;return p}(e,t),c=0;c<64;++c)f[S[c]]=l[c];var d=f[0]-n;n=f[0],0==d?F(i[0]):(F(i[u[r=32767+d]]),F(h[r]));for(var m=63;m>0&&0==f[m];m--);if(0==m)return F(o),n;for(var _,g=1;g<=m;){for(var w=g;0==f[g]&&g<=m;++g);var b=g-w;if(b>=16){_=b>>4;for(var y=1;y<=_;++y)F(a);b&=15}r=32767+f[g],F(s[(b<<4)+u[r]]),F(h[r]),g++}return 63!=m&&F(o),n}function D(e){if(e<=0&&(e=1),e>100&&(e=100),r!=e){(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((t[n]*e+50)/100);i<1?i=1:i>255&&(i=255),a[S[n]]=i}for(var s=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],r=0;r<64;r++){var h=o((s[r]*e+50)/100);h<1?h=1:h>255&&(h=255),l[S[r]]=h}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var m=0;m<8;m++)c[p]=1/(a[S[p]]*u[f]*u[m]*8),d[p]=1/(l[S[p]]*u[f]*u[m]*8),p++})(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),r=e}}this.encode=function(e,r){(new Date).getTime();r&&D(r),m=new Array,_=0,g=7,R(65496),R(65504),R(16),N(74),N(70),N(73),N(70),N(0),N(1),N(1),N(0),R(1),R(1),N(0),N(0),function(e){if(e){R(65505),69===e[0]&&120===e[1]&&105===e[2]&&102===e[3]?R(e.length+2):(R(e.length+5+2),N(69),N(120),N(105),N(102),N(0));for(var t=0;t<e.length;t++)N(e[t])}}(e.exifBuffer),function(){R(65499),R(132),N(0);for(var e=0;e<64;e++)N(a[e]);N(1);for(var t=0;t<64;t++)N(l[t])}(),function(e,t){R(65472),R(17),N(8),R(t),R(e),N(3),N(1),N(17),N(0),N(2),N(17),N(1),N(3),N(17),N(1)}(e.width,e.height),function(){R(65476),R(418),N(0);for(var e=0;e<16;e++)N(E[e+1]);for(var t=0;t<=11;t++)N(k[t]);N(16);for(var n=0;n<16;n++)N(C[n+1]);for(var i=0;i<=161;i++)N(P[i]);N(1);for(var s=0;s<16;s++)N(T[s+1]);for(var r=0;r<=11;r++)N(O[r]);N(17);for(var o=0;o<16;o++)N(I[o+1]);for(var a=0;a<=161;a++)N(A[a])}(),R(65498),R(12),N(3),N(1),N(0),N(2),N(17),N(3),N(17),N(0),N(63),N(0);var o=0,h=0,u=0;_=0,g=7,this.encode.displayName="_encode_";for(var p,f,v,S,M,j,B,q,H,W=e.data,z=e.width,U=e.height,$=4*z,K=0;K<U;){for(p=0;p<$;){for(j=M=$*K+p,B=-1,q=0,H=0;H<64;H++)j=M+(q=H>>3)*$+(B=4*(7&H)),K+q>=U&&(j-=$*(K+1+q-U)),p+B>=$&&(j-=p+B-$+4),f=W[j++],v=W[j++],S=W[j++],w[H]=(x[f]+x[v+256>>0]+x[S+512>>0]>>16)-128,b[H]=(x[f+768>>0]+x[v+1024>>0]+x[S+1280>>0]>>16)-128,y[H]=(x[f+1280>>0]+x[v+1536>>0]+x[S+1792>>0]>>16)-128;o=L(w,c,o,t,i),h=L(b,d,h,n,s),u=L(y,d,u,n,s),p+=32}K+=8}if(g>=0){var V=[];V[1]=g+1,V[0]=(1<<g+1)-1,F(V)}return R(65497),Buffer.from(m)},function(){(new Date).getTime();e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=M(E,k),n=M(T,O),i=M(C,P),s=M(I,A),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)u[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=i;for(var s=-(t-1);s<=-e;s++)u[32767+s]=n,h[32767+s]=[],h[32767+s][1]=n,h[32767+s][0]=t-1+s;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}(),D(e),(new Date).getTime()}()}e.exports=function(e,t){void 0===t&&(t=50);return{data:new i(t).encode(e,t),width:e.width,height:e.height}}},function(e,t,n){var i=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function t(){}function n(e,t){for(var n,i,s=0,r=[],o=16;o>0&&!e[o-1];)o--;r.push({children:[],index:0});var a,l=r[0];for(n=0;n<o;n++){for(i=0;i<e[n];i++){for((l=r.pop()).children[l.index]=t[s];l.index>0;){if(0===r.length)throw new Error("Could not recreate Huffman Table");l=r.pop()}for(l.index++,r.push(l);r.length<=n;)r.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;s++}n+1<o&&(r.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return r[0].children}function i(t,n,i,s,r,o,a,l,c,d){i.precision,i.samplesPerLine,i.scanLines;var h=i.mcusPerLine,u=i.progressive,p=(i.maxH,i.maxV,n),f=0,m=0;function _(){if(m>0)return m--,f>>m&1;if(255==(f=t[n++])){var e=t[n++];if(e)throw new Error("unexpected marker: "+(f<<8|e).toString(16))}return m=7,f>>>7}function g(e){for(var t,n=e;null!==(t=_());){if("number"==typeof(n=n[t]))return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function w(e){for(var t=0;e>0;){var n=_();if(null===n)return;t=t<<1|n,e--}return t}function b(e){var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var y=0;var v,x=0;function S(e,t,n,i,s){var r=n%h,o=(n/h|0)*e.v+i,a=r*e.h+s;void 0===e.blocks[o]&&d.tolerantDecoding||t(e,e.blocks[o][a])}function E(e,t,n){var i=n/e.blocksPerLine|0,s=n%e.blocksPerLine;void 0===e.blocks[i]&&d.tolerantDecoding||t(e,e.blocks[i][s])}var k,C,P,T,O,I,A=s.length;I=u?0===o?0===l?function(e,t){var n=g(e.huffmanTableDC),i=0===n?0:b(n)<<c;t[0]=e.pred+=i}:function(e,t){t[0]|=_()<<c}:0===l?function(t,n){if(y>0)y--;else for(var i=o,s=a;i<=s;){var r=g(t.huffmanTableAC),l=15&r,d=r>>4;if(0!==l){n[e[i+=d]]=b(l)*(1<<c),i++}else{if(d<15){y=w(d)+(1<<d)-1;break}i+=16}}}:function(t,n){for(var i=o,s=a,r=0;i<=s;){var l=e[i],d=n[l]<0?-1:1;switch(x){case 0:var h=g(t.huffmanTableAC),u=15&h;r=h>>4;if(0===u)r<15?(y=w(r)+(1<<r),x=4):(r=16,x=1);else{if(1!==u)throw new Error("invalid ACn encoding");v=b(u),x=r?2:3}continue;case 1:case 2:n[l]?n[l]+=(_()<<c)*d:0===--r&&(x=2==x?3:0);break;case 3:n[l]?n[l]+=(_()<<c)*d:(n[l]=v<<c,x=0);break;case 4:n[l]&&(n[l]+=(_()<<c)*d)}i++}4===x&&0===--y&&(x=0)}:function(t,n){var i=g(t.huffmanTableDC),s=0===i?0:b(i);n[0]=t.pred+=s;for(var r=1;r<64;){var o=g(t.huffmanTableAC),a=15&o,l=o>>4;if(0!==a){n[e[r+=l]]=b(a),r++}else{if(l<15)break;r+=16}}};var M,F,N,R,L=0;for(F=1==A?s[0].blocksPerLine*s[0].blocksPerColumn:h*i.mcusPerColumn,r||(r=F);L<F;){for(C=0;C<A;C++)s[C].pred=0;if(y=0,1==A)for(k=s[0],O=0;O<r;O++)E(k,I,L),L++;else for(O=0;O<r;O++){for(C=0;C<A;C++)for(N=(k=s[C]).h,R=k.v,P=0;P<R;P++)for(T=0;T<N;T++)S(k,I,L,P,T);if(++L===F)break}if(L===F)do{if(255===t[n]&&0!==t[n+1])break;n+=1}while(n<t.length-2);if(m=0,(M=t[n]<<8|t[n+1])<65280)throw new Error("marker was not found");if(!(M>=65488&&M<=65495))break;n+=2}return n-p}function s(e,t){var n,i,s=[],r=t.blocksPerLine,o=t.blocksPerColumn,a=r<<3,c=new Int32Array(64),d=new Uint8Array(64);function h(e,n,i){var s,r,o,a,l,c,d,h,u,p,f=t.quantizationTable,m=i;for(p=0;p<64;p++)m[p]=e[p]*f[p];for(p=0;p<8;++p){var _=8*p;0!=m[1+_]||0!=m[2+_]||0!=m[3+_]||0!=m[4+_]||0!=m[5+_]||0!=m[6+_]||0!=m[7+_]?(s=5793*m[0+_]+128>>8,r=5793*m[4+_]+128>>8,o=m[2+_],a=m[6+_],l=2896*(m[1+_]-m[7+_])+128>>8,h=2896*(m[1+_]+m[7+_])+128>>8,c=m[3+_]<<4,u=s-r+1>>1,s=s+r+1>>1,r=u,u=3784*o+1567*a+128>>8,o=1567*o-3784*a+128>>8,a=u,u=l-(d=m[5+_]<<4)+1>>1,l=l+d+1>>1,d=u,u=h+c+1>>1,c=h-c+1>>1,h=u,u=s-a+1>>1,s=s+a+1>>1,a=u,u=r-o+1>>1,r=r+o+1>>1,o=u,u=2276*l+3406*h+2048>>12,l=3406*l-2276*h+2048>>12,h=u,u=799*c+4017*d+2048>>12,c=4017*c-799*d+2048>>12,d=u,m[0+_]=s+h,m[7+_]=s-h,m[1+_]=r+d,m[6+_]=r-d,m[2+_]=o+c,m[5+_]=o-c,m[3+_]=a+l,m[4+_]=a-l):(u=5793*m[0+_]+512>>10,m[0+_]=u,m[1+_]=u,m[2+_]=u,m[3+_]=u,m[4+_]=u,m[5+_]=u,m[6+_]=u,m[7+_]=u)}for(p=0;p<8;++p){var g=p;0!=m[8+g]||0!=m[16+g]||0!=m[24+g]||0!=m[32+g]||0!=m[40+g]||0!=m[48+g]||0!=m[56+g]?(s=5793*m[0+g]+2048>>12,r=5793*m[32+g]+2048>>12,o=m[16+g],a=m[48+g],l=2896*(m[8+g]-m[56+g])+2048>>12,h=2896*(m[8+g]+m[56+g])+2048>>12,c=m[24+g],u=s-r+1>>1,s=s+r+1>>1,r=u,u=3784*o+1567*a+2048>>12,o=1567*o-3784*a+2048>>12,a=u,u=l-(d=m[40+g])+1>>1,l=l+d+1>>1,d=u,u=h+c+1>>1,c=h-c+1>>1,h=u,u=s-a+1>>1,s=s+a+1>>1,a=u,u=r-o+1>>1,r=r+o+1>>1,o=u,u=2276*l+3406*h+2048>>12,l=3406*l-2276*h+2048>>12,h=u,u=799*c+4017*d+2048>>12,c=4017*c-799*d+2048>>12,d=u,m[0+g]=s+h,m[56+g]=s-h,m[8+g]=r+d,m[48+g]=r-d,m[16+g]=o+c,m[40+g]=o-c,m[24+g]=a+l,m[32+g]=a-l):(u=5793*i[p+0]+8192>>14,m[0+g]=u,m[8+g]=u,m[16+g]=u,m[24+g]=u,m[32+g]=u,m[40+g]=u,m[48+g]=u,m[56+g]=u)}for(p=0;p<64;++p){var w=128+(m[p]+8>>4);n[p]=w<0?0:w>255?255:w}}l(a*o*8);for(var u=0;u<o;u++){var p=u<<3;for(n=0;n<8;n++)s.push(new Uint8Array(a));for(var f=0;f<r;f++){h(t.blocks[u][f],d,c);var m=0,_=f<<3;for(i=0;i<8;i++){var g=s[p+i];for(n=0;n<8;n++)g[_+n]=d[m++]}}}return s}function r(e){return e<0?0:e>255?255:e}t.prototype={load:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){var e=new Uint8Array(t.response||t.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),t.send(null)},parse:function(t){var r=1e3*this.opts.maxResolutionInMP*1e3,o=0;t.length;function a(){var e=t[o]<<8|t[o+1];return o+=2,e}function c(){var e=a(),n=t.subarray(o,o+e-2);return o+=n.length,n}function d(e){var t,n,i=0,s=0;for(n in e.components)e.components.hasOwnProperty(n)&&(i<(t=e.components[n]).h&&(i=t.h),s<t.v&&(s=t.v));var r=Math.ceil(e.samplesPerLine/8/i),o=Math.ceil(e.scanLines/8/s);for(n in e.components)if(e.components.hasOwnProperty(n)){t=e.components[n];var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/i),c=Math.ceil(Math.ceil(e.scanLines/8)*t.v/s),d=r*t.h,h=o*t.v,u=[];l(256*(h*d));for(var p=0;p<h;p++){for(var f=[],m=0;m<d;m++)f.push(new Int32Array(64));u.push(f)}t.blocksPerLine=a,t.blocksPerColumn=c,t.blocks=u}e.maxH=i,e.maxV=s,e.mcusPerLine=r,e.mcusPerColumn=o}var h,u,p=null,f=null,m=[],_=[],g=[],w=[],b=a();if(this.comments=[],65496!=b)throw new Error("SOI not found");for(b=a();65497!=b;){switch(b){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=c();if(65534===b){var v=String.fromCharCode.apply(null,y);this.comments.push(v)}65504===b&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(p={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65505===b&&69===y[0]&&120===y[1]&&105===y[2]&&102===y[3]&&0===y[4]&&(this.exifBuffer=y.subarray(5,y.length)),65518===b&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&0===y[5]&&(f={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var x=a()+o-2;o<x;){var S=t[o++];l(256);var E=new Int32Array(64);if(S>>4==0)for(K=0;K<64;K++){E[e[K]]=t[o++]}else{if(S>>4!=1)throw new Error("DQT: invalid table spec");for(K=0;K<64;K++){E[e[K]]=a()}}m[15&S]=E}break;case 65472:case 65473:case 65474:a(),(h={}).extended=65473===b,h.progressive=65474===b,h.precision=t[o++],h.scanLines=a(),h.samplesPerLine=a(),h.components={},h.componentsOrder=[];var k=h.scanLines*h.samplesPerLine;if(k>r){var C=Math.ceil((k-r)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${C}MP`)}var P,T=t[o++];for(U=0;U<T;U++){P=t[o];var O=t[o+1]>>4,I=15&t[o+1],A=t[o+2];h.componentsOrder.push(P),h.components[P]={h:O,v:I,quantizationIdx:A},o+=3}d(h),_.push(h);break;case 65476:var M=a();for(U=2;U<M;){var F=t[o++],N=new Uint8Array(16),R=0;for(K=0;K<16;K++,o++)R+=N[K]=t[o];l(16+R);var L=new Uint8Array(R);for(K=0;K<R;K++,o++)L[K]=t[o];U+=17+R,(F>>4==0?w:g)[15&F]=n(N,L)}break;case 65501:a(),u=a();break;case 65500:a(),a();break;case 65498:a();var D=t[o++],j=[];for(U=0;U<D;U++){V=h.components[t[o++]];var B=t[o++];V.huffmanTableDC=w[B>>4],V.huffmanTableAC=g[15&B],j.push(V)}var q=t[o++],H=t[o++],W=t[o++],z=i(t,o,h,j,u,q,H,W>>4,15&W,this.opts);o+=z;break;case 65535:255!==t[o]&&o--;break;default:if(255==t[o-3]&&t[o-2]>=192&&t[o-2]<=254){o-=3;break}throw new Error("unknown JPEG marker "+b.toString(16))}b=a()}if(1!=_.length)throw new Error("only single frame JPEGs supported");for(var U=0;U<_.length;U++){var $=_[U].components;for(var K in $)$[K].quantizationTable=m[$[K].quantizationIdx],delete $[K].quantizationIdx}this.width=h.samplesPerLine,this.height=h.scanLines,this.jfif=p,this.adobe=f,this.components=[];for(U=0;U<h.componentsOrder.length;U++){var V=h.components[h.componentsOrder[U]];this.components.push({lines:s(0,V),scaleX:V.h/h.maxH,scaleY:V.v/h.maxV})}},getData:function(e,t){var n,i,s,o,a,c,d,h,u,p,f,m,_,g,w,b,y,v,x,S,E,k=this.width/e,C=this.height/t,P=0,T=e*t*this.components.length;l(T);var O=new Uint8Array(T);switch(this.components.length){case 1:for(n=this.components[0],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*C],u=0;u<e;u++)f=a[0|u*n.scaleX*k],O[P++]=f;break;case 2:for(n=this.components[0],i=this.components[1],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*C],c=i.lines[0|p*i.scaleY*C],u=0;u<e;u++)f=a[0|u*n.scaleX*k],O[P++]=f,f=c[0|u*i.scaleX*k],O[P++]=f;break;case 3:for(E=!0,this.adobe&&this.adobe.transformCode?E=!0:void 0!==this.opts.colorTransform&&(E=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],s=this.components[2],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*C],c=i.lines[0|p*i.scaleY*C],d=s.lines[0|p*s.scaleY*C],u=0;u<e;u++)E?(f=a[0|u*n.scaleX*k],m=c[0|u*i.scaleX*k],v=r(f+1.402*((_=d[0|u*s.scaleX*k])-128)),x=r(f-.3441363*(m-128)-.71413636*(_-128)),S=r(f+1.772*(m-128))):(v=a[0|u*n.scaleX*k],x=c[0|u*i.scaleX*k],S=d[0|u*s.scaleX*k]),O[P++]=v,O[P++]=x,O[P++]=S;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(E=!1,this.adobe&&this.adobe.transformCode?E=!0:void 0!==this.opts.colorTransform&&(E=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],s=this.components[2],o=this.components[3],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*C],c=i.lines[0|p*i.scaleY*C],d=s.lines[0|p*s.scaleY*C],h=o.lines[0|p*o.scaleY*C],u=0;u<e;u++)E?(f=a[0|u*n.scaleX*k],m=c[0|u*i.scaleX*k],_=d[0|u*s.scaleX*k],g=h[0|u*o.scaleX*k],w=255-r(f+1.402*(_-128)),b=255-r(f-.3441363*(m-128)-.71413636*(_-128)),y=255-r(f+1.772*(m-128))):(w=a[0|u*n.scaleX*k],b=c[0|u*i.scaleX*k],y=d[0|u*s.scaleX*k],g=h[0|u*o.scaleX*k]),O[P++]=255-w,O[P++]=255-b,O[P++]=255-y,O[P++]=255-g;break;default:throw new Error("Unsupported color mode")}return O},copyToImageData:function(e,t){var n,i,s,o,a,l,c,d,h,u=e.width,p=e.height,f=e.data,m=this.getData(u,p),_=0,g=0;switch(this.components.length){case 1:for(i=0;i<p;i++)for(n=0;n<u;n++)s=m[_++],f[g++]=s,f[g++]=s,f[g++]=s,t&&(f[g++]=255);break;case 3:for(i=0;i<p;i++)for(n=0;n<u;n++)c=m[_++],d=m[_++],h=m[_++],f[g++]=c,f[g++]=d,f[g++]=h,t&&(f[g++]=255);break;case 4:for(i=0;i<p;i++)for(n=0;n<u;n++)a=m[_++],l=m[_++],s=m[_++],c=255-r(a*(1-(o=m[_++])/255)+o),d=255-r(l*(1-o/255)+o),h=255-r(s*(1-o/255)+o),f[g++]=c,f[g++]=d,f[g++]=h,t&&(f[g++]=255);break;default:throw new Error("Unsupported color mode")}}};var o=0,a=0;function l(e=0){var t=o+e;if(t>a){var n=Math.ceil((t-a)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${n}MB`)}o=t}return t.resetMaxMemoryUsage=function(e){o=0,a=e},t.getBytesAllocated=function(){return o},t.requestMemoryAllocation=l,t}();e.exports=function(e,t={}){var n={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...t},s=new Uint8Array(e),r=new i;r.opts=n,i.resetMaxMemoryUsage(1024*n.maxMemoryUsageInMB*1024),r.parse(s);var o=n.formatAsRGBA?4:3,a=r.width*r.height*o;try{i.requestMemoryAllocation(a);var l={width:r.width,height:r.height,exifBuffer:r.exifBuffer,data:n.useTArray?new Uint8Array(a):Buffer.alloc(a)};r.comments.length>0&&(l.comments=r.comments)}catch(e){throw e instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+a):e}return r.copyToImageData(l,n.formatAsRGBA),l}},function(e,t,n){"use strict";let i=n(1),s=n(6),r=n(165),o=n(167),a=n(170),l=t.PNG=function(e){s.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new r(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new o(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(l,s),l.sync=a,l.prototype.pack=function(){return this.data&&this.data.length?(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},l.prototype.parse=function(e,t){if(t){let e,n;e=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this),n=function(n){this.removeListener("parsed",e),t(n,null)}.bind(this),this.once("parsed",e),this.once("error",n)}return this.end(e),this},l.prototype.write=function(e){return this._parser.write(e),!0},l.prototype.end=function(e){this._parser.end(e)},l.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},l.prototype._gamma=function(e){this.gamma=e},l.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},l.bitblt=function(e,t,n,i,s,r,o,a){if(i|=0,s|=0,r|=0,o|=0,a|=0,(n|=0)>e.width||i>e.height||n+s>e.width||i+r>e.height)throw new Error("bitblt reading outside image");if(o>t.width||a>t.height||o+s>t.width||a+r>t.height)throw new Error("bitblt writing outside image");for(let l=0;l<r;l++)e.data.copy(t.data,(a+l)*t.width+o<<2,(i+l)*e.width+n<<2,(i+l)*e.width+n+s<<2)},l.prototype.bitblt=function(e,t,n,i,s,r,o){return l.bitblt(this,e,t,n,i,s,r,o),this},l.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let n=0;n<e.width;n++){let i=e.width*t+n<<2;for(let t=0;t<3;t++){let n=e.data[i+t]/255;n=Math.pow(n,1/2.2/e.gamma),e.data[i+t]=Math.round(255*n)}}e.gamma=0}},l.prototype.adjustGamma=function(){l.adjustGamma(this)}},function(e,t,n){"use strict";let i=n(1),s=n(7),r=n(87),o=n(166),a=n(91),l=n(93),c=n(94),d=e.exports=function(e){r.call(this),this._parser=new a(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};i.inherits(d,r),d.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},d.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=s.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let e=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,t=Math.max(e,s.Z_MIN_CHUNK);this._inflate=s.createInflate({chunkSize:t});let n=e,i=this.emit.bind(this,"error");this._inflate.on("error",(function(e){n&&i(e)})),this._filter.on("complete",this._complete.bind(this));let r=this._filter.write.bind(this._filter);this._inflate.on("data",(function(e){n&&(e.length>n&&(e=e.slice(0,n)),n-=e.length,r(e))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)},d.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new o(this._bitmapInfo)},d.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},d.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},d.prototype._simpleTransparency=function(){this._metaData.alpha=!0},d.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},d.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},d.prototype._complete=function(e){if(this.errord)return;let t;try{let n=l.dataToBitMap(e,this._bitmapInfo);t=c(n,this._bitmapInfo),n=null}catch(e){return void this._handleError(e)}this.emit("parsed",t)}},function(e,t,n){"use strict";let i=n(1),s=n(87),r=n(88),o=e.exports=function(e){s.call(this);let t=[],n=this;this._filter=new r(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",Buffer.concat(t))}}),this._filter.start()};i.inherits(o,s)},function(e,t,n){"use strict";let i=n(1),s=n(6),r=n(30),o=n(95),a=e.exports=function(e){s.call(this);let t=e||{};this._packer=new o(t),this._deflate=this._packer.createDeflate(),this.readable=!0};i.inherits(a,s),a.prototype.pack=function(e,t,n,i){this.emit("data",Buffer.from(r.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),i&&this.emit("data",this._packer.packGAMA(i));let s=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(s)}},function(e,t,n){"use strict";let i=n(30);e.exports=function(e,t,n,s){let r=-1!==[i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(s.colorType);if(s.colorType===s.inputColorType){let t=function(){let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256!==new Int16Array(e)[0]}();if(8===s.bitDepth||16===s.bitDepth&&t)return e}let o=16!==s.bitDepth?e:new Uint16Array(e.buffer),a=255,l=i.COLORTYPE_TO_BPP_MAP[s.inputColorType];4!==l||s.inputHasAlpha||(l=3);let c=i.COLORTYPE_TO_BPP_MAP[s.colorType];16===s.bitDepth&&(a=65535,c*=2);let d=Buffer.alloc(t*n*c),h=0,u=0,p=s.bgColor||{};function f(){let e,t,n,l=a;switch(s.inputColorType){case i.COLORTYPE_COLOR_ALPHA:l=o[h+3],e=o[h],t=o[h+1],n=o[h+2];break;case i.COLORTYPE_COLOR:e=o[h],t=o[h+1],n=o[h+2];break;case i.COLORTYPE_ALPHA:l=o[h+1],e=o[h],t=e,n=e;break;case i.COLORTYPE_GRAYSCALE:e=o[h],t=e,n=e;break;default:throw new Error("input color type:"+s.inputColorType+" is not supported at present")}return s.inputHasAlpha&&(r||(l/=a,e=Math.min(Math.max(Math.round((1-l)*p.red+l*e),0),a),t=Math.min(Math.max(Math.round((1-l)*p.green+l*t),0),a),n=Math.min(Math.max(Math.round((1-l)*p.blue+l*n),0),a))),{red:e,green:t,blue:n,alpha:l}}void 0===p.red&&(p.red=a),void 0===p.green&&(p.green=a),void 0===p.blue&&(p.blue=a);for(let e=0;e<n;e++)for(let e=0;e<t;e++){let e=f();switch(s.colorType){case i.COLORTYPE_COLOR_ALPHA:case i.COLORTYPE_COLOR:8===s.bitDepth?(d[u]=e.red,d[u+1]=e.green,d[u+2]=e.blue,r&&(d[u+3]=e.alpha)):(d.writeUInt16BE(e.red,u),d.writeUInt16BE(e.green,u+2),d.writeUInt16BE(e.blue,u+4),r&&d.writeUInt16BE(e.alpha,u+6));break;case i.COLORTYPE_ALPHA:case i.COLORTYPE_GRAYSCALE:{let t=(e.red+e.green+e.blue)/3;8===s.bitDepth?(d[u]=t,r&&(d[u+1]=e.alpha)):(d.writeUInt16BE(t,u),r&&d.writeUInt16BE(e.alpha,u+2));break}default:throw new Error("unrecognised color Type "+s.colorType)}h+=l,u+=c}return d}},function(e,t,n){"use strict";let i=n(90);let s={0:function(e,t,n,i,s){for(let r=0;r<n;r++)i[s+r]=e[t+r]},1:function(e,t,n,i,s,r){for(let o=0;o<n;o++){let n=o>=r?e[t+o-r]:0,a=e[t+o]-n;i[s+o]=a}},2:function(e,t,n,i,s){for(let r=0;r<n;r++){let o=t>0?e[t+r-n]:0,a=e[t+r]-o;i[s+r]=a}},3:function(e,t,n,i,s,r){for(let o=0;o<n;o++){let a=o>=r?e[t+o-r]:0,l=t>0?e[t+o-n]:0,c=e[t+o]-(a+l>>1);i[s+o]=c}},4:function(e,t,n,s,r,o){for(let a=0;a<n;a++){let l=a>=o?e[t+a-o]:0,c=t>0?e[t+a-n]:0,d=t>0&&a>=o?e[t+a-(n+o)]:0,h=e[t+a]-i(l,c,d);s[r+a]=h}}},r={0:function(e,t,n){let i=0,s=t+n;for(let n=t;n<s;n++)i+=Math.abs(e[n]);return i},1:function(e,t,n,i){let s=0;for(let r=0;r<n;r++){let n=r>=i?e[t+r-i]:0,o=e[t+r]-n;s+=Math.abs(o)}return s},2:function(e,t,n){let i=0,s=t+n;for(let r=t;r<s;r++){let s=t>0?e[r-n]:0,o=e[r]-s;i+=Math.abs(o)}return i},3:function(e,t,n,i){let s=0;for(let r=0;r<n;r++){let o=r>=i?e[t+r-i]:0,a=t>0?e[t+r-n]:0,l=e[t+r]-(o+a>>1);s+=Math.abs(l)}return s},4:function(e,t,n,s){let r=0;for(let o=0;o<n;o++){let a=o>=s?e[t+o-s]:0,l=t>0?e[t+o-n]:0,c=t>0&&o>=s?e[t+o-(n+s)]:0,d=e[t+o]-i(a,l,c);r+=Math.abs(d)}return r}};e.exports=function(e,t,n,i,o){let a;if("filterType"in i&&-1!==i.filterType){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");a=[i.filterType]}else a=[0,1,2,3,4];16===i.bitDepth&&(o*=2);let l=t*o,c=0,d=0,h=Buffer.alloc((l+1)*n),u=a[0];for(let t=0;t<n;t++){if(a.length>1){let t=1/0;for(let n=0;n<a.length;n++){let i=r[a[n]](e,d,l,o);i<t&&(u=a[n],t=i)}}h[c]=u,c++,s[u](e,d,l,h,c,o),c+=l,d+=l}return h}},function(e,t,n){"use strict";let i=n(171),s=n(174);t.read=function(e,t){return i(e,t||{})},t.write=function(e,t){return s(e,t)}},function(e,t,n){"use strict";let i=!0,s=n(7),r=n(172);s.deflateSync||(i=!1);let o=n(96),a=n(173),l=n(91),c=n(93),d=n(94);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n,h,u;let p=[];let f=new o(e);if(new l(t,{read:f.read.bind(f),error:function(e){n=e},metadata:function(e){h=e},gamma:function(e){u=e},palette:function(e){h.palette=e},transColor:function(e){h.transColor=e},inflateData:function(e){p.push(e)},simpleTransparency:function(){h.alpha=!0}}).start(),f.process(),n)throw n;let m,_=Buffer.concat(p);if(p.length=0,h.interlace)m=s.inflateSync(_);else{let e=(1+(h.width*h.bpp*h.depth+7>>3))*h.height;m=r(_,{chunkSize:e,maxLength:e})}if(_=null,!m||!m.length)throw new Error("bad png - invalid inflate data response");let g=a.process(m,h);_=null;let w=c.dataToBitMap(g,h);g=null;let b=d(w,h);return h.data=b,h.gamma=u||0,h}},function(e,t,n){"use strict";let i=n(23).ok,s=n(7),r=n(1),o=n(10).kMaxLength;function a(e){if(!(this instanceof a))return new a(e);e&&e.chunkSize<s.Z_MIN_CHUNK&&(e.chunkSize=s.Z_MIN_CHUNK),s.Inflate.call(this,e),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function l(e,t){t&&process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function c(e,t){return function(e,t){if("string"==typeof t&&(t=Buffer.from(t)),!(t instanceof Buffer))throw new TypeError("Not a string or buffer");let n=e._finishFlushFlag;return null==n&&(n=s.Z_FINISH),e._processChunk(t,n)}(new a(t),e)}a.prototype._processChunk=function(e,t,n){if("function"==typeof n)return s.Inflate._processChunk.call(this,e,t,n);let r,a,c=this,d=e&&e.length,h=this._chunkSize-this._offset,u=this._maxLength,p=0,f=[],m=0;function _(e,t){if(c._hadError)return;let n=h-t;if(i(n>=0,"have should not go down"),n>0){let e=c._buffer.slice(c._offset,c._offset+n);if(c._offset+=n,e.length>u&&(e=e.slice(0,u)),f.push(e),m+=e.length,u-=e.length,0===u)return!1}return(0===t||c._offset>=c._chunkSize)&&(h=c._chunkSize,c._offset=0,c._buffer=Buffer.allocUnsafe(c._chunkSize)),0===t&&(p+=d-e,d=e,!0)}this.on("error",(function(e){r=e})),i(this._handle,"zlib binding closed");do{a=this._handle.writeSync(t,e,p,d,this._buffer,this._offset,h),a=a||this._writeState}while(!this._hadError&&_(a[0],a[1]));if(this._hadError)throw r;if(m>=o)throw l(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+o.toString(16)+" bytes");let g=Buffer.concat(f,m);return l(this),g},r.inherits(a,s.Inflate),e.exports=t=c,t.Inflate=a,t.createInflate=function(e){return new a(e)},t.inflateSync=c},function(e,t,n){"use strict";let i=n(96),s=n(88);t.process=function(e,t){let n=[],r=new i(e);return new s(t,{read:r.read.bind(r),write:function(e){n.push(e)},complete:function(){}}).start(),r.process(),Buffer.concat(n)}},function(e,t,n){"use strict";let i=!0,s=n(7);s.deflateSync||(i=!1);let r=n(30),o=n(95);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n=new o(t||{}),a=[];a.push(Buffer.from(r.PNG_SIGNATURE)),a.push(n.packIHDR(e.width,e.height)),e.gamma&&a.push(n.packGAMA(e.gamma));let l=n.filterData(e.data,e.width,e.height),c=s.deflateSync(l,n.getDeflateOptions());if(l=null,!c||!c.length)throw new Error("bad png - invalid compressed data response");return a.push(n.packIDAT(c)),a.push(n.packIEND()),Buffer.concat(a)}},,,,,,,function(e,t,n){"use strict";function i(){this._types=Object.create(null),this._extensions=Object.create(null);for(var e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}i.prototype.define=function(e,t){for(var n in e){var i=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(var s=0;s<i.length;s++){if("*"!=(r=i[s])[0]){if(!t&&r in this._types)throw new Error('Attempt to change mapping for "'+r+'" extension from "'+this._types[r]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+r+'" from the list of extensions for "'+n+'".');this._types[r]=n}}if(t||!this._extensions[n]){var r=i[0];this._extensions[n]="*"!=r[0]?r:r.substr(1)}}},i.prototype.getType=function(e){var t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),i=t.length<e.length;return(n.length<t.length-1||!i)&&this._types[n]||null},i.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=i},function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/urc-ressheet+xml":["rsheet"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},function(e,t){e.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["keynote"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Touchscreen=t.Mouse=t.Keyboard=t.keypadLocation=void 0;const i=n(4),s=n(460);t.keypadLocation=s.keypadLocation;const r=["Alt","Control","Meta","Shift"];t.Keyboard=class{constructor(e,t){this._pressedModifiers=new Set,this._pressedKeys=new Set,this._raw=e,this._page=t}async down(e){const t=this._keyDescriptionForString(e),n=this._pressedKeys.has(t.code);this._pressedKeys.add(t.code),r.includes(t.key)&&this._pressedModifiers.add(t.key);const i=t.text;await this._raw.keydown(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location,n,i),await this._page._doSlowMo()}_keyDescriptionForString(e){let t=a.get(e);i.assert(t,`Unknown key: "${e}"`);return t=this._pressedModifiers.has("Shift")&&t.shifted?t.shifted:t,this._pressedModifiers.size>1||!this._pressedModifiers.has("Shift")&&1===this._pressedModifiers.size?{...t,text:""}:t}async up(e){const t=this._keyDescriptionForString(e);r.includes(t.key)&&this._pressedModifiers.delete(t.key),this._pressedKeys.delete(t.code),await this._raw.keyup(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location),await this._page._doSlowMo()}async insertText(e){await this._raw.sendText(e),await this._page._doSlowMo()}async type(e,t){const n=t&&t.delay||void 0;for(const t of e)a.has(t)?await this.press(t,{delay:n}):(n&&await new Promise(e=>setTimeout(e,n)),await this.insertText(t))}async press(e,t={}){const n=function(e){const t=[];let n="";for(const i of e)"+"===i&&n?(t.push(n),n=""):n+=i;return t.push(n),t}(e),i=[];e=n[n.length-1];for(let e=0;e<n.length-1;++e)i.push(this.down(n[e]));i.push(this.down(e)),t.delay&&(await Promise.all(i),await new Promise(e=>setTimeout(e,t.delay))),i.push(this.up(e));for(let e=n.length-2;e>=0;--e)i.push(this.up(n[e]));await Promise.all(i)}async _ensureModifiers(e){for(const t of e)if(!r.includes(t))throw new Error("Unknown modifier "+t);const t=Array.from(this._pressedModifiers),n=[];for(const t of r){const i=e.includes(t),s=this._pressedModifiers.has(t);i&&!s?n.push(this.down(t)):!i&&s&&n.push(this.up(t))}return await Promise.all(n),t}_modifiers(){return this._pressedModifiers}};t.Mouse=class{constructor(e,t){this._x=0,this._y=0,this._lastButton="none",this._buttons=new Set,this._raw=e,this._page=t,this._keyboard=this._page.keyboard}async move(e,t,n={}){const{steps:i=1}=n,s=this._x,r=this._y;this._x=e,this._y=t;for(let n=1;n<=i;n++){const o=s+n/i*(e-s),a=r+n/i*(t-r);await this._raw.move(o,a,this._lastButton,this._buttons,this._keyboard._modifiers()),await this._page._doSlowMo()}}async down(e={}){const{button:t="left",clickCount:n=1}=e;this._lastButton=t,this._buttons.add(t),await this._raw.down(this._x,this._y,this._lastButton,this._buttons,this._keyboard._modifiers(),n),await this._page._doSlowMo()}async up(e={}){const{button:t="left",clickCount:n=1}=e;this._lastButton="none",this._buttons.delete(t),await this._raw.up(this._x,this._y,t,this._buttons,this._keyboard._modifiers(),n),await this._page._doSlowMo()}async click(e,t,n={}){const{delay:i=null,clickCount:s=1}=n;if(i){this.move(e,t);for(let e=1;e<=s;++e)await this.down({...n,clickCount:e}),await new Promise(e=>setTimeout(e,i)),await this.up({...n,clickCount:e}),e<s&&await new Promise(e=>setTimeout(e,i))}else{const i=[];i.push(this.move(e,t));for(let e=1;e<=s;++e)i.push(this.down({...n,clickCount:e})),i.push(this.up({...n,clickCount:e}));await Promise.all(i)}}async dblclick(e,t,n={}){await this.click(e,t,{...n,clickCount:2})}};const o=new Map([["ShiftLeft",["Shift"]],["ControlLeft",["Control"]],["AltLeft",["Alt"]],["MetaLeft",["Meta"]],["Enter",["\n","\r"]]]),a=function(e){const t=new Map;for(const n in e){const s=e[n],r={key:s.key||"",keyCode:s.keyCode||0,keyCodeWithoutLocation:s.keyCodeWithoutLocation||s.keyCode||0,code:n,text:s.text||"",location:s.location||0};let a;if(1===s.key.length&&(r.text=r.key),s.shiftKey&&(i.assert(1===s.shiftKey.length),a={...r},a.key=s.shiftKey,a.text=s.shiftKey,s.shiftKeyCode&&(a.keyCode=s.shiftKeyCode)),t.set(n,{...r,shifted:a}),o.has(n))for(const e of o.get(n))t.set(e,r);s.location||(1===r.key.length&&t.set(r.key,r),a&&t.set(a.key,{...a,shifted:void 0}))}return t}(s.USKeyboardLayout);t.Touchscreen=class{constructor(e,t){this._raw=e,this._page=t}async tap(e,t){if(!this._page._browserContext._options.hasTouch)throw new Error("hasTouch must be enabled on the browser context before using the touchscreen.");await this._raw.tap(e,t,this._page.keyboard._modifiers()),await this._page._doSlowMo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serverSelectors=t.Selectors=void 0;const i=n(463);class s{constructor(){this._builtinEngines=new Set(["css","css:light","xpath","xpath:light","text","text:light","id","id:light","data-testid","data-testid:light","data-test-id","data-test-id:light","data-test","data-test:light"]),this._engines=new Map}async register(e,t,n=!1){if(!e.match(/^[a-zA-Z_0-9-]+$/))throw new Error("Selector engine name may only contain [a-zA-Z0-9_] characters");if(this._builtinEngines.has(e)||"zs"===e||"zs:light"===e)throw new Error(`"${e}" is a predefined selector engine`);if(this._engines.has(e))throw new Error(`"${e}" selector engine has been already registered`);this._engines.set(e,{source:t,contentScript:n})}async _query(e,t,n){const i=this._parseSelector(t),s=await e._context(i.world),r=await s.injectedScript(),o=await r.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelector(t,n||document),{parsed:i.parsed,scope:n}),a=o.asElement();if(!a)return o.dispose(),null;const l=await e._mainContext();return this._adoptIfNeeded(a,l)}async _queryArray(e,t,n){const i=this._parseSelector(t),s=await e._mainContext(),r=await s.injectedScript();return await r.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelectorAll(t,n||document),{parsed:i.parsed,scope:n})}async _queryAll(e,t,n,i){const s=this._parseSelector(t),r=await e._context(s.world),o=await r.injectedScript(),a=await o.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelectorAll(t,n||document),{parsed:s.parsed,scope:n}),l=await a.getProperties();a.dispose();const c=i?await e._mainContext():r,d=[];for(const e of l.values()){const t=e.asElement();t?d.push(this._adoptIfNeeded(t,c)):e.dispose()}return Promise.all(d)}async _adoptIfNeeded(e,t){if(e._context===t)return e;const n=e._page._delegate.adoptElementHandle(e,t);return e.dispose(),n}async _createSelector(e,t){const n=await t._page.mainFrame()._mainContext();return(await n.injectedScript()).evaluate((e,{target:t,name:n})=>e.engines.get(n).create(document.documentElement,t),{target:t,name:e})}_parseSelector(e){const t=i.parseSelector(e);for(const{name:n}of t.parts)if(!this._builtinEngines.has(n)&&!this._engines.has(n))throw new Error(`Unknown engine "${n}" while parsing selector ${e}`);const n=t.parts.some(({name:e})=>{const t=this._engines.get(e);return!!t&&!t.contentScript});return{parsed:t,selector:e,world:n?"main":"utility"}}}t.Selectors=s,t.serverSelectors=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRExecutionContext=void 0;const i=n(127),s=n(56),r=n(70),o=n(25),a=n(126);function l(e){if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed")||e.message.endsWith("Execution context was destroyed."))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&o.rewriteErrorMessage(e,e.message+" Are you passing a nested JSHandle?"),e}t.CRExecutionContext=class{constructor(e,t){this._client=e,this._contextId=t.id}async rawEvaluate(e){const{exceptionDetails:t,result:n}=await this._client.send("Runtime.evaluate",{expression:r.ensureSourceUrl(e),contextId:this._contextId}).catch(l);if(t)throw new Error("Evaluation failed: "+i.getExceptionMessage(t));return n.objectId}async evaluateWithArguments(e,t,n,s,r){const{exceptionDetails:o,result:c}=await this._client.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:n._objectId,arguments:[{objectId:n._objectId},...s.map(e=>({value:e})),...r.map(e=>({objectId:e}))],returnByValue:t,awaitPromise:!0,userGesture:!0}).catch(l);if(o)throw new Error("Evaluation failed: "+i.getExceptionMessage(o));return t?a.parseEvaluationResultValue(c.value):n._context.createHandle(c)}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._client.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),i=new Map;for(const t of n.result)t.enumerable&&t.value&&i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){return new s.JSHandle(e,t.subtype||t.type,t.objectId,function(e){const t=e.value,n=e.unserializableValue;return n?s.parseUnserializableValue(n):t}(t))}async releaseHandle(e){e._objectId&&await i.releaseObject(this._client,e._objectId)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;const i=n(4),s=n(32);t.Dialog=class{constructor(e,t,n,i){this._handled=!1,this._type=e,this._message=t,this._onHandle=n,this._defaultValue=i||"",s.debugLogger.log("api",`  ${this._preview()} was shown`)}type(){return this._type}message(){return this._message}defaultValue(){return this._defaultValue}async accept(e){i.assert(!this._handled,"Cannot accept dialog which is already handled!"),this._handled=!0,s.debugLogger.log("api",`  ${this._preview()} was accepted`),await this._onHandle(!0,e)}async dismiss(){i.assert(!this._handled,"Cannot dismiss dialog which is already handled!"),this._handled=!0,s.debugLogger.log("api",`  ${this._preview()} was dismissed`),await this._onHandle(!1)}_preview(){return this._message?this._message.length<=50?`${this._type} "${this._message}"`:`${this._type} "${this._message.substring(0,49)+""}"`:this._type}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envArrayToObject=t.launchProcess=t.gracefullyCloseAll=void 0;const i=n(35),s=n(65),r=n(258),o=n(16),a=n(4),l=new Set;t.gracefullyCloseAll=async function(){await Promise.all(Array.from(l).map(e=>e().catch(e=>{})))};const c=process.getMaxListeners();0!==c&&process.setMaxListeners(Math.max(c||0,100)),t.launchProcess=async function(e){const t=()=>o.helper.removeFolders(e.tempDirectories),n=e.progress,c="pipe"===e.stdio?["ignore","pipe","pipe","pipe","pipe"]:["pipe","pipe","pipe"];n.log(`<launching> ${e.executablePath} ${e.args.join(" ")}`);const d=i.spawn(e.executablePath,e.args,{detached:"win32"!==process.platform,env:e.env,cwd:e.cwd,stdio:c});if(d.on("error",()=>{}),!d.pid){let e;const n=new Promise((t,n)=>e=t);return d.once("error",t=>{e(new Error("Failed to launch browser: "+t))}),t().then(()=>n).then(e=>Promise.reject(e))}n.log("<launched> pid="+d.pid),s.createInterface({input:d.stdout}).on("line",e=>{n.log("[out] "+e)}),s.createInterface({input:d.stderr}).on("line",e=>{n.log("[err] "+e)});let h=!1,u=()=>{};const p=new Promise(e=>u=e);let f=()=>{};const m=new Promise(e=>f=e);d.once("exit",(i,s)=>{n.log(`<process did exit: exitCode=${i}, signal=${s}>`),h=!0,o.helper.removeEventListeners(_),l.delete(w),e.onExit(i,s),u(),t().then(f)});const _=[o.helper.addEventListener(process,"exit",b)];e.handleSIGINT&&_.push(o.helper.addEventListener(process,"SIGINT",()=>{w().then(()=>{a.isUnderTest()?setTimeout(()=>process.exit(130),0):process.exit(130)})})),e.handleSIGTERM&&_.push(o.helper.addEventListener(process,"SIGTERM",w)),e.handleSIGHUP&&_.push(o.helper.addEventListener(process,"SIGHUP",w)),l.add(w);let g=!1;async function w(){if(l.delete(w),g)return n.log("<forecefully close>"),b(),void await p;g=!0,n.log("<gracefully close start>"),await e.attemptToGracefullyClose().catch(()=>b()),await m,n.log("<gracefully close end>")}function b(){if(n.log("<kill>"),o.helper.removeEventListeners(_),d.pid&&!d.killed&&!h)try{"win32"===process.platform?i.execSync(`taskkill /pid ${d.pid} /T /F`):process.kill(-d.pid,"SIGKILL")}catch(e){}try{for(const t of e.tempDirectories)r.sync(t)}catch(e){}}return{launchedProcess:d,gracefullyClose:w,kill:function(){return b(),m}}},t.envArrayToObject=function(e){const t={};for(const{name:n,value:i}of e)t[n]=i;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFSession=t.FFSessionEvents=t.FFConnection=t.kBrowserCloseMessageId=t.ConnectionEvents=void 0;const i=n(5),s=n(4),r=n(25),o=n(32);t.ConnectionEvents={Disconnected:Symbol("Disconnected")},t.kBrowserCloseMessageId=-9999;class a extends i.EventEmitter{constructor(e){super(),this._transport=e,this._lastId=0,this._callbacks=new Map,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._sessions=new Map,this._closed=!1,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){const n=this.nextMessageId();return this._rawSend({id:n,method:e,params:t}),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}nextMessageId(){return++this._lastId}_rawSend(e){o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol","SEND  "+JSON.stringify(e)),this._transport.send(e)}async _onMessage(e){if(o.debugLogger.isEnabled("protocol")&&o.debugLogger.log("protocol"," RECV "+JSON.stringify(e)),e.id!==t.kBrowserCloseMessageId)if(e.sessionId){const t=this._sessions.get(e.sessionId);t&&t.dispatchMessage(e)}else if(e.id){const t=this._callbacks.get(e.id);t&&(this._callbacks.delete(e.id),e.error?t.reject(c(t.error,t.method,e.error)):t.resolve(e.result))}else Promise.resolve().then(()=>this.emit(e.method,e.params))}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;for(const e of this._callbacks.values())e.reject(r.rewriteErrorMessage(e.error,`Protocol error (${e.method}): Target closed.`));this._callbacks.clear();for(const e of this._sessions.values())e.dispose();this._sessions.clear(),Promise.resolve().then(()=>this.emit(t.ConnectionEvents.Disconnected))}close(){this._closed||this._transport.close()}createSession(e,t){const n=new l(this,t,e,t=>this._rawSend({...t,sessionId:e}));return this._sessions.set(e,n),n}}t.FFConnection=a,t.FFSessionEvents={Disconnected:Symbol("Disconnected")};class l extends i.EventEmitter{constructor(e,t,n,i){super(),this._disposed=!1,this._crashed=!1,this._callbacks=new Map,this._connection=e,this._targetType=t,this._sessionId=n,this._rawSend=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Error("Page crashed");if(this._disposed)throw new Error(`Protocol error (${e}): Session closed. Most likely the ${this._targetType} has been closed.`);const n=this._connection.nextMessageId();return this._rawSend({method:e,params:t,id:n}),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(c(t.error,t.method,e.error)):t.resolve(e.result)}else s.assert(!e.id),Promise.resolve().then(()=>this.emit(e.method,e.params))}dispose(){for(const e of this._callbacks.values())e.reject(r.rewriteErrorMessage(e.error,`Protocol error (${e.method}): Target closed.`));this._callbacks.clear(),this._disposed=!0,this._connection._sessions.delete(this._sessionId),Promise.resolve().then(()=>this.emit(t.FFSessionEvents.Disconnected))}}function c(e,t,n){let i=`Protocol error (${t}): ${n.message}`;return"data"in n&&(i+=" "+n.data),r.rewriteErrorMessage(e,i)}t.FFSession=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tEnum=t.tObject=t.tArray=t.tOptional=t.tAny=t.tUndefined=t.tBinary=t.tString=t.tBoolean=t.tNumber=t.ValidationError=void 0;const i=n(4);class s extends Error{}t.ValidationError=s,t.tNumber=(e,t)=>{if(e instanceof Number)return e.valueOf();if("number"==typeof e)return e;throw new s(`${t}: expected number, got ${typeof e}`)},t.tBoolean=(e,t)=>{if(e instanceof Boolean)return e.valueOf();if("boolean"==typeof e)return e;throw new s(`${t}: expected boolean, got ${typeof e}`)},t.tString=(e,t)=>{if(e instanceof String)return e.valueOf();if("string"==typeof e)return e;throw new s(`${t}: expected string, got ${typeof e}`)},t.tBinary=(e,t)=>{if(e instanceof String)return e.valueOf();if("string"==typeof e)return e;throw new s(`${t}: expected base64-encoded buffer, got ${typeof e}`)},t.tUndefined=(e,t)=>{if(Object.is(e,void 0))return e;throw new s(`${t}: expected undefined, got ${typeof e}`)},t.tAny=(e,t)=>e,t.tOptional=e=>(t,n)=>Object.is(t,void 0)?t:e(t,n),t.tArray=e=>(t,n)=>{if(!Array.isArray(t))throw new s(`${n}: expected array, got ${typeof t}`);return t.map((t,i)=>e(t,n+"["+i+"]"))},t.tObject=e=>(t,n)=>{if(Object.is(t,null))throw new s(n+": expected object, got null");if("object"!=typeof t)throw new s(`${n}: expected object, got ${typeof t}`);const r={};for(const[i,s]of Object.entries(e)){const e=s(t[i],n?n+"."+i:i);Object.is(e,void 0)||(r[i]=e)}if(i.isUnderTest())for(const[e,n]of Object.entries(t))e.startsWith("__testHook")&&(r[e]=n);return r},t.tEnum=e=>(t,n)=>{if(!e.includes(t))throw new s(`${n}: expected one of (${e.join("|")})`);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserContextDispatcher=void 0;const i=n(20),s=n(12),r=n(500),o=n(195),a=n(123),l=n(277);class c extends s.Dispatcher{constructor(e,t){super(e,t,"BrowserContext",{browserName:t._browser._options.name},!0),this._context=t;for(const e of t.pages())this._dispatchEvent("page",{page:new r.PageDispatcher(this._scope,e)});if(t.on(i.BrowserContext.Events.Page,e=>this._dispatchEvent("page",{page:new r.PageDispatcher(this._scope,e)})),t.on(i.BrowserContext.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),"chromium"===t._browser._options.name){for(const e of t.backgroundPages())this._dispatchEvent("crBackgroundPage",{page:new r.PageDispatcher(this._scope,e)});t.on(a.CRBrowserContext.CREvents.BackgroundPage,e=>this._dispatchEvent("crBackgroundPage",{page:new r.PageDispatcher(this._scope,e)}));for(const e of t.serviceWorkers())this._dispatchEvent("crServiceWorker",new r.WorkerDispatcher(this._scope,e));t.on(a.CRBrowserContext.CREvents.ServiceWorker,e=>this._dispatchEvent("crServiceWorker",{worker:new r.WorkerDispatcher(this._scope,e)}))}}async setDefaultNavigationTimeoutNoReply(e){this._context.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e){this._context.setDefaultTimeout(e.timeout)}async exposeBinding(e){await this._context.exposeBinding(e.name,!!e.needsHandle,(t,...n)=>{const i=new r.BindingCallDispatcher(this._scope,e.name,!!e.needsHandle,t,n);return this._dispatchEvent("bindingCall",{binding:i}),i.promise()})}async newPage(){return{page:s.lookupDispatcher(await this._context.newPage())}}async cookies(e){return{cookies:await this._context.cookies(e.urls)}}async addCookies(e){await this._context.addCookies(e.cookies)}async clearCookies(){await this._context.clearCookies()}async grantPermissions(e){await this._context.grantPermissions(e.permissions,e.origin)}async clearPermissions(){await this._context.clearPermissions()}async setGeolocation(e){await this._context.setGeolocation(e.geolocation)}async setExtraHTTPHeaders(e){await this._context.setExtraHTTPHeaders(e.headers)}async setOffline(e){await this._context.setOffline(e.offline)}async setHTTPCredentials(e){await this._context.setHTTPCredentials(e.httpCredentials)}async addInitScript(e){await this._context._doAddInitScript(e.source)}async setNetworkInterceptionEnabled(e){e.enabled?this._context._setRequestInterceptor((e,t)=>{this._dispatchEvent("route",{route:new o.RouteDispatcher(this._scope,e),request:o.RequestDispatcher.from(this._scope,t)})}):await this._context._setRequestInterceptor(void 0)}async close(){await this._context.close()}async crNewCDPSession(e){if("chromium"!==this._object._browser._options.name)throw new Error("CDP session is only available in Chromium");const t=this._object;return{session:new l.CDPSessionDispatcher(this._scope,await t.newCDPSession(e.page._object))}}}t.BrowserContextDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketDispatcher=t.RouteDispatcher=t.ResponseDispatcher=t.RequestDispatcher=void 0;const i=n(31),s=n(12),r=n(276);class o extends s.Dispatcher{static from(e,t){return s.existingDispatcher(t)||new o(e,t)}static fromNullable(e,t){return t?o.from(e,t):void 0}constructor(e,t){const n=t.postDataBuffer();super(e,t,"Request",{frame:r.FrameDispatcher.from(e,t.frame()),url:t.url(),resourceType:t.resourceType(),method:t.method(),postData:null===n?void 0:n.toString("base64"),headers:t.headers(),isNavigationRequest:t.isNavigationRequest(),redirectedFrom:o.fromNullable(e,t.redirectedFrom())})}async response(){return{response:s.lookupNullableDispatcher(await this._object.response())}}}t.RequestDispatcher=o;class a extends s.Dispatcher{constructor(e,t){super(e,t,"Response",{request:o.from(e,t.request()),url:t.url(),status:t.status(),statusText:t.statusText(),requestHeaders:t.request().headers(),headers:t.headers(),timing:t.timing()})}async finished(){return await this._object._finishedPromise}async body(){return{binary:(await this._object.body()).toString("base64")}}}t.ResponseDispatcher=a;class l extends s.Dispatcher{constructor(e,t){super(e,t,"Route",{request:o.from(e,t.request())})}async continue(e){await this._object.continue({method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData,"base64"):void 0})}async fulfill(e){await this._object.fulfill(e)}async abort(e){await this._object.abort(e.errorCode||"failed")}}t.RouteDispatcher=l;class c extends s.Dispatcher{constructor(e,t){super(e,t,"WebSocket",{url:t.url()}),t.on(i.WebSocket.Events.FrameSent,e=>this._dispatchEvent("frameSent",e)),t.on(i.WebSocket.Events.FrameReceived,e=>this._dispatchEvent("frameReceived",e)),t.on(i.WebSocket.Events.Error,e=>this._dispatchEvent("error",{error:e})),t.on(i.WebSocket.Events.Close,()=>this._dispatchEvent("close",{}))}}t.WebSocketDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;const i=n(6),s=n(18);class r extends s.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}stream(){return new o(this._channel)}}t.Stream=r;class o extends i.Readable{constructor(e){super(),this._channel=e}async _read(e){const t=await this._channel.read({size:e});t.binary?this.push(Buffer.from(t.binary,"base64")):this.push(null)}_destroy(e,t){this._channel.close().catch(e=>null),super._destroy(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineScreenshotType=t.convertInputFiles=t.convertSelectOptionValues=t.ElementHandle=void 0;const i=n(133),s=n(58),r=n(0),o=n(99),a=n(2),l=n(1),c=n(4),d=l.promisify(r.writeFile.bind(r));class h extends s.JSHandle{constructor(e,t,n,i){super(e,t,n,i),this._elementChannel=this._channel}static from(e){return e._object}static fromNullable(e){return e?h.from(e):null}asElement(){return this}async ownerFrame(){return this._wrapApiCall("elementHandle.ownerFrame",async()=>i.Frame.fromNullable((await this._elementChannel.ownerFrame()).frame))}async contentFrame(){return this._wrapApiCall("elementHandle.contentFrame",async()=>i.Frame.fromNullable((await this._elementChannel.contentFrame()).frame))}async getAttribute(e){return this._wrapApiCall("elementHandle.getAttribute",async()=>{const t=(await this._elementChannel.getAttribute({name:e})).value;return void 0===t?null:t})}async textContent(){return this._wrapApiCall("elementHandle.textContent",async()=>{const e=(await this._elementChannel.textContent()).value;return void 0===e?null:e})}async innerText(){return this._wrapApiCall("elementHandle.innerText",async()=>(await this._elementChannel.innerText()).value)}async innerHTML(){return this._wrapApiCall("elementHandle.innerHTML",async()=>(await this._elementChannel.innerHTML()).value)}async dispatchEvent(e,t={}){return this._wrapApiCall("elementHandle.dispatchEvent",async()=>{await this._elementChannel.dispatchEvent({type:e,eventInit:s.serializeArgument(t)})})}async scrollIntoViewIfNeeded(e={}){return this._wrapApiCall("elementHandle.scrollIntoViewIfNeeded",async()=>{await this._elementChannel.scrollIntoViewIfNeeded(e)})}async hover(e={}){return this._wrapApiCall("elementHandle.hover",async()=>{await this._elementChannel.hover(e)})}async click(e={}){return this._wrapApiCall("elementHandle.click",async()=>await this._elementChannel.click(e))}async dblclick(e={}){return this._wrapApiCall("elementHandle.dblclick",async()=>await this._elementChannel.dblclick(e))}async tap(e={}){return this._wrapApiCall("elementHandle.tap",async()=>await this._elementChannel.tap(e))}async selectOption(e,t={}){return this._wrapApiCall("elementHandle.selectOption",async()=>(await this._elementChannel.selectOption({...u(e),...t})).values)}async fill(e,t={}){return this._wrapApiCall("elementHandle.fill",async()=>await this._elementChannel.fill({value:e,...t}))}async selectText(e={}){return this._wrapApiCall("elementHandle.selectText",async()=>{await this._elementChannel.selectText(e)})}async setInputFiles(e,t={}){return this._wrapApiCall("elementHandle.setInputFiles",async()=>{await this._elementChannel.setInputFiles({files:await p(e),...t})})}async focus(){return this._wrapApiCall("elementHandle.focus",async()=>{await this._elementChannel.focus()})}async type(e,t={}){return this._wrapApiCall("elementHandle.type",async()=>{await this._elementChannel.type({text:e,...t})})}async press(e,t={}){return this._wrapApiCall("elementHandle.press",async()=>{await this._elementChannel.press({key:e,...t})})}async check(e={}){return this._wrapApiCall("elementHandle.check",async()=>await this._elementChannel.check(e))}async uncheck(e={}){return this._wrapApiCall("elementHandle.uncheck",async()=>await this._elementChannel.uncheck(e))}async boundingBox(){return this._wrapApiCall("elementHandle.boundingBox",async()=>{const e=(await this._elementChannel.boundingBox()).value;return void 0===e?null:e})}async screenshot(e={}){return this._wrapApiCall("elementHandle.screenshot",async()=>{const t={...e};t.type||(t.type=f(e));const n=await this._elementChannel.screenshot(t),i=Buffer.from(n.binary,"base64");return e.path&&(await c.mkdirIfNeeded(e.path),await d(e.path,i)),i})}async $(e){return this._wrapApiCall("elementHandle.$",async()=>h.fromNullable((await this._elementChannel.querySelector({selector:e})).element))}async $$(e){return this._wrapApiCall("elementHandle.$$",async()=>(await this._elementChannel.querySelectorAll({selector:e})).elements.map(e=>h.from(e)))}async $eval(e,t,n){return this._wrapApiCall("elementHandle.$eval",async()=>{const i=await this._elementChannel.evalOnSelector({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:s.serializeArgument(n)});return s.parseResult(i.value)})}async $$eval(e,t,n){return this._wrapApiCall("elementHandle.$$eval",async()=>{const i=await this._elementChannel.evalOnSelectorAll({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:s.serializeArgument(n)});return s.parseResult(i.value)})}async waitForElementState(e,t={}){return this._wrapApiCall("elementHandle.waitForElementState",async()=>await this._elementChannel.waitForElementState({state:e,...t}))}async waitForSelector(e,t={}){return this._wrapApiCall("elementHandle.waitForSelector",async()=>{const n=await this._elementChannel.waitForSelector({selector:e,...t});return h.fromNullable(n.element)})}async _createSelectorForTest(e){return(await this._elementChannel.createSelectorForTest({name:e})).value}}function u(e){if(null===e)return{};if(Array.isArray(e)||(e=[e]),!e.length)return{};for(let t=0;t<e.length;t++)c.assert(null!==e[t],`options[${t}]: expected object, got null`);return e[0]instanceof h?{elements:e.map(e=>e._elementChannel)}:c.isString(e[0])?{options:e.map(e=>({value:e}))}:{options:e}}async function p(e){const t=Array.isArray(e)?e:[e];return await Promise.all(t.map(async e=>"string"==typeof e?{name:a.basename(e),mimeType:o.getType(e)||"application/octet-stream",buffer:(await l.promisify(r.readFile)(e)).toString("base64")}:{name:e.name,mimeType:e.mimeType,buffer:e.buffer.toString("base64")}))}function f(e){if(e.path){const t=o.getType(e.path);if("image/png"===t)return"png";if("image/jpeg"===t)return"jpeg";throw new Error(`path: unsupported mime type "${t}"`)}return e.type}t.ElementHandle=h,t.convertSelectOptionValues=u,t.convertInputFiles=p,t.determineScreenshotType=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=void 0;const i=n(41),s=n(18),r=n(58);class o extends s.ChannelOwner{constructor(e,t,n,s){super(e,t,n,s),this._channel.on("close",()=>{this._page&&this._page._workers.delete(this),this._context&&this._context._serviceWorkers.delete(this),this.emit(i.Events.Worker.Close,this)})}static from(e){return e._object}url(){return this._initializer.url}async evaluate(e,t){r.assertMaxArguments(arguments.length,2);const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:r.serializeArgument(t)});return r.parseResult(n.value)}async evaluateHandle(e,t){r.assertMaxArguments(arguments.length,2);const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:r.serializeArgument(t)});return r.JSHandle.from(n.handle)}}t.Worker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedSelectors=t.SelectorsOwner=t.Selectors=void 0;const i=n(59),s=n(18);class r{constructor(){this._channels=new Set,this._registrations=[]}async register(e,t,n={}){const s={...n,name:e,source:await i.evaluationScript(t,void 0,!1)};for(const e of this._channels)await e._channel.register(s);this._registrations.push(s)}_addChannel(e){this._channels.add(e);for(const t of this._registrations)e._channel.register(t).catch(e=>{})}_removeChannel(e){this._channels.delete(e)}}t.Selectors=r;class o extends s.ChannelOwner{static from(e){return e._object}}t.SelectorsOwner=o,t.sharedSelectors=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDPSession=void 0;const i=n(18);class s extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._channel.on("event",({method:e,params:t})=>{this.emit(e,t)}),this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}static from(e){return e._object}async send(e,t){return this._wrapApiCall("cdpSession.send",async()=>(await this._channel.send({method:e,params:t})).result)}async detach(){return this._wrapApiCall("cdpSession.detach",async()=>this._channel.detach())}}t.CDPSession=s},function(e,t,n){"use strict";var i=n(74).codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}e.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);n||(n={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];e.apply(this,i)}}}(r||s);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){a=!1,c=!0,o||r.call(t)},h=t._readableState&&t._readableState.endEmitted,u=function(){o=!1,h=!0,a||r.call(t)},p=function(e){r.call(t,e)},f=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new i),r.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new i),r.call(t,e)):void 0},m=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",d),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",u),t.on("finish",d),!1!==n.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",d),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",u),t.removeListener("error",p),t.removeListener("close",f)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){const i=n(23),s=n(2),r=n(0);let o=void 0;try{o=n(62)}catch(e){}const a={nosort:!0,silent:!0};let l=0;const c="win32"===process.platform,d=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===o)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},h=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof n,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),d(t);let s=0,r=null,a=0;const c=(e,i)=>e?n(e):(a=i.length,0===a?n():void i.forEach(e=>{const i=o=>{if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&s<t.maxBusyTries)return s++,setTimeout(()=>u(e,t,i),100*s);if("EMFILE"===o.code&&l<t.emfileWait)return setTimeout(()=>u(e,t,i),l++);"ENOENT"===o.code&&(o=null)}l=0,(e=>{r=r||e,0==--a&&n(r)})(o)};u(e,t,i)}));if(t.disableGlob||!o.hasMagic(e))return c(null,[e]);t.lstat(e,(n,i)=>{if(!n)return c(null,[e]);o(e,t.glob,c)})},u=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.lstat(e,(i,s)=>i&&"ENOENT"===i.code?n(null):(i&&"EPERM"===i.code&&c&&p(e,t,i,n),s&&s.isDirectory()?m(e,t,i,n):void t.unlink(e,i=>{if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return c?p(e,t,i,n):m(e,t,i,n);if("EISDIR"===i.code)return m(e,t,i,n)}return n(i)})))},p=(e,t,n,s)=>{i(e),i(t),i("function"==typeof s),t.chmod(e,438,i=>{i?s("ENOENT"===i.code?null:n):t.stat(e,(i,r)=>{i?s("ENOENT"===i.code?null:n):r.isDirectory()?m(e,t,n,s):t.unlink(e,s)})})},f=(e,t,n)=>{i(e),i(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}let s;try{s=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}s.isDirectory()?w(e,t,n):t.unlinkSync(e)},m=(e,t,n,s)=>{i(e),i(t),i("function"==typeof s),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?s(n):s(i):_(e,t,s)})},_=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.readdir(e,(i,r)=>{if(i)return n(i);let o,a=r.length;if(0===a)return t.rmdir(e,n);r.forEach(i=>{h(s.join(e,i),t,i=>{if(!o)return i?n(o=i):void(0==--a&&t.rmdir(e,n))})})})},g=(e,t)=>{let n;if(d(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!o.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(i){n=o.sync(e,t.glob)}if(n.length)for(let e=0;e<n.length;e++){const i=n[e];let s;try{s=t.lstatSync(i)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&c&&f(i,t,e)}try{s&&s.isDirectory()?w(i,t,null):t.unlinkSync(i)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return c?f(i,t,e):w(i,t,e);if("EISDIR"!==e.code)throw e;w(i,t,e)}}},w=(e,t,n)=>{i(e),i(t);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw n;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||b(e,t)}},b=(e,t)=>{i(e),i(t),t.readdirSync(e).forEach(n=>g(s.join(e,n),t));const n=c?100:1;let r=0;for(;;){let i=!0;try{const s=t.rmdirSync(e,t);return i=!1,s}finally{if(++r<n&&i)continue}}};e.exports=h,h.sync=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=t.FrameManager=void 0;const i=n(125),s=n(16),r=n(31),o=n(17),a=n(260),l=n(44),c=n(5),d=n(4),h=n(32);t.FrameManager=class{constructor(e){this._frames=new Map,this._consoleMessageTags=new Map,this._signalBarriers=new Set,this._webSockets=new Map,this._page=e,this._mainFrame=void 0}dispose(){for(const e of this._frames.values())e._stopNetworkIdleTimer()}mainFrame(){return this._mainFrame}frames(){const e=[];return function t(n){e.push(n);for(const e of n.childFrames())t(e)}(this._mainFrame),e}frame(e){return this._frames.get(e)||null}frameAttached(e,t){const n=t?this._frames.get(t):null;if(n){d.assert(!this._frames.has(e));const t=new u(this._page,e,n);return this._frames.set(e,t),this._page.emit(o.Page.Events.FrameAttached,t),t}return this._mainFrame?(this._frames.delete(this._mainFrame._id),this._mainFrame._id=e):(d.assert(!this._frames.has(e)),this._mainFrame=new u(this._page,e,n)),this._frames.set(e,this._mainFrame),this._mainFrame}async waitForSignalsCreatedBy(e,t,n,i){if(t)return n();const s=new f(e);this._signalBarriers.add(s),e&&e.cleanupWhenAborted(()=>this._signalBarriers.delete(s));const r=await n();return"input"===i&&await this._page._delegate.inputActionEpilogue(),await s.waitFor(),this._signalBarriers.delete(s),await new Promise(d.makeWaitForNextTask()),r}frameWillPotentiallyRequestNavigation(){for(const e of this._signalBarriers)e.retain()}frameDidPotentiallyRequestNavigation(){for(const e of this._signalBarriers)e.release()}frameRequestedNavigation(e,t){const n=this._frames.get(e);if(n){for(const e of this._signalBarriers)e.addFrameNavigation(n);n._pendingDocument&&n._pendingDocument.documentId===t||(n._pendingDocument={documentId:t,request:void 0})}}frameCommittedNewDocumentNavigation(e,t,n,i,s){const r=this._frames.get(e);let a;this.removeChildFramesRecursively(r),this.clearWebSockets(r),r._url=t,r._name=n,r._pendingDocument?(void 0===r._pendingDocument.documentId&&(r._pendingDocument.documentId=i),r._pendingDocument.documentId===i?r._currentDocument=r._pendingDocument:(a=r._pendingDocument,r._currentDocument={documentId:i,request:void 0}),r._pendingDocument=void 0):r._currentDocument={documentId:i,request:void 0},r._onClearLifecycle();const l={url:t,name:n,newDocument:r._currentDocument};r.emit(u.Events.Navigation,l),s||(h.debugLogger.log("api",`  navigated to "${t}"`),this._page.emit(o.Page.Events.FrameNavigated,r)),r._pendingDocument=a}frameCommittedSameDocumentNavigation(e,t){const n=this._frames.get(e);if(!n)return;n._url=t;const i={url:t,name:n._name};n.emit(u.Events.Navigation,i),h.debugLogger.log("api",`  navigated to "${t}"`),this._page.emit(o.Page.Events.FrameNavigated,n)}frameAbortedNavigation(e,t,n){const i=this._frames.get(e);if(!i||!i._pendingDocument)return;if(void 0!==n&&i._pendingDocument.documentId!==n)return;const s={url:i._url,name:i._name,newDocument:i._pendingDocument,error:new Error(t)};i._pendingDocument=void 0,i.emit(u.Events.Navigation,s)}frameDetached(e){const t=this._frames.get(e);t&&this._removeFramesRecursively(t)}frameStoppedLoading(e){this.frameLifecycleEvent(e,"domcontentloaded"),this.frameLifecycleEvent(e,"load")}frameLifecycleEvent(e,t){const n=this._frames.get(e);n&&n._onLifecycleEvent(t)}requestStarted(e){const t=e.frame();if(this._inflightRequestStarted(e),e._documentId&&(t._pendingDocument={documentId:e._documentId,request:e}),e._isFavicon){const t=e._route();t&&t.continue()}else this._page._requestStarted(e)}requestReceivedResponse(e){e.request()._isFavicon||this._page.emit(o.Page.Events.Response,e)}requestFinished(e){this._inflightRequestFinished(e),e._isFavicon||this._page.emit(o.Page.Events.RequestFinished,e)}requestFailed(e,t){const n=e.frame();if(this._inflightRequestFinished(e),n._pendingDocument&&n._pendingDocument.request===e){let i=e.failure().errorText;t&&(i+="; maybe frame was detached?"),this.frameAbortedNavigation(n._id,i,n._pendingDocument.documentId)}e._isFavicon||this._page.emit(o.Page.Events.RequestFailed,e)}removeChildFramesRecursively(e){for(const t of e.childFrames())this._removeFramesRecursively(t)}_removeFramesRecursively(e){this.removeChildFramesRecursively(e),e._onDetached(),this._frames.delete(e._id),this._page.isClosed()||this._page.emit(o.Page.Events.FrameDetached,e)}_inflightRequestFinished(e){const t=e.frame();e._isFavicon||t._inflightRequests.has(e)&&(t._inflightRequests.delete(e),0===t._inflightRequests.size&&t._startNetworkIdleTimer())}_inflightRequestStarted(e){const t=e.frame();e._isFavicon||(t._inflightRequests.add(e),1===t._inflightRequests.size&&t._stopNetworkIdleTimer())}interceptConsoleMessage(e){if("debug"!==e.type())return!1;const t=e.text(),n=this._consoleMessageTags.get(t);return!!n&&(this._consoleMessageTags.delete(t),n(),!0)}clearWebSockets(e){e.parentFrame()||this._webSockets.clear()}onWebSocketCreated(e,t){const n=new r.WebSocket(t);this._webSockets.set(e,n)}onWebSocketRequest(e){const t=this._webSockets.get(e);t&&this._page.emit(o.Page.Events.WebSocket,t)}onWebSocketResponse(e,t,n){const i=this._webSockets.get(e);t<400||i&&i.error(`${n}: ${t}`)}onWebSocketFrameSent(e,t,n){if(!this._page._webSocketFramesReportingEnabled)return;const i=this._webSockets.get(e);i&&i.frameSent(t,n)}webSocketFrameReceived(e,t,n){if(!this._page._webSocketFramesReportingEnabled)return;const i=this._webSockets.get(e);i&&i.frameReceived(t,n)}webSocketClosed(e){const t=this._webSockets.get(e);t&&t.closed(),this._webSockets.delete(e)}webSocketError(e,t){const n=this._webSockets.get(e);n&&n.error(t)}};class u extends c.EventEmitter{constructor(e,t,n){super(),this._firedLifecycleEvents=new Set,this._subtreeLifecycleEvents=new Set,this._url="",this._detached=!1,this._contextData=new Map,this._childFrames=new Set,this._name="",this._inflightRequests=new Set,this._setContentCounter=0,this._detachedCallback=()=>{},this.setMaxListeners(0),this._id=t,this._page=e,this._parentFrame=n,this._currentDocument={documentId:void 0,request:void 0},this._detachedPromise=new Promise(e=>this._detachedCallback=e),this._contextData.set("main",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._contextData.set("utility",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._setContext("main",null),this._setContext("utility",null),this._parentFrame&&this._parentFrame._childFrames.add(this)}_onLifecycleEvent(e){this._firedLifecycleEvents.has(e)||(this._firedLifecycleEvents.add(e),this._page.mainFrame()._recalculateLifecycle())}_onClearLifecycle(){this._firedLifecycleEvents.clear(),this._page.mainFrame()._recalculateLifecycle(),this._inflightRequests=new Set(Array.from(this._inflightRequests).filter(e=>e===this._currentDocument.request)),this._stopNetworkIdleTimer(),0===this._inflightRequests.size&&this._startNetworkIdleTimer()}_recalculateLifecycle(){const e=new Set(this._firedLifecycleEvents);for(const t of this._childFrames){t._recalculateLifecycle();for(const n of e)t._subtreeLifecycleEvents.has(n)||e.delete(n)}const t=this._page.mainFrame();for(const n of e)this._subtreeLifecycleEvents.has(n)||(this.emit(u.Events.AddLifecycle,n),this===t&&"about:blank"!==this._url&&h.debugLogger.log("api",`  "${n}" event fired`),this===t&&"load"===n&&this._page.emit(o.Page.Events.Load),this===t&&"domcontentloaded"===n&&this._page.emit(o.Page.Events.DOMContentLoaded));for(const t of this._subtreeLifecycleEvents)e.has(t)||this.emit(u.Events.RemoveLifecycle,t);this._subtreeLifecycleEvents=e}setupNavigationProgressController(e){this._page._disconnectedPromise.then(()=>e.abort(new Error("Navigation failed because page was closed!"))),this._page._crashedPromise.then(()=>e.abort(new Error("Navigation failed because page crashed!"))),this._detachedPromise.then(()=>e.abort(new Error("Navigating frame was detached!")))}async goto(e,t,n={}){return this.setupNavigationProgressController(e),e.run(async e=>{const i=m("waitUntil",void 0===n.waitUntil?"load":n.waitUntil);e.log(`navigating to "${t}", waiting until "${i}"`);const r=(this._page._state.extraHTTPHeaders||[]).find(e=>"referer"===e.name.toLowerCase());let o=r?r.value:void 0;if(void 0!==n.referer){if(void 0!==o&&o!==n.referer)throw new Error('"referer" is already specified as extra HTTP header');o=n.referer}t=s.helper.completeUserURL(t);const a=s.helper.waitForEvent(e,this,u.Events.Navigation,e=>!e.newDocument),l=await this._page._delegate.navigateFrame(this,t,o);let c;if(l.newDocumentId){if(a.dispose(),c=await s.helper.waitForEvent(e,this,u.Events.Navigation,e=>e.newDocument&&(e.newDocument.documentId===l.newDocumentId||!e.error)).promise,c.newDocument.documentId!==l.newDocumentId)throw new Error("Navigation interrupted by another one");if(c.error)throw c.error}else c=await a.promise;this._subtreeLifecycleEvents.has(i)||await s.helper.waitForEvent(e,this,u.Events.AddLifecycle,e=>e===i).promise;const d=c.newDocument?c.newDocument.request:void 0,h=d?d._finalRequest().response():null;return await this._page._doSlowMo(),h},this._page._timeoutSettings.navigationTimeout(n))}async _waitForNavigation(e,t){const n=m("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);e.log(`waiting for navigation until "${n}"`);const i=await s.helper.waitForEvent(e,this,u.Events.Navigation,t=>(t.error||e.log(`  navigated to "${this._url}"`),!0)).promise;if(i.error)throw i.error;this._subtreeLifecycleEvents.has(n)||await s.helper.waitForEvent(e,this,u.Events.AddLifecycle,e=>e===n).promise;const r=i.newDocument?i.newDocument.request:void 0;return r?r._finalRequest().response():null}async _waitForLoadState(e,t){const n=m("state",t);this._subtreeLifecycleEvents.has(n)||await s.helper.waitForEvent(e,this,u.Events.AddLifecycle,e=>e===n).promise}async frameElement(){return this._page._delegate.getFrameElement(this)}_context(e){if(this._detached)throw new Error(`Execution Context is not available in detached frame "${this.url()}" (are you trying to evaluate?)`);return this._contextData.get(e).contextPromise}_mainContext(){return this._context("main")}_utilityContext(){return this._context("utility")}async _evaluateExpressionHandle(e,t,n,i="main"){const s=await this._context(i),r=await s.evaluateExpressionHandleInternal(e,t,n);return"main"===i&&await this._page._doSlowMo(),r}async _evaluateExpression(e,t,n,i="main"){const s=await this._context(i),r=await s.evaluateExpressionInternal(e,t,n);return"main"===i&&await this._page._doSlowMo(),r}async $(e){return this._page.selectors._query(this,e)}async waitForSelector(e,t={}){if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&"visible"!==t.waitFor)throw new Error("options.waitFor is not supported, did you mean options.state?");const{state:n="visible"}=t;if(!["attached","detached","visible","hidden"].includes(n))throw new Error("state: expected one of (attached|detached|visible|hidden)");const s=this._page.selectors._parseSelector(e),r=i.waitForSelectorTask(s,n);return l.runAbortableTask(async t=>{t.log(`waiting for selector "${e}"${"attached"===n?"":" to be "+n}`);const i=await this._scheduleRerunnableHandleTask(t,s.world,r);if(!i.asElement())return i.dispose(),null;return i.asElement()._adoptTo(await this._mainContext())},this._page._timeoutSettings.timeout(t))}async dispatchEvent(e,t,n,s={}){const r=this._page.selectors._parseSelector(e),o=i.dispatchEventTask(r,t,n||{});await l.runAbortableTask(async n=>{n.log(`Dispatching "${t}" event on selector "${e}"...`),await this._scheduleRerunnableTask(n,"main",o)},this._page._timeoutSettings.timeout(s)),await this._page._doSlowMo()}async _$evalExpression(e,t,n,i){const s=await this.$(e);if(!s)throw new Error(`Error: failed to find element matching selector "${e}"`);const r=await s._evaluateExpression(t,n,!0,i);return s.dispose(),r}async _$$evalExpression(e,t,n,i){const s=await this._page.selectors._queryArray(this,e),r=await s._evaluateExpression(t,n,!0,i);return s.dispose(),r}async $$(e){return this._page.selectors._queryAll(this,e,void 0,!0)}async content(){return(await this._utilityContext()).evaluateInternal(()=>{let e="";return document.doctype&&(e=(new XMLSerializer).serializeToString(document.doctype)),document.documentElement&&(e+=document.documentElement.outerHTML),e})}async setContent(e,t,n={}){return this.setupNavigationProgressController(e),e.run(async e=>{const i=void 0===n.waitUntil?"load":n.waitUntil;e.log(`setting frame content, waiting until "${i}"`);const s=`--playwright--set--content--${this._id}--${++this._setContentCounter}--`,r=await this._utilityContext(),o=new Promise((t,n)=>{this._page._frameManager._consoleMessageTags.set(s,()=>{this._onClearLifecycle(),this._waitForLoadState(e,i).then(t).catch(n)})}),a=r.evaluateInternal(({html:e,tag:t})=>{window.stop(),document.open(),console.debug(t),document.write(e),document.close()},{html:t,tag:s});await Promise.all([a,o]),await this._page._doSlowMo()},this._page._timeoutSettings.navigationTimeout(n))}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}async addScriptTag(e){const{url:t=null,content:n=null,type:i=""}=e;if(!t&&!n)throw new Error("Provide an object with a `url`, `path` or `content` property");const s=await this._mainContext();return this._raceWithCSPError(async()=>{if(null!==t)return(await s.evaluateHandleInternal(r,{url:t,type:i})).asElement();const e=(await s.evaluateHandleInternal(o,{content:n,type:i})).asElement();return this._page._delegate.cspErrorsAsynchronousForInlineScipts&&await s.evaluateInternal(()=>!0),e});async function r(e){const t=document.createElement("script");t.src=e.url,e.type&&(t.type=e.type);const n=new Promise((e,n)=>{t.onload=e,t.onerror=e=>n("string"==typeof e?new Error(e):new Error("Failed to load script at "+t.src))});return document.head.appendChild(t),await n,t}function o(e){const t=document.createElement("script");t.type=e.type||"text/javascript",t.text=e.content;let n=null;if(t.onerror=e=>n=e,document.head.appendChild(t),n)throw n;return t}}async addStyleTag(e){const{url:t=null,content:n=null}=e;if(!t&&!n)throw new Error("Provide an object with a `url`, `path` or `content` property");const i=await this._mainContext();return this._raceWithCSPError(async()=>null!==t?(await i.evaluateHandleInternal(s,t)).asElement():(await i.evaluateHandleInternal(r,n)).asElement());async function s(e){const t=document.createElement("link");t.rel="stylesheet",t.href=e;const n=new Promise((e,n)=>{t.onload=e,t.onerror=n});return document.head.appendChild(t),await n,t}async function r(e){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e));const n=new Promise((e,n)=>{t.onload=e,t.onerror=n});return document.head.appendChild(t),await n,t}}async _raceWithCSPError(e){const t=[];let n,i,r;const a=new Promise(async t=>{try{n=await e()}catch(e){i=e}t()}),l=new Promise(e=>{t.push(s.helper.addEventListener(this._page,o.Page.Events.Console,t=>{"error"===t.type()&&t.text().includes("Content Security Policy")&&(r=t,e())}))});if(await Promise.race([a,l]),s.helper.removeEventListeners(t),r)throw new Error(r.text());if(i)throw i;return n}async _retryWithProgressIfNotConnected(e,t,n){const s=this._page.selectors._parseSelector(t);for(;e.isRunning();){e.log(`waiting for selector "${t}"`);const r=i.waitForSelectorTask(s,"attached"),o=(await this._scheduleRerunnableHandleTask(e,s.world,r)).asElement();e.cleanupWhenAborted(()=>{o.dispose()});const a=await n(o);if(o.dispose(),"error:notconnected"!==a)return a;e.log("element was detached from the DOM, retrying")}}async _retryWithSelectorIfNotConnected(e,t,n){return l.runAbortableTask(async t=>this._retryWithProgressIfNotConnected(t,e,e=>n(t,e)),this._page._timeoutSettings.timeout(t))}async click(e,t,n){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._click(e,n))),this._page._timeoutSettings.timeout(n))}async dblclick(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._dblclick(e,n))),this._page._timeoutSettings.timeout(n))}async tap(e,t,n){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._tap(e,n))),this._page._timeoutSettings.timeout(n))}async fill(e,t,n,s){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._fill(e,n,s))),this._page._timeoutSettings.timeout(s))}async focus(e,t={}){await this._retryWithSelectorIfNotConnected(e,t,(e,t)=>t._focus(e)),await this._page._doSlowMo()}async textContent(e,t={}){const n=this._page.selectors._parseSelector(e),s=i.textContentTask(n);return l.runAbortableTask(async t=>(t.log(`  retrieving textContent from "${e}"`),this._scheduleRerunnableTask(t,n.world,s)),this._page._timeoutSettings.timeout(t))}async innerText(e,t={}){const n=this._page.selectors._parseSelector(e),s=i.innerTextTask(n);return l.runAbortableTask(async t=>{t.log(`  retrieving innerText from "${e}"`);return i.throwFatalDOMError(await this._scheduleRerunnableTask(t,n.world,s)).innerText},this._page._timeoutSettings.timeout(t))}async innerHTML(e,t={}){const n=this._page.selectors._parseSelector(e),s=i.innerHTMLTask(n);return l.runAbortableTask(async t=>(t.log(`  retrieving innerHTML from "${e}"`),this._scheduleRerunnableTask(t,n.world,s)),this._page._timeoutSettings.timeout(t))}async getAttribute(e,t,n={}){const s=this._page.selectors._parseSelector(e),r=i.getAttributeTask(s,t);return l.runAbortableTask(async n=>(n.log(`  retrieving attribute "${t}" from "${e}"`),this._scheduleRerunnableTask(n,s.world,r)),this._page._timeoutSettings.timeout(n))}async hover(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._hover(e,n))),this._page._timeoutSettings.timeout(n))}async selectOption(e,t,n,i,s={}){return e.run(async e=>await this._retryWithProgressIfNotConnected(e,t,t=>t._selectOption(e,n,i,s)),this._page._timeoutSettings.timeout(s))}async setInputFiles(e,t,n,s={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setInputFiles(e,n,s))),this._page._timeoutSettings.timeout(s))}async type(e,t,n,s={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._type(e,n,s))),this._page._timeoutSettings.timeout(s))}async press(e,t,n,s={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._press(e,n,s))),this._page._timeoutSettings.timeout(s))}async check(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setChecked(e,!0,n))),this._page._timeoutSettings.timeout(n))}async uncheck(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setChecked(e,!1,n))),this._page._timeoutSettings.timeout(n))}async _waitForFunctionExpression(e,t,n,i={}){"number"==typeof i.pollingInterval&&d.assert(i.pollingInterval>0,"Cannot poll with non-positive interval: "+i.pollingInterval);const s=t?"return ("+e+")(arg)":"return ("+e+")",r=e=>e.evaluateHandle((e,{predicateBody:t,polling:n,arg:i})=>{const s=new Function("arg",t);return"number"!=typeof n?e.pollRaf((e,t)=>s(i)||t):e.pollInterval(n,(e,t)=>s(i)||t)},{predicateBody:s,polling:i.pollingInterval,arg:n});return l.runAbortableTask(e=>this._scheduleRerunnableHandleTask(e,"main",r),this._page._timeoutSettings.timeout(i))}async title(){return(await this._utilityContext()).evaluateInternal(()=>document.title)}_onDetached(){this._stopNetworkIdleTimer(),this._detached=!0,this._detachedCallback();for(const e of this._contextData.values())for(const t of e.rerunnableTasks)t.terminate(new Error("waitForFunction failed: frame got detached."));this._parentFrame&&this._parentFrame._childFrames.delete(this),this._parentFrame=null}_scheduleRerunnableTask(e,t,n){const i=this._contextData.get(t),s=new p(i,e,n,!0);return this._detached&&s.terminate(new Error("waitForFunction failed: frame got detached.")),i.context&&s.rerun(i.context),s.promise}_scheduleRerunnableHandleTask(e,t,n){const i=this._contextData.get(t),s=new p(i,e,n,!1);return this._detached&&s.terminate(new Error("waitForFunction failed: frame got detached.")),i.context&&s.rerun(i.context),s.promise}_setContext(e,t){const n=this._contextData.get(e);if(n.context=t,t){n.contextResolveCallback.call(null,t);for(const e of n.rerunnableTasks)e.rerun(t)}else n.contextPromise=new Promise(e=>{n.contextResolveCallback=e})}_contextCreated(e,t){this._contextData.get(e).context&&this._setContext(e,null),this._setContext(e,t)}_contextDestroyed(e){for(const[t,n]of this._contextData)n.context===e&&this._setContext(t,null)}_startNetworkIdleTimer(){d.assert(!this._networkIdleTimer),this._firedLifecycleEvents.has("networkidle")||(this._networkIdleTimer=setTimeout(()=>this._onLifecycleEvent("networkidle"),500))}_stopNetworkIdleTimer(){this._networkIdleTimer&&clearTimeout(this._networkIdleTimer),this._networkIdleTimer=void 0}async extendInjectedScript(e,t){const n=await this._mainContext();return(await n.injectedScript()).evaluateHandle((e,{source:t,arg:n})=>e.extend(t,n),{source:e,arg:t})}}t.Frame=u,u.Events={Navigation:"navigation",AddLifecycle:"addlifecycle",RemoveLifecycle:"removelifecycle"};class p{constructor(e,t,n,i){this._resolve=()=>{},this._reject=()=>{},this._task=n,this._progress=t,this._returnByValue=i,this._contextData=e,this._contextData.rerunnableTasks.add(this),this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}terminate(e){this._reject(e)}async rerun(e){try{const t=await e.injectedScript(),n=new i.InjectedScriptPollHandler(this._progress,await this._task(t)),s=this._returnByValue?await n.finish():await n.finishHandle();this._contextData.rerunnableTasks.delete(this),this._resolve(s)}catch(e){if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return;this._contextData.rerunnableTasks.delete(this),this._reject(e)}}}class f{constructor(e){this._protectCount=0,this._promiseCallback=()=>{},this._progress=e,this._promise=new Promise(e=>this._promiseCallback=e),this.retain()}waitFor(){return this.release(),this._promise}async addFrameNavigation(e){this.retain();const t=s.helper.waitForEvent(null,e,u.Events.Navigation,t=>(!t.error&&this._progress&&this._progress.log(`  navigated to "${e._url}"`),!0));await Promise.race([e._page._disconnectedPromise,e._page._crashedPromise,e._detachedPromise,t.promise]).catch(e=>{}),t.dispose(),this.release()}retain(){++this._protectCount}release(){--this._protectCount,this._protectCount||this._promiseCallback()}}function m(e,t){if("networkidle0"===t&&(t="networkidle"),!a.kLifecycleEvents.has(t))throw new Error(e+": expected one of (load|domcontentloaded|networkidle)");return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorSchemes=t.mediaTypes=t.kLifecycleEvents=void 0,t.kLifecycleEvents=new Set(["load","domcontentloaded","networkidle"]),t.mediaTypes=new Set(["screen","print"]),t.colorSchemes=new Set(["dark","light","no-preference"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kScreenshotDuringNavigationError=t.Screenshotter=void 0;const i=n(16),s=n(25),r=n(4);t.Screenshotter=class{constructor(e){this._queue=new o,this._page=e,this._queue=new o}async _originalViewportSize(){const e=this._page.viewportSize();let t=e;if(!t){const e=await this._page.mainFrame()._utilityContext();t=await e.evaluateInternal(()=>({width:window.innerWidth,height:window.innerHeight}))}return{viewportSize:t,originalViewportSize:e}}async _fullPageSize(){const e=await this._page.mainFrame()._utilityContext(),n=await e.evaluateInternal(()=>document.body&&document.documentElement?{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}:null);if(!n)throw new Error(t.kScreenshotDuringNavigationError);return n}async screenshotPage(e,t){const n=l(t);return this._queue.postTask(async()=>{const{viewportSize:i,originalViewportSize:s}=await this._originalViewportSize();if(t.fullPage){const r=await this._fullPageSize();let o={x:0,y:0,width:r.width,height:r.height},l=null;const c=r.width<=i.width&&r.height<=i.height;this._page._delegate.canScreenshotOutsideViewport()||c||(l=r,e.throwIfAborted(),await this._page.setViewportSize(l),e.cleanupWhenAborted(()=>this._restoreViewport(s))),t.clip&&(o=a(t.clip,o));const d=await this._screenshot(e,n,o,void 0,t);return e.throwIfAborted(),l&&await this._restoreViewport(s),d}const r=t.clip?a(t.clip,i):{x:0,y:0,...i};return await this._screenshot(e,n,void 0,r,t)}).catch(c)}async screenshotElement(e,t,n={}){const s=l(n);return this._queue.postTask(async()=>{const{viewportSize:o,originalViewportSize:a}=await this._originalViewportSize();await t._waitAndScrollIntoViewIfNeeded(e);let l=await t.boundingBox();r.assert(l,"Node is either not visible or not an HTMLElement"),r.assert(0!==l.width,"Node has 0 width."),r.assert(0!==l.height,"Node has 0 height.");let c=null;const d=l.width<=o.width&&l.height<=o.height;this._page._delegate.canScreenshotOutsideViewport()||d||(c=i.helper.enclosingIntSize({width:Math.max(o.width,l.width),height:Math.max(o.height,l.height)}),e.throwIfAborted(),await this._page.setViewportSize(c),e.cleanupWhenAborted(()=>this._restoreViewport(a)),await t._waitAndScrollIntoViewIfNeeded(e),l=await t.boundingBox(),r.assert(l,"Node is either not visible or not an HTMLElement"),r.assert(0!==l.width,"Node has 0 width."),r.assert(0!==l.height,"Node has 0 height."));const h=await this._page.mainFrame()._utilityContext(),u=await h.evaluateInternal(()=>({x:window.scrollX,y:window.scrollY})),p={...l};p.x+=u.x,p.y+=u.y;const f=await this._screenshot(e,s,i.helper.enclosingIntRect(p),void 0,n);return e.throwIfAborted(),c&&await this._restoreViewport(a),f}).catch(c)}async _screenshot(e,t,n,i,s){s.__testHookBeforeScreenshot&&await s.__testHookBeforeScreenshot(),e.throwIfAborted();const r=s.omitBackground&&"png"===t;r&&(await this._page._delegate.setBackgroundColor({r:0,g:0,b:0,a:0}),e.cleanupWhenAborted(()=>this._page._delegate.setBackgroundColor()));const o=await this._page._delegate.takeScreenshot(t,n,i,s.quality);return e.throwIfAborted(),r&&await this._page._delegate.setBackgroundColor(),e.throwIfAborted(),s.__testHookAfterScreenshot&&await s.__testHookAfterScreenshot(),o}async _restoreViewport(e){r.assert(!this._page._delegate.canScreenshotOutsideViewport()),e?await this._page.setViewportSize(e):await this._page._delegate.resetViewport()}};class o{constructor(){this._chain=Promise.resolve()}postTask(e){const t=this._chain.then(e);return this._chain=t.catch(()=>{}),t}}function a(e,t){const n={x:Math.max(0,Math.min(e.x,t.width)),y:Math.max(0,Math.min(e.y,t.height))},i=Math.max(0,Math.min(e.x+e.width,t.width)),s=Math.max(0,Math.min(e.y+e.height,t.height)),o={x:n.x,y:n.y,width:i-n.x,height:s-n.y};return r.assert(o.width&&o.height,"Clipped area is either empty or outside the resulting image"),o}function l(e){let t=null;return e.type&&(r.assert("png"===e.type||"jpeg"===e.type,"Unknown options.type value: "+e.type),t=e.type),t||(t="png"),e.quality&&(r.assert("jpeg"===t,"options.quality is unsupported for the "+t+" screenshots"),r.assert("number"==typeof e.quality,"Expected options.quality to be a number but found "+typeof e.quality),r.assert(Number.isInteger(e.quality),"Expected options.quality to be an integer"),r.assert(e.quality>=0&&e.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+e.quality)),e.clip&&(r.assert("number"==typeof e.clip.x,"Expected options.clip.x to be a number but found "+typeof e.clip.x),r.assert("number"==typeof e.clip.y,"Expected options.clip.y to be a number but found "+typeof e.clip.y),r.assert("number"==typeof e.clip.width,"Expected options.clip.width to be a number but found "+typeof e.clip.width),r.assert("number"==typeof e.clip.height,"Expected options.clip.height to be a number but found "+typeof e.clip.height),r.assert(0!==e.clip.width,"Expected options.clip.width not to be 0."),r.assert(0!==e.clip.height,"Expected options.clip.height not to be 0.")),t}function c(e){throw"object"==typeof e&&e instanceof Error&&e.message.includes("Execution context was destroyed")&&s.rewriteErrorMessage(e,t.kScreenshotDuringNavigationError),e}t.kScreenshotDuringNavigationError="Cannot take a screenshot while page is navigating"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessage=void 0;t.ConsoleMessage=class{constructor(e,t,n,i){this._type=e,this._text=t,this._args=n,this._location=i||{url:"",lineNumber:0,columnNumber:0}}type(){return this._type}text(){return void 0===this._text&&(this._text=this._args.map(e=>e._value).join(" ")),this._text}args(){return this._args}location(){return this._location}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.macEditingCommands=void 0,t.macEditingCommands={Backspace:"deleteBackward:",Enter:"insertNewline:",NumpadEnter:"insertNewline:",Escape:"cancelOperation:",ArrowUp:"moveUp:",ArrowDown:"moveDown:",ArrowLeft:"moveLeft:",ArrowRight:"moveRight:",F5:"complete:",Delete:"deleteForward:",Home:"scrollToBeginningOfDocument:",End:"scrollToEndOfDocument:",PageUp:"scrollPageUp:",PageDown:"scrollPageDown:","Shift+Backspace":"deleteBackward:","Shift+Enter":"insertNewline:","Shift+NumpadEnter":"insertNewline:","Shift+Escape":"cancelOperation:","Shift+ArrowUp":"moveUpAndModifySelection:","Shift+ArrowDown":"moveDownAndModifySelection:","Shift+ArrowLeft":"moveLeftAndModifySelection:","Shift+ArrowRight":"moveRightAndModifySelection:","Shift+F5":"complete:","Shift+Delete":"deleteForward:","Shift+Home":"moveToBeginningOfDocumentAndModifySelection:","Shift+End":"moveToEndOfDocumentAndModifySelection:","Shift+PageUp":"pageUpAndModifySelection:","Shift+PageDown":"pageDownAndModifySelection:","Shift+Numpad5":"delete:","Control+Tab":"selectNextKeyView:","Control+Enter":"insertLineBreak:","Control+NumpadEnter":"insertLineBreak:","Control+Quote":"insertSingleQuoteIgnoringSubstitution:","Control+KeyA":"moveToBeginningOfParagraph:","Control+KeyB":"moveBackward:","Control+KeyD":"deleteForward:","Control+KeyE":"moveToEndOfParagraph:","Control+KeyF":"moveForward:","Control+KeyH":"deleteBackward:","Control+KeyK":"deleteToEndOfParagraph:","Control+KeyL":"centerSelectionInVisibleArea:","Control+KeyN":"moveDown:","Control+KeyO":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"Control+KeyP":"moveUp:","Control+KeyT":"transpose:","Control+KeyV":"pageDown:","Control+KeyY":"yank:","Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Control+ArrowUp":"scrollPageUp:","Control+ArrowDown":"scrollPageDown:","Control+ArrowLeft":"moveToLeftEndOfLine:","Control+ArrowRight":"moveToRightEndOfLine:","Shift+Control+Enter":"insertLineBreak:","Shift+Control+NumpadEnter":"insertLineBreak:","Shift+Control+Tab":"selectPreviousKeyView:","Shift+Control+Quote":"insertDoubleQuoteIgnoringSubstitution:","Shift+Control+KeyA":"moveToBeginningOfParagraphAndModifySelection:","Shift+Control+KeyB":"moveBackwardAndModifySelection:","Shift+Control+KeyE":"moveToEndOfParagraphAndModifySelection:","Shift+Control+KeyF":"moveForwardAndModifySelection:","Shift+Control+KeyN":"moveDownAndModifySelection:","Shift+Control+KeyP":"moveUpAndModifySelection:","Shift+Control+KeyV":"pageDownAndModifySelection:","Shift+Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Shift+Control+ArrowUp":"scrollPageUp:","Shift+Control+ArrowDown":"scrollPageDown:","Shift+Control+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Control+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Alt+Backspace":"deleteWordBackward:","Alt+Enter":"insertNewlineIgnoringFieldEditor:","Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Alt+Escape":"complete:","Alt+ArrowUp":["moveBackward:","moveToBeginningOfParagraph:"],"Alt+ArrowDown":["moveForward:","moveToEndOfParagraph:"],"Alt+ArrowLeft":"moveWordLeft:","Alt+ArrowRight":"moveWordRight:","Alt+Delete":"deleteWordForward:","Alt+PageUp":"pageUp:","Alt+PageDown":"pageDown:","Shift+Alt+Backspace":"deleteWordBackward:","Shift+Alt+Enter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+Escape":"complete:","Shift+Alt+ArrowUp":"moveParagraphBackwardAndModifySelection:","Shift+Alt+ArrowDown":"moveParagraphForwardAndModifySelection:","Shift+Alt+ArrowLeft":"moveWordLeftAndModifySelection:","Shift+Alt+ArrowRight":"moveWordRightAndModifySelection:","Shift+Alt+Delete":"deleteWordForward:","Shift+Alt+PageUp":"pageUp:","Shift+Alt+PageDown":"pageDown:","Control+Alt+KeyB":"moveWordBackward:","Control+Alt+KeyF":"moveWordForward:","Control+Alt+Backspace":"deleteWordBackward:","Shift+Control+Alt+KeyB":"moveWordBackwardAndModifySelection:","Shift+Control+Alt+KeyF":"moveWordForwardAndModifySelection:","Shift+Control+Alt+Backspace":"deleteWordBackward:","Meta+NumpadSubtract":"cancel:","Meta+Backspace":"deleteToBeginningOfLine:","Meta+ArrowUp":"moveToBeginningOfDocument:","Meta+ArrowDown":"moveToEndOfDocument:","Meta+ArrowLeft":"moveToLeftEndOfLine:","Meta+ArrowRight":"moveToRightEndOfLine:","Shift+Meta+NumpadSubtract":"cancel:","Shift+Meta+Backspace":"deleteToBeginningOfLine:","Shift+Meta+ArrowUp":"moveToBeginningOfDocumentAndModifySelection:","Shift+Meta+ArrowDown":"moveToEndOfDocumentAndModifySelection:","Shift+Meta+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Meta+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Meta+KeyA":"selectAll:"}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ffmpegExecutable=t.printDepsWindowsExecutable=void 0;const i=n(0),s=n(8),r=n(2);function o(t){const n=r.join(e,"..","..",...t),s=r.join(r.dirname(process.argv[0]),t[t.length-1]);try{if(i.existsSync(n))return n}catch(e){}try{if(i.existsSync(s))return s}catch(e){}}t.printDepsWindowsExecutable=function(){return o(["bin","PrintDeps.exe"])},t.ffmpegExecutable=function(){let e;return e="win32"===process.platform?"x64"===s.arch()?"ffmpeg-win64.exe":"ffmpeg-win32.exe":"darwin"===process.platform?"ffmpeg-mac":"ffmpeg-linux",o(["third_party","ffmpeg",e])}}).call(this,"/")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserDirectory=t.markerFilePath=t.browserDirectory=t.browsersPath=t.executablePath=t.windowsExeAndDllDirectories=t.linuxLddDirectories=t.hostPlatform=void 0;const i=n(35),s=n(8),r=n(2),o=n(266),a=n(4);t.hostPlatform=(()=>{const e=s.platform();if("darwin"===e){return"mac"+i.execSync("sw_vers -productVersion",{stdio:["ignore","pipe","ignore"]}).toString("utf8").trim().split(".").slice(0,2).join(".")}if("linux"===e){const e=o.getUbuntuVersionSync();return parseInt(e,10)<=19?"ubuntu18.04":"ubuntu20.04"}return"win32"===e?"x64"===s.arch()?"win64":"win32":e})(),t.linuxLddDirectories=function(e,t){return"chromium"===t.name?[r.join(e,"chrome-linux")]:"firefox"===t.name?[r.join(e,"firefox")]:"webkit"===t.name?[r.join(e,"minibrowser-gtk"),r.join(e,"minibrowser-gtk","bin"),r.join(e,"minibrowser-gtk","lib"),r.join(e,"minibrowser-wpe"),r.join(e,"minibrowser-wpe","bin"),r.join(e,"minibrowser-wpe","lib")]:[]},t.windowsExeAndDllDirectories=function(e,t){return"chromium"===t.name?[r.join(e,"chrome-win")]:"firefox"===t.name?[r.join(e,"firefox")]:"webkit"===t.name?[e]:[]},t.executablePath=function(e,n){let i;return"chromium"===n.name&&(i=new Map([["ubuntu18.04",["chrome-linux","chrome"]],["ubuntu20.04",["chrome-linux","chrome"]],["mac10.13",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac10.14",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac10.15",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac11.0",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["win32",["chrome-win","chrome.exe"]],["win64",["chrome-win","chrome.exe"]]]).get(t.hostPlatform)),"firefox"===n.name&&(i=new Map([["ubuntu18.04",["firefox","firefox"]],["ubuntu20.04",["firefox","firefox"]],["mac10.13",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac10.14",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac10.15",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac11.0",["firefox","Nightly.app","Contents","MacOS","firefox"]],["win32",["firefox","firefox.exe"]],["win64",["firefox","firefox.exe"]]]).get(t.hostPlatform)),"webkit"===n.name&&(i=new Map([["ubuntu18.04",["pw_run.sh"]],["ubuntu20.04",["pw_run.sh"]],["mac10.13",void 0],["mac10.14",["pw_run.sh"]],["mac10.15",["pw_run.sh"]],["mac11.0",["pw_run.sh"]],["win32",["Playwright.exe"]],["win64",["Playwright.exe"]]]).get(t.hostPlatform)),i?r.join(e,...i):void 0};const l=(()=>{const e=a.getFromENV("PLAYWRIGHT_BROWSERS_PATH");if("0"!==e)return e||r.join(function(){if("linux"===process.platform)return process.env.XDG_CACHE_HOME||r.join(s.homedir(),".cache");if("darwin"===process.platform)return r.join(s.homedir(),"Library","Caches");if("win32"===process.platform)return process.env.LOCALAPPDATA||r.join(s.homedir(),"AppData","Local");throw new Error("Unsupported platform: "+process.platform)}(),"ms-playwright")})();function c(e,t){return r.join(e,`${t.name}-${t.revision}`)}t.browsersPath=function(e){return l||r.join(e,".local-browsers")},t.browserDirectory=c,t.markerFilePath=function(e,t){return r.join(c(e,t),"INSTALLATION_COMPLETE")},t.isBrowserDirectory=function(e){const t=r.basename(e);return t.startsWith("chromium-")||t.startsWith("firefox-")||t.startsWith("webkit-")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUbuntuVersionSync=t.getUbuntuVersion=void 0;const i=n(0),s=n(8),r=n(1).promisify(i.readFile.bind(i));function o(e){const t=new Map;for(const n of e.split("\n")){const e=n.split("="),i=e.shift();let s=e.join("=").trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substring(1,s.length-1)),i&&t.set(i.toLowerCase(),s)}return t.get("name")&&"ubuntu"===t.get("name").toLowerCase()&&t.get("version_id")||""}t.getUbuntuVersion=async function(){if("linux"!==s.platform())return"";const e=await r("/etc/os-release","utf8").catch(e=>"");return e?o(e):""},t.getUbuntuVersionSync=function(){if("linux"!==s.platform())return"";try{const e=i.readFileSync("/etc/os-release","utf8");return e?o(e):""}catch(e){return""}}},function(e,t,n){"use strict";const i=n(5),s=n(45),r=n(33),o=n(46),a=n(81),{randomBytes:l,createHash:c}=n(27),{URL:d}=n(26),h=n(129),u=n(268),p=n(270),{BINARY_TYPES:f,EMPTY_BUFFER:m,GUID:_,kStatusCode:g,kWebSocket:w,NOOP:b}=n(72),{addEventListener:y,removeEventListener:v}=n(478),{format:x,parse:S}=n(271),{toBuffer:E}=n(130),k=["CONNECTING","OPEN","CLOSING","CLOSED"],C=[8,13];class P extends i{constructor(e,t,n){super(),this._binaryType=f[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function e(t,n,i,o){const a={protocolVersion:C[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!C.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${C.join(", ")})`);let u;n instanceof d?(u=n,t._url=n.href):(u=new d(n),t._url=n);const p="ws+unix:"===u.protocol;if(!(u.host||p&&u.pathname))throw new Error("Invalid URL: "+t.url);const f="wss:"===u.protocol||"https:"===u.protocol,m=f?443:80,g=l(16).toString("base64"),w=f?s.get:r.get;let b;a.createConnection=f?O:T,a.defaultPort=a.defaultPort||m,a.port=u.port||m,a.host=u.hostname.startsWith("[")?u.hostname.slice(1,-1):u.hostname,a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket",...a.headers},a.path=u.pathname+u.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(b=new h(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=x({[h.extensionName]:b.offer()}));i&&(a.headers["Sec-WebSocket-Protocol"]=i);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(u.username||u.password)&&(a.auth=`${u.username}:${u.password}`);if(p){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let y=t._req=w(a);a.timeout&&y.on("timeout",()=>{I(t,y,"Opening handshake has timed out")});y.on("error",e=>{t._req.aborted||(y=t._req=null,t._readyState=P.CLOSING,t.emit("error",e),t.emitClose())}),y.on("response",s=>{const r=s.headers.location,l=s.statusCode;if(r&&a.followRedirects&&l>=300&&l<400){if(++t._redirects>a.maxRedirects)return void I(t,y,"Maximum redirects exceeded");y.abort();const s=new d(r,n);e(t,s,i,o)}else t.emit("unexpected-response",y,s)||I(t,y,"Unexpected server response: "+s.statusCode)}),y.on("upgrade",(e,n,s)=>{if(t.emit("upgrade",e),t.readyState!==P.CONNECTING)return;y=t._req=null;const r=c("sha1").update(g+_).digest("base64");if(e.headers["sec-websocket-accept"]!==r)return void I(t,n,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],l=(i||"").split(/, */);let d;if(!i&&o?d="Server sent a subprotocol but none was requested":i&&!o?d="Server sent no subprotocol":o&&!l.includes(o)&&(d="Server sent an invalid subprotocol"),d)I(t,n,d);else{if(o&&(t._protocol=o),b)try{const n=S(e.headers["sec-websocket-extensions"]);n[h.extensionName]&&(b.accept(n[h.extensionName]),t._extensions[h.extensionName]=b)}catch(e){return void I(t,n,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(n,s,a.maxPayload)}})}(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){f.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const i=new u(this.binaryType,this._extensions,this._isServer,n);this._sender=new p(e,this._extensions),this._receiver=i,this._socket=e,i[w]=this,e[w]=this,i.on("conclude",M),i.on("drain",F),i.on("error",N),i.on("message",L),i.on("ping",D),i.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",B),e.on("data",q),e.on("end",H),e.on("error",W),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=P.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this.readyState!==P.CLOSING?(this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,n)):A(this,e,n)}pong(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,n)):A(this,e,n)}send(e,t,n){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN)return void A(this,e,n);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(i.compress=!1),this._sender.send(e||m,i,n)}terminate(){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return I(this,this._req,e)}this._socket&&(this._readyState=P.CLOSING,this._socket.destroy())}}}function T(e){return e.path=e.socketPath,o.connect(e)}function O(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=e.host),a.connect(e)}function I(e,t,n){e._readyState=P.CLOSING;const i=new Error(n);Error.captureStackTrace(i,I),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function A(e,t,n){if(t){const n=E(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){n(new Error(`WebSocket is not open: readyState ${e.readyState} (${k[e.readyState]})`))}}function M(e,t){const n=this[w];n._socket.removeListener("data",q),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function F(){this[w]._socket.resume()}function N(e){const t=this[w];t._socket.removeListener("data",q),t._readyState=P.CLOSING,t._closeCode=e[g],t.emit("error",e),t._socket.destroy()}function R(){this[w].emitClose()}function L(e){this[w].emit("message",e)}function D(e){const t=this[w];t.pong(e,!t._isServer,b),t.emit("ping",e)}function j(e){this[w].emit("pong",e)}function B(){const e=this[w];this.removeListener("close",B),this.removeListener("end",H),e._readyState=P.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",q),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",R),e._receiver.on("finish",R))}function q(e){this[w]._receiver.write(e)||this.pause()}function H(){const e=this[w];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function W(){const e=this[w];this.removeListener("error",W),this.on("error",b),e&&(e._readyState=P.CLOSING,this.destroy())}k.forEach((e,t)=>{const n={enumerable:!0,value:t};Object.defineProperty(P.prototype,e,n),Object.defineProperty(P,e,n)}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(P.prototype,"on"+e,{configurable:!0,enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const n=this.listeners(e);for(let t=0;t<n.length;t++)n[t]._listener&&this.removeListener(e,n[t]);this.addEventListener(e,t)}})}),P.prototype.addEventListener=y,P.prototype.removeEventListener=v,e.exports=P},function(e,t,n){"use strict";const{Writable:i}=n(6),s=n(129),{BINARY_TYPES:r,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:l}=n(72),{concat:c,toArrayBuffer:d,unmask:h}=n(130),{isValidStatusCode:u,isValidUTF8:p}=n(269);function f(e,t,n,i){const s=new e(n?"Invalid WebSocket frame: "+t:t);return Error.captureStackTrace(s,f),s[a]=i,s}e.exports=class extends i{constructor(e,t,n,i){super(),this._binaryType=e||r[0],this[l]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[s.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode "+this._opcode,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,"invalid opcode "+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,"invalid payload length "+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&h(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[s.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?c(t,e):"arraybuffer"===this._binaryType?d(c(t,e)):t,this.emit("message",n)}else{const n=c(t,e);if(!p(n))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!u(t))return f(RangeError,"invalid status code "+t,!0,1002);const n=e.slice(2);if(!p(n))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},function(e,t,n){"use strict";try{const e=n(!function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}());t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,n){"use strict";const{randomFillSync:i}=n(27),s=n(129),{EMPTY_BUFFER:r}=n(72),{isValidStatusCode:o}=n(269),{mask:a,toBuffer:l}=n(130),c=Buffer.alloc(4);class d{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;let s=t.mask?6:2,r=e.length;e.length>=65536?(s+=8,r=127):e.length>125&&(s+=2,r=126);const o=Buffer.allocUnsafe(n?e.length+s:s);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=r,126===r?o.writeUInt16BE(e.length,2):127===r&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(i(c,0,4),o[1]|=128,o[s-4]=c[0],o[s-3]=c[1],o[s-2]=c[2],o[s-1]=c[3],n?(a(e,c,o,s,e.length),[o]):(a(e,c,e,0,e.length),[o,e])):[o,e]}close(e,t,n,i){let s;if(void 0===e)s=r;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+n),s.writeUInt16BE(e,0),s.write(t,2)}}this._deflating?this.enqueue([this.doClose,s,n,i]):this.doClose(s,n,i)}doClose(e,t,n){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=l(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,l.readOnly,n]):this.doPing(i,t,l.readOnly,n)}doPing(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=l(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,l.readOnly,n]):this.doPong(i,t,l.readOnly,n)}doPong(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=l(e),r=this._extensions[s.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&r&&(a=i.length>=r._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),r){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:l.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(d.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:l.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(d.frame(e,n),i);const r=this._extensions[s.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,r.compress(e,n.fin,(t,s)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t][4];"function"==typeof n&&n(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(d.frame(s,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},function(e,t,n){"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function s(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let n,r,o=Object.create(null),a=!1,l=!1,c=!1,d=-1,h=-1,u=0;for(;u<e.length;u++){const p=e.charCodeAt(u);if(void 0===n)if(-1===h&&1===i[p])-1===d&&(d=u);else if(32===p||9===p)-1===h&&-1!==d&&(h=u);else{if(59!==p&&44!==p)throw new SyntaxError("Unexpected character at index "+u);{if(-1===d)throw new SyntaxError("Unexpected character at index "+u);-1===h&&(h=u);const i=e.slice(d,h);44===p?(s(t,i,o),o=Object.create(null)):n=i,d=h=-1}}else if(void 0===r)if(-1===h&&1===i[p])-1===d&&(d=u);else if(32===p||9===p)-1===h&&-1!==d&&(h=u);else if(59===p||44===p){if(-1===d)throw new SyntaxError("Unexpected character at index "+u);-1===h&&(h=u),s(o,e.slice(d,h),!0),44===p&&(s(t,n,o),o=Object.create(null),n=void 0),d=h=-1}else{if(61!==p||-1===d||-1!==h)throw new SyntaxError("Unexpected character at index "+u);r=e.slice(d,u),d=h=-1}else if(l){if(1!==i[p])throw new SyntaxError("Unexpected character at index "+u);-1===d?d=u:a||(a=!0),l=!1}else if(c)if(1===i[p])-1===d&&(d=u);else if(34===p&&-1!==d)c=!1,h=u;else{if(92!==p)throw new SyntaxError("Unexpected character at index "+u);l=!0}else if(34===p&&61===e.charCodeAt(u-1))c=!0;else if(-1===h&&1===i[p])-1===d&&(d=u);else if(-1===d||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError("Unexpected character at index "+u);{if(-1===d)throw new SyntaxError("Unexpected character at index "+u);-1===h&&(h=u);let i=e.slice(d,h);a&&(i=i.replace(/\\/g,""),a=!1),s(o,r,i),44===p&&(s(t,n,o),o=Object.create(null),n=void 0),r=void 0,d=h=-1}}else-1===h&&(h=u)}if(-1===d||c)throw new SyntaxError("Unexpected end of input");-1===h&&(h=u);const p=e.slice(d,h);return void 0===n?s(t,p,o):(void 0===r?s(o,p,!0):s(o,r,a?p.replace(/\\/g,""):p),s(t,n,o)),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKExecutionContext=void 0;const i=n(102),s=n(56),r=n(126),o=n(70);t.WKExecutionContext=class{constructor(e,t){this._contextDestroyedCallback=()=>{},this._session=e,this._contextId=t,this._executionContextDestroyedPromise=new Promise((e,t)=>{this._contextDestroyedCallback=e})}_dispose(){this._contextDestroyedCallback()}async rawEvaluate(e){try{const t=await this._session.send("Runtime.evaluate",{expression:o.ensureSourceUrl(e),contextId:this._contextId,returnByValue:!1});if(t.wasThrown)throw new Error("Evaluation failed: "+t.result.description);return t.result.objectId}catch(e){throw l(e)}}async evaluateWithArguments(e,t,n,i,s){try{let o=await this._session.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:n._objectId,arguments:[{objectId:n._objectId},...i.map(e=>({value:e})),...s.map(e=>({objectId:e}))],returnByValue:!1,emulateUserGesture:!0});if(o.result.objectId&&"Promise"===o.result.className&&(o=await Promise.race([this._executionContextDestroyedPromise.then(()=>a),this._session.send("Runtime.awaitPromise",{promiseObjectId:o.result.objectId,returnByValue:!1})])),o.wasThrown)throw new Error("Evaluation failed: "+o.result.description);if(!t)return n._context.createHandle(o.result);if(o.result.objectId){if("undefined"===o.result.type)return;return await this._returnObjectByValue(n,o.result.objectId)}return r.parseEvaluationResultValue(o.result.value)}catch(e){throw l(e)}}async _returnObjectByValue(e,t){try{const n=await this._session.send("Runtime.callFunctionOn",{functionDeclaration:"object => object"+o.generateSourceUrl(),objectId:e._objectId,arguments:[{objectId:t}],returnByValue:!0});if(n.wasThrown)throw new Error("Evaluation failed: "+n.result.description);return r.parseEvaluationResultValue(n.result.value)}catch(e){throw l(e)}}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._session.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),i=new Map;for(const t of n.properties)t.enumerable&&t.value&&i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){const n="Promise"===t.className;return new s.JSHandle(e,n?"promise":t.subtype||t.type,t.objectId,function(e){const t=e.value;return"number"===e.type&&["NaN","-Infinity","Infinity","-0"].includes(e.description)?s.parseUnserializableValue(e.description):t}(t))}async releaseHandle(e){e._objectId&&await this._session.send("Runtime.releaseObject",{objectId:e._objectId}).catch(e=>{})}};const a={wasThrown:!0,result:{description:"Protocol error: Execution context was destroyed, most likely because of a navigation."}};function l(e){return i.isSwappedOutError(e)||e.message.includes("Missing injected script for given")?new Error("Execution context was destroyed, most likely because of a navigation."):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScheme=t.ValidationError=void 0;const i=n(193);var s=n(193);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return s.ValidationError}}),t.createScheme=function(e){const t={},n=e=>(n,s)=>{const r=t[e];if(!r)throw new i.ValidationError(s+': unknown type "'+e+'"');return r(n,s)};return t.Metadata=i.tObject({stack:i.tOptional(i.tString)}),t.SerializedValue=i.tObject({n:i.tOptional(i.tNumber),b:i.tOptional(i.tBoolean),s:i.tOptional(i.tString),v:i.tOptional(i.tEnum(["null","undefined","NaN","Infinity","-Infinity","-0"])),d:i.tOptional(i.tString),r:i.tOptional(i.tObject({p:i.tString,f:i.tString})),a:i.tOptional(i.tArray(n("SerializedValue"))),o:i.tOptional(i.tArray(i.tObject({k:i.tString,v:n("SerializedValue")}))),h:i.tOptional(i.tNumber)}),t.SerializedArgument=i.tObject({value:n("SerializedValue"),handles:i.tArray(e("*"))}),t.AXNode=i.tObject({role:i.tString,name:i.tString,valueString:i.tOptional(i.tString),valueNumber:i.tOptional(i.tNumber),description:i.tOptional(i.tString),keyshortcuts:i.tOptional(i.tString),roledescription:i.tOptional(i.tString),valuetext:i.tOptional(i.tString),disabled:i.tOptional(i.tBoolean),expanded:i.tOptional(i.tBoolean),focused:i.tOptional(i.tBoolean),modal:i.tOptional(i.tBoolean),multiline:i.tOptional(i.tBoolean),multiselectable:i.tOptional(i.tBoolean),readonly:i.tOptional(i.tBoolean),required:i.tOptional(i.tBoolean),selected:i.tOptional(i.tBoolean),checked:i.tOptional(i.tEnum(["checked","unchecked","mixed"])),pressed:i.tOptional(i.tEnum(["pressed","released","mixed"])),level:i.tOptional(i.tNumber),valuemin:i.tOptional(i.tNumber),valuemax:i.tOptional(i.tNumber),autocomplete:i.tOptional(i.tString),haspopup:i.tOptional(i.tString),invalid:i.tOptional(i.tString),orientation:i.tOptional(i.tString),children:i.tOptional(i.tArray(n("AXNode")))}),t.SerializedError=i.tObject({error:i.tOptional(i.tObject({message:i.tString,name:i.tString,stack:i.tOptional(i.tString)})),value:i.tOptional(n("SerializedValue"))}),t.SelectorsRegisterParams=i.tObject({name:i.tString,source:i.tString,contentScript:i.tOptional(i.tBoolean)}),t.BrowserTypeLaunchParams=i.tObject({executablePath:i.tOptional(i.tString),args:i.tOptional(i.tArray(i.tString)),ignoreAllDefaultArgs:i.tOptional(i.tBoolean),ignoreDefaultArgs:i.tOptional(i.tArray(i.tString)),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber),env:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),headless:i.tOptional(i.tBoolean),devtools:i.tOptional(i.tBoolean),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)})),downloadsPath:i.tOptional(i.tString),firefoxUserPrefs:i.tOptional(i.tAny),chromiumSandbox:i.tOptional(i.tBoolean),slowMo:i.tOptional(i.tNumber)}),t.BrowserTypeLaunchPersistentContextParams=i.tObject({userDataDir:i.tString,executablePath:i.tOptional(i.tString),args:i.tOptional(i.tArray(i.tString)),ignoreAllDefaultArgs:i.tOptional(i.tBoolean),ignoreDefaultArgs:i.tOptional(i.tArray(i.tString)),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber),env:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),headless:i.tOptional(i.tBoolean),devtools:i.tOptional(i.tBoolean),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)})),downloadsPath:i.tOptional(i.tString),chromiumSandbox:i.tOptional(i.tBoolean),slowMo:i.tOptional(i.tNumber),noDefaultViewport:i.tOptional(i.tBoolean),viewport:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber})),ignoreHTTPSErrors:i.tOptional(i.tBoolean),javaScriptEnabled:i.tOptional(i.tBoolean),bypassCSP:i.tOptional(i.tBoolean),userAgent:i.tOptional(i.tString),locale:i.tOptional(i.tString),timezoneId:i.tOptional(i.tString),geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)})),permissions:i.tOptional(i.tArray(i.tString)),extraHTTPHeaders:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),offline:i.tOptional(i.tBoolean),httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString})),deviceScaleFactor:i.tOptional(i.tNumber),isMobile:i.tOptional(i.tBoolean),hasTouch:i.tOptional(i.tBoolean),colorScheme:i.tOptional(i.tEnum(["light","dark","no-preference"])),acceptDownloads:i.tOptional(i.tBoolean),_traceResourcesPath:i.tOptional(i.tString),_tracePath:i.tOptional(i.tString),recordVideo:i.tOptional(i.tObject({dir:i.tString,size:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber}))})),recordHar:i.tOptional(i.tObject({omitContent:i.tOptional(i.tBoolean),path:i.tString}))}),t.BrowserCloseParams=i.tOptional(i.tObject({})),t.BrowserNewContextParams=i.tObject({noDefaultViewport:i.tOptional(i.tBoolean),viewport:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber})),ignoreHTTPSErrors:i.tOptional(i.tBoolean),javaScriptEnabled:i.tOptional(i.tBoolean),bypassCSP:i.tOptional(i.tBoolean),userAgent:i.tOptional(i.tString),locale:i.tOptional(i.tString),timezoneId:i.tOptional(i.tString),geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)})),permissions:i.tOptional(i.tArray(i.tString)),extraHTTPHeaders:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),offline:i.tOptional(i.tBoolean),httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString})),deviceScaleFactor:i.tOptional(i.tNumber),isMobile:i.tOptional(i.tBoolean),hasTouch:i.tOptional(i.tBoolean),colorScheme:i.tOptional(i.tEnum(["dark","light","no-preference"])),acceptDownloads:i.tOptional(i.tBoolean),_traceResourcesPath:i.tOptional(i.tString),_tracePath:i.tOptional(i.tString),recordVideo:i.tOptional(i.tObject({dir:i.tString,size:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber}))})),recordHar:i.tOptional(i.tObject({omitContent:i.tOptional(i.tBoolean),path:i.tString})),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)}))}),t.BrowserCrNewBrowserCDPSessionParams=i.tOptional(i.tObject({})),t.BrowserCrStartTracingParams=i.tObject({page:i.tOptional(e("Page")),path:i.tOptional(i.tString),screenshots:i.tOptional(i.tBoolean),categories:i.tOptional(i.tArray(i.tString))}),t.BrowserCrStopTracingParams=i.tOptional(i.tObject({})),t.BrowserContextAddCookiesParams=i.tObject({cookies:i.tArray(i.tObject({name:i.tString,value:i.tString,url:i.tOptional(i.tString),domain:i.tOptional(i.tString),path:i.tOptional(i.tString),expires:i.tOptional(i.tNumber),httpOnly:i.tOptional(i.tBoolean),secure:i.tOptional(i.tBoolean),sameSite:i.tOptional(i.tEnum(["Strict","Lax","None"]))}))}),t.BrowserContextAddInitScriptParams=i.tObject({source:i.tString}),t.BrowserContextClearCookiesParams=i.tOptional(i.tObject({})),t.BrowserContextClearPermissionsParams=i.tOptional(i.tObject({})),t.BrowserContextCloseParams=i.tOptional(i.tObject({})),t.BrowserContextCookiesParams=i.tObject({urls:i.tArray(i.tString)}),t.BrowserContextExposeBindingParams=i.tObject({name:i.tString,needsHandle:i.tOptional(i.tBoolean)}),t.BrowserContextGrantPermissionsParams=i.tObject({permissions:i.tArray(i.tString),origin:i.tOptional(i.tString)}),t.BrowserContextNewPageParams=i.tOptional(i.tObject({})),t.BrowserContextSetDefaultNavigationTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.BrowserContextSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.BrowserContextSetExtraHTTPHeadersParams=i.tObject({headers:i.tArray(i.tObject({name:i.tString,value:i.tString}))}),t.BrowserContextSetGeolocationParams=i.tObject({geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)}))}),t.BrowserContextSetHTTPCredentialsParams=i.tObject({httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString}))}),t.BrowserContextSetNetworkInterceptionEnabledParams=i.tObject({enabled:i.tBoolean}),t.BrowserContextSetOfflineParams=i.tObject({offline:i.tBoolean}),t.BrowserContextCrNewCDPSessionParams=i.tObject({page:e("Page")}),t.PageSetDefaultNavigationTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.PageSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.PageSetFileChooserInterceptedNoReplyParams=i.tObject({intercepted:i.tBoolean}),t.PageSetWebSocketFramesReportingEnabledNoReplyParams=i.tObject({enabled:i.tBoolean}),t.PageAddInitScriptParams=i.tObject({source:i.tString}),t.PageCloseParams=i.tObject({runBeforeUnload:i.tOptional(i.tBoolean)}),t.PageEmulateMediaParams=i.tObject({media:i.tOptional(i.tEnum(["screen","print","null"])),colorScheme:i.tOptional(i.tEnum(["dark","light","no-preference","null"]))}),t.PageExposeBindingParams=i.tObject({name:i.tString,needsHandle:i.tOptional(i.tBoolean)}),t.PageGoBackParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageGoForwardParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageOpenerParams=i.tOptional(i.tObject({})),t.PageReloadParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageScreenshotParams=i.tObject({timeout:i.tOptional(i.tNumber),type:i.tOptional(i.tEnum(["png","jpeg"])),quality:i.tOptional(i.tNumber),omitBackground:i.tOptional(i.tBoolean),fullPage:i.tOptional(i.tBoolean),clip:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber,x:i.tNumber,y:i.tNumber}))}),t.PageSetExtraHTTPHeadersParams=i.tObject({headers:i.tArray(i.tObject({name:i.tString,value:i.tString}))}),t.PageSetNetworkInterceptionEnabledParams=i.tObject({enabled:i.tBoolean}),t.PageSetViewportSizeParams=i.tObject({viewportSize:i.tObject({width:i.tNumber,height:i.tNumber})}),t.PageKeyboardDownParams=i.tObject({key:i.tString}),t.PageKeyboardUpParams=i.tObject({key:i.tString}),t.PageKeyboardInsertTextParams=i.tObject({text:i.tString}),t.PageKeyboardTypeParams=i.tObject({text:i.tString,delay:i.tOptional(i.tNumber)}),t.PageKeyboardPressParams=i.tObject({key:i.tString,delay:i.tOptional(i.tNumber)}),t.PageMouseMoveParams=i.tObject({x:i.tNumber,y:i.tNumber,steps:i.tOptional(i.tNumber)}),t.PageMouseDownParams=i.tObject({button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageMouseUpParams=i.tObject({button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageMouseClickParams=i.tObject({x:i.tNumber,y:i.tNumber,delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageTouchscreenTapParams=i.tObject({x:i.tNumber,y:i.tNumber}),t.PageAccessibilitySnapshotParams=i.tObject({interestingOnly:i.tOptional(i.tBoolean),root:i.tOptional(e("ElementHandle"))}),t.PagePdfParams=i.tObject({scale:i.tOptional(i.tNumber),displayHeaderFooter:i.tOptional(i.tBoolean),headerTemplate:i.tOptional(i.tString),footerTemplate:i.tOptional(i.tString),printBackground:i.tOptional(i.tBoolean),landscape:i.tOptional(i.tBoolean),pageRanges:i.tOptional(i.tString),format:i.tOptional(i.tString),width:i.tOptional(i.tString),height:i.tOptional(i.tString),preferCSSPageSize:i.tOptional(i.tBoolean),margin:i.tOptional(i.tObject({top:i.tOptional(i.tString),bottom:i.tOptional(i.tString),left:i.tOptional(i.tString),right:i.tOptional(i.tString)}))}),t.PageCrStartJSCoverageParams=i.tObject({resetOnNavigation:i.tOptional(i.tBoolean),reportAnonymousScripts:i.tOptional(i.tBoolean)}),t.PageCrStopJSCoverageParams=i.tOptional(i.tObject({})),t.PageCrStartCSSCoverageParams=i.tObject({resetOnNavigation:i.tOptional(i.tBoolean)}),t.PageCrStopCSSCoverageParams=i.tOptional(i.tObject({})),t.PageBringToFrontParams=i.tOptional(i.tObject({})),t.FrameEvalOnSelectorParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.FrameEvalOnSelectorAllParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.FrameAddScriptTagParams=i.tObject({url:i.tOptional(i.tString),content:i.tOptional(i.tString),type:i.tOptional(i.tString)}),t.FrameAddStyleTagParams=i.tObject({url:i.tOptional(i.tString),content:i.tOptional(i.tString)}),t.FrameCheckParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameClickParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.FrameContentParams=i.tOptional(i.tObject({})),t.FrameDblclickParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),timeout:i.tOptional(i.tNumber)}),t.FrameDispatchEventParams=i.tObject({selector:i.tString,type:i.tString,eventInit:n("SerializedArgument"),timeout:i.tOptional(i.tNumber)}),t.FrameEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),world:i.tOptional(i.tEnum(["main","utility"]))}),t.FrameEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),world:i.tOptional(i.tEnum(["main","utility"]))}),t.FrameFillParams=i.tObject({selector:i.tString,value:i.tString,timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameFocusParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameFrameElementParams=i.tOptional(i.tObject({})),t.FrameGetAttributeParams=i.tObject({selector:i.tString,name:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameGotoParams=i.tObject({url:i.tString,timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"])),referer:i.tOptional(i.tString)}),t.FrameHoverParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),timeout:i.tOptional(i.tNumber)}),t.FrameInnerHTMLParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameInnerTextParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FramePressParams=i.tObject({selector:i.tString,key:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameQuerySelectorParams=i.tObject({selector:i.tString}),t.FrameQuerySelectorAllParams=i.tObject({selector:i.tString}),t.FrameSelectOptionParams=i.tObject({selector:i.tString,elements:i.tOptional(i.tArray(e("ElementHandle"))),options:i.tOptional(i.tArray(i.tObject({value:i.tOptional(i.tString),label:i.tOptional(i.tString),index:i.tOptional(i.tNumber)}))),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameSetContentParams=i.tObject({html:i.tString,timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.FrameSetInputFilesParams=i.tObject({selector:i.tString,files:i.tArray(i.tObject({name:i.tString,mimeType:i.tString,buffer:i.tBinary})),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameTapParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),timeout:i.tOptional(i.tNumber)}),t.FrameTextContentParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameTitleParams=i.tOptional(i.tObject({})),t.FrameTypeParams=i.tObject({selector:i.tString,text:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameUncheckParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameWaitForFunctionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),timeout:i.tOptional(i.tNumber),pollingInterval:i.tOptional(i.tNumber)}),t.FrameWaitForSelectorParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber),state:i.tOptional(i.tEnum(["attached","detached","visible","hidden"]))}),t.FrameExtendInjectedScriptParams=i.tObject({source:i.tString,arg:n("SerializedArgument")}),t.WorkerEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.WorkerEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.JSHandleDisposeParams=i.tOptional(i.tObject({})),t.ElementHandleDisposeParams=n("JSHandleDisposeParams"),t.JSHandleEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvaluateExpressionParams=n("JSHandleEvaluateExpressionParams"),t.JSHandleEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvaluateExpressionHandleParams=n("JSHandleEvaluateExpressionHandleParams"),t.JSHandleGetPropertyListParams=i.tOptional(i.tObject({})),t.ElementHandleGetPropertyListParams=n("JSHandleGetPropertyListParams"),t.JSHandleGetPropertyParams=i.tObject({name:i.tString}),t.ElementHandleGetPropertyParams=n("JSHandleGetPropertyParams"),t.JSHandleJsonValueParams=i.tOptional(i.tObject({})),t.ElementHandleJsonValueParams=n("JSHandleJsonValueParams"),t.ElementHandleEvalOnSelectorParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvalOnSelectorAllParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleBoundingBoxParams=i.tOptional(i.tObject({})),t.ElementHandleCheckParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleClickParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.ElementHandleContentFrameParams=i.tOptional(i.tObject({})),t.ElementHandleDblclickParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),timeout:i.tOptional(i.tNumber)}),t.ElementHandleDispatchEventParams=i.tObject({type:i.tString,eventInit:n("SerializedArgument")}),t.ElementHandleFillParams=i.tObject({value:i.tString,timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleFocusParams=i.tOptional(i.tObject({})),t.ElementHandleGetAttributeParams=i.tObject({name:i.tString}),t.ElementHandleHoverParams=i.tObject({force:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),timeout:i.tOptional(i.tNumber)}),t.ElementHandleInnerHTMLParams=i.tOptional(i.tObject({})),t.ElementHandleInnerTextParams=i.tOptional(i.tObject({})),t.ElementHandleOwnerFrameParams=i.tOptional(i.tObject({})),t.ElementHandlePressParams=i.tObject({key:i.tString,delay:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleQuerySelectorParams=i.tObject({selector:i.tString}),t.ElementHandleQuerySelectorAllParams=i.tObject({selector:i.tString}),t.ElementHandleScreenshotParams=i.tObject({timeout:i.tOptional(i.tNumber),type:i.tOptional(i.tEnum(["png","jpeg"])),quality:i.tOptional(i.tNumber),omitBackground:i.tOptional(i.tBoolean)}),t.ElementHandleScrollIntoViewIfNeededParams=i.tObject({timeout:i.tOptional(i.tNumber)}),t.ElementHandleSelectOptionParams=i.tObject({elements:i.tOptional(i.tArray(e("ElementHandle"))),options:i.tOptional(i.tArray(i.tObject({value:i.tOptional(i.tString),label:i.tOptional(i.tString),index:i.tOptional(i.tNumber)}))),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleSelectTextParams=i.tObject({timeout:i.tOptional(i.tNumber)}),t.ElementHandleSetInputFilesParams=i.tObject({files:i.tArray(i.tObject({name:i.tString,mimeType:i.tString,buffer:i.tBinary})),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleTapParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(i.tObject({x:i.tNumber,y:i.tNumber})),timeout:i.tOptional(i.tNumber)}),t.ElementHandleTextContentParams=i.tOptional(i.tObject({})),t.ElementHandleTypeParams=i.tObject({text:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleUncheckParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleWaitForElementStateParams=i.tObject({state:i.tEnum(["visible","hidden","stable","enabled","disabled"]),timeout:i.tOptional(i.tNumber)}),t.ElementHandleWaitForSelectorParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber),state:i.tOptional(i.tEnum(["attached","detached","visible","hidden"]))}),t.ElementHandleCreateSelectorForTestParams=i.tObject({name:i.tString}),t.RequestResponseParams=i.tOptional(i.tObject({})),t.RouteAbortParams=i.tObject({errorCode:i.tOptional(i.tString)}),t.RouteContinueParams=i.tObject({method:i.tOptional(i.tString),headers:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),postData:i.tOptional(i.tBinary)}),t.RouteFulfillParams=i.tObject({status:i.tOptional(i.tNumber),headers:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),body:i.tOptional(i.tString),isBase64:i.tOptional(i.tBoolean)}),t.ResourceTiming=i.tObject({startTime:i.tNumber,domainLookupStart:i.tNumber,domainLookupEnd:i.tNumber,connectStart:i.tNumber,secureConnectionStart:i.tNumber,connectEnd:i.tNumber,requestStart:i.tNumber,responseStart:i.tNumber}),t.ResponseBodyParams=i.tOptional(i.tObject({})),t.ResponseFinishedParams=i.tOptional(i.tObject({})),t.BindingCallRejectParams=i.tObject({error:n("SerializedError")}),t.BindingCallResolveParams=i.tObject({result:n("SerializedArgument")}),t.DialogAcceptParams=i.tObject({promptText:i.tOptional(i.tString)}),t.DialogDismissParams=i.tOptional(i.tObject({})),t.DownloadPathParams=i.tOptional(i.tObject({})),t.DownloadSaveAsParams=i.tObject({path:i.tString}),t.DownloadSaveAsStreamParams=i.tOptional(i.tObject({})),t.DownloadFailureParams=i.tOptional(i.tObject({})),t.DownloadStreamParams=i.tOptional(i.tObject({})),t.DownloadDeleteParams=i.tOptional(i.tObject({})),t.StreamReadParams=i.tObject({size:i.tOptional(i.tNumber)}),t.StreamCloseParams=i.tOptional(i.tObject({})),t.CDPSessionSendParams=i.tObject({method:i.tString,params:i.tOptional(i.tAny)}),t.CDPSessionDetachParams=i.tOptional(i.tObject({})),t.ElectronLaunchParams=i.tObject({executablePath:i.tString,args:i.tOptional(i.tArray(i.tString)),cwd:i.tOptional(i.tString),env:i.tOptional(i.tArray(i.tObject({name:i.tString,value:i.tString}))),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElectronApplicationNewBrowserWindowParams=i.tObject({arg:n("SerializedArgument")}),t.ElectronApplicationEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElectronApplicationEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElectronApplicationCloseParams=i.tOptional(i.tObject({})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDispatcher=void 0;const i=n(124),s=n(194),r=n(277),o=n(12);class a extends o.Dispatcher{constructor(e,t){super(e,t,"Browser",{version:t.version(),name:t._options.name},!0),t.on(i.Browser.Events.Disconnected,()=>this._didClose())}_didClose(){this._dispatchEvent("close"),this._dispose()}async newContext(e){return{context:new s.BrowserContextDispatcher(this._scope,await this._object.newContext(e))}}async close(){await this._object.close()}async crNewBrowserCDPSession(){if("chromium"!==this._object._options.name)throw new Error("CDP session is only available in Chromium");const e=this._object;return{session:new r.CDPSessionDispatcher(this._scope,await e.newBrowserCDPSession())}}async crStartTracing(e){if("chromium"!==this._object._options.name)throw new Error("Tracing is only available in Chromium");const t=this._object;await t.startTracing(e.page?e.page._object:void 0,e)}async crStopTracing(){if("chromium"!==this._object._options.name)throw new Error("Tracing is only available in Chromium");const e=this._object;return{binary:(await e.stopTracing()).toString("base64")}}}t.BrowserDispatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDispatcher=void 0;const i=n(12);class s extends i.Dispatcher{constructor(e,t){super(e,t,"Stream",{})}async read(e){const t=this._object.read(Math.min(this._object.readableLength,e.size||this._object.readableLength));return{binary:t?t.toString("base64"):""}}async close(){this._object.destroy()}}t.StreamDispatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameDispatcher=void 0;const i=n(259),s=n(12),r=n(103),o=n(131),a=n(195),l=n(20);class c extends s.Dispatcher{constructor(e,t){super(e,t,"Frame",{url:t.url(),name:t.name(),parentFrame:s.lookupNullableDispatcher(t.parentFrame()),loadStates:Array.from(t._subtreeLifecycleEvents)}),this._frame=t,t.on(i.Frame.Events.AddLifecycle,e=>{this._dispatchEvent("loadstate",{add:e})}),t.on(i.Frame.Events.RemoveLifecycle,e=>{this._dispatchEvent("loadstate",{remove:e})}),t.on(i.Frame.Events.Navigation,e=>{const t={url:e.url,name:e.name,error:e.error?e.error.message:void 0};e.newDocument&&(t.newDocument={request:a.RequestDispatcher.fromNullable(this._scope,e.newDocument.request||null)}),this._dispatchEvent("navigated",t)})}static from(e,t){return s.existingDispatcher(t)||new c(e,t)}async goto(e,t){return await l.runAction(async t=>({response:s.lookupNullableDispatcher(await this._frame.goto(t,e.url,e))}),{...t,type:"goto",value:e.url,page:this._frame._page})}async frameElement(){return{element:new r.ElementHandleDispatcher(this._scope,await this._frame.frameElement())}}async evaluateExpression(e){return{value:o.serializeResult(await this._frame._evaluateExpression(e.expression,e.isFunction,o.parseArgument(e.arg),e.world))}}async evaluateExpressionHandle(e){return{handle:r.createHandle(this._scope,await this._frame._evaluateExpressionHandle(e.expression,e.isFunction,o.parseArgument(e.arg),e.world))}}async waitForSelector(e){return{element:r.ElementHandleDispatcher.createNullable(this._scope,await this._frame.waitForSelector(e.selector,e))}}async dispatchEvent(e){return this._frame.dispatchEvent(e.selector,e.type,o.parseArgument(e.eventInit),e)}async evalOnSelector(e){return{value:o.serializeResult(await this._frame._$evalExpression(e.selector,e.expression,e.isFunction,o.parseArgument(e.arg)))}}async evalOnSelectorAll(e){return{value:o.serializeResult(await this._frame._$$evalExpression(e.selector,e.expression,e.isFunction,o.parseArgument(e.arg)))}}async querySelector(e){return{element:r.ElementHandleDispatcher.createNullable(this._scope,await this._frame.$(e.selector))}}async querySelectorAll(e){return{elements:(await this._frame.$$(e.selector)).map(e=>new r.ElementHandleDispatcher(this._scope,e))}}async content(){return{value:await this._frame.content()}}async setContent(e,t){return await l.runAction(async t=>await this._frame.setContent(t,e.html,e),{...t,type:"setContent",value:e.html,page:this._frame._page})}async addScriptTag(e){return{element:new r.ElementHandleDispatcher(this._scope,await this._frame.addScriptTag(e))}}async addStyleTag(e){return{element:new r.ElementHandleDispatcher(this._scope,await this._frame.addStyleTag(e))}}async click(e,t){return l.runAction(async t=>await this._frame.click(t,e.selector,e),{...t,type:"click",target:e.selector,page:this._frame._page})}async dblclick(e,t){return l.runAction(async t=>await this._frame.dblclick(t,e.selector,e),{...t,type:"dblclick",target:e.selector,page:this._frame._page})}async tap(e,t){return l.runAction(async t=>await this._frame.tap(t,e.selector,e),{...t,type:"tap",target:e.selector,page:this._frame._page})}async fill(e,t){return l.runAction(async t=>await this._frame.fill(t,e.selector,e.value,e),{...t,type:"fill",value:e.value,target:e.selector,page:this._frame._page})}async focus(e){await this._frame.focus(e.selector,e)}async textContent(e){const t=await this._frame.textContent(e.selector,e);return{value:null===t?void 0:t}}async innerText(e){return{value:await this._frame.innerText(e.selector,e)}}async innerHTML(e){return{value:await this._frame.innerHTML(e.selector,e)}}async getAttribute(e){const t=await this._frame.getAttribute(e.selector,e.name,e);return{value:null===t?void 0:t}}async hover(e,t){return l.runAction(async t=>await this._frame.hover(t,e.selector,e),{...t,type:"hover",target:e.selector,page:this._frame._page})}async selectOption(e,t){return l.runAction(async t=>{const n=(e.elements||[]).map(e=>e._elementHandle);return{values:await this._frame.selectOption(t,e.selector,n,e.options||[],e)}},{...t,type:"selectOption",target:e.selector,page:this._frame._page})}async setInputFiles(e,t){return l.runAction(async t=>await this._frame.setInputFiles(t,e.selector,e.files,e),{...t,type:"setInputFiles",target:e.selector,page:this._frame._page})}async type(e,t){return l.runAction(async t=>await this._frame.type(t,e.selector,e.text,e),{...t,type:"type",value:e.text,target:e.selector,page:this._frame._page})}async press(e,t){return l.runAction(async t=>await this._frame.press(t,e.selector,e.key,e),{...t,type:"press",value:e.key,target:e.selector,page:this._frame._page})}async check(e,t){return l.runAction(async t=>await this._frame.check(t,e.selector,e),{...t,type:"check",target:e.selector,page:this._frame._page})}async uncheck(e,t){return l.runAction(async t=>await this._frame.uncheck(t,e.selector,e),{...t,type:"uncheck",target:e.selector,page:this._frame._page})}async waitForFunction(e){return{handle:r.createHandle(this._scope,await this._frame._waitForFunctionExpression(e.expression,e.isFunction,o.parseArgument(e.arg),e))}}async title(){return{value:await this._frame.title()}}async extendInjectedScript(e){return{handle:r.createHandle(this._scope,await this._frame.extendInjectedScript(e.source,o.parseArgument(e.arg)))}}}t.FrameDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDPSessionDispatcher=void 0;const i=n(101),s=n(12);class r extends s.Dispatcher{constructor(e,t){super(e,t,"CDPSession",{},!0),t._eventListener=(e,t)=>{this._dispatchEvent("event",{method:e,params:t})},t.on(i.CRSessionEvents.Disconnected,()=>this._dispose())}async send(e){return{result:await this._object.send(e.method,e.params)}}async detach(){return this._object.detach()}}t.CDPSessionDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectorsDispatcher=void 0;const i=n(12);class s extends i.Dispatcher{constructor(e,t){super(e,t,"Selectors",{})}async register(e){await this._object.register(e.name,e.source,e.contentScript)}}t.SelectorsDispatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const i=n(73),s=n(104),r=n(283),o=n(18),a=n(197),l=n(133),c=n(58),d=n(134),h=n(132),u=n(198),p=n(280),f=n(281),m=n(282),_=n(57),g=n(200),w=n(514),b=n(284),y=n(515),v=n(516),x=n(196),S=n(273),E=n(517),k=n(518),C=n(32),P=n(199),T=n(4);class O extends o.ChannelOwner{constructor(e){super(e,"","",{})}}t.Connection=class{constructor(){this._objects=new Map,this._waitingForObject=new Map,this.onmessage=e=>{},this._lastId=0,this._callbacks=new Map,this._rootObject=new O(this)}async waitForObjectWithKnownName(e){return this._objects.has(e)?this._objects.get(e):new Promise(t=>this._waitingForObject.set(e,t))}getObjectWithKnownName(e){return this._objects.get(e)}async sendMessageToServer(e,t,n,i){const s={};Error.captureStackTrace(s);const r=s.stack.startsWith("Error")?s.stack.substring(5):s.stack,o=++this._lastId,a="debugScopeState"===n?i:function(e,t,n){const i=e+t[0].toUpperCase()+t.substring(1)+"Params";if(!I[i])throw new S.ValidationError(`Unknown scheme for ${e}.${t}`);return I[i](n,"")}(e,n,i),l={id:o,guid:t,method:n,params:a};C.debugLogger.log("channel:command",l),this.onmessage({...l,metadata:{stack:r}});try{return await new Promise((e,t)=>this._callbacks.set(o,{resolve:e,reject:t}))}catch(e){const t=T.isUnderTest()&&e.stack?e.stack.substring(e.stack.indexOf(e.message)+e.message.length):"";throw e.stack=e.message+t+r,e}}_debugScopeState(){return this._rootObject._debugScopeState()}dispatch(e){const{id:t,guid:n,method:i,params:s,result:r,error:o}=e;if(t){C.debugLogger.log("channel:response",e);const n=this._callbacks.get(t);if(!n)throw new Error("Cannot find command to respond: "+t);return this._callbacks.delete(t),void(o?n.reject(_.parseError(o)):n.resolve(this._replaceGuidsWithChannels(r)))}if(C.debugLogger.log("channel:event",e),"__create__"===i)return void this._createRemoteObject(n,s.type,s.guid,s.initializer);if("__dispose__"===i){const e=this._objects.get(n);if(!e)throw new Error("Cannot find object to dispose: "+n);return void e._dispose()}const a=this._objects.get(n);if(!a)throw new Error(`Cannot find object to call "${i}": ${n}`);a._channel.emit(i,this._replaceGuidsWithChannels(s))}_replaceGuidsWithChannels(e){if(!e)return e;if(Array.isArray(e))return e.map(e=>this._replaceGuidsWithChannels(e));if(e.guid&&this._objects.has(e.guid))return this._objects.get(e.guid)._channel;if("object"==typeof e){const t={};for(const n of Object.keys(e))t[n]=this._replaceGuidsWithChannels(e[n]);return t}return e}_createRemoteObject(e,t,n,o){const _=this._objects.get(e);if(!_)throw new Error(`Cannot find parent object ${e} to create ${n}`);let S;switch(o=this._replaceGuidsWithChannels(o),t){case"BindingCall":S=new h.BindingCall(_,t,n,o);break;case"Browser":{const e=o.name;S="chromium"===e?new y.ChromiumBrowser(_,t,n,o):"webkit"===e?new E.WebKitBrowser(_,t,n,o):"firefox"===e?new k.FirefoxBrowser(_,t,n,o):new i.Browser(_,t,n,o);break}case"BrowserContext":{const e=o.browserName;S="chromium"===e?new v.ChromiumBrowserContext(_,t,n,o):new s.BrowserContext(_,t,n,o,e);break}case"BrowserType":S=new r.BrowserType(_,t,n,o);break;case"CDPSession":S=new g.CDPSession(_,t,n,o);break;case"ConsoleMessage":S=new p.ConsoleMessage(_,t,n,o);break;case"Dialog":S=new f.Dialog(_,t,n,o);break;case"Download":S=new m.Download(_,t,n,o);break;case"Electron":S=new b.Electron(_,t,n,o);break;case"ElectronApplication":S=new b.ElectronApplication(_,t,n,o);break;case"ElementHandle":S=new a.ElementHandle(_,t,n,o);break;case"Frame":S=new l.Frame(_,t,n,o);break;case"JSHandle":S=new c.JSHandle(_,t,n,o);break;case"Page":S=new h.Page(_,t,n,o);break;case"Playwright":S=new w.Playwright(_,t,n,o);break;case"RemoteBrowser":S=new r.RemoteBrowser(_,t,n,o);break;case"Request":S=new d.Request(_,t,n,o);break;case"Response":S=new d.Response(_,t,n,o);break;case"Route":S=new d.Route(_,t,n,o);break;case"Stream":S=new x.Stream(_,t,n,o);break;case"Selectors":S=new P.SelectorsOwner(_,t,n,o);break;case"WebSocket":S=new d.WebSocket(_,t,n,o);break;case"Worker":S=new u.Worker(_,t,n,o);break;default:throw new Error("Missing type "+t)}const C=this._waitingForObject.get(n);return C&&(C(S),this._waitingForObject.delete(n)),S}};const I=S.createScheme(e=>(t,n)=>{if(t._object instanceof o.ChannelOwner&&("*"===e||t._object._type===e))return{guid:t._object._guid};throw new S.ValidationError(`${n}: expected ${e}`)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessage=void 0;const i=n(1),s=n(58),r=n(18);class o extends r.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}type(){return this._initializer.type}text(){return this._initializer.text}args(){return this._initializer.args.map(s.JSHandle.from)}location(){return this._initializer.location}[i.inspect.custom](){return this.text()}}t.ConsoleMessage=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;const i=n(18);class s extends i.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}type(){return this._initializer.type}message(){return this._initializer.message}defaultValue(){return this._initializer.defaultValue}async accept(e){return this._wrapApiCall("dialog.accept",async()=>{await this._channel.accept({promptText:e})})}async dismiss(){return this._wrapApiCall("dialog.dismiss",async()=>{await this._channel.dismiss()})}}t.Dialog=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Download=void 0;const i=n(18),s=n(196),r=n(0),o=n(4);class a extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._browser=e._browser}static from(e){return e._object}url(){return this._initializer.url}suggestedFilename(){return this._initializer.suggestedFilename}async path(){if(this._browser&&this._browser._isRemote)throw new Error("Path is not available when using browserType.connect(). Use download.saveAs() to save a local copy.");return(await this._channel.path()).value||null}async saveAs(e){return this._wrapApiCall("download.saveAs",async()=>{if(!this._browser||!this._browser._isRemote)return void await this._channel.saveAs({path:e});const t=await this._channel.saveAsStream(),n=s.Stream.from(t.stream);await o.mkdirIfNeeded(e),await new Promise((t,i)=>{n.stream().pipe(r.createWriteStream(e)).on("finish",t).on("error",i)})})}async failure(){return(await this._channel.failure()).error||null}async createReadStream(){const e=await this._channel.stream();if(!e.stream)return null;return s.Stream.from(e.stream).stream()}async delete(){return this._channel.delete()}}t.Download=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteBrowser=t.BrowserType=void 0;const i=n(73),s=n(104),r=n(18),o=n(71),a=n(2),l=n(0),c=n(279),d=n(57),h=n(41),u=n(39),p=n(59),f=n(4),m=n(199),_=n(40),g=n(196);class w extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._timeoutSettings=new u.TimeoutSettings}static from(e){return e._object}executablePath(){if(!this._initializer.executablePath)throw new Error("Browser is not supported on current platform");return this._initializer.executablePath}name(){return this._initializer.name}async launch(e={}){const t=e.logger;return this._wrapApiCall("browserType.launch",async()=>{f.assert(!e.userDataDir,"userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead"),f.assert(!e.port,"Cannot specify a port without launching as a server.");const n={...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?p.envObjectToArray(e.env):void 0},s=i.Browser.from((await this._channel.launch(n)).browser);return s._logger=t,s},t)}async launchServer(e={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return this._serverLauncher.launchServer(e)}async launchPersistentContext(e,t={}){return this._wrapApiCall("browserType.launchPersistentContext",async()=>{f.assert(!t.port,"Cannot specify a port without launching as a server.");const n=s.validateBrowserContextOptions(t),i={...n,ignoreDefaultArgs:Array.isArray(t.ignoreDefaultArgs)?t.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!t.ignoreDefaultArgs&&!Array.isArray(t.ignoreDefaultArgs),env:t.env?p.envObjectToArray(t.env):void 0,userDataDir:e},r=await this._channel.launchPersistentContext(i),o=s.BrowserContext.from(r.context);return o._options=n,o._logger=t.logger,o},t.logger)}async connect(e){const t=e.logger;return this._wrapApiCall("browserType.connect",async()=>{const n=new c.Connection,s=new o(e.wsEndpoint,[],{perMessageDeflate:!1,maxPayload:268435456,handshakeTimeout:this._timeoutSettings.timeout(e)}),r=e.slowMo?t=>setTimeout(t,e.slowMo):f.makeWaitForNextTask();return n.onmessage=e=>{s.readyState===o.OPEN?s.send(JSON.stringify(e)):setTimeout(()=>{n.dispatch({id:e.id,error:d.serializeError(new Error(_.kBrowserClosedError))})},0)},s.addEventListener("message",e=>{r(()=>n.dispatch(JSON.parse(e.data)))}),await new Promise(async(r,o)=>{if(e.__testHookBeforeCreateBrowser)try{await e.__testHookBeforeCreateBrowser()}catch(e){o(e)}s.addEventListener("open",async()=>{const e=await n.waitForObjectWithKnownName("remoteBrowser"),o=m.SelectorsOwner.from(e._initializer.selectors);m.sharedSelectors._addChannel(o);const a=i.Browser.from(e._initializer.browser);a._logger=t,a._isRemote=!0;const l=()=>{for(const e of a.contexts()){for(const t of e.pages())t._onClose();e._onClose()}a._didClose()};s.addEventListener("close",l),a.on(h.Events.Browser.Disconnected,()=>{m.sharedSelectors._removeChannel(o),s.removeEventListener("close",l),s.close()}),r(a)}),s.addEventListener("error",e=>{s.close(),o(new Error("WebSocket error: "+e.message))})})},t)}}t.BrowserType=w;class b extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._channel.on("video",({context:e,stream:t,relativePath:n})=>this._onVideo(s.BrowserContext.from(e),g.Stream.from(t),n))}async _onVideo(e,t,n){const i=a.join(e._options.recordVideo.dir,n);await f.mkdirIfNeeded(i),t.stream().pipe(l.createWriteStream(i))}}t.RemoteBrowser=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronApplication=t.Electron=void 0;const i=n(104),s=n(18),r=n(132),o=n(58),a=n(39),l=n(105),c=n(41),d=n(59);class h extends s.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}async launch(e,t={}){const n=t.logger;return t={...t,logger:void 0},this._wrapApiCall("electron.launch",async()=>{const n={...t,env:t.env?d.envObjectToArray(t.env):void 0,executablePath:e};return u.from((await this._channel.launch(n)).electronApplication)},n)}}t.Electron=h;class u extends s.ChannelOwner{constructor(e,t,n,s){super(e,t,n,s),this._windows=new Set,this._timeoutSettings=new a.TimeoutSettings,this._channel.on("context",({context:e})=>this._context=i.BrowserContext.from(e)),this._channel.on("window",({page:e,browserWindow:t})=>{const n=r.Page.from(e);n.browserWindow=o.JSHandle.from(t),this._windows.add(n),this.emit(c.Events.ElectronApplication.Window,n),n.once(c.Events.Page.Close,()=>this._windows.delete(n))}),this._channel.on("close",()=>this.emit(c.Events.ElectronApplication.Close))}static from(e){return e._object}windows(){return[...this._windows]}async firstWindow(){return this._windows.size?this._windows.values().next().value:this.waitForEvent("window")}async newBrowserWindow(e){const t=await this._channel.newBrowserWindow({arg:o.serializeArgument(e)});return r.Page.from(t.page)}context(){return this._context}async close(){await this._channel.close()}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,s=new l.Waiter;s.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==c.Events.ElectronApplication.Close&&s.rejectOnEvent(this,c.Events.ElectronApplication.Close,new Error("Electron application closed"));const r=await s.waitForEvent(this,e,i);return s.dispose(),r}async evaluate(e,t){const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.parseResult(n.value)}async evaluateHandle(e,t){const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(n.handle)}}t.ElectronApplication=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return["AWS_Lambda_nodejs10.x","AWS_Lambda_nodejs12.x"].includes(process.env.AWS_EXECUTION_ENV)}},function(e,t,n){"use strict";var i;e.exports=S,S.ReadableState=x;n(5).EventEmitter;var s=function(e,t){return e.listeners(t).length},r=n(287),o=n(10).Buffer,a=global.Uint8Array||function(){};var l,c=n(1);l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,h,u=n(537),p=n(288),f=n(289).getHighWaterMark,m=n(74).codes,_=m.ERR_INVALID_ARG_TYPE,g=m.ERR_STREAM_PUSH_AFTER_EOF,w=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y=n(538).emitExperimentalWarning;n(75)(S,r);var v=["error","close","destroy","pause","resume"];function x(e,t,s){i=i||n(76),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",s),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(291).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function S(e){if(i=i||n(76),!(this instanceof S))return new S(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),r.call(this)}function E(e,t,n,i,s){l("readableAddChunk",t);var r,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,c);else if(s||(r=function(e,t){var n;i=t,o.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],t));var i;return n}(c,t)),r)e.emit("error",r);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),i)c.endEmitted?e.emit("error",new b):k(e,c,t,!0);else if(c.ended)e.emit("error",new g);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?k(e,c,t,!1):O(e,c)):k(e,c,t,!1)}else i||(c.reading=!1,O(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function k(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),O(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=o.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},S.prototype.unshift=function(e){return E(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){return d||(d=n(291).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=this._readableState.decoder.encoding,this};function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(T,e))}function T(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function O(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function A(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){l("readable nexttick read 0"),e.read(0)}function F(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(D,t,e))}function D(e,t){l("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function j(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):P(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&L(this),null;var i,s=t.needReadable;return l("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",s=!0),t.ended||t.reading?l("reading or ended",s=!1):s&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(n,t))),null===(i=e>0?R(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==i&&this.emit("data",i),i},S.prototype._read=function(e){this.emit("error",new w("_read()"))},S.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,t);var r=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:m;function o(t,s){l("onunpipe"),t===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",c),e.removeListener("error",u),e.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",h),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function a(){l("onend"),e.end()}i.endEmitted?process.nextTick(r):n.once("end",r),e.on("unpipe",o);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",c);var d=!1;function h(t){l("ondata");var s=e.write(t);l("dest.write",s),!1===s&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==j(i.pipes,e))&&!d&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function u(t){l("onerror",t),m(),e.removeListener("error",u),0===s(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",f),m()}function f(){l("onfinish"),e.removeListener("close",p),m()}function m(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",u),e.once("close",p),e.once("finish",f),e.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<s;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=r.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?P(this):i.reading||process.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(A,this),n},S.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(A,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(F,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var s in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(l("wrapped data"),n.decoder&&(s=n.decoder.write(s)),n.objectMode&&null==s)||(n.objectMode||s&&s.length)&&(t.push(s)||(i=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var r=0;r<v.length;r++)e.on(v[r],this.emit.bind(this,v[r]));return this._read=function(t){l("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return y("Readable[Symbol.asyncIterator]"),void 0===h&&(h=n(542)),h(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=R,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function i(e,t){r(e,t),s(e)}function s(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(process.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t?(process.nextTick(s,n),t(e)):process.nextTick(s,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var i=n(74).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,s){var r=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new i(s?n:"highWaterMark",r);return Math.floor(r)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var s=i.callback;t.pendingcb--,s(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var s;e.exports=S,S.WritableState=x;var r={deprecate:n(540)},o=n(287),a=n(10).Buffer,l=global.Uint8Array||function(){};var c,d=n(288),h=n(289).getHighWaterMark,u=n(74).codes,p=u.ERR_INVALID_ARG_TYPE,f=u.ERR_METHOD_NOT_IMPLEMENTED,m=u.ERR_MULTIPLE_CALLBACK,_=u.ERR_STREAM_CANNOT_PIPE,g=u.ERR_STREAM_DESTROYED,w=u.ERR_STREAM_NULL_VALUES,b=u.ERR_STREAM_WRITE_AFTER_END,y=u.ERR_UNKNOWN_ENCODING;function v(){}function x(e,t,r){s=s||n(76),e=e||{},"boolean"!=typeof r&&(r=t instanceof s),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(process.nextTick(s,i),process.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),O(e,t))}(e,n,i,t,s);else{var r=P(n)||e.destroyed;r||n.corked||n.bufferProcessing||!n.bufferedRequest||C(e,n),i?process.nextTick(k,e,n,r,s):k(e,n,r,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(e){var t=this instanceof(s=s||n(76));if(!t&&!c.call(S,this))return new S(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function E(e,t,n,i,s,r,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(s,t.onwrite):e._write(s,r,t.onwrite),t.sync=!1}function k(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function C(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var s=t.bufferedRequestCount,r=new Array(s),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,E(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,h=n.callback;if(E(e,t,!1,t.objectMode?1:c.length,c,d,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=P(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}n(75)(S,o),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof x)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){this.emit("error",new _)},S.prototype.write=function(e,t,n){var i,s=this._writableState,r=!1,o=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof l);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=v),s.ending?function(e,t){var n=new b;e.emit("error",n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,i){var s;return null===n?s=new w:"string"==typeof n||t.objectMode||(s=new p("chunk",["string","Buffer"],n)),!s||(e.emit("error",s),process.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,r=function(e,t,n,i,s,r){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,i,s);i!==o&&(n=!0,s="buffer",i=o)}var l=t.objectMode?1:i.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:s,isBuf:n,callback:r,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,l,i,s,r);return c}(this,s,o,e,t,n)),r},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=d.destroy,S.prototype._undestroy=d.undestroy,S.prototype._destroy=function(e,t){t(e)}},function(e,t,n){"use strict";var i=n(541).Buffer,s=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=u,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var s=o(t[i]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--i<n||-2===s)return 0;if((s=o(t[i]))>=0)return s>0&&(e.lastNeed=s-2),s;if(--i<n||-2===s)return 0;if((s=o(t[i]))>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=d;var i=n(74).codes,s=i.ERR_METHOD_NOT_IMPLEMENTED,r=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(76);function c(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(t,n){u(e,t,n)}))}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(75)(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,n){n(new s("_transform()"))},d.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var s=this._readableState;(i.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t){var n=Buffer.alloc,i="0".charCodeAt(0),s=Buffer.from("ustar\0","binary"),r=Buffer.from("00","binary"),o=Buffer.from("ustar ","binary"),a=Buffer.from(" \0","binary"),l=parseInt("7777",8),c=function(e,t,n,i){for(;n<i;n++)if(e[n]===t)return n;return i},d=function(e){for(var t=256,n=0;n<148;n++)t+=e[n];for(var i=156;i<512;i++)t+=e[i];return t},h=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var u=function(e,t,n){if(128&(e=e.slice(t,t+n))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var n=!1,i=[],s=e.length-1;s>0;s--){var r=e[s];t?i.push(r):n&&0===r?i.push(0):n?(n=!1,i.push(256-r)):i.push(255-r)}var o=0,a=i.length;for(s=0;s<a;s++)o+=i[s]*Math.pow(256,s);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var i=(s=c(e,32,t,e.length),r=e.length,o=e.length,"number"!=typeof s?o:(s=~~s)>=r?r:s>=0||(s+=r)>=0?s:0);t<i&&0===e[t];)t++;return i===t?0:parseInt(e.slice(t,i).toString(),8);var s,r,o},p=function(e,t,n,i){return e.slice(t,c(e,0,t,t+n)).toString(i)},f=function(e){var t=Buffer.byteLength(e),n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e};t.decodeLongPath=function(e,t){return p(e,0,e.length,t)},t.encodePax=function(e){var t="";e.name&&(t+=f(" path="+e.name+"\n")),e.linkname&&(t+=f(" linkpath="+e.linkname+"\n"));var n=e.pax;if(n)for(var i in n)t+=f(" "+i+"="+n[i]+"\n");return Buffer.from(t)},t.decodePax=function(e){for(var t={};e.length;){for(var n=0;n<e.length&&32!==e[n];)n++;var i=parseInt(e.slice(0,n).toString(),10);if(!i)return t;var s=e.slice(n+1,i-1).toString(),r=s.indexOf("=");if(-1===r)return t;t[s.slice(0,r)]=s.slice(r+1),e=e.slice(i)}return t},t.encode=function(e){var t=n(512),o=e.name,a="";if(5===e.typeflag&&"/"!==o[o.length-1]&&(o+="/"),Buffer.byteLength(o)!==o.length)return null;for(;Buffer.byteLength(o)>100;){var c=o.indexOf("/");if(-1===c)return null;a+=a?"/"+o.slice(0,c):o.slice(0,c),o=o.slice(c+1)}return Buffer.byteLength(o)>100||Buffer.byteLength(a)>155||e.linkname&&Buffer.byteLength(e.linkname)>100?null:(t.write(o),t.write(h(e.mode&l,6),100),t.write(h(e.uid,6),108),t.write(h(e.gid,6),116),t.write(h(e.size,11),124),t.write(h(e.mtime.getTime()/1e3|0,11),136),t[156]=i+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&t.write(e.linkname,157),s.copy(t,257),r.copy(t,263),e.uname&&t.write(e.uname,265),e.gname&&t.write(e.gname,297),t.write(h(e.devmajor||0,6),329),t.write(h(e.devminor||0,6),337),a&&t.write(a,345),t.write(h(d(t),6),148),t)},t.decode=function(e,t){var n=0===e[156]?0:e[156]-i,r=p(e,0,100,t),l=u(e,100,8),c=u(e,108,8),h=u(e,116,8),f=u(e,124,12),m=u(e,136,12),_=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(n),g=0===e[157]?null:p(e,157,100,t),w=p(e,265,32),b=p(e,297,32),y=u(e,329,8),v=u(e,337,8),x=d(e);if(256===x)return null;if(x!==u(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===s.compare(e,257,263))e[345]&&(r=p(e,345,155,t)+"/"+r);else if(0!==o.compare(e,257,263)||0!==a.compare(e,263,265))throw new Error("Invalid tar header: unknown format.");return 0===n&&r&&"/"===r[r.length-1]&&(n=5),{name:r,mode:l,uid:c,gid:h,size:f,mtime:new Date(1e3*m),type:_,linkname:g,uname:w,gname:b,devmajor:y,devminor:v}}},function(e,t,n){var i=n(295),s=function(){},r=function(e,t,n){if("function"==typeof t)return r(e,null,t);t||(t={}),n=i(n||s);var o=e._writableState,a=e._readableState,l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,d=function(){e.writable||h()},h=function(){c=!1,l||n.call(e)},u=function(){l=!1,c||n.call(e)},p=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},f=function(t){n.call(e,t)},m=function(){return(!l||a&&a.ended)&&(!c||o&&o.ended)?void 0:n.call(e,new Error("premature close"))},_=function(){e.req.on("finish",h)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?c&&!o&&(e.on("end",d),e.on("close",d)):(e.on("complete",h),e.on("abort",m),e.req?_():e.on("request",_)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",u),e.on("finish",h),!1!==t.error&&e.on("error",f),e.on("close",m),function(){e.removeListener("complete",h),e.removeListener("abort",m),e.removeListener("request",_),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("exit",p),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",m)}};e.exports=r},function(e,t,n){var i=n(547);function s(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function r(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(s),e.exports.strict=i(r),s.proto=s((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return s(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){const i=n(453);t.handler=async(e,t,n)=>{let s=null,r=e.body;console.log("body",r);try{if(!r.url||!function(e){try{new URL(e)}catch(e){return!1}return!0}(r.url))throw"Please provide a valid url";{s=await i.launchChromium({headless:!0});const e=await s.newContext(),t=await e.newPage();await t.goto(r.url);n(null,{statusCode:200,body:await t.screenshot({type:"png"})})}}catch(e){n(null,{statusCode:200,body:"Failed to screenshot!"+e})}finally{null!==s&&await s.close()}}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(454),t)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.loadFont=t.launchChromium=t.getChromiumArgs=void 0;const i=n(0),s=n(0),r=n(2),o=n(1),a=n(45),l=n(455),c=n(285),d=n(528),h=n(529),u=n(530),{inflate:p}=n(531);function f(e){const t=["--autoplay-policy=user-gesture-required","--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-update","--disable-default-apps","--disable-dev-shm-usage","--disable-domain-reliability","--disable-extensions","--disable-features=AudioServiceOutOfProcess","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-notifications","--disable-offer-store-unmasked-wallet-cards","--disable-popup-blocking","--disable-print-preview","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-setuid-sandbox","--disable-speech-api","--disable-sync","--disk-cache-size=33554432","--hide-scrollbars","--ignore-gpu-blacklist","--metrics-recording-only","--mute-audio","--no-default-browser-check","--no-first-run","--no-pings","--no-sandbox","--no-zygote","--password-store=basic","--use-gl=swiftshader","--use-mock-keychain"];return!0===e?t.push("--single-process"):t.push("--start-maximized"),t}t.getChromiumArgs=f,t.launchChromium=async function(t){const n=d.default(),s=f(n),o=await async function(t){if(!0!==t)return;if(!0===await h.default("/tmp/chromium")){for(const e of await i.promises.readdir("/tmp"))!0===e.startsWith("core.chromium")&&await i.promises.unlink("/tmp/"+e);return"/tmp/chromium"}const n=r.join(e,"bin"),s=[p(n+"/chromium.br"),p(n+"/swiftshader.tar.br")];return c.default()&&s.push(p(n+"/aws.tar.br")),(await Promise.all(s)).shift()}(n),a={...await u.default(),...(null==t?void 0:t.env)||{}};return await l.chromium.launch({args:s,executablePath:o,headless:n,env:a,...t})},t.loadFont=async e=>new Promise(async(t,n)=>{const l=new URL(e),c=r.join(u.AWS_FONT_DIR,l.pathname.split("/").pop());if(await o.promisify(s.exists)(c))return void t();s.existsSync(u.AWS_FONT_DIR)||await i.promises.mkdir(u.AWS_FONT_DIR);const d=s.createWriteStream(c);d.once("error",e=>n(e)),a.get(e,e=>{e.on("data",e=>{d.write(e)}),e.once("end",()=>{d.end(()=>t())})})})}).call(this,"/")},function(e,t,n){(function(t){const{Playwright:i}=n(456),{setupInProcess:s}=n(497);e.exports=s(new i(t,n(527).browsers))}).call(this,"/")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Playwright=void 0;const i=n(457),s=n(475),r=n(482),o=n(490),a=n(188);t.Playwright=class{constructor(e,t){this.selectors=a.serverSelectors;const n=t.find(e=>"chromium"===e.name);this.chromium=new i.Chromium(e,n);const l=t.find(e=>"firefox"===e.name);this.firefox=new o.Firefox(e,l);const c=t.find(e=>"webkit"===e.name);this.webkit=new r.WebKit(e,c),this.clank=new s.Clank(e,{name:"clank",revision:"0",download:!1})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chromium=void 0;const i=n(2),s=n(123),r=n(101),o=n(25),a=n(128),l=n(474),c=n(4);class d extends a.BrowserType{constructor(e,t){super(e,t),c.isDebugMode()&&(this._devtools=this._createDevTools())}_createDevTools(){return new l.CRDevTools(i.join(this._browserPath,"devtools-preferences.json"))}async _connectToTransport(e,t){let n=this._devtools;return t.__testHookForDevTools&&(n=this._createDevTools(),await t.__testHookForDevTools(n)),s.CRBrowser.connect(e,t,n)}_rewriteStartupError(e){return e.message.includes("crbug.com/357670")||e.message.includes("No usable sandbox!")||e.message.includes("crbug.com/638180")?o.rewriteErrorMessage(e,["Chromium sandboxing failed!","================================","To workaround sandboxing issues, do either of the following:","  - (preferred): Configure environment to support sandboxing: https://github.com/microsoft/playwright/blob/master/docs/troubleshooting.md","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join("\n")):e}_amendEnvironment(e,t,n,i){return e}_attemptToGracefullyCloseBrowser(e){const t={method:"Browser.close",id:r.kBrowserCloseMessageId,params:{}};e.send(t)}_defaultArgs(e,t,n){const{args:i=[],proxy:s}=e;if(i.find(e=>e.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter instead of specifying --user-data-dir argument");if(i.find(e=>e.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(i.find(e=>!e.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const r=[...h];if(r.push("--user-data-dir="+n),r.push("--remote-debugging-pipe"),e.devtools&&r.push("--auto-open-devtools-for-tabs"),e.headless&&r.push("--headless","--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4"),!0!==e.chromiumSandbox&&r.push("--no-sandbox"),s){const e=new URL(s.server);if("socks5:"===e.protocol&&r.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${e.hostname}"`),r.push("--proxy-server="+s.server),s.bypass){const e=s.bypass.split(",").map(e=>e.trim()).map(e=>e.startsWith(".")?"*"+e:e);r.push("--proxy-bypass-list="+e.join(";"))}}return r.push(...i),t?r.push("about:blank"):r.push("--no-startup-window"),r}}t.Chromium=d;const h=["--disable-background-networking","--enable-features=NetworkService,NetworkServiceInProcess","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features=TranslateUI,BlinkGenPropertyTrees,ImprovedCookieControls,SameSiteByDefaultCookies,LazyFrameLoading","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--enable-automation","--password-store=basic","--use-mock-keychain"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="(/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/server/injected/injectedScript.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/webpack/buildin/global.js\":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/selectorParser.ts\":\n/*!*********************************************!*\\\n  !*** ./src/server/common/selectorParser.ts ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseSelector = void 0;\nfunction parseSelector(selector) {\n    let index = 0;\n    let quote;\n    let start = 0;\n    const result = { parts: [] };\n    const append = () => {\n        const part = selector.substring(start, index).trim();\n        const eqIndex = part.indexOf('=');\n        let name;\n        let body;\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\n            name = part.substring(0, eqIndex).trim();\n            body = part.substring(eqIndex + 1);\n        }\n        else if (part.length > 1 && part[0] === '\"' && part[part.length - 1] === '\"') {\n            name = 'text';\n            body = part;\n        }\n        else if (part.length > 1 && part[0] === \"'\" && part[part.length - 1] === \"'\") {\n            name = 'text';\n            body = part;\n        }\n        else if (/^\\(*\\/\\//.test(part) || part.startsWith('..')) {\n            // If selector starts with '//' or '//' prefixed with multiple opening\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\n            // If selector starts with '..', consider xpath as well.\n            name = 'xpath';\n            body = part;\n        }\n        else {\n            name = 'css';\n            body = part;\n        }\n        let capture = false;\n        if (name[0] === '*') {\n            capture = true;\n            name = name.substring(1);\n        }\n        result.parts.push({ name, body });\n        if (capture) {\n            if (result.capture !== undefined)\n                throw new Error(`Only one of the selectors can capture using * modifier`);\n            result.capture = result.parts.length - 1;\n        }\n    };\n    while (index < selector.length) {\n        const c = selector[index];\n        if (c === '\\\\' && index + 1 < selector.length) {\n            index += 2;\n        }\n        else if (c === quote) {\n            quote = undefined;\n            index++;\n        }\n        else if (!quote && (c === '\"' || c === '\\'' || c === '`')) {\n            quote = c;\n            index++;\n        }\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\n            append();\n            index += 2;\n            start = index;\n        }\n        else {\n            index++;\n        }\n    }\n    append();\n    return result;\n}\nexports.parseSelector = parseSelector;\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/attributeSelectorEngine.ts\":\n/*!********************************************************!*\\\n  !*** ./src/server/injected/attributeSelectorEngine.ts ***!\n  \\********************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createAttributeEngine = void 0;\nfunction createAttributeEngine(attribute, shadow) {\n    const engine = {\n        create(root, target) {\n            const value = target.getAttribute(attribute);\n            if (!value)\n                return;\n            if (engine.query(root, value) === target)\n                return value;\n        },\n        query(root, selector) {\n            if (!shadow)\n                return root.querySelector(`[${attribute}=${JSON.stringify(selector)}]`) || undefined;\n            return queryShadowInternal(root, attribute, selector);\n        },\n        queryAll(root, selector) {\n            if (!shadow)\n                return Array.from(root.querySelectorAll(`[${attribute}=${JSON.stringify(selector)}]`));\n            const result = [];\n            queryShadowAllInternal(root, attribute, selector, result);\n            return result;\n        }\n    };\n    return engine;\n}\nexports.createAttributeEngine = createAttributeEngine;\nfunction queryShadowInternal(root, attribute, value) {\n    const single = root.querySelector(`[${attribute}=${JSON.stringify(value)}]`);\n    if (single)\n        return single;\n    const all = root.querySelectorAll('*');\n    for (let i = 0; i < all.length; i++) {\n        const shadowRoot = all[i].shadowRoot;\n        if (shadowRoot) {\n            const single = queryShadowInternal(shadowRoot, attribute, value);\n            if (single)\n                return single;\n        }\n    }\n}\nfunction queryShadowAllInternal(root, attribute, value, result) {\n    const document = root instanceof Document ? root : root.ownerDocument;\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);\n    const shadowRoots = [];\n    while (walker.nextNode()) {\n        const element = walker.currentNode;\n        if (element.getAttribute(attribute) === value)\n            result.push(element);\n        if (element.shadowRoot)\n            shadowRoots.push(element.shadowRoot);\n    }\n    for (const shadowRoot of shadowRoots)\n        queryShadowAllInternal(shadowRoot, attribute, value, result);\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/cssSelectorEngine.ts\":\n/*!**************************************************!*\\\n  !*** ./src/server/injected/cssSelectorEngine.ts ***!\n  \\**************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createCSSEngine = void 0;\nfunction createCSSEngine(shadow) {\n    const engine = {\n        create(root, targetElement) {\n            if (shadow)\n                return;\n            const tokens = [];\n            function uniqueCSSSelector(prefix) {\n                const path = tokens.slice();\n                if (prefix)\n                    path.unshift(prefix);\n                const selector = path.join(' > ');\n                const nodes = Array.from(root.querySelectorAll(selector));\n                return nodes[0] === targetElement ? selector : undefined;\n            }\n            for (let element = targetElement; element && element !== root; element = element.parentElement) {\n                const nodeName = element.nodeName.toLowerCase();\n                // Element ID is the strongest signal, use it.\n                let bestTokenForLevel = '';\n                if (element.id) {\n                    const token = /^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(element.id) ? '#' + element.id : `[id=\"${element.id}\"]`;\n                    const selector = uniqueCSSSelector(token);\n                    if (selector)\n                        return selector;\n                    bestTokenForLevel = token;\n                }\n                const parent = element.parentElement;\n                // Combine class names until unique.\n                const classes = Array.from(element.classList);\n                for (let i = 0; i < classes.length; ++i) {\n                    const token = '.' + classes.slice(0, i + 1).join('.');\n                    const selector = uniqueCSSSelector(token);\n                    if (selector)\n                        return selector;\n                    // Even if not unique, does this subset of classes uniquely identify node as a child?\n                    if (!bestTokenForLevel && parent) {\n                        const sameClassSiblings = parent.querySelectorAll(token);\n                        if (sameClassSiblings.length === 1)\n                            bestTokenForLevel = token;\n                    }\n                }\n                // Ordinal is the weakest signal.\n                if (parent) {\n                    const siblings = Array.from(parent.children);\n                    const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\n                    const token = sameTagSiblings.length === 1 ? nodeName : `${nodeName}:nth-child(${1 + siblings.indexOf(element)})`;\n                    const selector = uniqueCSSSelector(token);\n                    if (selector)\n                        return selector;\n                    if (!bestTokenForLevel)\n                        bestTokenForLevel = token;\n                }\n                else if (!bestTokenForLevel) {\n                    bestTokenForLevel = nodeName;\n                }\n                tokens.unshift(bestTokenForLevel);\n            }\n            return uniqueCSSSelector();\n        },\n        query(root, selector) {\n            // TODO: uncomment for performance.\n            // const simple = root.querySelector(selector);\n            // if (simple)\n            //   return simple;\n            // if (!shadow)\n            //   return;\n            const selectors = split(selector);\n            // Note: we do not just merge results produced by each selector, as that\n            // will not return them in the tree traversal order, but rather in the selectors\n            // matching order.\n            if (!selectors.length)\n                return;\n            return queryShadowInternal(root, root, selectors, shadow);\n        },\n        queryAll(root, selector) {\n            // TODO: uncomment for performance.\n            // if (!shadow)\n            //   return Array.from(root.querySelectorAll(selector));\n            const result = [];\n            const selectors = split(selector);\n            // Note: we do not just merge results produced by each selector, as that\n            // will not return them in the tree traversal order, but rather in the selectors\n            // matching order.\n            if (selectors.length)\n                queryShadowAllInternal(root, root, selectors, shadow, result);\n            return result;\n        }\n    };\n    engine._test = () => test(engine);\n    return engine;\n}\nexports.createCSSEngine = createCSSEngine;\nfunction queryShadowInternal(boundary, root, selectors, shadow) {\n    let elements;\n    if (selectors.length === 1) {\n        // Fast path for a single selector - query only matching elements, not all.\n        const parts = selectors[0];\n        const matching = root.querySelectorAll(parts[0]);\n        for (const element of matching) {\n            // If there is a single part, there are no ancestors to match.\n            if (parts.length === 1 || ancestorsMatch(element, parts, boundary))\n                return element;\n        }\n    }\n    else {\n        // Multiple selectors: visit each element in tree-traversal order and check whether it matches.\n        elements = root.querySelectorAll('*');\n        for (const element of elements) {\n            for (const parts of selectors) {\n                if (!element.matches(parts[0]))\n                    continue;\n                // If there is a single part, there are no ancestors to match.\n                if (parts.length === 1 || ancestorsMatch(element, parts, boundary))\n                    return element;\n            }\n        }\n    }\n    // Visit shadow dom after the light dom to preserve the tree-traversal order.\n    if (!shadow)\n        return;\n    if (root.shadowRoot) {\n        const child = queryShadowInternal(boundary, root.shadowRoot, selectors, shadow);\n        if (child)\n            return child;\n    }\n    if (!elements)\n        elements = root.querySelectorAll('*');\n    for (const element of elements) {\n        if (element.shadowRoot) {\n            const child = queryShadowInternal(boundary, element.shadowRoot, selectors, shadow);\n            if (child)\n                return child;\n        }\n    }\n}\nfunction queryShadowAllInternal(boundary, root, selectors, shadow, result) {\n    let elements;\n    if (selectors.length === 1) {\n        // Fast path for a single selector - query only matching elements, not all.\n        const parts = selectors[0];\n        const matching = root.querySelectorAll(parts[0]);\n        for (const element of matching) {\n            // If there is a single part, there are no ancestors to match.\n            if (parts.length === 1 || ancestorsMatch(element, parts, boundary))\n                result.push(element);\n        }\n    }\n    else {\n        // Multiple selectors: visit each element in tree-traversal order and check whether it matches.\n        elements = root.querySelectorAll('*');\n        for (const element of elements) {\n            for (const parts of selectors) {\n                if (!element.matches(parts[0]))\n                    continue;\n                // If there is a single part, there are no ancestors to match.\n                if (parts.length === 1 || ancestorsMatch(element, parts, boundary))\n                    result.push(element);\n            }\n        }\n    }\n    // Visit shadow dom after the light dom to preserve the tree-traversal order.\n    if (!shadow)\n        return;\n    if (root.shadowRoot)\n        queryShadowAllInternal(boundary, root.shadowRoot, selectors, shadow, result);\n    if (!elements)\n        elements = root.querySelectorAll('*');\n    for (const element of elements) {\n        if (element.shadowRoot)\n            queryShadowAllInternal(boundary, element.shadowRoot, selectors, shadow, result);\n    }\n}\nfunction ancestorsMatch(element, parts, boundary) {\n    let i = 1;\n    while (i < parts.length && (element = parentElementOrShadowHost(element)) && element !== boundary) {\n        if (element.matches(parts[i]))\n            i++;\n    }\n    return i === parts.length;\n}\nfunction parentElementOrShadowHost(element) {\n    if (element.parentElement)\n        return element.parentElement;\n    if (!element.parentNode)\n        return;\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\n        return element.parentNode.host;\n}\n// Splits the string into separate selectors by comma, and then each selector by the descendant combinator (space).\n// Parts of each selector are reversed, so that the first one matches the target element.\nfunction split(selector) {\n    let index = 0;\n    let quote;\n    let insideAttr = false;\n    let start = 0;\n    const result = [];\n    let current = [];\n    const appendToCurrent = () => {\n        const part = selector.substring(start, index).trim();\n        if (part.length)\n            current.push(part);\n    };\n    const appendToResult = () => {\n        appendToCurrent();\n        result.push(current);\n        current = [];\n    };\n    const isCombinator = (char) => {\n        return char === '>' || char === '+' || char === '~';\n    };\n    const peekForward = () => {\n        return selector.substring(index).trim()[0];\n    };\n    const peekBackward = () => {\n        const s = selector.substring(0, index).trim();\n        return s[s.length - 1];\n    };\n    while (index < selector.length) {\n        const c = selector[index];\n        if (!quote && !insideAttr && c === ' ' && !isCombinator(peekForward()) && !isCombinator(peekBackward())) {\n            appendToCurrent();\n            start = index;\n            index++;\n        }\n        else {\n            if (c === '\\\\' && index + 1 < selector.length) {\n                index += 2;\n            }\n            else if (c === quote) {\n                quote = undefined;\n                index++;\n            }\n            else if (!quote && (c === '\\'' || c === '\"')) {\n                quote = c;\n                index++;\n            }\n            else if (!quote && c === '[') {\n                insideAttr = true;\n                index++;\n            }\n            else if (!quote && insideAttr && c === ']') {\n                insideAttr = false;\n                index++;\n            }\n            else if (!quote && !insideAttr && c === ',') {\n                appendToResult();\n                index++;\n                start = index;\n            }\n            else {\n                index++;\n            }\n        }\n    }\n    appendToResult();\n    return result.filter(parts => !!parts.length).map(parts => parts.reverse());\n}\nfunction test(engine) {\n    let id = 0;\n    function createShadow(level) {\n        const root = document.createElement('div');\n        root.id = 'id' + id;\n        root.textContent = 'root #id' + id;\n        id++;\n        const shadow = root.attachShadow({ mode: 'open' });\n        for (let i = 0; i < 9; i++) {\n            const div = document.createElement('div');\n            div.id = 'id' + id;\n            div.textContent = '#id' + id;\n            id++;\n            shadow.appendChild(div);\n        }\n        if (level) {\n            shadow.appendChild(createShadow(level - 1));\n            shadow.appendChild(createShadow(level - 1));\n        }\n        return root;\n    }\n    const { query, queryAll } = engine;\n    document.body.textContent = '';\n    document.body.appendChild(createShadow(10));\n    console.time('found');\n    for (let i = 0; i < id; i += 17) {\n        const e = query(document, `div #id${i}`);\n        if (!e || e.id !== 'id' + i)\n            console.log(`div #id${i}`); // eslint-disable-line no-console\n    }\n    console.timeEnd('found');\n    console.time('not found');\n    for (let i = 0; i < id; i += 17) {\n        const e = query(document, `div div div div div #d${i}`);\n        if (e)\n            console.log(`div div div div div #d${i}`); // eslint-disable-line no-console\n    }\n    console.timeEnd('not found');\n    console.log(query(document, '#id543 + #id544')); // eslint-disable-line no-console\n    console.log(query(document, '#id542 ~ #id545')); // eslint-disable-line no-console\n    console.time('all');\n    queryAll(document, 'div div div + div');\n    console.timeEnd('all');\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/injectedScript.ts\":\n/*!***********************************************!*\\\n  !*** ./src/server/injected/injectedScript.ts ***!\n  \\***********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InjectedScript = void 0;\nconst attributeSelectorEngine_1 = __webpack_require__(/*! ./attributeSelectorEngine */ \"./src/server/injected/attributeSelectorEngine.ts\");\nconst cssSelectorEngine_1 = __webpack_require__(/*! ./cssSelectorEngine */ \"./src/server/injected/cssSelectorEngine.ts\");\nconst textSelectorEngine_1 = __webpack_require__(/*! ./textSelectorEngine */ \"./src/server/injected/textSelectorEngine.ts\");\nconst xpathSelectorEngine_1 = __webpack_require__(/*! ./xpathSelectorEngine */ \"./src/server/injected/xpathSelectorEngine.ts\");\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \"./src/server/common/selectorParser.ts\");\nclass InjectedScript {\n    constructor(customEngines) {\n        this.engines = new Map();\n        // Note: keep predefined names in sync with Selectors class.\n        this.engines.set('css', cssSelectorEngine_1.createCSSEngine(true));\n        this.engines.set('css:light', cssSelectorEngine_1.createCSSEngine(false));\n        this.engines.set('xpath', xpathSelectorEngine_1.XPathEngine);\n        this.engines.set('xpath:light', xpathSelectorEngine_1.XPathEngine);\n        this.engines.set('text', textSelectorEngine_1.createTextSelector(true));\n        this.engines.set('text:light', textSelectorEngine_1.createTextSelector(false));\n        this.engines.set('id', attributeSelectorEngine_1.createAttributeEngine('id', true));\n        this.engines.set('id:light', attributeSelectorEngine_1.createAttributeEngine('id', false));\n        this.engines.set('data-testid', attributeSelectorEngine_1.createAttributeEngine('data-testid', true));\n        this.engines.set('data-testid:light', attributeSelectorEngine_1.createAttributeEngine('data-testid', false));\n        this.engines.set('data-test-id', attributeSelectorEngine_1.createAttributeEngine('data-test-id', true));\n        this.engines.set('data-test-id:light', attributeSelectorEngine_1.createAttributeEngine('data-test-id', false));\n        this.engines.set('data-test', attributeSelectorEngine_1.createAttributeEngine('data-test', true));\n        this.engines.set('data-test:light', attributeSelectorEngine_1.createAttributeEngine('data-test', false));\n        for (const { name, engine } of customEngines)\n            this.engines.set(name, engine);\n    }\n    parseSelector(selector) {\n        return selectorParser_1.parseSelector(selector);\n    }\n    querySelector(selector, root) {\n        if (!root['querySelector'])\n            throw new Error('Node is not queryable.');\n        return this._querySelectorRecursively(root, selector, 0);\n    }\n    _querySelectorRecursively(root, selector, index) {\n        const current = selector.parts[index];\n        if (index === selector.parts.length - 1)\n            return this.engines.get(current.name).query(root, current.body);\n        const all = this.engines.get(current.name).queryAll(root, current.body);\n        for (const next of all) {\n            const result = this._querySelectorRecursively(next, selector, index + 1);\n            if (result)\n                return selector.capture === index ? next : result;\n        }\n    }\n    querySelectorAll(selector, root) {\n        if (!root['querySelectorAll'])\n            throw new Error('Node is not queryable.');\n        const capture = selector.capture === undefined ? selector.parts.length - 1 : selector.capture;\n        // Query all elements up to the capture.\n        const partsToQuerAll = selector.parts.slice(0, capture + 1);\n        // Check they have a descendant matching everything after the capture.\n        const partsToCheckOne = selector.parts.slice(capture + 1);\n        let set = new Set([root]);\n        for (const { name, body } of partsToQuerAll) {\n            const newSet = new Set();\n            for (const prev of set) {\n                for (const next of this.engines.get(name).queryAll(prev, body)) {\n                    if (newSet.has(next))\n                        continue;\n                    newSet.add(next);\n                }\n            }\n            set = newSet;\n        }\n        const candidates = Array.from(set);\n        if (!partsToCheckOne.length)\n            return candidates;\n        const partial = { parts: partsToCheckOne };\n        return candidates.filter(e => !!this._querySelectorRecursively(e, partial, 0));\n    }\n    extend(source, params) {\n        const constrFunction = global.eval(source);\n        return new constrFunction(this, params);\n    }\n    isVisible(element) {\n        // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.\n        if (!element.ownerDocument || !element.ownerDocument.defaultView)\n            return true;\n        const style = element.ownerDocument.defaultView.getComputedStyle(element);\n        if (!style || style.visibility === 'hidden')\n            return false;\n        const rect = element.getBoundingClientRect();\n        return rect.width > 0 && rect.height > 0;\n    }\n    pollRaf(predicate) {\n        return this._runAbortableTask(progress => {\n            let fulfill;\n            let reject;\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\n            const onRaf = () => {\n                if (progress.aborted)\n                    return;\n                try {\n                    const continuePolling = Symbol('continuePolling');\n                    const success = predicate(progress, continuePolling);\n                    if (success !== continuePolling)\n                        fulfill(success);\n                    else\n                        requestAnimationFrame(onRaf);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            };\n            onRaf();\n            return result;\n        });\n    }\n    pollInterval(pollInterval, predicate) {\n        return this._runAbortableTask(progress => {\n            let fulfill;\n            let reject;\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\n            const onTimeout = () => {\n                if (progress.aborted)\n                    return;\n                try {\n                    const continuePolling = Symbol('continuePolling');\n                    const success = predicate(progress, continuePolling);\n                    if (success !== continuePolling)\n                        fulfill(success);\n                    else\n                        setTimeout(onTimeout, pollInterval);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            };\n            onTimeout();\n            return result;\n        });\n    }\n    _runAbortableTask(task) {\n        let unsentLogs = [];\n        let takeNextLogsCallback;\n        const logReady = () => {\n            if (!takeNextLogsCallback)\n                return;\n            takeNextLogsCallback(unsentLogs);\n            unsentLogs = [];\n            takeNextLogsCallback = undefined;\n        };\n        const takeNextLogs = () => new Promise(fulfill => {\n            takeNextLogsCallback = fulfill;\n            if (unsentLogs.length)\n                logReady();\n        });\n        let lastLog = '';\n        const progress = {\n            aborted: false,\n            log: (message) => {\n                lastLog = message;\n                unsentLogs.push(message);\n                logReady();\n            },\n            logRepeating: (message) => {\n                if (message !== lastLog)\n                    progress.log(message);\n            },\n        };\n        return {\n            takeNextLogs,\n            result: task(progress),\n            cancel: () => { progress.aborted = true; },\n            takeLastLogs: () => unsentLogs,\n        };\n    }\n    getElementBorderWidth(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE || !node.ownerDocument || !node.ownerDocument.defaultView)\n            return { left: 0, top: 0 };\n        const style = node.ownerDocument.defaultView.getComputedStyle(node);\n        return { left: parseInt(style.borderLeftWidth || '', 10), top: parseInt(style.borderTopWidth || '', 10) };\n    }\n    selectOptions(node, optionsToSelect) {\n        if (node.nodeName.toLowerCase() !== 'select')\n            return 'error:notselect';\n        if (!node.isConnected)\n            return 'error:notconnected';\n        const element = node;\n        const options = Array.from(element.options);\n        element.value = undefined;\n        for (let index = 0; index < options.length; index++) {\n            const option = options[index];\n            option.selected = optionsToSelect.some(optionToSelect => {\n                if (optionToSelect instanceof Node)\n                    return option === optionToSelect;\n                let matches = true;\n                if (optionToSelect.value !== undefined)\n                    matches = matches && optionToSelect.value === option.value;\n                if (optionToSelect.label !== undefined)\n                    matches = matches && optionToSelect.label === option.label;\n                if (optionToSelect.index !== undefined)\n                    matches = matches && optionToSelect.index === index;\n                return matches;\n            });\n            if (option.selected && !element.multiple)\n                break;\n        }\n        element.dispatchEvent(new Event('input', { 'bubbles': true }));\n        element.dispatchEvent(new Event('change', { 'bubbles': true }));\n        return options.filter(option => option.selected).map(option => option.value);\n    }\n    waitForEnabledAndFill(node, value) {\n        return this.pollRaf((progress, continuePolling) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            const element = this.findLabelTarget(node);\n            if (element && !element.isConnected)\n                return 'error:notconnected';\n            if (!element || !this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            if (element.nodeName.toLowerCase() === 'input') {\n                const input = element;\n                const type = (input.getAttribute('type') || '').toLowerCase();\n                const kDateTypes = new Set(['date', 'time', 'datetime', 'datetime-local']);\n                const kTextInputTypes = new Set(['', 'email', 'number', 'password', 'search', 'tel', 'text', 'url']);\n                if (!kTextInputTypes.has(type) && !kDateTypes.has(type)) {\n                    progress.log(`    input of type \"${type}\" cannot be filled`);\n                    return 'error:notfillableinputtype';\n                }\n                if (type === 'number') {\n                    value = value.trim();\n                    if (isNaN(Number(value)))\n                        return 'error:notfillablenumberinput';\n                }\n                if (input.disabled) {\n                    progress.logRepeating('    element is disabled - waiting...');\n                    return continuePolling;\n                }\n                if (input.readOnly) {\n                    progress.logRepeating('    element is readonly - waiting...');\n                    return continuePolling;\n                }\n                if (kDateTypes.has(type)) {\n                    value = value.trim();\n                    input.focus();\n                    input.value = value;\n                    if (input.value !== value)\n                        return 'error:notvaliddate';\n                    element.dispatchEvent(new Event('input', { 'bubbles': true }));\n                    element.dispatchEvent(new Event('change', { 'bubbles': true }));\n                    return 'done'; // We have already changed the value, no need to input it.\n                }\n            }\n            else if (element.nodeName.toLowerCase() === 'textarea') {\n                const textarea = element;\n                if (textarea.disabled) {\n                    progress.logRepeating('    element is disabled - waiting...');\n                    return continuePolling;\n                }\n                if (textarea.readOnly) {\n                    progress.logRepeating('    element is readonly - waiting...');\n                    return continuePolling;\n                }\n            }\n            else if (!element.isContentEditable) {\n                return 'error:notfillableelement';\n            }\n            const result = this._selectText(element);\n            if (result === 'error:notvisible') {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return 'needsinput'; // Still need to input the value.\n        });\n    }\n    waitForVisibleAndSelectText(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            if (!node.isConnected)\n                return 'error:notconnected';\n            const element = node;\n            if (!this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            const result = this._selectText(element);\n            if (result === 'error:notvisible') {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return result;\n        });\n    }\n    _selectText(element) {\n        if (element.nodeName.toLowerCase() === 'input') {\n            const input = element;\n            input.select();\n            input.focus();\n            return 'done';\n        }\n        if (element.nodeName.toLowerCase() === 'textarea') {\n            const textarea = element;\n            textarea.selectionStart = 0;\n            textarea.selectionEnd = textarea.value.length;\n            textarea.focus();\n            return 'done';\n        }\n        const range = element.ownerDocument.createRange();\n        range.selectNodeContents(element);\n        const selection = element.ownerDocument.defaultView.getSelection();\n        if (!selection)\n            return 'error:notvisible';\n        selection.removeAllRanges();\n        selection.addRange(range);\n        element.focus();\n        return 'done';\n    }\n    waitForNodeVisible(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (!this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeHidden(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'done';\n            if (this.isVisible(element)) {\n                progress.logRepeating('    element is visible - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeEnabled(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (this._isElementDisabled(element)) {\n                progress.logRepeating('    element is not enabled - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeDisabled(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (!this._isElementDisabled(element)) {\n                progress.logRepeating('    element is enabled - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    focusNode(node, resetSelectionIfNotFocused) {\n        if (!node.isConnected)\n            return 'error:notconnected';\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return 'error:notelement';\n        const wasFocused = node.getRootNode().activeElement === node && node.ownerDocument && node.ownerDocument.hasFocus();\n        node.focus();\n        if (resetSelectionIfNotFocused && !wasFocused && node.nodeName.toLowerCase() === 'input') {\n            try {\n                const input = node;\n                input.setSelectionRange(0, 0);\n            }\n            catch (e) {\n                // Some inputs do not allow selection.\n            }\n        }\n        return 'done';\n    }\n    findLabelTarget(element) {\n        return element.nodeName === 'LABEL' ? element.control || undefined : element;\n    }\n    isCheckboxChecked(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            throw new Error('Not a checkbox or radio button');\n        const element = node;\n        if (element.getAttribute('role') === 'checkbox')\n            return element.getAttribute('aria-checked') === 'true';\n        const input = this.findLabelTarget(element);\n        if (!input || input.nodeName !== 'INPUT')\n            throw new Error('Not a checkbox or radio button');\n        if (!['radio', 'checkbox'].includes(input.type.toLowerCase()))\n            throw new Error('Not a checkbox or radio button');\n        return input.checked;\n    }\n    setInputFiles(node, payloads) {\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return 'Node is not of type HTMLElement';\n        const element = node;\n        if (element.nodeName !== 'INPUT')\n            return 'Not an <input> element';\n        const input = element;\n        const type = (input.getAttribute('type') || '').toLowerCase();\n        if (type !== 'file')\n            return 'Not an input[type=file] element';\n        const files = payloads.map(file => {\n            const bytes = Uint8Array.from(atob(file.buffer), c => c.charCodeAt(0));\n            return new File([bytes], file.name, { type: file.mimeType });\n        });\n        const dt = new DataTransfer();\n        for (const file of files)\n            dt.items.add(file);\n        input.files = dt.files;\n        input.dispatchEvent(new Event('input', { 'bubbles': true }));\n        input.dispatchEvent(new Event('change', { 'bubbles': true }));\n    }\n    waitForDisplayedAtStablePosition(node, rafOptions, waitForEnabled) {\n        let lastRect;\n        let counter = 0;\n        let samePositionCounter = 0;\n        let lastTime = 0;\n        const predicate = (progress, continuePolling) => {\n            // First raf happens in the same animation frame as evaluation, so it does not produce\n            // any client rect difference compared to synchronous call. We skip the synchronous call\n            // and only force layout during actual rafs as a small optimisation.\n            if (++counter === 1)\n                return continuePolling;\n            if (!node.isConnected)\n                return 'error:notconnected';\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!element)\n                return 'error:notconnected';\n            // Drop frames that are shorter than 16ms - WebKit Win bug.\n            const time = performance.now();\n            if (rafOptions.rafCount > 1 && time - lastTime < 15)\n                return continuePolling;\n            lastTime = time;\n            // Note: this logic should be similar to isVisible() to avoid surprises.\n            const clientRect = element.getBoundingClientRect();\n            const rect = { x: clientRect.top, y: clientRect.left, width: clientRect.width, height: clientRect.height };\n            const samePosition = lastRect && rect.x === lastRect.x && rect.y === lastRect.y && rect.width === lastRect.width && rect.height === lastRect.height;\n            const isDisplayed = rect.width > 0 && rect.height > 0;\n            if (samePosition)\n                ++samePositionCounter;\n            else\n                samePositionCounter = 0;\n            const isStable = samePositionCounter >= rafOptions.rafCount;\n            const isStableForLogs = isStable || !lastRect;\n            lastRect = rect;\n            const style = element.ownerDocument && element.ownerDocument.defaultView ? element.ownerDocument.defaultView.getComputedStyle(element) : undefined;\n            const isVisible = !!style && style.visibility !== 'hidden';\n            const isDisabled = waitForEnabled && this._isElementDisabled(element);\n            if (isDisplayed && isStable && isVisible && !isDisabled)\n                return 'done';\n            if (!isDisplayed || !isVisible)\n                progress.logRepeating(`    element is not visible - waiting...`);\n            else if (!isStableForLogs)\n                progress.logRepeating(`    element is moving - waiting...`);\n            else if (isDisabled)\n                progress.logRepeating(`    element is disabled - waiting...`);\n            return continuePolling;\n        };\n        if (rafOptions.useTimeout)\n            return this.pollInterval(16, predicate);\n        else\n            return this.pollRaf(predicate);\n    }\n    checkHitTargetAt(node, point) {\n        let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n        if (!element || !element.isConnected)\n            return 'error:notconnected';\n        element = element.closest('button, [role=button]') || element;\n        let hitElement = this.deepElementFromPoint(document, point.x, point.y);\n        const hitParents = [];\n        while (hitElement && hitElement !== element) {\n            hitParents.push(hitElement);\n            hitElement = this._parentElementOrShadowHost(hitElement);\n        }\n        if (hitElement === element)\n            return 'done';\n        const hitTargetDescription = this.previewNode(hitParents[0]);\n        // Root is the topmost element in the hitTarget's chain that is not in the\n        // element's chain. For example, it might be a dialog element that overlays\n        // the target.\n        let rootHitTargetDescription;\n        while (element) {\n            const index = hitParents.indexOf(element);\n            if (index !== -1) {\n                if (index > 1)\n                    rootHitTargetDescription = this.previewNode(hitParents[index - 1]);\n                break;\n            }\n            element = this._parentElementOrShadowHost(element);\n        }\n        if (rootHitTargetDescription)\n            return { hitTargetDescription: `${hitTargetDescription} from ${rootHitTargetDescription} subtree` };\n        return { hitTargetDescription };\n    }\n    dispatchEvent(node, type, eventInit) {\n        let event;\n        eventInit = { bubbles: true, cancelable: true, composed: true, ...eventInit };\n        switch (eventType.get(type)) {\n            case 'mouse':\n                event = new MouseEvent(type, eventInit);\n                break;\n            case 'keyboard':\n                event = new KeyboardEvent(type, eventInit);\n                break;\n            case 'touch':\n                event = new TouchEvent(type, eventInit);\n                break;\n            case 'pointer':\n                event = new PointerEvent(type, eventInit);\n                break;\n            case 'focus':\n                event = new FocusEvent(type, eventInit);\n                break;\n            case 'drag':\n                event = new DragEvent(type, eventInit);\n                break;\n            default:\n                event = new Event(type, eventInit);\n                break;\n        }\n        node.dispatchEvent(event);\n    }\n    _isElementDisabled(element) {\n        const elementOrButton = element.closest('button, [role=button]') || element;\n        return ['BUTTON', 'INPUT', 'SELECT'].includes(elementOrButton.nodeName) && elementOrButton.hasAttribute('disabled');\n    }\n    _parentElementOrShadowHost(element) {\n        if (element.parentElement)\n            return element.parentElement;\n        if (!element.parentNode)\n            return;\n        if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\n            return element.parentNode.host;\n    }\n    deepElementFromPoint(document, x, y) {\n        let container = document;\n        let element;\n        while (container) {\n            const innerElement = container.elementFromPoint(x, y);\n            if (!innerElement || element === innerElement)\n                break;\n            element = innerElement;\n            container = element.shadowRoot;\n        }\n        return element;\n    }\n    previewNode(node) {\n        if (node.nodeType === Node.TEXT_NODE)\n            return oneLine(`#text=${node.nodeValue || ''}`);\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return oneLine(`<${node.nodeName.toLowerCase()} />`);\n        const element = node;\n        const attrs = [];\n        for (let i = 0; i < element.attributes.length; i++) {\n            const { name, value } = element.attributes[i];\n            if (name === 'style')\n                continue;\n            if (!value && booleanAttributes.has(name))\n                attrs.push(` ${name}`);\n            else\n                attrs.push(` ${name}=\"${value}\"`);\n        }\n        attrs.sort((a, b) => a.length - b.length);\n        let attrText = attrs.join('');\n        if (attrText.length > 50)\n            attrText = attrText.substring(0, 49) + '\\u2026';\n        if (autoClosingTags.has(element.nodeName))\n            return oneLine(`<${element.nodeName.toLowerCase()}${attrText}/>`);\n        const children = element.childNodes;\n        let onlyText = false;\n        if (children.length <= 5) {\n            onlyText = true;\n            for (let i = 0; i < children.length; i++)\n                onlyText = onlyText && children[i].nodeType === Node.TEXT_NODE;\n        }\n        let text = onlyText ? (element.textContent || '') : (children.length ? '\\u2026' : '');\n        if (text.length > 50)\n            text = text.substring(0, 49) + '\\u2026';\n        return oneLine(`<${element.nodeName.toLowerCase()}${attrText}>${text}</${element.nodeName.toLowerCase()}>`);\n    }\n}\nexports.InjectedScript = InjectedScript;\nconst autoClosingTags = new Set(['AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT', 'KEYGEN', 'LINK', 'MENUITEM', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR']);\nconst booleanAttributes = new Set(['checked', 'selected', 'disabled', 'readonly', 'multiple']);\nfunction oneLine(s) {\n    return s.replace(/\\n/g, '').replace(/\\t/g, '');\n}\nconst eventType = new Map([\n    ['auxclick', 'mouse'],\n    ['click', 'mouse'],\n    ['dblclick', 'mouse'],\n    ['mousedown', 'mouse'],\n    ['mouseeenter', 'mouse'],\n    ['mouseleave', 'mouse'],\n    ['mousemove', 'mouse'],\n    ['mouseout', 'mouse'],\n    ['mouseover', 'mouse'],\n    ['mouseup', 'mouse'],\n    ['mouseleave', 'mouse'],\n    ['mousewheel', 'mouse'],\n    ['keydown', 'keyboard'],\n    ['keyup', 'keyboard'],\n    ['keypress', 'keyboard'],\n    ['textInput', 'keyboard'],\n    ['touchstart', 'touch'],\n    ['touchmove', 'touch'],\n    ['touchend', 'touch'],\n    ['touchcancel', 'touch'],\n    ['pointerover', 'pointer'],\n    ['pointerout', 'pointer'],\n    ['pointerenter', 'pointer'],\n    ['pointerleave', 'pointer'],\n    ['pointerdown', 'pointer'],\n    ['pointerup', 'pointer'],\n    ['pointermove', 'pointer'],\n    ['pointercancel', 'pointer'],\n    ['gotpointercapture', 'pointer'],\n    ['lostpointercapture', 'pointer'],\n    ['focus', 'focus'],\n    ['blur', 'focus'],\n    ['drag', 'drag'],\n    ['dragstart', 'drag'],\n    ['dragend', 'drag'],\n    ['dragover', 'drag'],\n    ['dragenter', 'drag'],\n    ['dragleave', 'drag'],\n    ['dragexit', 'drag'],\n    ['drop', 'drag'],\n]);\nexports.default = InjectedScript;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./src/server/injected/textSelectorEngine.ts\":\n/*!***************************************************!*\\\n  !*** ./src/server/injected/textSelectorEngine.ts ***!\n  \\***************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTextSelector = void 0;\nfunction createTextSelector(shadow) {\n    const engine = {\n        create(root, targetElement, type) {\n            const document = root instanceof Document ? root : root.ownerDocument;\n            if (!document)\n                return;\n            for (let child = targetElement.firstChild; child; child = child.nextSibling) {\n                if (child.nodeType === 3 /* Node.TEXT_NODE */) {\n                    const text = child.nodeValue;\n                    if (!text)\n                        continue;\n                    if (text.match(/^\\s*[a-zA-Z0-9]+\\s*$/) && engine.query(root, text.trim()) === targetElement)\n                        return text.trim();\n                    if (queryInternal(root, createMatcher(JSON.stringify(text)), shadow) === targetElement)\n                        return JSON.stringify(text);\n                }\n            }\n        },\n        query(root, selector) {\n            return queryInternal(root, createMatcher(selector), shadow);\n        },\n        queryAll(root, selector) {\n            const result = [];\n            queryAllInternal(root, createMatcher(selector), shadow, result);\n            return result;\n        }\n    };\n    return engine;\n}\nexports.createTextSelector = createTextSelector;\nfunction unescape(s) {\n    if (!s.includes('\\\\'))\n        return s;\n    const r = [];\n    let i = 0;\n    while (i < s.length) {\n        if (s[i] === '\\\\' && i + 1 < s.length)\n            i++;\n        r.push(s[i++]);\n    }\n    return r.join('');\n}\nfunction createMatcher(selector) {\n    if (selector.length > 1 && selector[0] === '\"' && selector[selector.length - 1] === '\"') {\n        const parsed = unescape(selector.substring(1, selector.length - 1));\n        return text => text === parsed;\n    }\n    if (selector.length > 1 && selector[0] === \"'\" && selector[selector.length - 1] === \"'\") {\n        const parsed = unescape(selector.substring(1, selector.length - 1));\n        return text => text === parsed;\n    }\n    if (selector[0] === '/' && selector.lastIndexOf('/') > 0) {\n        const lastSlash = selector.lastIndexOf('/');\n        const re = new RegExp(selector.substring(1, lastSlash), selector.substring(lastSlash + 1));\n        return text => re.test(text);\n    }\n    selector = selector.trim().toLowerCase().replace(/\\s+/g, ' ');\n    return text => text.toLowerCase().replace(/\\s+/g, ' ').includes(selector);\n}\n// Skips <head>, <script> and <style> elements and all their children.\nconst nodeFilter = {\n    acceptNode: node => {\n        return node.nodeName === 'HEAD' || node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE' ?\n            NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT;\n    }\n};\n// If we are querying inside a filtered element, nodeFilter is never called, so we need a separate check.\nfunction isFilteredNode(root, document) {\n    return root.nodeName === 'SCRIPT' || root.nodeName === 'STYLE' || document.head && document.head.contains(root);\n}\nfunction queryInternal(root, matcher, shadow) {\n    const document = root instanceof Document ? root : root.ownerDocument;\n    if (isFilteredNode(root, document))\n        return;\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, nodeFilter);\n    const shadowRoots = [];\n    if (shadow && root.shadowRoot)\n        shadowRoots.push(root.shadowRoot);\n    let lastTextParent = null;\n    let lastText = '';\n    while (true) {\n        const node = walker.nextNode();\n        const textParent = (node && node.nodeType === Node.TEXT_NODE) ? node.parentElement : null;\n        if (lastTextParent && textParent !== lastTextParent) {\n            if (matcher(lastText))\n                return lastTextParent;\n            lastText = '';\n        }\n        lastTextParent = textParent;\n        if (!node)\n            break;\n        if (node.nodeType === Node.TEXT_NODE) {\n            lastText += node.nodeValue;\n        }\n        else {\n            const element = node;\n            if ((element instanceof HTMLInputElement) && (element.type === 'submit' || element.type === 'button') && matcher(element.value))\n                return element;\n            if (shadow && element.shadowRoot)\n                shadowRoots.push(element.shadowRoot);\n        }\n    }\n    for (const shadowRoot of shadowRoots) {\n        const element = queryInternal(shadowRoot, matcher, shadow);\n        if (element)\n            return element;\n    }\n}\nfunction queryAllInternal(root, matcher, shadow, result) {\n    const document = root instanceof Document ? root : root.ownerDocument;\n    if (isFilteredNode(root, document))\n        return;\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, nodeFilter);\n    const shadowRoots = [];\n    if (shadow && root.shadowRoot)\n        shadowRoots.push(root.shadowRoot);\n    let lastTextParent = null;\n    let lastText = '';\n    while (true) {\n        const node = walker.nextNode();\n        const textParent = (node && node.nodeType === Node.TEXT_NODE) ? node.parentElement : null;\n        if (lastTextParent && textParent !== lastTextParent) {\n            if (matcher(lastText))\n                result.push(lastTextParent);\n            lastText = '';\n        }\n        lastTextParent = textParent;\n        if (!node)\n            break;\n        if (node.nodeType === Node.TEXT_NODE) {\n            lastText += node.nodeValue;\n        }\n        else {\n            const element = node;\n            if ((element instanceof HTMLInputElement) && (element.type === 'submit' || element.type === 'button') && matcher(element.value))\n                result.push(element);\n            if (shadow && element.shadowRoot)\n                shadowRoots.push(element.shadowRoot);\n        }\n    }\n    for (const shadowRoot of shadowRoots)\n        queryAllInternal(shadowRoot, matcher, shadow, result);\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/xpathSelectorEngine.ts\":\n/*!****************************************************!*\\\n  !*** ./src/server/injected/xpathSelectorEngine.ts ***!\n  \\****************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.XPathEngine = void 0;\nconst maxTextLength = 80;\nconst minMeaningfulSelectorLegth = 100;\nexports.XPathEngine = {\n    create(root, targetElement, type) {\n        const maybeDocument = root instanceof Document ? root : root.ownerDocument;\n        if (!maybeDocument)\n            return;\n        const document = maybeDocument;\n        const xpathCache = new Map();\n        if (type === 'notext')\n            return createNoText(root, targetElement);\n        const tokens = [];\n        function evaluateXPath(expression) {\n            let nodes = xpathCache.get(expression);\n            if (!nodes) {\n                nodes = [];\n                try {\n                    const result = document.evaluate(expression, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n                    for (let node = result.iterateNext(); node; node = result.iterateNext()) {\n                        if (node.nodeType === Node.ELEMENT_NODE)\n                            nodes.push(node);\n                    }\n                }\n                catch (e) {\n                }\n                xpathCache.set(expression, nodes);\n            }\n            return nodes;\n        }\n        function uniqueXPathSelector(prefix) {\n            const path = tokens.slice();\n            if (prefix)\n                path.unshift(prefix);\n            let selector = '//' + path.join('/');\n            while (selector.includes('///'))\n                selector = selector.replace('///', '//');\n            if (selector.endsWith('/'))\n                selector = selector.substring(0, selector.length - 1);\n            const nodes = evaluateXPath(selector);\n            if (nodes[nodes.length - 1] === targetElement)\n                return selector;\n            // If we are looking at a small set of elements with long selector, fall back to ordinal.\n            if (nodes.length < 5 && selector.length > minMeaningfulSelectorLegth) {\n                const index = nodes.indexOf(targetElement);\n                if (index !== -1)\n                    return `(${selector})[${index + 1}]`;\n            }\n            return undefined;\n        }\n        function escapeAndCap(text) {\n            text = text.substring(0, maxTextLength);\n            // XPath 1.0 does not support quote escaping.\n            // 1. If there are no single quotes - use them.\n            if (text.indexOf(`'`) === -1)\n                return `'${text}'`;\n            // 2. If there are no double quotes - use them to enclose text.\n            if (text.indexOf(`\"`) === -1)\n                return `\"${text}\"`;\n            // 3. Otherwise, use popular |concat| trick.\n            const Q = `'`;\n            return `concat(${text.split(Q).map(token => Q + token + Q).join(`, \"'\", `)})`;\n        }\n        const defaultAttributes = new Set(['title', 'aria-label', 'disabled', 'role']);\n        const importantAttributes = new Map([\n            ['form', ['action']],\n            ['img', ['alt']],\n            ['input', ['placeholder', 'type', 'name', 'value']],\n        ]);\n        let usedTextConditions = false;\n        for (let element = targetElement; element && element !== root; element = element.parentElement) {\n            const nodeName = element.nodeName.toLowerCase();\n            const tag = nodeName === 'svg' ? '*' : nodeName;\n            const tagConditions = [];\n            if (nodeName === 'svg')\n                tagConditions.push('local-name()=\"svg\"');\n            const attrConditions = [];\n            const importantAttrs = [...defaultAttributes, ...(importantAttributes.get(tag) || [])];\n            for (const attr of importantAttrs) {\n                const value = element.getAttribute(attr);\n                if (value && value.length < maxTextLength)\n                    attrConditions.push(`normalize-space(@${attr})=${escapeAndCap(value)}`);\n                else if (value)\n                    attrConditions.push(`starts-with(normalize-space(@${attr}), ${escapeAndCap(value)})`);\n            }\n            const text = document.evaluate('normalize-space(.)', element).stringValue;\n            const textConditions = [];\n            if (tag !== 'select' && text.length && !usedTextConditions) {\n                if (text.length < maxTextLength)\n                    textConditions.push(`normalize-space(.)=${escapeAndCap(text)}`);\n                else\n                    textConditions.push(`starts-with(normalize-space(.), ${escapeAndCap(text)})`);\n                usedTextConditions = true;\n            }\n            // Always retain the last tag.\n            const conditions = [...tagConditions, ...textConditions, ...attrConditions];\n            const token = conditions.length ? `${tag}[${conditions.join(' and ')}]` : (tokens.length ? '' : tag);\n            const selector = uniqueXPathSelector(token);\n            if (selector)\n                return selector;\n            // Ordinal is the weakest signal.\n            const parent = element.parentElement;\n            let tagWithOrdinal = tag;\n            if (parent) {\n                const siblings = Array.from(parent.children);\n                const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\n                if (sameTagSiblings.length > 1)\n                    tagWithOrdinal += `[${1 + siblings.indexOf(element)}]`;\n            }\n            // Do not include text into this token, only tag / attributes.\n            // Topmost node will get all the text.\n            const nonTextConditions = [...tagConditions, ...attrConditions];\n            const levelToken = nonTextConditions.length ? `${tagWithOrdinal}[${nonTextConditions.join(' and ')}]` : tokens.length ? '' : tagWithOrdinal;\n            tokens.unshift(levelToken);\n        }\n        return uniqueXPathSelector();\n    },\n    query(root, selector) {\n        const document = root instanceof Document ? root : root.ownerDocument;\n        if (!document)\n            return;\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\n            if (node.nodeType === Node.ELEMENT_NODE)\n                return node;\n        }\n    },\n    queryAll(root, selector) {\n        const result = [];\n        const document = root instanceof Document ? root : root.ownerDocument;\n        if (!document)\n            return result;\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\n            if (node.nodeType === Node.ELEMENT_NODE)\n                result.push(node);\n        }\n        return result;\n    }\n};\nfunction createNoText(root, targetElement) {\n    const steps = [];\n    for (let element = targetElement; element && element !== root; element = element.parentElement) {\n        if (element.getAttribute('id')) {\n            steps.unshift(`//*[@id=\"${element.getAttribute('id')}\"]`);\n            return steps.join('/');\n        }\n        const siblings = element.parentElement ? Array.from(element.parentElement.children) : [];\n        const similarElements = siblings.filter(sibling => element.nodeName === sibling.nodeName);\n        const index = similarElements.length === 1 ? 0 : similarElements.indexOf(element) + 1;\n        steps.unshift(index ? `${element.nodeName}[${index}]` : element.nodeName);\n    }\n    return '/' + steps.join('/');\n}\n\n\n/***/ })\n\n/******/ })).default"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="(/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/server/injected/utilityScript.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/webpack/buildin/global.js\":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/utilityScriptSerializers.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/server/common/utilityScriptSerializers.ts ***!\n  \\*******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeAsCallArgument = exports.parseEvaluationResultValue = void 0;\nfunction isRegExp(obj) {\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\nfunction isDate(obj) {\n    return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\n}\nfunction isError(obj) {\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\nfunction parseEvaluationResultValue(value, handles = []) {\n    if (Object.is(value, undefined))\n        return undefined;\n    if (typeof value === 'object' && value) {\n        if ('v' in value) {\n            if (value.v === 'undefined')\n                return undefined;\n            if (value.v === 'null')\n                return null;\n            if (value.v === 'NaN')\n                return NaN;\n            if (value.v === 'Infinity')\n                return Infinity;\n            if (value.v === '-Infinity')\n                return -Infinity;\n            if (value.v === '-0')\n                return -0;\n            return undefined;\n        }\n        if ('d' in value)\n            return new Date(value.d);\n        if ('r' in value)\n            return new RegExp(value.r.p, value.r.f);\n        if ('a' in value)\n            return value.a.map((a) => parseEvaluationResultValue(a, handles));\n        if ('o' in value) {\n            const result = {};\n            for (const { k, v } of value.o)\n                result[k] = parseEvaluationResultValue(v, handles);\n            return result;\n        }\n        if ('h' in value)\n            return handles[value.h];\n    }\n    return value;\n}\nexports.parseEvaluationResultValue = parseEvaluationResultValue;\nfunction serializeAsCallArgument(value, handleSerializer) {\n    return serialize(value, handleSerializer, new Set());\n}\nexports.serializeAsCallArgument = serializeAsCallArgument;\nfunction serialize(value, handleSerializer, visited) {\n    const result = handleSerializer(value);\n    if ('fallThrough' in result)\n        value = result.fallThrough;\n    else\n        return result;\n    if (visited.has(value))\n        throw new Error('Argument is a circular structure');\n    if (typeof value === 'symbol')\n        return { v: 'undefined' };\n    if (Object.is(value, undefined))\n        return { v: 'undefined' };\n    if (Object.is(value, null))\n        return { v: 'null' };\n    if (Object.is(value, NaN))\n        return { v: 'NaN' };\n    if (Object.is(value, Infinity))\n        return { v: 'Infinity' };\n    if (Object.is(value, -Infinity))\n        return { v: '-Infinity' };\n    if (Object.is(value, -0))\n        return { v: '-0' };\n    if (typeof value === 'boolean')\n        return value;\n    if (typeof value === 'number')\n        return value;\n    if (typeof value === 'string')\n        return value;\n    if (isError(value)) {\n        const error = value;\n        if ('captureStackTrace' in global.Error) {\n            // v8\n            return error.stack || '';\n        }\n        return `${error.name}: ${error.message}\\n${error.stack}`;\n    }\n    if (isDate(value))\n        return { d: value.toJSON() };\n    if (isRegExp(value))\n        return { r: { p: value.source, f: value.flags } };\n    if (Array.isArray(value)) {\n        const a = [];\n        visited.add(value);\n        for (let i = 0; i < value.length; ++i)\n            a.push(serialize(value[i], handleSerializer, visited));\n        visited.delete(value);\n        return { a };\n    }\n    if (typeof value === 'object') {\n        const o = [];\n        visited.add(value);\n        for (const name of Object.keys(value)) {\n            let item;\n            try {\n                item = value[name];\n            }\n            catch (e) {\n                continue; // native bindings will throw sometimes\n            }\n            if (name === 'toJSON' && typeof item === 'function')\n                o.push({ k: name, v: { o: [] } });\n            else\n                o.push({ k: name, v: serialize(item, handleSerializer, visited) });\n        }\n        visited.delete(value);\n        return { o };\n    }\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./src/server/injected/utilityScript.ts\":\n/*!**********************************************!*\\\n  !*** ./src/server/injected/utilityScript.ts ***!\n  \\**********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utilityScriptSerializers_1 = __webpack_require__(/*! ../common/utilityScriptSerializers */ \"./src/server/common/utilityScriptSerializers.ts\");\nclass UtilityScript {\n    evaluate(returnByValue, expression) {\n        const result = global.eval(expression);\n        return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;\n    }\n    callFunction(returnByValue, functionText, argCount, ...argsAndHandles) {\n        const args = argsAndHandles.slice(0, argCount);\n        const handles = argsAndHandles.slice(argCount);\n        const parameters = args.map(a => utilityScriptSerializers_1.parseEvaluationResultValue(a, handles));\n        const func = global.eval('(' + functionText + ')');\n        const result = func(...parameters);\n        return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;\n    }\n    jsonValue(returnByValue, value) {\n        // Special handling of undefined to work-around multi-step returnByValue handling in WebKit.\n        if (Object.is(value, undefined))\n            return undefined;\n        return utilityScriptSerializers_1.serializeAsCallArgument(value, (value) => ({ fallThrough: value }));\n    }\n    _promiseAwareJsonValueNoThrow(value) {\n        const safeJson = (value) => {\n            try {\n                return this.jsonValue(true, value);\n            }\n            catch (e) {\n                return undefined;\n            }\n        };\n        if (value && typeof value === 'object' && typeof value.then === 'function') {\n            return (async () => {\n                // By using async function we ensure that return value is a native Promise,\n                // and not some overriden Promise in the page.\n                // This makes Firefox and WebKit debugging protocols recognize it as a Promise,\n                // properly await and return the value.\n                const promiseValue = await value;\n                return safeJson(promiseValue);\n            })();\n        }\n        return safeJson(value);\n    }\n}\nexports.default = UtilityScript;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ })\n\n/******/ })).default"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USKeyboardLayout=t.keypadLocation=void 0,t.keypadLocation=3,t.USKeyboardLayout={Escape:{keyCode:27,key:"Escape"},F1:{keyCode:112,key:"F1"},F2:{keyCode:113,key:"F2"},F3:{keyCode:114,key:"F3"},F4:{keyCode:115,key:"F4"},F5:{keyCode:116,key:"F5"},F6:{keyCode:117,key:"F6"},F7:{keyCode:118,key:"F7"},F8:{keyCode:119,key:"F8"},F9:{keyCode:120,key:"F9"},F10:{keyCode:121,key:"F10"},F11:{keyCode:122,key:"F11"},F12:{keyCode:123,key:"F12"},Backquote:{keyCode:192,shiftKey:"~",key:"`"},Digit1:{keyCode:49,shiftKey:"!",key:"1"},Digit2:{keyCode:50,shiftKey:"@",key:"2"},Digit3:{keyCode:51,shiftKey:"#",key:"3"},Digit4:{keyCode:52,shiftKey:"$",key:"4"},Digit5:{keyCode:53,shiftKey:"%",key:"5"},Digit6:{keyCode:54,shiftKey:"^",key:"6"},Digit7:{keyCode:55,shiftKey:"&",key:"7"},Digit8:{keyCode:56,shiftKey:"*",key:"8"},Digit9:{keyCode:57,shiftKey:"(",key:"9"},Digit0:{keyCode:48,shiftKey:")",key:"0"},Minus:{keyCode:189,shiftKey:"_",key:"-"},Equal:{keyCode:187,shiftKey:"+",key:"="},Backslash:{keyCode:220,shiftKey:"|",key:"\\"},Backspace:{keyCode:8,key:"Backspace"},Tab:{keyCode:9,key:"Tab"},KeyQ:{keyCode:81,shiftKey:"Q",key:"q"},KeyW:{keyCode:87,shiftKey:"W",key:"w"},KeyE:{keyCode:69,shiftKey:"E",key:"e"},KeyR:{keyCode:82,shiftKey:"R",key:"r"},KeyT:{keyCode:84,shiftKey:"T",key:"t"},KeyY:{keyCode:89,shiftKey:"Y",key:"y"},KeyU:{keyCode:85,shiftKey:"U",key:"u"},KeyI:{keyCode:73,shiftKey:"I",key:"i"},KeyO:{keyCode:79,shiftKey:"O",key:"o"},KeyP:{keyCode:80,shiftKey:"P",key:"p"},BracketLeft:{keyCode:219,shiftKey:"{",key:"["},BracketRight:{keyCode:221,shiftKey:"}",key:"]"},CapsLock:{keyCode:20,key:"CapsLock"},KeyA:{keyCode:65,shiftKey:"A",key:"a"},KeyS:{keyCode:83,shiftKey:"S",key:"s"},KeyD:{keyCode:68,shiftKey:"D",key:"d"},KeyF:{keyCode:70,shiftKey:"F",key:"f"},KeyG:{keyCode:71,shiftKey:"G",key:"g"},KeyH:{keyCode:72,shiftKey:"H",key:"h"},KeyJ:{keyCode:74,shiftKey:"J",key:"j"},KeyK:{keyCode:75,shiftKey:"K",key:"k"},KeyL:{keyCode:76,shiftKey:"L",key:"l"},Semicolon:{keyCode:186,shiftKey:":",key:";"},Quote:{keyCode:222,shiftKey:'"',key:"'"},Enter:{keyCode:13,key:"Enter",text:"\r"},ShiftLeft:{keyCode:160,keyCodeWithoutLocation:16,key:"Shift",location:1},KeyZ:{keyCode:90,shiftKey:"Z",key:"z"},KeyX:{keyCode:88,shiftKey:"X",key:"x"},KeyC:{keyCode:67,shiftKey:"C",key:"c"},KeyV:{keyCode:86,shiftKey:"V",key:"v"},KeyB:{keyCode:66,shiftKey:"B",key:"b"},KeyN:{keyCode:78,shiftKey:"N",key:"n"},KeyM:{keyCode:77,shiftKey:"M",key:"m"},Comma:{keyCode:188,shiftKey:"<",key:","},Period:{keyCode:190,shiftKey:">",key:"."},Slash:{keyCode:191,shiftKey:"?",key:"/"},ShiftRight:{keyCode:161,keyCodeWithoutLocation:16,key:"Shift",location:2},ControlLeft:{keyCode:162,keyCodeWithoutLocation:17,key:"Control",location:1},MetaLeft:{keyCode:91,key:"Meta",location:1},AltLeft:{keyCode:164,keyCodeWithoutLocation:18,key:"Alt",location:1},Space:{keyCode:32,key:" "},AltRight:{keyCode:165,keyCodeWithoutLocation:18,key:"Alt",location:2},AltGraph:{keyCode:225,key:"AltGraph"},MetaRight:{keyCode:92,key:"Meta",location:2},ContextMenu:{keyCode:93,key:"ContextMenu"},ControlRight:{keyCode:163,keyCodeWithoutLocation:17,key:"Control",location:2},PrintScreen:{keyCode:44,key:"PrintScreen"},ScrollLock:{keyCode:145,key:"ScrollLock"},Pause:{keyCode:19,key:"Pause"},PageUp:{keyCode:33,key:"PageUp"},PageDown:{keyCode:34,key:"PageDown"},Insert:{keyCode:45,key:"Insert"},Delete:{keyCode:46,key:"Delete"},Home:{keyCode:36,key:"Home"},End:{keyCode:35,key:"End"},ArrowLeft:{keyCode:37,key:"ArrowLeft"},ArrowUp:{keyCode:38,key:"ArrowUp"},ArrowRight:{keyCode:39,key:"ArrowRight"},ArrowDown:{keyCode:40,key:"ArrowDown"},NumLock:{keyCode:144,key:"NumLock"},NumpadDivide:{keyCode:111,key:"/",location:3},NumpadMultiply:{keyCode:106,key:"*",location:3},NumpadSubtract:{keyCode:109,key:"-",location:3},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",shiftKey:"7",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",shiftKey:"8",location:3},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",shiftKey:"9",location:3},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",shiftKey:"4",location:3},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",shiftKey:"5",location:3},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",shiftKey:"6",location:3},NumpadAdd:{keyCode:107,key:"+",location:3},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",shiftKey:"1",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",shiftKey:"2",location:3},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",shiftKey:"3",location:3},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",shiftKey:"0",location:3},NumpadDecimal:{keyCode:46,shiftKeyCode:110,key:"\0",shiftKey:".",location:3},NumpadEnter:{keyCode:13,key:"Enter",text:"\r",location:3}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accessibility=void 0;function i(e,t){const n=[];for(const s of e.children())n.push(...i(s,t));if(t&&!t.has(e))return n;const s=e.serialize();return n.length&&(s.children=n),[s]}t.Accessibility=class{constructor(e){this._getAXTree=e}async snapshot(e={}){const{interestingOnly:t=!0,root:n=null}=e,{tree:s,needle:r}=await this._getAXTree(n||void 0);if(!t)return n?r&&i(r)[0]:i(s)[0];const o=new Set;return function e(t,n,i){n.isInteresting(i)&&t.add(n);if(n.isLeafNode())return;i=i||n.isControl();for(const s of n.children())e(t,s,i)}(o,s,!1),!n||r&&o.has(r)?i(r||s,o)[0]:null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChooser=void 0;t.FileChooser=class{constructor(e,t,n){this._page=e,this._elementHandle=t,this._isMultiple=n}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=void 0,t.parseSelector=function(e){let t,n=0,i=0;const s={parts:[]},r=()=>{const t=e.substring(i,n).trim(),r=t.indexOf("=");let o,a;-1!==r&&t.substring(0,r).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(o=t.substring(0,r).trim(),a=t.substring(r+1)):t.length>1&&'"'===t[0]&&'"'===t[t.length-1]||t.length>1&&"'"===t[0]&&"'"===t[t.length-1]?(o="text",a=t):/^\(*\/\//.test(t)||t.startsWith("..")?(o="xpath",a=t):(o="css",a=t);let l=!1;if("*"===o[0]&&(l=!0,o=o.substring(1)),s.parts.push({name:o,body:a}),l){if(void 0!==s.capture)throw new Error("Only one of the selectors can capture using * modifier");s.capture=s.parts.length-1}};for(;n<e.length;){const s=e[n];"\\"===s&&n+1<e.length?n+=2:s===t?(t=void 0,n++):t||'"'!==s&&"'"!==s&&"`"!==s?t||">"!==s||">"!==e[n+1]?n++:(r(),n+=2,i=n):(t=s,n++)}return r(),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Download=void 0;const i=n(2),s=n(0),r=n(1),o=n(17),a=n(4);t.Download=class{constructor(e,t,n,i,s){this._saveCallbacks=[],this._finished=!1,this._failure=null,this._deleted=!1,this._page=e,this._downloadsPath=t,this._uuid=n,this._url=i,this._suggestedFilename=s,this._finishedCallback=()=>{},this._finishedPromise=new Promise(e=>this._finishedCallback=e),e._browserContext._downloads.add(this),this._acceptDownloads=!!this._page._browserContext._options.acceptDownloads,void 0!==s&&this._page.emit(o.Page.Events.Download,this)}_filenameSuggested(e){a.assert(void 0===this._suggestedFilename),this._suggestedFilename=e,this._page.emit(o.Page.Events.Download,this)}url(){return this._url}suggestedFilename(){return this._suggestedFilename}async localPath(){if(!this._acceptDownloads)throw new Error("Pass { acceptDownloads: true } when you are creating your browser context.");const e=i.join(this._downloadsPath,this._uuid);return await this._finishedPromise,this._failure?null:e}saveAs(e){if(!this._acceptDownloads)throw new Error("Pass { acceptDownloads: true } when you are creating your browser context.");if(this._deleted)throw new Error("Download already deleted. Save before deleting.");if(this._failure)throw new Error("Download not found on disk. Check download.failure() for details.");this._finished?e(i.join(this._downloadsPath,this._uuid)):this._saveCallbacks.push(e)}async failure(){return this._acceptDownloads?(await this._finishedPromise,this._failure):"Pass { acceptDownloads: true } when you are creating your browser context."}async delete(){if(!this._acceptDownloads)return;const e=await this.localPath();this._deleted||(this._deleted=!0,e&&await r.promisify(s.unlink)(e).catch(e=>{}))}async _reportFinished(e){if(this._finished=!0,this._failure=e||null,e)for(const t of this._saveCallbacks)t("",e);else{const e=i.join(this._downloadsPath,this._uuid);for(const t of this._saveCallbacks)await t(e)}this._saveCallbacks=[],this._finishedCallback()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRPage=void 0;const i=n(125),s=n(16),r=n(31),o=n(101),a=n(189),l=n(466),c=n(17),d=n(127),h=n(190),u=n(2),p=n(467),f=n(468),m=n(469),_=n(470),g=n(262),w=n(70),b=n(25),y=n(4),v=n(471);t.CRPage=class{constructor(e,t,n,i,r){if(this._sessions=new Map,this._initializedPage=null,this._nextWindowOpenPopupFeatures=[],this._targetId=t,this._opener=i,this.rawKeyboard=new p.RawKeyboardImpl(e,n._browser._isMac),this.rawMouse=new p.RawMouseImpl(e),this.rawTouchscreen=new p.RawTouchscreenImpl(e),this._pdf=new _.CRPDF(e),this._coverage=new m.CRCoverage(e),this._browserContext=n,this._page=new c.Page(this,n),this._mainFrameSession=new x(this,e,t,null),this._sessions.set(t,this._mainFrameSession),e.once(o.CRSessionEvents.Disconnected,()=>this._page._didDisconnect()),i&&!n._options.noDefaultViewport){const e=i._nextWindowOpenPopupFeatures.shift()||[],t=s.helper.getViewportSizeFromWindowFeatures(e);t&&(this._page._state.viewportSize=t)}this._pagePromise=this._mainFrameSession._initialize(r).then(()=>this._initializedPage=this._page).catch(e=>e)}async _forAllFrameSessions(e){await Promise.all(Array.from(this._sessions.values()).map(t=>e(t)))}_sessionForFrame(e){for(;!this._sessions.has(e._id);){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");e=t}return this._sessions.get(e._id)}_sessionForHandle(e){const t=e._context.frame;return this._sessionForFrame(t)}async pageOrError(){return this._pagePromise}didClose(){for(const e of this._sessions.values())e.dispose();this._page._didClose(),this._mainFrameSession._stopScreencast().catch(()=>{})}async navigateFrame(e,t,n){return this._sessionForFrame(e)._navigate(e,t,n)}async exposeBinding(e){await this._forAllFrameSessions(t=>t._initBinding(e)),await Promise.all(this._page.frames().map(t=>t._evaluateExpression(e.source,!1,{}).catch(e=>{})))}async updateExtraHTTPHeaders(){await this._forAllFrameSessions(e=>e._updateExtraHTTPHeaders(!1))}async updateGeolocation(){await this._forAllFrameSessions(e=>e._updateGeolocation(!1))}async updateOffline(){await this._forAllFrameSessions(e=>e._updateOffline(!1))}async updateHttpCredentials(){await this._forAllFrameSessions(e=>e._updateHttpCredentials(!1))}async setViewportSize(e){y.assert(this._page._state.viewportSize===e),await this._mainFrameSession._updateViewport()}async bringToFront(){await this._mainFrameSession._client.send("Page.bringToFront")}async updateEmulateMedia(){await this._forAllFrameSessions(e=>e._updateEmulateMedia(!1))}async updateRequestInterception(){await this._forAllFrameSessions(e=>e._updateRequestInterception(!1))}async setFileChooserIntercepted(e){await this._forAllFrameSessions(t=>t._setFileChooserIntercepted(e))}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof c.Page&&!e.isClosed()?e:null}async reload(){await this._mainFrameSession._client.send("Page.reload")}async _go(e){const t=await this._mainFrameSession._client.send("Page.getNavigationHistory"),n=t.entries[t.currentIndex+e];return!!n&&(await this._mainFrameSession._client.send("Page.navigateToHistoryEntry",{entryId:n.id}),!0)}goBack(){return this._go(-1)}goForward(){return this._go(1)}async evaluateOnNewDocument(e){await this._forAllFrameSessions(t=>t._evaluateOnNewDocument(e))}async closePage(e){e?await this._mainFrameSession._client.send("Page.close"):await this._browserContext._browser._closePage(this)}canScreenshotOutsideViewport(){return!1}async setBackgroundColor(e){await this._mainFrameSession._client.send("Emulation.setDefaultBackgroundColorOverride",{color:e})}async startScreencast(e){await this._mainFrameSession._startScreencast(y.createGuid(),e)}async stopScreencast(){await this._mainFrameSession._stopScreencast()}async takeScreenshot(e,t,n,i){const{visualViewport:r}=await this._mainFrameSession._client.send("Page.getLayoutMetrics");t||(t={x:r.pageX+n.x,y:r.pageY+n.y,...s.helper.enclosingIntSize({width:n.width/r.scale,height:n.height/r.scale})});const o={...t,scale:n?r.scale:1},a=await this._mainFrameSession._client.send("Page.captureScreenshot",{format:e,quality:i,clip:o});return Buffer.from(a.data,"base64")}async resetViewport(){await this._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0})}async getContentFrame(e){return this._sessionForHandle(e)._getContentFrame(e)}async getOwnerFrame(e){return this._sessionForHandle(e)._getOwnerFrame(e)}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){return this._sessionForHandle(e)._getBoundingBox(e)}async scrollRectIntoViewIfNeeded(e,t){return this._sessionForHandle(e)._scrollRectIntoViewIfNeeded(e,t)}rafCountForStablePosition(){return 1}async getContentQuads(e){return this._sessionForHandle(e)._getContentQuads(e)}async setInputFiles(e,t){await e._evaluateInUtility(([e,t,n])=>e.setInputFiles(t,n),t)}async adoptElementHandle(e,t){return this._sessionForHandle(e)._adoptElementHandle(e,t)}async getAccessibilityTree(e){return f.getAccessibilityTree(this._mainFrameSession._client,e)}async inputActionEpilogue(){await this._mainFrameSession._client.send("Page.enable").catch(e=>{})}async pdf(e){return this._pdf.generate(e)}coverage(){return this._coverage}async getFrameElement(e){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=this._sessionForFrame(t),{backendNodeId:i}=await n._client.send("DOM.getFrameOwner",{frameId:e._id}).catch(e=>{throw e instanceof Error&&e.message.includes("Frame with the given id was not found.")&&b.rewriteErrorMessage(e,"Frame has been detached."),e});if(t=e.parentFrame(),!t)throw new Error("Frame has been detached.");return n._adoptBackendNodeId(i,await t._mainContext())}};class x{constructor(e,t,n,i){this._contextIdToContext=new Map,this._eventListeners=[],this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=e=>{},this._swappedIn=!1,this._videoRecorder=null,this._screencastId=null,this._screencastState="stopped",this._client=t,this._crPage=e,this._page=e._page,this._targetId=n,this._networkManager=new l.CRNetworkManager(t,this._page,i?i._networkManager:null),this._firstNonInitialNavigationCommittedPromise=new Promise((e,t)=>{this._firstNonInitialNavigationCommittedFulfill=e,this._firstNonInitialNavigationCommittedReject=t}),t.once(o.CRSessionEvents.Disconnected,()=>{this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))})}_isMainFrame(){return this._targetId===this._crPage._targetId}_addSessionListeners(){this._eventListeners=[s.helper.addEventListener(this._client,"Inspector.targetCrashed",e=>this._onTargetCrashed()),s.helper.addEventListener(this._client,"Log.entryAdded",e=>this._onLogEntryAdded(e)),s.helper.addEventListener(this._client,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),s.helper.addEventListener(this._client,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),s.helper.addEventListener(this._client,"Page.frameDetached",e=>this._onFrameDetached(e.frameId)),s.helper.addEventListener(this._client,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),s.helper.addEventListener(this._client,"Page.frameRequestedNavigation",e=>this._onFrameRequestedNavigation(e)),s.helper.addEventListener(this._client,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),s.helper.addEventListener(this._client,"Page.javascriptDialogOpening",e=>this._onDialog(e)),s.helper.addEventListener(this._client,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),s.helper.addEventListener(this._client,"Page.downloadWillBegin",e=>this._onDownloadWillBegin(e)),s.helper.addEventListener(this._client,"Page.downloadProgress",e=>this._onDownloadProgress(e)),s.helper.addEventListener(this._client,"Page.screencastFrame",e=>this._onScreencastFrame(e)),s.helper.addEventListener(this._client,"Runtime.bindingCalled",e=>this._onBindingCalled(e)),s.helper.addEventListener(this._client,"Runtime.consoleAPICalled",e=>this._onConsoleAPI(e)),s.helper.addEventListener(this._client,"Runtime.exceptionThrown",e=>this._handleException(e.exceptionDetails)),s.helper.addEventListener(this._client,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),s.helper.addEventListener(this._client,"Runtime.executionContextDestroyed",e=>this._onExecutionContextDestroyed(e.executionContextId)),s.helper.addEventListener(this._client,"Runtime.executionContextsCleared",e=>this._onExecutionContextsCleared()),s.helper.addEventListener(this._client,"Target.attachedToTarget",e=>this._onAttachedToTarget(e)),s.helper.addEventListener(this._client,"Target.detachedFromTarget",e=>this._onDetachedFromTarget(e)),s.helper.addEventListener(this._client,"Page.windowOpen",e=>this._onWindowOpen(e))]}async _initialize(e){if(e&&!this._crPage._browserContext._browser.isClank()&&!this._crPage._browserContext._options.noDefaultViewport){const{windowId:e}=await this._client.send("Browser.getWindowForTarget");this._windowId=e}let t;this._isMainFrame()||this._addSessionListeners();const n=[this._client.send("Page.enable"),this._client.send("Page.getFrameTree").then(({frameTree:e})=>{this._isMainFrame()&&(this._handleFrameTree(e),this._addSessionListeners());const n=this._isMainFrame()?this._page.frames():[this._page._frameManager.frame(this._targetId)];for(const e of n){this._client._sendMayFail("Page.createIsolatedWorld",{frameId:e._id,grantUniveralAccess:!0,worldName:"__playwright_utility_world__"});for(const t of this._crPage._browserContext._pageBindings.values())e._evaluateExpression(t.source,!1,{}).catch(e=>{})}this._isMainFrame()&&":"===this._page.mainFrame().url()?t.then(()=>{this._eventListeners.push(s.helper.addEventListener(this._client,"Page.lifecycleEvent",e=>this._onLifecycleEvent(e)))}):(this._firstNonInitialNavigationCommittedFulfill(),this._eventListeners.push(s.helper.addEventListener(this._client,"Page.lifecycleEvent",e=>this._onLifecycleEvent(e))))}),this._client.send("Log.enable",{}),t=this._client.send("Page.setLifecycleEventsEnabled",{enabled:!0}),this._client.send("Runtime.enable",{}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:w.generateSourceUrl(),worldName:"__playwright_utility_world__"}),this._networkManager.initialize(),this._client.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),this._client.send("Emulation.setFocusEmulationEnabled",{enabled:!0})],i=this._crPage._browserContext._options;i.bypassCSP&&n.push(this._client.send("Page.setBypassCSP",{enabled:!0})),i.ignoreHTTPSErrors&&n.push(this._client.send("Security.setIgnoreCertificateErrors",{ignore:!0})),this._isMainFrame()&&n.push(this._updateViewport()),i.hasTouch&&n.push(this._client.send("Emulation.setTouchEmulationEnabled",{enabled:!0})),!1===i.javaScriptEnabled&&n.push(this._client.send("Emulation.setScriptExecutionDisabled",{value:!0})),(i.userAgent||i.locale)&&n.push(this._client.send("Emulation.setUserAgentOverride",{userAgent:i.userAgent||"",acceptLanguage:i.locale})),i.locale&&n.push(async function(e,t){try{await e.send("Emulation.setLocaleOverride",{locale:t})}catch(e){if(e.message.includes("Another locale override is already in effect"))return;throw e}}(this._client,i.locale)),i.timezoneId&&n.push(async function(e,t){try{await e.send("Emulation.setTimezoneOverride",{timezoneId:t})}catch(e){if(e.message.includes("Timezone override is already in effect"))return;if(e.message.includes("Invalid timezone"))throw new Error("Invalid timezone ID: "+t);throw e}}(this._client,i.timezoneId)),n.push(this._updateGeolocation(!0)),n.push(this._updateExtraHTTPHeaders(!0)),n.push(this._updateRequestInterception(!0)),n.push(this._updateOffline(!0)),n.push(this._updateHttpCredentials(!0)),n.push(this._updateEmulateMedia(!0));for(const e of this._crPage._browserContext._pageBindings.values())n.push(this._initBinding(e));for(const e of this._crPage._page._pageBindings.values())n.push(this._initBinding(e));for(const e of this._crPage._browserContext._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(e));for(const e of this._crPage._page._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(e));if(this._isMainFrame()&&this._crPage._browserContext._options.recordVideo){const e=this._crPage._browserContext._options.recordVideo.size||this._crPage._browserContext._options.viewport||{width:1280,height:720},t=y.createGuid(),i=u.join(this._crPage._browserContext._options.recordVideo.dir,t+".webm");n.push(this._crPage._browserContext._ensureVideosPath().then(()=>this._startScreencast(t,{...e,outputFile:i})))}n.push(this._client.send("Runtime.runIfWaitingForDebugger")),n.push(this._firstNonInitialNavigationCommittedPromise),await Promise.all(n)}dispose(){s.helper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._crPage._sessions.delete(this._targetId)}async _navigate(e,t,n){const i=await this._client.send("Page.navigate",{url:t,referrer:n,frameId:e._id});if(i.errorText)throw new Error(`${i.errorText} at ${t}`);return{newDocumentId:i.loaderId}}_onLifecycleEvent(e){"load"===e.name?this._page._frameManager.frameLifecycleEvent(e.frameId,"load"):"DOMContentLoaded"===e.name&&this._page._frameManager.frameLifecycleEvent(e.frameId,"domcontentloaded")}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),e.childFrames)for(const t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){const n=this._crPage._sessions.get(e);if(n&&e!==this._targetId){n._swappedIn=!0;const t=this._page._frameManager.frame(e);this._page._frameManager.removeChildFramesRecursively(t)}else this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url+(e.urlFragment||""),e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameRequestedNavigation(e){"currentTab"===e.disposition&&this._page._frameManager.frameRequestedNavigation(e.frameId)}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e){this._crPage._sessions.has(e)||this._page._frameManager.frameDetached(e)}_onExecutionContextCreated(e){const t=e.auxData?this._page._frameManager.frame(e.auxData.frameId):null;if(!t)return;const n=new a.CRExecutionContext(this._client,e),s=new i.FrameExecutionContext(n,t);e.auxData&&e.auxData.isDefault?t._contextCreated("main",s):"__playwright_utility_world__"===e.name&&t._contextCreated("utility",s),this._contextIdToContext.set(e.id,s)}_onExecutionContextDestroyed(e){const t=this._contextIdToContext.get(e);t&&(this._contextIdToContext.delete(e),t.frame._contextDestroyed(t))}_onExecutionContextsCleared(){for(const e of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed(e)}_onAttachedToTarget(e){const t=o.CRConnection.fromSession(this._client).session(e.sessionId);if("iframe"===e.targetInfo.type){const n=e.targetInfo.targetId,i=this._page._frameManager.frame(n);this._page._frameManager.removeChildFramesRecursively(i);const s=new x(this._crPage,t,n,this);return this._crPage._sessions.set(n,s),void s._initialize(!1).catch(e=>e)}if("worker"!==e.targetInfo.type)return void t._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._client._sendMayFail("Target.detachFromTarget",{sessionId:e.sessionId})});const n=e.targetInfo.url,i=new c.Worker(n);this._page._addWorker(e.sessionId,i),t.once("Runtime.executionContextCreated",async e=>{i._createExecutionContext(new a.CRExecutionContext(t,e.context))}),Promise.all([t._sendMayFail("Runtime.enable"),t._sendMayFail("Network.enable"),t._sendMayFail("Runtime.runIfWaitingForDebugger")]),t.on("Runtime.consoleAPICalled",e=>{const t=e.args.map(e=>i._existingExecutionContext.createHandle(e));this._page._addConsoleMessage(e.type,t,d.toConsoleMessageLocation(e.stackTrace))}),t.on("Runtime.exceptionThrown",e=>this._page.emit(c.Page.Events.PageError,d.exceptionToError(e.exceptionDetails))),this._networkManager.instrumentNetworkEvents(t,this._page._frameManager.frame(this._targetId))}_onDetachedFromTarget(e){this._page._removeWorker(e.sessionId);const t=this._crPage._sessions.get(e.targetId);t&&(t._swappedIn?t.dispose():this._client.send("Page.enable").catch(e=>null).then(()=>{t._swappedIn||this._page._frameManager.frameDetached(e.targetId),t.dispose()}))}_onWindowOpen(e){this._crPage._nextWindowOpenPopupFeatures.push(e.windowFeatures)}async _onConsoleAPI(e){if(0===e.executionContextId)return;const t=this._contextIdToContext.get(e.executionContextId),n=e.args.map(e=>t.createHandle(e));this._page._addConsoleMessage(e.type,n,d.toConsoleMessageLocation(e.stackTrace))}async _initBinding(e){await Promise.all([this._client.send("Runtime.addBinding",{name:e.name}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e.source})])}async _onBindingCalled(e){const t=this._contextIdToContext.get(e.executionContextId);await this._crPage.pageOrError()instanceof Error||this._page._onBindingCalled(e.payload,t)}_onDialog(e){this._page.emit(c.Page.Events.Dialog,new h.Dialog(e.type,e.message,async(e,t)=>{await this._client.send("Page.handleJavaScriptDialog",{accept:e,promptText:t})},e.defaultPrompt))}_handleException(e){this._page.emit(c.Page.Events.PageError,d.exceptionToError(e))}async _onTargetCrashed(){this._client._markAsCrashed(),this._page._didCrash()}_onLogEntryAdded(e){const{level:t,text:n,args:i,source:s,url:r,lineNumber:o}=e.entry;if(i&&i.map(e=>d.releaseObject(this._client,e.objectId)),"worker"!==s){const e={url:r||"",lineNumber:o||0,columnNumber:0};this._page.emit(c.Page.Events.Console,new g.ConsoleMessage(t,n,[],e))}}async _onFileChooserOpened(e){const t=this._page._frameManager.frame(e.frameId),n=await t._utilityContext(),i=await this._adoptBackendNodeId(e.backendNodeId,n);this._page._onFileChooserOpened(i)}_onDownloadWillBegin(e){let t=this._crPage._initializedPage;t||(this._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),this._crPage._opener&&(t=this._crPage._opener._initializedPage)),t&&this._crPage._browserContext._browser._downloadCreated(t,e.guid,e.url,e.suggestedFilename)}_onDownloadProgress(e){"completed"===e.state&&this._crPage._browserContext._browser._downloadFinished(e.guid,""),"canceled"===e.state&&this._crPage._browserContext._browser._downloadFinished(e.guid,"canceled")}_onScreencastFrame(e){if(!this._videoRecorder)return;const t=Buffer.from(e.data,"base64");this._videoRecorder.writeFrame(t,e.metadata.timestamp),this._client.send("Page.screencastFrameAck",{sessionId:e.sessionId}).catch(()=>{})}async _startScreencast(e,t){if("stopped"!==this._screencastState)throw new Error("Already started");const n=await v.VideoRecorder.launch(t);this._screencastState="starting";try{this._screencastState="started",this._videoRecorder=n,this._screencastId=e,this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext,e,t.outputFile,this._crPage.pageOrError()),await Promise.all([this._client.send("Page.startScreencast",{format:"jpeg",quality:90,maxWidth:t.width,maxHeight:t.height}),new Promise(e=>this._client.once("Page.screencastFrame",e))])}catch(e){throw n.stop().catch(()=>{}),e}}async _stopScreencast(){if("started"!==this._screencastState)throw new Error("No screencast in progress, current state: "+this._screencastState);try{await this._client.send("Page.stopScreencast")}finally{const e=this._videoRecorder,t=this._screencastId;this._videoRecorder=null,this._screencastId=null,this._screencastState="stopped",await e.stop().catch(()=>{}),this._crPage._browserContext._browser._videoFinished(t)}}async _updateExtraHTTPHeaders(e){const t=r.mergeHeaders([this._crPage._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders]);e&&!t.length||await this._client.send("Network.setExtraHTTPHeaders",{headers:y.headersArrayToObject(t,!1)})}async _updateGeolocation(e){const t=this._crPage._browserContext._options.geolocation;e&&!t||await this._client.send("Emulation.setGeolocationOverride",t||{})}async _updateOffline(e){const t=!!this._crPage._browserContext._options.offline;e&&!t||await this._networkManager.setOffline(t)}async _updateHttpCredentials(e){const t=this._crPage._browserContext._options.httpCredentials||null;e&&!t||await this._networkManager.authenticate(t)}async _updateViewport(){if(this._crPage._browserContext._browser.isClank())return;y.assert(this._isMainFrame());const e=this._crPage._browserContext._options,t=this._page._state.viewportSize;if(null===t)return;const n=t.width>t.height,i=[this._client.send("Emulation.setDeviceMetricsOverride",{mobile:!!e.isMobile,width:t.width,height:t.height,screenWidth:t.width,screenHeight:t.height,deviceScaleFactor:e.deviceScaleFactor||1,screenOrientation:n?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"}})];if(this._windowId){let e={width:0,height:0};this._crPage._browserContext._browser._options.headful&&(e={width:24,height:88},"win32"===process.platform?e={width:16,height:88}:"linux"===process.platform?e={width:8,height:85}:"darwin"===process.platform&&(e={width:2,height:80})),i.push(this._client.send("Browser.setWindowBounds",{windowId:this._windowId,bounds:{width:t.width+e.width,height:t.height+e.height}}))}await Promise.all(i)}async _updateEmulateMedia(e){if(this._crPage._browserContext._browser.isClank())return;const t=this._page._state.colorScheme||this._crPage._browserContext._options.colorScheme||"light",n=t?[{name:"prefers-color-scheme",value:t}]:[];await this._client.send("Emulation.setEmulatedMedia",{media:this._page._state.mediaType||"",features:n})}async _updateRequestInterception(e){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async _setFileChooserIntercepted(e){await this._client.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async _evaluateOnNewDocument(e){await this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e})}async _getContentFrame(e){const t=await this._client.send("DOM.describeNode",{objectId:e._objectId});return t&&"string"==typeof t.node.frameId?this._page._frameManager.frame(t.node.frameId):null}async _getOwnerFrame(e){const t=await e.evaluateHandle(e=>{const t=e;return t.documentElement&&t.documentElement.ownerDocument===t?t.documentElement:e.ownerDocument?e.ownerDocument.documentElement:null});if(!t)return null;if(!t._objectId)return null;const n=await this._client.send("DOM.describeNode",{objectId:t._objectId}),i=n&&"string"==typeof n.node.frameId?n.node.frameId:null;return t.dispose(),i}async _getBoundingBox(e){const t=await this._client._sendMayFail("DOM.getBoxModel",{objectId:e._objectId});if(!t)return null;const n=t.model.border,i=Math.min(n[0],n[2],n[4],n[6]),s=Math.min(n[1],n[3],n[5],n[7]),r=Math.max(n[0],n[2],n[4],n[6])-i,o=Math.max(n[1],n[3],n[5],n[7])-s,a=await this._framePosition();return a?{x:i+a.x,y:s+a.y,width:r,height:o}:null}async _framePosition(){const e=this._page._frameManager.frame(this._targetId);if(!e)return null;if(e===this._page.mainFrame())return{x:0,y:0};const t=await e.frameElement();return await t.boundingBox()}async _scrollRectIntoViewIfNeeded(e,t){return await this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";throw e})}async _getContentQuads(e){const t=await this._client._sendMayFail("DOM.getContentQuads",{objectId:e._objectId});if(!t)return null;const n=await this._framePosition();return n?t.quads.map(e=>[{x:e[0]+n.x,y:e[1]+n.y},{x:e[2]+n.x,y:e[3]+n.y},{x:e[4]+n.x,y:e[5]+n.y},{x:e[6]+n.x,y:e[7]+n.y}]):null}async _adoptElementHandle(e,t){const n=await this._client.send("DOM.describeNode",{objectId:e._objectId});return this._adoptBackendNodeId(n.node.backendNodeId,t)}async _adoptBackendNodeId(e,t){const n=await this._client._sendMayFail("DOM.resolveNode",{backendNodeId:e,executionContextId:t._delegate._contextId});if(!n||"null"===n.object.subtype)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.object).asElement()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRNetworkManager=void 0;const i=n(16),s=n(31),r=n(4);t.CRNetworkManager=class{constructor(e,t,n){this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._credentials=null,this._attemptedAuthentications=new Set,this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._requestIdToRequestPausedEvent=new Map,this._requestIdToExtraInfo=new Map,this._client=e,this._page=t,this._parentManager=n,this._eventListeners=this.instrumentNetworkEvents(e)}instrumentNetworkEvents(e,t){return[i.helper.addEventListener(e,"Fetch.requestPaused",this._onRequestPaused.bind(this,t)),i.helper.addEventListener(e,"Fetch.authRequired",this._onAuthRequired.bind(this)),i.helper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this,t)),i.helper.addEventListener(e,"Network.requestWillBeSentExtraInfo",this._onRequestWillBeSentExtraInfo.bind(this)),i.helper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),i.helper.addEventListener(e,"Network.loadingFinished",this._onLoadingFinished.bind(this)),i.helper.addEventListener(e,"Network.loadingFailed",this._onLoadingFailed.bind(this)),i.helper.addEventListener(e,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),i.helper.addEventListener(e,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),i.helper.addEventListener(e,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),i.helper.addEventListener(e,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),i.helper.addEventListener(e,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),i.helper.addEventListener(e,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),i.helper.addEventListener(e,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}async initialize(){await this._client.send("Network.enable")}dispose(){i.helper.removeEventListeners(this._eventListeners)}async authenticate(e){this._credentials=e,await this._updateProtocolRequestInterception()}async setOffline(e){await this._client.send("Network.emulateNetworkConditions",{offline:e,latency:0,downloadThroughput:-1,uploadThroughput:-1})}async setRequestInterception(e){this._userRequestInterceptionEnabled=e,await this._updateProtocolRequestInterception()}async _updateProtocolRequestInterception(){const e=this._userRequestInterceptionEnabled||!!this._credentials;e!==this._protocolRequestInterceptionEnabled&&(this._protocolRequestInterceptionEnabled=e,e?await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!0}),this._client.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!1}),this._client.send("Fetch.disable")]))}_onRequestWillBeSent(e,t){if(this._protocolRequestInterceptionEnabled&&!t.request.url.startsWith("data:")){const n=t.requestId,i=this._requestIdToRequestPausedEvent.get(n);i?(this._onRequest(e,t,i),this._requestIdToRequestPausedEvent.delete(n)):this._requestIdToRequestWillBeSentEvent.set(t.requestId,t)}else this._onRequest(e,t,null);const n=this._requestIdToExtraInfo.get(t.requestId);n&&this._onRequestWillBeSentExtraInfo(n)}_onRequestWillBeSentExtraInfo(e){const t=this._requestIdToRequest.get(e.requestId);t?(t.request.updateWithRawHeaders(r.headersObjectToArray(e.headers)),this._requestIdToExtraInfo.delete(e.requestId)):this._requestIdToExtraInfo.set(e.requestId,e)}_onAuthRequired(e){let t="Default";this._attemptedAuthentications.has(e.requestId)?t="CancelAuth":this._credentials&&(t="ProvideCredentials",this._attemptedAuthentications.add(e.requestId));const{username:n,password:i}=this._credentials||{username:void 0,password:void 0};this._client._sendMayFail("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:n,password:i}})}_onRequestPaused(e,t){if(!this._userRequestInterceptionEnabled&&this._protocolRequestInterceptionEnabled&&this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId}),!t.networkId)return void this._client._sendMayFail("Fetch.failRequest",{requestId:t.requestId,errorReason:"Aborted"});if(t.request.url.startsWith("data:"))return;const n=t.networkId,i=this._requestIdToRequestWillBeSentEvent.get(n);i?(this._onRequest(e,i,t),this._requestIdToRequestWillBeSentEvent.delete(n)):this._requestIdToRequestPausedEvent.set(n,t)}_onRequest(e,t,n){if(t.request.url.startsWith("data:"))return;let i=null;if(t.redirectResponse){const e=this._requestIdToRequest.get(t.requestId);e&&(this._handleRequestRedirect(e,t.redirectResponse,t.timestamp),i=e.request)}let r=t.frameId?this._page._frameManager.frame(t.frameId):e;if(!r&&n&&t.frameId===this._page._delegate._targetId&&(r=this._page._frameManager.frameAttached(t.frameId,null)),!r){if(n)if("OPTIONS"===n.request.method&&this._page._needsRequestInterception()){const e=n.request.headers,t=[{name:"Access-Control-Allow-Origin",value:e.Origin||"*"},{name:"Access-Control-Allow-Methods",value:e["Access-Control-Request-Method"]||"GET, POST, OPTIONS, DELETE"},{name:"Access-Control-Allow-Credentials",value:"true"}];e["Access-Control-Request-Headers"]&&t.push({name:"Access-Control-Allow-Headers",value:e["Access-Control-Request-Headers"]}),this._client._sendMayFail("Fetch.fulfillRequest",{requestId:n.requestId,responseCode:204,responsePhrase:s.STATUS_TEXTS[204],responseHeaders:t,body:""})}else this._client._sendMayFail("Fetch.continueRequest",{requestId:n.requestId});return}let a=this._userRequestInterceptionEnabled;i&&(a=!1,n&&this._client._sendMayFail("Fetch.continueRequest",{requestId:n.requestId}));const l=t.requestId===t.loaderId&&"Document"===t.type?t.loaderId:void 0,c=new o({client:this._client,frame:r,documentId:l,allowInterception:a,requestWillBeSentEvent:t,requestPausedEvent:n,redirectedFrom:i});this._requestIdToRequest.set(t.requestId,c),this._page._frameManager.requestStarted(c.request)}_createResponse(e,t){const n=t.timing;let i;return i=n?{startTime:1e3*(n.requestTime-e._timestamp+e._wallTime),domainLookupStart:n.dnsStart,domainLookupEnd:n.dnsEnd,connectStart:n.connectStart,secureConnectionStart:n.sslStart,connectEnd:n.connectEnd,requestStart:n.sendStart,responseStart:n.receiveHeadersEnd}:{startTime:1e3*e._wallTime,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1},new s.Response(e.request,t.status,t.statusText,r.headersObjectToArray(t.headers),i,async()=>{const t=await this._client.send("Network.getResponseBody",{requestId:e._requestId});return Buffer.from(t.body,t.base64Encoded?"base64":"utf8")})}_handleRequestRedirect(e,t,n){const i=this._createResponse(e,t);i._requestFinished(1e3*(n-e._timestamp),"Response body is unavailable for redirect responses"),this._requestIdToRequest.delete(e._requestId),e._interceptionId&&this._attemptedAuthentications.delete(e._interceptionId),this._page._frameManager.requestReceivedResponse(i),this._page._frameManager.requestFinished(e.request)}_onResponseReceived(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=this._createResponse(t,e.response);this._page._frameManager.requestReceivedResponse(n)}_onLoadingFinished(e){let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;const n=t.request._existingResponse();n&&n._requestFinished(i.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),this._page._frameManager.requestFinished(t.request)}_onLoadingFailed(e){let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;const n=t.request._existingResponse();n&&n._requestFinished(i.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,!!e.canceled)}_maybeAdoptMainRequest(e){if(!this._parentManager)return;const t=this._parentManager._requestIdToRequest.get(e);return t&&t._documentId===e?(this._requestIdToRequest.set(e,t),this._parentManager._requestIdToRequest.delete(e),t._interceptionId&&this._parentManager._attemptedAuthentications.has(t._interceptionId)&&(this._parentManager._attemptedAuthentications.delete(t._interceptionId),this._attemptedAuthentications.add(t._interceptionId)),t):void 0}};class o{constructor(e){const{client:t,frame:n,documentId:i,allowInterception:o,requestWillBeSentEvent:a,requestPausedEvent:l,redirectedFrom:c}=e;this._client=t,this._timestamp=a.timestamp,this._wallTime=a.wallTime,this._requestId=a.requestId,this._interceptionId=l&&l.requestId,this._documentId=i;const{headers:d,method:h,url:u,postDataEntries:p=null}=l?l.request:a.request,f=(a.type||"").toLowerCase();let m=null;p&&p.length&&p[0].bytes&&(m=Buffer.from(p[0].bytes,"base64")),this.request=new s.Request(o?this:null,n,c,i,u,f,h,m,r.headersObjectToArray(d))}async continue(e){await this._client._sendMayFail("Fetch.continueRequest",{requestId:this._interceptionId,headers:e.headers,method:e.method,postData:e.postData?e.postData.toString("base64"):void 0})}async fulfill(e){const t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._client._sendMayFail("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:e.status,responsePhrase:s.STATUS_TEXTS[String(e.status)],responseHeaders:e.headers,body:t})}async abort(e="failed"){const t=a[e];r.assert(t,"Unknown error code: "+e),await this._client._sendMayFail("Fetch.failRequest",{requestId:this._interceptionId,errorReason:t})}}const a={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;const i=n(187),s=n(263),r=n(4);function o(e){let t=0;return e.has("Alt")&&(t|=1),e.has("Control")&&(t|=2),e.has("Meta")&&(t|=4),e.has("Shift")&&(t|=8),t}t.RawKeyboardImpl=class{constructor(e,t){this._client=e,this._isMac=t}_commandsForCode(e,t){if(!this._isMac)return[];const n=[];for(const e of["Shift","Control","Alt","Meta"])t.has(e)&&n.push(e);n.push(e);const i=n.join("+");let o=s.macEditingCommands[i]||[];return r.isString(o)&&(o=[o]),o=o.filter(e=>!e.startsWith("insert")),o.map(e=>e.substring(0,e.length-1))}async keydown(e,t,n,s,r,a,l,c){const d=this._commandsForCode(t,e);await this._client.send("Input.dispatchKeyEvent",{type:c?"keyDown":"rawKeyDown",modifiers:o(e),windowsVirtualKeyCode:s,code:t,commands:d,key:r,text:c,unmodifiedText:c,autoRepeat:l,location:a,isKeypad:a===i.keypadLocation})}async keyup(e,t,n,i,s,r){await this._client.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:o(e),key:s,windowsVirtualKeyCode:i,code:t,location:r})}async sendText(e){await this._client.send("Input.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._client=e}async move(e,t,n,i,s){await this._client.send("Input.dispatchMouseEvent",{type:"mouseMoved",button:n,x:e,y:t,modifiers:o(s)})}async down(e,t,n,i,s,r){await this._client.send("Input.dispatchMouseEvent",{type:"mousePressed",button:n,x:e,y:t,modifiers:o(s),clickCount:r})}async up(e,t,n,i,s,r){await this._client.send("Input.dispatchMouseEvent",{type:"mouseReleased",button:n,x:e,y:t,modifiers:o(s),clickCount:r})}};t.RawTouchscreenImpl=class{constructor(e){this._client=e}async tap(e,t,n){await Promise.all([this._client.send("Input.dispatchTouchEvent",{type:"touchStart",modifiers:o(n),touchPoints:[{x:e,y:t}]}),this._client.send("Input.dispatchTouchEvent",{type:"touchEnd",modifiers:o(n),touchPoints:[]})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const{nodes:n}=await e.send("Accessibility.getFullAXTree"),s=i.createTree(e,n);return{tree:s,needle:t?await s._findElement(t):null}};class i{constructor(e,t){this._children=[],this._richlyEditable=!1,this._editable=!1,this._focusable=!1,this._expanded=!1,this._hidden=!1,this._client=e,this._payload=t,this._name=this._payload.name?this._payload.name.value:"",this._role=this._payload.role?this._payload.role.value:"Unknown";for(const e of this._payload.properties||[])"editable"===e.name&&(this._richlyEditable="richtext"===e.value.value,this._editable=!0),"focusable"===e.name&&(this._focusable=e.value.value),"expanded"===e.name&&(this._expanded=e.value.value),"hidden"===e.name&&(this._hidden=e.value.value)}_isPlainTextField(){return!this._richlyEditable&&(!!this._editable||("textbox"===this._role||"ComboBox"===this._role||"searchbox"===this._role))}_isTextOnlyObject(){const e=this._role;return"LineBreak"===e||"text"===e||"InlineTextBox"===e}_hasFocusableChild(){if(void 0===this._cachedHasFocusableChild){this._cachedHasFocusableChild=!1;for(const e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}async _findElement(e){const t=e._objectId,{node:{backendNodeId:n}}=await this._client.send("DOM.describeNode",{objectId:t});return this.find(e=>e._payload.backendDOMNodeId===n)||null}find(e){if(e(this))return this;for(const t of this._children){const n=t.find(e);if(n)return n}return null}isLeafNode(){if(!this._children.length)return!0;if(this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!this._hasFocusableChild()&&(!(!this._focusable||"WebArea"===this._role||!this._name)||!("heading"!==this._role||!this._name))}isControl(){switch(this._role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":return!0;default:return!1}}isInteresting(e){return"Ignored"!==this._role&&!this._hidden&&(!(!this._focusable&&!this._richlyEditable)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!this._name)))}serialize(){const e=new Map;for(const t of this._payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this._payload.description&&e.set("description",this._payload.description.value);const t={role:this._role,name:this._payload.name&&this._payload.name.value||""},n=["description","keyshortcuts","roledescription","valuetext"];for(const i of n)e.has(i)&&(t[i]=e.get(i));const i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const n of i){if("focused"===n&&"WebArea"===this._role)continue;const i=e.get(n);i&&(t[n]=i)}const s=["level","valuemax","valuemin"];for(const n of s)e.has(n)&&(t[n]=e.get(n));const r=["autocomplete","haspopup","invalid","orientation"];for(const n of r){const i=e.get(n);i&&"false"!==i&&(t[n]=i)}const o=t;return this._payload.value&&("string"==typeof this._payload.value.value&&(o.valueString=this._payload.value.value),"number"==typeof this._payload.value.value&&(o.valueNumber=this._payload.value.value)),e.has("checked")&&(o.checked="true"===e.get("checked")?"checked":"false"===e.get("checked")?"unchecked":"mixed"),e.has("pressed")&&(o.pressed="true"===e.get("pressed")?"pressed":"false"===e.get("pressed")?"released":"mixed"),o}static createTree(e,t){const n=new Map;for(const s of t)n.set(s.nodeId,new i(e,s));for(const e of n.values())for(const t of e._payload.childIds||[])e._children.push(n.get(t));return n.values().next().value}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRCoverage=void 0;const i=n(16),s=n(70),r=n(4);t.CRCoverage=class{constructor(e){this._jsCoverage=new o(e),this._cssCoverage=new a(e)}async startJSCoverage(e){return await this._jsCoverage.start(e)}async stopJSCoverage(){return await this._jsCoverage.stop()}async startCSSCoverage(e){return await this._cssCoverage.start(e)}async stopCSSCoverage(){return await this._cssCoverage.stop()}};class o{constructor(e){this._reportAnonymousScripts=!1,this._client=e,this._enabled=!1,this._scriptIds=new Set,this._scriptSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){r.assert(!this._enabled,"JSCoverage is already enabled");const{resetOnNavigation:t=!0,reportAnonymousScripts:n=!1}=e;this._resetOnNavigation=t,this._reportAnonymousScripts=n,this._enabled=!0,this._scriptIds.clear(),this._scriptSources.clear(),this._eventListeners=[i.helper.addEventListener(this._client,"Debugger.scriptParsed",this._onScriptParsed.bind(this)),i.helper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),i.helper.addEventListener(this._client,"Debugger.paused",this._onDebuggerPaused.bind(this))],await Promise.all([this._client.send("Profiler.enable"),this._client.send("Profiler.startPreciseCoverage",{callCount:!0,detailed:!0}),this._client.send("Debugger.enable"),this._client.send("Debugger.setSkipAllPauses",{skip:!0})])}_onDebuggerPaused(){this._client.send("Debugger.resume")}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._scriptIds.clear(),this._scriptSources.clear())}async _onScriptParsed(e){if(s.isPlaywrightSourceUrl(e.url))return;if(this._scriptIds.add(e.scriptId),!e.url&&!this._reportAnonymousScripts)return;const t=await this._client._sendMayFail("Debugger.getScriptSource",{scriptId:e.scriptId});t&&this._scriptSources.set(e.scriptId,t.scriptSource)}async stop(){r.assert(this._enabled,"JSCoverage is not enabled"),this._enabled=!1;const[e]=await Promise.all([this._client.send("Profiler.takePreciseCoverage"),this._client.send("Profiler.stopPreciseCoverage"),this._client.send("Profiler.disable"),this._client.send("Debugger.disable")]);i.helper.removeEventListeners(this._eventListeners);const t=[];for(const n of e.result){if(!this._scriptIds.has(n.scriptId))continue;if(!n.url&&!this._reportAnonymousScripts)continue;const e=this._scriptSources.get(n.scriptId);e?t.push({...n,source:e}):t.push(n)}return t}}class a{constructor(e){this._client=e,this._enabled=!1,this._stylesheetURLs=new Map,this._stylesheetSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){r.assert(!this._enabled,"CSSCoverage is already enabled");const{resetOnNavigation:t=!0}=e;this._resetOnNavigation=t,this._enabled=!0,this._stylesheetURLs.clear(),this._stylesheetSources.clear(),this._eventListeners=[i.helper.addEventListener(this._client,"CSS.styleSheetAdded",this._onStyleSheet.bind(this)),i.helper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this))],await Promise.all([this._client.send("DOM.enable"),this._client.send("CSS.enable"),this._client.send("CSS.startRuleUsageTracking")])}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._stylesheetURLs.clear(),this._stylesheetSources.clear())}async _onStyleSheet(e){const t=e.header;if(!t.sourceURL)return;const n=await this._client._sendMayFail("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});n&&(this._stylesheetURLs.set(t.styleSheetId,t.sourceURL),this._stylesheetSources.set(t.styleSheetId,n.text))}async stop(){r.assert(this._enabled,"CSSCoverage is not enabled"),this._enabled=!1;const e=await this._client.send("CSS.stopRuleUsageTracking");await Promise.all([this._client.send("CSS.disable"),this._client.send("DOM.disable")]),i.helper.removeEventListeners(this._eventListeners);const t=new Map;for(const n of e.ruleUsage){let e=t.get(n.styleSheetId);e||(e=[],t.set(n.styleSheetId,e)),e.push({startOffset:n.startOffset,endOffset:n.endOffset,count:n.used?1:0})}const n=[];for(const e of this._stylesheetURLs.keys()){const i=this._stylesheetURLs.get(e),s=this._stylesheetSources.get(e),r=l(t.get(e)||[]);n.push({url:i,ranges:r,text:s})}return n}}function l(e){const t=[];for(const n of e)t.push({offset:n.startOffset,type:0,range:n}),t.push({offset:n.endOffset,type:1,range:n});t.sort((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const n=e.range.endOffset-e.range.startOffset,i=t.range.endOffset-t.range.startOffset;return 0===e.type?i-n:n-i});const n=[],i=[];let s=0;for(const e of t){if(n.length&&s<e.offset&&n[n.length-1]>0){const t=i.length?i[i.length-1]:null;t&&t.end===s?t.end=e.offset:i.push({start:s,end:e.offset})}s=e.offset,0===e.type?n.push(e.range.count):n.pop()}return i.filter(e=>e.end-e.start>1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRPDF=void 0;const i=n(4),s=n(127),r={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},o={px:1,in:96,cm:37.8,mm:3.78};function a(e){if(void 0===e)return;let t=e.substring(e.length-2).toLowerCase(),n="";o.hasOwnProperty(t)?n=e.substring(0,e.length-2):(t="px",n=e);const s=Number(n);i.assert(!isNaN(s),"Failed to parse parameter value: "+e);return s*o[t]/96}t.CRPDF=class{constructor(e){this._client=e}async generate(e={}){const{scale:t=1,displayHeaderFooter:n=!1,headerTemplate:o="",footerTemplate:l="",printBackground:c=!1,landscape:d=!1,pageRanges:h="",preferCSSPageSize:u=!1,margin:p={}}=e;let f=8.5,m=11;if(e.format){const t=r[e.format.toLowerCase()];i.assert(t,"Unknown paper format: "+e.format),f=t.width,m=t.height}else f=a(e.width)||f,m=a(e.height)||m;const _=a(p.top)||0,g=a(p.left)||0,w=a(p.bottom)||0,b=a(p.right)||0,y=await this._client.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:d,displayHeaderFooter:n,headerTemplate:o,footerTemplate:l,printBackground:c,scale:t,paperWidth:f,paperHeight:m,marginTop:_,marginBottom:w,marginLeft:g,marginRight:b,pageRanges:h,preferCSSPageSize:u});return await s.readProtocolStream(this._client,y.stream,null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoRecorder=void 0;const i=n(264),s=n(4),r=n(191),o=n(44);class a{constructor(e){this._process=null,this._gracefullyClose=null,this._lastWritePromise=Promise.resolve(),this._lastFrameTimestamp=0,this._lastFrameBuffer=null,this._lastWriteTimestamp=0,this._frameQueue=[],this._isStopped=!1,this._progress=e}static async launch(e){if(!e.outputFile.endsWith(".webm"))throw new Error("File must have .webm extension");const t=new o.ProgressController;return t.setLogName("browser"),await t.run(async t=>{const n=new a(t);return await n._launch(e),n})}async _launch(e){const t=e.width,n=e.height,s=`-loglevel error -f image2pipe -c:v mjpeg -i - -y -an -r 25 -c:v vp8 -qmin 0 -qmax 50 -crf 8 -b:v 1M -vf pad=${t}:${n}:0:0:gray,crop=${t}:${n}:0:0`.split(" ");s.push(e.outputFile);const o=this._progress,a=i.ffmpegExecutable();if(!a)throw new Error("ffmpeg executable was not found");const{launchedProcess:l,gracefullyClose:c}=await r.launchProcess({executablePath:a,args:s,stdio:"stdin",progress:o,tempDirectories:[],attemptToGracefullyClose:async()=>{o.log("Closing stdin..."),l.stdin.end()},onExit:(e,t)=>{o.log(`ffmpeg onkill exitCode=${e} signal=${t}`)}});l.stdin.on("finish",()=>{o.log("ffmpeg finished input.")}),l.stdin.on("error",()=>{o.log("ffmpeg error.")}),this._process=l,this._gracefullyClose=c}writeFrame(e,t){if(s.assert(this._process),!this._isStopped){if(this._progress.log("writing frame "+t),this._lastFrameBuffer){const e=t-this._lastFrameTimestamp,n=Math.max(1,Math.round(25*e));for(let e=0;e<n;++e)this._frameQueue.push(this._lastFrameBuffer);this._lastWritePromise=this._lastWritePromise.then(()=>this._sendFrames())}this._lastFrameBuffer=e,this._lastFrameTimestamp=t,this._lastWriteTimestamp=s.monotonicTime()}}async _sendFrames(){for(;this._frameQueue.length;)await this._sendFrame(this._frameQueue.shift())}async _sendFrame(e){return new Promise(t=>this._process.stdin.write(e,t)).then(e=>{e&&this._progress.log("ffmpeg failed to write: "+e)})}async stop(){this._isStopped||(this.writeFrame(Buffer.from([]),this._lastFrameTimestamp+(s.monotonicTime()-this._lastWriteTimestamp)/1e3),this._isStopped=!0,await this._lastWritePromise,await this._gracefullyClose())}}t.VideoRecorder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipeTransport=void 0;const i=n(4),s=n(32);t.PipeTransport=class{constructor(e,t){this._pendingMessage="",this._waitForNextTask=i.makeWaitForNextTask(),this._closed=!1,this._pipeWrite=e,t.on("data",e=>this._dispatch(e)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose.call(null)}),t.on("error",e=>s.debugLogger.log("error",e)),e.on("error",e=>s.debugLogger.log("error",e)),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");this._pipeWrite.write(JSON.stringify(e)),this._pipeWrite.write("\0")}close(){throw new Error("unimplemented")}_dispatch(e){let t=e.indexOf("\0");if(-1===t)return void(this._pendingMessage+=e.toString());const n=this._pendingMessage+e.toString(void 0,0,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(n))});let i=t+1;for(t=e.indexOf("\0",i);-1!==t;){const n=e.toString(void 0,i,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(n))}),i=t+1,t=e.indexOf("\0",i)}this._pendingMessage=e.toString(void 0,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spawnAsync=t.validateHostRequirements=void 0;const i=n(0),s=n(1),r=n(2),o=n(8),a=n(35),l=n(266),c=n(265),d=n(264),h=s.promisify(i.access.bind(i)),u=s.promisify(i.stat.bind(i)),p=s.promisify(i.readdir.bind(i));t.validateHostRequirements=async function(e,t){const n=await l.getUbuntuVersion();if("firefox"===t.name&&"16.04"===n)throw new Error("Cannot launch firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04");await async function(e,t){if("linux"===o.platform())return await async function(e,t){const n=c.linuxLddDirectories(e,t),i=[];for(const e of n)i.push(...await m(e));const s=await Promise.all(i.map(e=>async function(e,t){const n=r.dirname(e);let i=t.join(":");process.env.LD_LIBRARY_PATH&&(i=`${process.env.LD_LIBRARY_PATH}:${i}`);const{stdout:s,code:o}=await _("ldd",[e],{cwd:n,env:{...process.env,LD_LIBRARY_PATH:i}});if(0!==o)return[];return s.split("\n").map(e=>e.trim()).filter(e=>e.endsWith("not found")&&e.includes("=>")).map(e=>e.split("=>")[0].trim())}(e,n))),o=new Set;for(const e of s)for(const t of e)o.add(t);for(const e of await async function(e){const t=f[e.name];if(!t.length)return[];const{stdout:n,code:i,error:s}=await _("/sbin/ldconfig",["-p"],{});if(0!==i||s)return[];return t.filter(e=>!(e=>n.toLowerCase().includes(e.toLowerCase()))(e))}(t))o.add(e);if(!o.size)return;const a=new Set,d=await l.getUbuntuVersion();let h=null;"18.04"===d?h=g:"20.04"===d&&(h=w);if(h=Object.assign({},h,b),h)for(const e of o){const t=h[e];t&&(a.add(t),o.delete(e))}let u="";a.size&&(u=["  Install missing packages with:","      sudo apt-get install "+[...a].join("\\\n          "),"",""].join("\n"));let p="";if(o.size){const e=a.size?"Missing libraries we didn't find packages for:":"Missing libraries are:";p=["  "+e,"      "+[...o].join("\n      "),""].join("\n")}throw new Error("Host system is missing dependencies!\n\n"+u+p)}(e,t);if("win32"===o.platform()&&"x64"===o.arch())return await async function(e,t){const n=c.windowsExeAndDllDirectories(e,t),i=[];for(const e of n)i.push(...await m(e));const s=await Promise.all(i.map(e=>async function(e){const t=d.printDepsWindowsExecutable();if(!t)return[];const n=r.dirname(e),{stdout:i,code:s}=await _(t,[e],{cwd:n,env:{...process.env,LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH?`${process.env.LD_LIBRARY_PATH}:${n}`:n}});if(0!==s)return[];return i.split("\n").map(e=>e.trim()).filter(e=>e.endsWith("not found")&&e.includes("=>")).map(e=>e.split("=>")[0].trim().toLowerCase())}(e))),o=new Set;for(const e of s)for(const t of e)o.add(t);if(!o.size)return;let a=!1,l=!1;for(const e of o)e.startsWith("api-ms-win-crt")||"vcruntime140.dll"===e||"msvcp140.dll"===e?a=!0:"mf.dll"!==e&&"mfplat.dll"!==e&&"msmpeg2vdec.dll"!==e&&"evr.dll"!==e&&"avrt.dll"!==e||(l=!0);const h=[];a&&h.push("Some of the Universal C Runtime files cannot be found on the system. You can fix","that by installing Microsoft Visual C++ Redistributable for Visual Studio from:","https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads","");l&&h.push("Some of the Media Foundation files cannot be found on the system. If you are","on Windows Server try fixing this by running the following command in PowerShell","as Administrator:","","    Install-WindowsFeature Server-Media-Foundation","","For Windows N editions visit:","https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions","");throw h.push("Full list of missing libraries:","    "+[...o].join("\n    "),""),new Error("Host system is missing dependencies!\n\n"+h.join("\n"))}(e,t)}(e,t)};const f={chromium:[],webkit:["libGLESv2.so.2","libx264.so"],firefox:[],clank:[]};async function m(e){const t=(await p(e)).map(t=>r.resolve(e,t)),n=await Promise.all(t.map(e=>u(e))),s=t.filter((e,t)=>n[t].isFile());return(await Promise.all(s.map(async e=>(function(e){switch(o.platform()){case"linux":return e.endsWith(".so")||e.includes(".so.");case"win32":return e.endsWith(".dll");default:return!1}}(r.basename(e).toLowerCase())||!!await(e=>h(e,i.constants.X_OK).then(()=>!0).catch(e=>!1))(e))&&e))).filter(Boolean)}function _(e,t,n){const i=a.spawn(e,t,n);return new Promise(e=>{let t="",n="";i.stdout.on("data",e=>t+=e),i.stderr.on("data",e=>n+=e),i.on("close",i=>e({stdout:t,stderr:n,code:i})),i.on("error",i=>e({stdout:t,stderr:n,code:0,error:i}))})}t.spawnAsync=_;const g={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libbrotlidec.so.1":"libbrotli1","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libevent-2.1.so.6":"libevent-2.1-6","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicudata.so.60":"libicu60","libicui18n.so.60":"libicu60","libicuuc.so.60":"libicu60","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libvpx.so.5":"libvpx5","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},w={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.66":"libicu66","libicuuc.so.66":"libicu66","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},b={"libx264.so":"gstreamer1.0-libav"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRDevTools=void 0;const i=n(0),s=n(1);t.CRDevTools=class{constructor(e){this._preferencesPath=e,this._savePromise=Promise.resolve()}async install(e){e.on("Runtime.bindingCalled",async t=>{if("__pw_devtools__"!==t.name)return;const n=JSON.parse(t.payload);let r=void 0;if(this.__testHookOnBinding&&this.__testHookOnBinding(n),"getPreferences"===n.method){if(void 0===this._prefs)try{const e=await s.promisify(i.readFile)(this._preferencesPath,"utf8");this._prefs=JSON.parse(e)}catch(e){this._prefs={}}r=this._prefs}else"setPreference"===n.method?(this._prefs[n.params[0]]=n.params[1],this._save()):"removePreference"===n.method?(delete this._prefs[n.params[0]],this._save()):"clearPreferences"===n.method&&(this._prefs={},this._save());e.send("Runtime.evaluate",{expression:`window.DevToolsAPI.embedderMessageAck(${n.id}, ${JSON.stringify(r)})`,contextId:t.executionContextId}).catch(e=>null)}),await Promise.all([e.send("Runtime.enable"),e.send("Runtime.addBinding",{name:"__pw_devtools__"}),e.send("Page.enable"),e.send("Page.addScriptToEvaluateOnNewDocument",{source:"\n        (() => {\n          const init = () => {\n            // Lazy init happens when InspectorFrontendHost is initialized.\n            // At this point DevToolsHost is ready to be used.\n            const host = window.DevToolsHost;\n            const old = host.sendMessageToEmbedder.bind(host);\n            host.sendMessageToEmbedder = message => {\n              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))\n                window.__pw_devtools__(message);\n              else\n                old(message);\n            };\n          };\n          let value;\n          Object.defineProperty(window, 'InspectorFrontendHost', {\n            configurable: true,\n            enumerable: true,\n            get() { return value; },\n            set(v) { value = v; init(); },\n          });\n        })()\n      "}),e.send("Runtime.runIfWaitingForDebugger")]).catch(e=>null)}_save(){this._savePromise=this._savePromise.then(async()=>{await s.promisify(i.writeFile)(this._preferencesPath,JSON.stringify(this._prefs)).catch(e=>null)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clank=void 0;const i=n(128),s=n(20),r=n(123),o=n(476),a=n(481);class l extends i.BrowserType{async _innerLaunch(e,t,n,i){t.proxy=t.proxy?s.normalizeProxySettings(t.proxy):void 0,t.__testHookBeforeCreateBrowser&&await t.__testHookBeforeCreateBrowser();const r=new o.AndroidClient(new a.AdbBackend),l=(await r.devices())[0];await l.init();const d=await l.launchBrowser(t.executablePath||"com.android.chrome"),h=d,u={name:"clank",slowMo:t.slowMo,persistent:n,headful:!t.headless,downloadsPath:void 0,browserProcess:new c(l,d),proxy:t.proxy};n&&s.validateBrowserContextOptions(n,u);const p=await this._connectToTransport(h,u);return n&&!t.ignoreAllDefaultArgs&&await p._defaultContext._loadDefaultContext(e),p}_defaultArgs(e,t,n){return[]}_connectToTransport(e,t){return r.CRBrowser.connect(e,t)}_amendEnvironment(e,t,n,i){return e}_rewriteStartupError(e){return e}_attemptToGracefullyCloseBrowser(e){}}t.Clank=l;class c{constructor(e,t){this._device=e,this._browser=t}async kill(){}async close(){await this._browser.close(),await this._device.close()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidBrowser=t.AndroidDevice=t.AndroidClient=void 0;const i=n(34),s=n(5),r=n(71),o=n(4);t.AndroidClient=class{constructor(e){this.backend=e}async devices(){return(await this.backend.devices()).map(e=>new a(e))}};class a{constructor(e){this.backend=e}async init(){await this.backend.init(),this._model=await this.backend.runCommand("shell:getprop ro.product.model")}async close(){await this.backend.close()}async launchBrowser(e){i("pw:android")("Force-stopping",e),await this.backend.runCommand("shell:am force-stop "+e);const t=o.createGuid(),n="_ --disable-fre --no-default-browser-check --no-first-run --remote-debugging-socket-name="+t;for(i("pw:android")("Starting",e,n),await this.backend.runCommand(`shell:echo "${n}" > /data/local/tmp/chrome-command-line`),await this.backend.runCommand(`shell:am start -n ${e}/com.google.android.apps.chrome.Main about:blank`),i("pw:android")("Polling for socket",t);;){if(await this.backend.runCommand(`shell:cat /proc/net/unix | grep ${t}$`))break;await new Promise(e=>setTimeout(e,100))}i("pw:android")("Got the socket, connecting");const s=new l(this,e,t);return await s._open(),s}model(){return this._model}}t.AndroidDevice=a;class l extends s.EventEmitter{constructor(e,t,n){super(),this._waitForNextTask=o.makeWaitForNextTask(),this._packageName=t,this.device=e,this.socketName=n,this._receiver=new r.Receiver,this._receiver.on("message",e=>{this._waitForNextTask(()=>{this.onmessage&&this.onmessage(JSON.parse(e))})})}async _open(){this._socket=await this.device.backend.open("localabstract:"+this.socketName),this._socket.on("close",()=>{this._waitForNextTask(()=>{this.onclose&&this.onclose()})}),await this._socket.write(Buffer.from("GET /devtools/browser HTTP/1.1\r\nUpgrade: WebSocket\r\nConnection: Upgrade\r\nSec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r\nSec-WebSocket-Version: 13\r\n\r\n")),await new Promise(e=>this._socket.once("data",e)),this._socket.on("data",e=>this._receiver._write(e,"binary",()=>{}))}async send(e){var t;await this._socket.write((t=JSON.stringify(e),r.Sender.frame(Buffer.from(t),{opcode:1,mask:!0,fin:!0,readOnly:!0})[0]))}async close(){await this._socket.close(),await this.device.backend.runCommand("shell:am force-stop "+this._packageName)}}t.AndroidBrowser=l},function(e,t,n){"use strict";const i=Symbol("kDone"),s=Symbol("kRun");e.exports=class{constructor(e){this[i]=()=>{this.pending--,this[s]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[s]()}[s](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[i])}}}},function(e,t,n){"use strict";class i{constructor(e,t){this.target=t,this.type=e}}class s extends i{constructor(e,t){super("message",t),this.data=e}}class r extends i{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class o extends i{constructor(e){super("open",e)}}class a extends i{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const l={addEventListener(e,t,n){if("function"!=typeof t)return;function i(e){t.call(this,new s(e,this))}function l(e,n){t.call(this,new r(e,n,this))}function c(e){t.call(this,new a(e,this))}function d(){t.call(this,new o(this))}const h=n&&n.once?"once":"on";"message"===e?(i._listener=t,this[h](e,i)):"close"===e?(l._listener=t,this[h](e,l)):"error"===e?(c._listener=t,this[h](e,c)):"open"===e?(d._listener=t,this[h](e,d)):this[h](e,t)},removeEventListener(e,t){const n=this.listeners(e);for(let i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=l},function(e,t,n){"use strict";const{Duplex:i}=n(6);function s(e){e.emit("close")}function r(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;function a(){n&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const l=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){l.push(t)||(n=!1,e._socket.pause())})),e.once("error",(function(e){l.destroyed||l.destroy(e)})),e.once("close",(function(){l.destroyed||l.push(null)})),l._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(s,l);let i=!1;e.once("error",(function(e){i=!0,n(e)})),e.once("close",(function(){i||n(t),process.nextTick(s,l)})),e.terminate()},l._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),l._readableState.endEmitted&&l.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){l._final(t)}))},l._read=function(){e.readyState!==e.OPEN||n||(n=!0,e._receiver._writableState.needDrain||e._socket.resume())},l._write=function(t,n,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){l._write(t,n,i)}))},l.on("end",r),l.on("error",o),l}},function(e,t,n){"use strict";const i=n(5),{createHash:s}=n(27),{createServer:r,STATUS_CODES:o}=n(33),a=n(129),l=n(267),{format:c,parse:d}=n(271),{GUID:h,kWebSocket:u}=n(72),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e.emit("close")}function m(){this.destroy()}function _(e,t,n,i){e.writable&&(n=n||o[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...i},e.write(`HTTP/1.1 ${t} ${o[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",m),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=r((e,t)=>{const n=o[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,i)=>{this.handleUpgrade(t,n,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(f,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",m);const s=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),r=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!s||!p.test(s)||8!==r&&13!==r||!this.shouldHandle(e))return _(t,400);if(this.options.perMessageDeflate){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=d(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(n.accept(t[a.extensionName]),o[a.extensionName]=n)}catch(e){return _(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[""+(8===r?"sec-websocket-origin":"origin")],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(r,a,l,c)=>{if(!r)return _(t,a||401,l,c);this.completeUpgrade(s,o,e,t,n,i)});if(!this.options.verifyClient(a))return _(t,401)}this.completeUpgrade(s,o,e,t,n,i)}completeUpgrade(e,t,n,i,r,o){if(!i.readable||!i.writable)return i.destroy();if(i[u])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+s("sha1").update(e+h).digest("base64")],p=new l(null);let f=n.headers["sec-websocket-protocol"];if(f&&(f=f.trim().split(/ *, */),f=this.options.handleProtocols?this.options.handleProtocols(f,n):f[0],f&&(d.push("Sec-WebSocket-Protocol: "+f),p._protocol=f)),t[a.extensionName]){const e=t[a.extensionName].params,n=c({[a.extensionName]:[e]});d.push("Sec-WebSocket-Extensions: "+n),p._extensions=t}this.emit("headers",d,n),i.write(d.concat("\r\n").join("\r\n")),i.removeListener("error",m),p.setSocket(i,r,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",()=>this.clients.delete(p))),o(p,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdbBackend=void 0;const i=n(23),s=n(34),r=n(46),o=n(71);t.AdbBackend=class{async devices(){return(await l("host:devices")).toString().trim().split("\n").map(e=>e.split("\t")[0]).map(e=>new a(e))}};class a{constructor(e){this.serial=e}async init(){}async close(){}runCommand(e){return l(e,this.serial)}async open(e){const t=await async function(e,t){const n=new d(r.createConnection({port:5037}));if(t){await n.write(c("host:transport:"+t));const e=await n.read(4);i("OKAY"===e.toString(),e.toString())}await n.write(c(e));const s=await n.read(4);return i("OKAY"===s.toString(),s.toString()),n}(e,this.serial);return t.becomeSocket(),t}}async function l(e,t){s("pw:adb:runCommand")(e,t);const n=new d(r.createConnection({port:5037}));if(t){await n.write(c("host:transport:"+t));const e=await n.read(4);i("OKAY"===e.toString(),e.toString())}await n.write(c(e));const o=await n.read(4);if(i("OKAY"===o.toString(),o.toString()),!e.startsWith("shell:")){const e=parseInt((await n.read(4)).toString(),16);return(await n.read(e)).toString()}return(await n.readAll()).toString()}function c(e){let t=e.length.toString(16);return t="0".repeat(4-t.length)+t,Buffer.from(t+e)}class d extends o.EventEmitter{constructor(e){super(),this._buffer=Buffer.from([]),this._isSocket=!1,this._isClosed=!1,this._socket=e,this._connectPromise=new Promise(e=>this._socket.on("connect",e)),this._socket.on("data",e=>{s("pw:android:adb:data")(e.toString()),this._isSocket?this.emit("data",e):(this._buffer=Buffer.concat([this._buffer,e]),this._notifyReader&&this._notifyReader())}),this._socket.on("close",()=>{this._isClosed=!0,this._notifyReader&&this._notifyReader(),this.emit("close")}),this._socket.on("error",e=>this.emit("error",e))}async write(e){s("pw:android:adb:send")(e.toString()),await this._connectPromise,await new Promise(t=>this._socket.write(e,t))}async close(){s("pw:android:adb")("Close"),this._socket.destroy()}async read(e){for(await this._connectPromise,i(!this._isSocket,"Can not read by length in socket mode");this._buffer.length<e;)await new Promise(e=>this._notifyReader=e);const t=this._buffer.slice(0,e);return this._buffer=this._buffer.slice(e),s("pw:android:adb:recv")(t.toString()),t}async readAll(){for(;!this._isClosed;)await new Promise(e=>this._notifyReader=e);return this._buffer}becomeSocket(){i(!this._buffer.length),this._isSocket=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebKit=void 0;const i=n(483),s=n(2),r=n(102),o=n(128);class a extends o.BrowserType{_connectToTransport(e,t){return i.WKBrowser.connect(e,t)}_amendEnvironment(e,t,n,i){return{...e,CURL_COOKIE_JAR_PATH:s.join(t,"cookiejar.db")}}_rewriteStartupError(e){return e}_attemptToGracefullyCloseBrowser(e){e.send({method:"Playwright.close",params:{},id:r.kBrowserCloseMessageId})}_defaultArgs(e,t,n){const{args:i=[],proxy:s,devtools:r,headless:o}=e;r&&console.warn("devtools parameter as a launch argument in WebKit is not supported. Also starting Web Inspector manually will terminate the execution in WebKit.");if(i.find(e=>e.startsWith("--user-data-dir=")))throw new Error("Pass userDataDir parameter instead of specifying --user-data-dir argument");if(i.find(e=>!e.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const a=["--inspector-pipe"];return o&&a.push("--headless"),t?a.push("--user-data-dir="+n):a.push("--no-startup-window"),s&&("darwin"===process.platform?(a.push("--proxy="+s.server),s.bypass&&a.push("--proxy-bypass-list="+s.bypass)):"linux"===process.platform?(a.push("--proxy="+s.server),s.bypass&&a.push(...s.bypass.split(",").map(e=>"--ignore-host="+e))):"win32"===process.platform&&(a.push("--curl-proxy="+s.server),s.bypass&&a.push("--curl-noproxy="+s.bypass))),a.push(...i),t&&a.push("about:blank"),a}}t.WebKit=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKBrowserContext=t.WKBrowser=void 0;const i=n(124),s=n(20),r=n(16),o=n(4),a=n(31),l=n(17),c=n(102),d=n(484);class h extends i.Browser{constructor(e,t){super(t),this._contexts=new Map,this._wkPages=new Map,this._connection=new c.WKConnection(e,this._onDisconnect.bind(this)),this._browserSession=this._connection.browserSession,this._eventListeners=[r.helper.addEventListener(this._browserSession,"Playwright.pageProxyCreated",this._onPageProxyCreated.bind(this)),r.helper.addEventListener(this._browserSession,"Playwright.pageProxyDestroyed",this._onPageProxyDestroyed.bind(this)),r.helper.addEventListener(this._browserSession,"Playwright.provisionalLoadFailed",e=>this._onProvisionalLoadFailed(e)),r.helper.addEventListener(this._browserSession,"Playwright.windowOpen",e=>this._onWindowOpen(e)),r.helper.addEventListener(this._browserSession,"Playwright.downloadCreated",this._onDownloadCreated.bind(this)),r.helper.addEventListener(this._browserSession,"Playwright.downloadFilenameSuggested",this._onDownloadFilenameSuggested.bind(this)),r.helper.addEventListener(this._browserSession,"Playwright.downloadFinished",this._onDownloadFinished.bind(this)),r.helper.addEventListener(this._browserSession,"Playwright.screencastFinished",this._onScreencastFinished.bind(this)),r.helper.addEventListener(this._browserSession,c.kPageProxyMessageReceived,this._onPageProxyMessageReceived.bind(this))]}static async connect(e,t){const n=new h(e,t),i=[n._browserSession.send("Playwright.enable")];return t.persistent&&(n._defaultContext=new u(n,void 0,t.persistent),i.push(n._defaultContext._initialize())),await Promise.all(i),n}_onDisconnect(){for(const e of this._wkPages.values())e.dispose();this._didClose()}async newContext(e={}){s.validateBrowserContextOptions(e,this._options);const t=e.proxy?{proxyServer:e.proxy.server,proxyBypassList:e.proxy.bypass}:void 0,{browserContextId:n}=await this._browserSession.send("Playwright.createContext",t);e.userAgent=e.userAgent||"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0 Safari/605.1.15";const i=new u(this,n,e);return await i._initialize(),this._contexts.set(n,i),i}contexts(){return Array.from(this._contexts.values())}version(){return"14.0"}_onDownloadCreated(e){const t=this._wkPages.get(e.pageProxyId);if(!t)return;t._page._frameManager.frameAbortedNavigation(e.frameId,"Download is starting");let n=t._initializedPage;n||(t._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),t._opener&&(n=t._opener._initializedPage)),n&&this._downloadCreated(n,e.uuid,e.url)}_onDownloadFilenameSuggested(e){this._downloadFilenameSuggested(e.uuid,e.suggestedFilename)}_onDownloadFinished(e){this._downloadFinished(e.uuid,e.error)}_onScreencastFinished(e){this._videoFinished(e.screencastId)}_onPageProxyCreated(e){const t=e.pageProxyId;let n=null;if(e.browserContextId&&(n=this._contexts.get(e.browserContextId)||null),n||(n=this._defaultContext),!n)return;const i=new c.WKSession(this._connection,t,"The page has been closed.",e=>{this._connection.rawSend({...e,pageProxyId:t})}),r=e.openerId?this._wkPages.get(e.openerId):void 0,o=new d.WKPage(n,i,r||null);this._wkPages.set(t,o),o.pageOrError().then(async e=>{const t=o._page;if(e instanceof Error){if(n.isClosingOrClosed())return;t._setIsError()}if(n.emit(s.BrowserContext.Events.Page,t),!r)return;await r.pageOrError();const i=r._page;i.isClosed()||i.emit(l.Page.Events.Popup,t)})}_onPageProxyDestroyed(e){const t=e.pageProxyId,n=this._wkPages.get(t);n&&(n.didClose(),n.dispose(),this._wkPages.delete(t))}_onPageProxyMessageReceived(e){const t=this._wkPages.get(e.pageProxyId);t&&t.dispatchMessageToSession(e.message)}_onProvisionalLoadFailed(e){const t=this._wkPages.get(e.pageProxyId);t&&t.handleProvisionalLoadFailed(e)}_onWindowOpen(e){const t=this._wkPages.get(e.pageProxyId);t&&t.handleWindowOpen(e)}isConnected(){return!this._connection.isClosed()}}t.WKBrowser=h;class u extends s.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaHeader()}async _initialize(){o.assert(!this._wkPages().length);const e=this._browserContextId,t=[super._initialize()];this._browser._options.downloadsPath&&t.push(this._browser._browserSession.send("Playwright.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allow":"deny",downloadPath:this._browser._options.downloadsPath,browserContextId:e})),this._options.ignoreHTTPSErrors&&t.push(this._browser._browserSession.send("Playwright.setIgnoreCertificateErrors",{browserContextId:e,ignore:!0})),this._options.locale&&t.push(this._browser._browserSession.send("Playwright.setLanguages",{browserContextId:e,languages:[this._options.locale]})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),await Promise.all(t)}_wkPages(){return Array.from(this._browser._wkPages.values()).filter(e=>e._browserContext===this)}pages(){return this._wkPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPage(){s.assertBrowserContextIsNotOwned(this);const{pageProxyId:e}=await this._browser._browserSession.send("Playwright.createPage",{browserContextId:this._browserContextId}),t=this._browser._wkPages.get(e),n=await t.pageOrError();if(!(n instanceof l.Page))throw n;if(n.isClosed())throw new Error("Page has been closed.");return n}async _doCookies(e){const{cookies:t}=await this._browser._browserSession.send("Playwright.getAllCookies",{browserContextId:this._browserContextId});return a.filterCookies(t.map(e=>{const t={...e};return t.expires=-1===e.expires?-1:e.expires/1e3,delete t.session,t}),e)}async addCookies(e){const t=a.rewriteCookies(e).map(e=>({...e,session:-1===e.expires||void 0===e.expires,expires:e.expires&&-1!==e.expires?1e3*e.expires:e.expires}));await this._browser._browserSession.send("Playwright.setCookies",{cookies:t,browserContextId:this._browserContextId})}async clearCookies(){await this._browser._browserSession.send("Playwright.deleteAllCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){await Promise.all(this.pages().map(n=>n._delegate._grantPermissions(e,t)))}async _doClearPermissions(){await Promise.all(this.pages().map(e=>e._delegate._clearPermissions()))}async setGeolocation(e){s.verifyGeolocation(e),this._options.geolocation=e;const t=e?{...e,timestamp:Date.now()}:void 0;await this._browser._browserSession.send("Playwright.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:t})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(const e of this.pages())await e._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(const e of this.pages())await e._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(const e of this.pages())await e._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(const e of this.pages())await e._delegate._updateBootstrapScript()}async _doExposeBinding(e){for(const t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(const e of this.pages())await e._delegate.updateRequestInterception()}async _doClose(){o.assert(this._browserContextId),await this._browser._browserSession.send("Playwright.deleteContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}}t.WKBrowserContext=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKPage=void 0;const i=n(161),s=n(2),r=n(164),o=n(4),a=n(190),l=n(125),c=n(16),d=n(31),h=n(17),u=n(485),p=n(102),f=n(272),m=n(486),_=n(487),g=n(488),w=n(489);class b{constructor(e,t,n){if(this._provisionalPage=null,this._pagePromiseCallback=()=>{},this._requestIdToRequest=new Map,this._sessionListeners=[],this._initializedPage=null,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=e=>{},this._lastConsoleMessage=null,this._recordingVideoFile=null,this._pageProxySession=t,this._opener=n,this.rawKeyboard=new m.RawKeyboardImpl(t),this.rawMouse=new m.RawMouseImpl(t),this.rawTouchscreen=new m.RawTouchscreenImpl(t),this._contextIdToContext=new Map,this._page=new h.Page(this,e),this._workers=new w.WKWorkers(this._page),this._session=void 0,this._browserContext=e,this._page.on(h.Page.Events.FrameDetached,e=>this._removeContextsForFrame(e,!1)),this._eventListeners=[c.helper.addEventListener(this._pageProxySession,"Target.targetCreated",this._onTargetCreated.bind(this)),c.helper.addEventListener(this._pageProxySession,"Target.targetDestroyed",this._onTargetDestroyed.bind(this)),c.helper.addEventListener(this._pageProxySession,"Target.dispatchMessageFromTarget",this._onDispatchMessageFromTarget.bind(this)),c.helper.addEventListener(this._pageProxySession,"Target.didCommitProvisionalTarget",this._onDidCommitProvisionalTarget.bind(this))],this._pagePromise=new Promise(e=>this._pagePromiseCallback=e),this._firstNonInitialNavigationCommittedPromise=new Promise((e,t)=>{this._firstNonInitialNavigationCommittedFulfill=e,this._firstNonInitialNavigationCommittedReject=t}),n&&!e._options.noDefaultViewport&&n._nextWindowOpenPopupFeatures){const e=c.helper.getViewportSizeFromWindowFeatures(n._nextWindowOpenPopupFeatures);n._nextWindowOpenPopupFeatures=void 0,e&&(this._page._state.viewportSize=e)}}async _initializePageProxySession(){const e=[this._pageProxySession.send("Dialog.enable"),this._pageProxySession.send("Emulation.setActiveAndFocused",{active:!0})];if(!1===this._browserContext._options.javaScriptEnabled&&e.push(this._pageProxySession.send("Emulation.setJavaScriptEnabled",{enabled:!1})),e.push(this._updateViewport()),e.push(this.updateHttpCredentials()),this._browserContext._permissions.size)for(const[e,t]of this._browserContext._permissions)this._grantPermissions(e,t);if(this._browserContext._options.recordVideo){const t=this._browserContext._options.recordVideo.size||this._browserContext._options.viewport||{width:1280,height:720},n=s.join(this._browserContext._options.recordVideo.dir,o.createGuid()+".webm");e.push(this._browserContext._ensureVideosPath().then(()=>this.startScreencast({...t,outputFile:n})))}await Promise.all(e)}_setSession(e){c.helper.removeEventListeners(this._sessionListeners),this._session=e,this.rawKeyboard.setSession(e),this._addSessionListeners(),this._workers.setSession(e)}async _initializeSession(e,t,n){await this._initializeSessionMayThrow(e,n).catch(n=>{if(!(t&&e.isDisposed()||this._session!==e))throw n})}async _initializeSessionMayThrow(e,t){const[,n]=await Promise.all([e.send("Page.enable"),e.send("Page.getResourceTree")]);t(n);const i=[e.send("Runtime.enable"),e.send("Page.createUserWorld",{name:"__playwright_utility_world__"}).catch(e=>{}),e.send("Console.enable"),e.send("Network.enable"),this._workers.initializeSession(e)];this._page._needsRequestInterception()&&(i.push(e.send("Network.setInterceptionEnabled",{enabled:!0})),i.push(e.send("Network.addInterception",{url:".*",stage:"request",isRegex:!0})));const s=this._browserContext._options;s.userAgent&&i.push(e.send("Page.overrideUserAgent",{value:s.userAgent})),(this._page._state.mediaType||this._page._state.colorScheme)&&i.push(b._setEmulateMedia(e,this._page._state.mediaType,this._page._state.colorScheme)),i.push(e.send("Page.setBootstrapScript",{source:this._calculateBootstrapScript()}));for(const e of this._browserContext._pageBindings.values())i.push(this._evaluateBindingScript(e));s.bypassCSP&&i.push(e.send("Page.setBypassCSP",{enabled:!0})),this._page._state.viewportSize&&i.push(e.send("Page.setScreenSizeOverride",{width:this._page._state.viewportSize.width,height:this._page._state.viewportSize.height})),i.push(this.updateEmulateMedia()),i.push(e.send("Network.setExtraHTTPHeaders",{headers:o.headersArrayToObject(this._calculateExtraHTTPHeaders(),!1)})),s.offline&&i.push(e.send("Network.setEmulateOfflineState",{offline:!0})),i.push(e.send("Page.setTouchEmulationEnabled",{enabled:!!s.hasTouch})),s.timezoneId&&i.push(e.send("Page.setTimeZone",{timeZone:s.timezoneId}).catch(e=>{throw new Error("Invalid timezone ID: "+s.timezoneId)})),await Promise.all(i)}_onDidCommitProvisionalTarget(e){const{oldTargetId:t,newTargetId:n}=e;o.assert(this._provisionalPage),o.assert(this._provisionalPage._session.sessionId===n,"Unknown new target: "+n),o.assert(this._session.sessionId===t,"Unknown old target: "+t),this._session.errorText="Target was swapped out.";const i=this._provisionalPage._session;this._provisionalPage.commit(),this._provisionalPage.dispose(),this._provisionalPage=null,this._setSession(i)}_onTargetDestroyed(e){const{targetId:t,crashed:n}=e;this._provisionalPage&&this._provisionalPage._session.sessionId===t?(this._provisionalPage._session.dispose(),this._provisionalPage.dispose(),this._provisionalPage=null):this._session.sessionId===t&&(this._session.dispose(),c.helper.removeEventListeners(this._sessionListeners),n&&(this._session.markAsCrashed(),this._page._didCrash()))}didClose(){this._page._didClose()}dispose(){this._pageProxySession.dispose(),c.helper.removeEventListeners(this._sessionListeners),c.helper.removeEventListeners(this._eventListeners),this._session&&this._session.dispose(),this._provisionalPage&&(this._provisionalPage._session.dispose(),this._provisionalPage.dispose(),this._provisionalPage=null),this._page._didDisconnect(),this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))}dispatchMessageToSession(e){this._pageProxySession.dispatchMessage(e)}handleProvisionalLoadFailed(e){if(!this._initializedPage)return void this._firstNonInitialNavigationCommittedReject(new Error("Initial load failed"));if(!this._provisionalPage)return;let t=e.error;t.includes("cancelled")&&(t+="; maybe frame was detached?"),this._page._frameManager.frameAbortedNavigation(this._page.mainFrame()._id,t,e.loaderId)}handleWindowOpen(e){o.debugAssert(!this._nextWindowOpenPopupFeatures),this._nextWindowOpenPopupFeatures=e.windowFeatures}async pageOrError(){return this._pagePromise}async _onTargetCreated(e){const{targetInfo:t}=e,n=new p.WKSession(this._pageProxySession.connection,t.targetId,`The ${t.type} has been closed.`,e=>{this._pageProxySession.send("Target.sendMessageToTarget",{message:JSON.stringify(e),targetId:t.targetId}).catch(t=>{n.dispatchMessage({id:e.id,error:{message:t.message}})})});if(o.assert("page"===t.type,"Only page targets are expected in WebKit, received: "+t.type),t.isProvisional)o.assert(t.isProvisional),o.assert(!this._provisionalPage),this._provisionalPage=new g.WKProvisionalPage(n,this),t.isPaused&&this._provisionalPage.initializationPromise.then(()=>{this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId})});else{let e;o.assert(!this._initializedPage);try{this._setSession(n),await Promise.all([this._initializePageProxySession(),this._initializeSession(n,!1,({frameTree:e})=>this._handleFrameTree(e))]),e=this._page}catch(t){e=t}if(t.isPaused&&this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId}),e instanceof h.Page&&""===this._page.mainFrame().url())try{await this._firstNonInitialNavigationCommittedPromise}catch(t){e=t}else this._firstNonInitialNavigationCommittedPromise.catch(()=>{});this._initializedPage=e instanceof h.Page?e:null,this._pagePromiseCallback(e)}}_onDispatchMessageFromTarget(e){const{targetId:t,message:n}=e;if(this._provisionalPage&&this._provisionalPage._session.sessionId===t)this._provisionalPage._session.dispatchMessage(JSON.parse(n));else{if(this._session.sessionId!==t)throw new Error("Unknown target: "+t);this._session.dispatchMessage(JSON.parse(n))}}_addSessionListeners(){this._sessionListeners=[c.helper.addEventListener(this._session,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),c.helper.addEventListener(this._session,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),c.helper.addEventListener(this._session,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),c.helper.addEventListener(this._session,"Page.frameDetached",e=>this._onFrameDetached(e.frameId)),c.helper.addEventListener(this._session,"Page.frameScheduledNavigation",e=>this._onFrameScheduledNavigation(e.frameId)),c.helper.addEventListener(this._session,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),c.helper.addEventListener(this._session,"Page.loadEventFired",e=>this._onLifecycleEvent(e.frameId,"load")),c.helper.addEventListener(this._session,"Page.domContentEventFired",e=>this._onLifecycleEvent(e.frameId,"domcontentloaded")),c.helper.addEventListener(this._session,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),c.helper.addEventListener(this._session,"Console.messageAdded",e=>this._onConsoleMessage(e)),c.helper.addEventListener(this._session,"Console.messageRepeatCountUpdated",e=>this._onConsoleRepeatCountUpdated(e)),c.helper.addEventListener(this._pageProxySession,"Dialog.javascriptDialogOpening",e=>this._onDialog(e)),c.helper.addEventListener(this._session,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),c.helper.addEventListener(this._session,"Network.requestWillBeSent",e=>this._onRequestWillBeSent(this._session,e)),c.helper.addEventListener(this._session,"Network.requestIntercepted",e=>this._onRequestIntercepted(e)),c.helper.addEventListener(this._session,"Network.responseReceived",e=>this._onResponseReceived(e)),c.helper.addEventListener(this._session,"Network.loadingFinished",e=>this._onLoadingFinished(e)),c.helper.addEventListener(this._session,"Network.loadingFailed",e=>this._onLoadingFailed(e)),c.helper.addEventListener(this._session,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),c.helper.addEventListener(this._session,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),c.helper.addEventListener(this._session,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),c.helper.addEventListener(this._session,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),c.helper.addEventListener(this._session,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),c.helper.addEventListener(this._session,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),c.helper.addEventListener(this._session,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}async _updateState(e,t){await this._forAllSessions(n=>n.send(e,t).then())}async _forAllSessions(e){const t=[this._session];this._provisionalPage&&t.push(this._provisionalPage._session),await Promise.all(t.map(t=>e(t).catch(e=>{})))}_onFrameScheduledNavigation(e){this._page._frameManager.frameRequestedNavigation(e)}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_onLifecycleEvent(e,t){this._page._frameManager.frameLifecycleEvent(e,t)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),this._page._frameManager.frameLifecycleEvent(e.frame.id,"domcontentloaded"),this._page._frameManager.frameLifecycleEvent(e.frame.id,"load"),e.childFrames)for(const t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){return this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){const n=this._page._frameManager.frame(e.id);o.assert(n),this._removeContextsForFrame(n,!0),e.parentId||this._workers.clear(),this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url,e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e){this._page._frameManager.frameDetached(e)}_removeContextsForFrame(e,t){for(const[n,i]of this._contextIdToContext)i.frame===e&&(i._delegate._dispose(),this._contextIdToContext.delete(n),t&&e._contextDestroyed(i))}_onExecutionContextCreated(e){if(this._contextIdToContext.has(e.id))return;const t=this._page._frameManager.frame(e.frameId);if(!t)return;const n=new f.WKExecutionContext(this._session,e.id),i=new l.FrameExecutionContext(n,t);"normal"===e.type?t._contextCreated("main",i):"user"===e.type&&"__playwright_utility_world__"===e.name&&t._contextCreated("utility",i),"normal"===e.type&&t===this._page.mainFrame()&&(this._mainFrameContextId=e.id),this._contextIdToContext.set(e.id,i)}async navigateFrame(e,t,n){if(this._pageProxySession.isDisposed())throw new Error("Target closed");const i=this._pageProxySession.sessionId;return{newDocumentId:(await this._pageProxySession.connection.browserSession.send("Playwright.navigate",{url:t,pageProxyId:i,frameId:e._id,referrer:n})).loaderId}}_onConsoleMessage(e){const{type:t,level:n,text:i,parameters:s,url:r,line:o,column:a,source:l}=e.message;if("debug"===n&&s&&"__playwright_binding_call__"===s[0].value){const e=JSON.parse(s[1].objectId),t=this._contextIdToContext.get(e.injectedScriptId);return void this.pageOrError().then(e=>{e instanceof Error||this._page._onBindingCalled(s[2].value,t)})}if("error"===n&&"javascript"===l){const t=i.startsWith("Error: ")?i.substring(7):i,n=new Error(t);return e.message.stackTrace?n.stack=e.message.stackTrace.map(e=>`${e.functionName}@${e.url}:${e.lineNumber}:${e.columnNumber}`).join("\n"):n.stack="",void this._page.emit(h.Page.Events.PageError,n)}let c=t||"";"log"===t?c=n:"timing"===t&&(c="timeEnd");const d=(s||[]).map(e=>{let t=null;if(e.objectId){const n=JSON.parse(e.objectId);t=this._contextIdToContext.get(n.injectedScriptId)}else t=this._contextIdToContext.get(this._mainFrameContextId);return t.createHandle(e)});this._lastConsoleMessage={derivedType:c,text:i,handles:d,count:0,location:{url:r||"",lineNumber:(o||1)-1,columnNumber:(a||1)-1}},this._onConsoleRepeatCountUpdated({count:1})}_onConsoleRepeatCountUpdated(e){if(this._lastConsoleMessage){const{derivedType:t,text:n,handles:i,count:s,location:r}=this._lastConsoleMessage;for(let o=s;o<e.count;++o)this._page._addConsoleMessage(t,i,r,i.length?void 0:n);this._lastConsoleMessage.count=e.count}}_onDialog(e){this._page.emit(h.Page.Events.Dialog,new a.Dialog(e.type,e.message,async(e,t)=>{await this._pageProxySession.send("Dialog.handleJavaScriptDialog",{accept:e,promptText:t})},e.defaultPrompt))}async _onFileChooserOpened(e){const t=(await this._page._frameManager.frame(e.frameId)._mainContext()).createHandle(e.element).asElement();this._page._onFileChooserOpened(t)}static async _setEmulateMedia(e,t,n){const i=[];if(i.push(e.send("Page.setEmulatedMedia",{media:t||""})),null!==n){let t="";switch(n){case"light":t="Light";break;case"dark":t="Dark"}i.push(e.send("Page.setForcedAppearance",{appearance:t}))}await Promise.all(i)}async updateExtraHTTPHeaders(){await this._updateState("Network.setExtraHTTPHeaders",{headers:o.headersArrayToObject(this._calculateExtraHTTPHeaders(),!1)})}_calculateExtraHTTPHeaders(){const e=this._browserContext._options.locale;return d.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders,e?d.singleHeader("Accept-Language",e):void 0])}async updateEmulateMedia(){const e=this._page._state.colorScheme||this._browserContext._options.colorScheme||"light";await this._forAllSessions(t=>b._setEmulateMedia(t,this._page._state.mediaType,e))}async setViewportSize(e){o.assert(this._page._state.viewportSize===e),await this._updateViewport()}async bringToFront(){this._pageProxySession.send("Target.activate",{targetId:this._session.sessionId})}async _updateViewport(){const e=this._browserContext._options,t=this._page._state.viewportSize;if(null===t)return;const n=[this._pageProxySession.send("Emulation.setDeviceMetricsOverride",{width:t.width,height:t.height,fixedLayout:!!e.isMobile,deviceScaleFactor:e.deviceScaleFactor||1}),this._session.send("Page.setScreenSizeOverride",{width:t.width,height:t.height})];if(e.isMobile){const e=t.width>t.height?90:0;n.push(this._session.send("Page.setOrientationOverride",{angle:e}))}await Promise.all(n)}async updateRequestInterception(){const e=this._page._needsRequestInterception();await Promise.all([this._updateState("Network.setInterceptionEnabled",{enabled:e}),this._updateState("Network.addInterception",{url:".*",stage:"request",isRegex:!0})])}async updateOffline(){await this._updateState("Network.setEmulateOfflineState",{offline:!!this._browserContext._options.offline})}async updateHttpCredentials(){const e=this._browserContext._options.httpCredentials||{username:"",password:""};await this._pageProxySession.send("Emulation.setAuthCredentials",{username:e.username,password:e.password})}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof h.Page&&!e.isClosed()?e:null}async reload(){await this._session.send("Page.reload")}goBack(){return this._session.send("Page.goBack").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goBack): Failed to go"))return!1;throw e})}goForward(){return this._session.send("Page.goForward").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goForward): Failed to go"))return!1;throw e})}async exposeBinding(e){await this._updateBootstrapScript(),await this._evaluateBindingScript(e)}async _evaluateBindingScript(e){const t=this._bindingToScript(e);await Promise.all(this._page.frames().map(e=>e._evaluateExpression(t,!1,{}).catch(e=>{})))}async evaluateOnNewDocument(e){await this._updateBootstrapScript()}_bindingToScript(e){return`self.${e.name} = (param) => console.debug('__playwright_binding_call__', {}, param); ${e.source}`}_calculateBootstrapScript(){const e=[];for(const t of this._browserContext._pageBindings.values())e.push(this._bindingToScript(t));for(const t of this._page._pageBindings.values())e.push(this._bindingToScript(t));return e.push(...this._browserContext._evaluateOnNewDocumentSources),e.push(...this._page._evaluateOnNewDocumentSources),e.join(";")}async _updateBootstrapScript(){await this._updateState("Page.setBootstrapScript",{source:this._calculateBootstrapScript()})}async closePage(e){this._recordingVideoFile&&await this.stopScreencast(),await this._pageProxySession.sendMayFail("Target.close",{targetId:this._session.sessionId,runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){await this._session.send("Page.setDefaultBackgroundColorOverride",{color:e})}async startScreencast(e){if(this._recordingVideoFile)throw new Error("Already recording");this._recordingVideoFile=e.outputFile;try{const{screencastId:t}=await this._pageProxySession.send("Screencast.start",{file:e.outputFile,width:e.width,height:e.height});this._browserContext._browser._videoStarted(this._browserContext,t,e.outputFile,this.pageOrError())}catch(e){throw this._recordingVideoFile=null,e}}async stopScreencast(){if(!this._recordingVideoFile)throw new Error("No video recording in progress");this._recordingVideoFile=null,await this._pageProxySession.send("Screencast.stop")}async takeScreenshot(e,t,n,s){const o=t||n,a=await this._session.send("Page.snapshotRect",{...o,coordinateSystem:t?"Page":"Viewport"});let l=Buffer.from(a.dataURL.substr("data:image/png;base64,".length),"base64");return"jpeg"===e&&(l=i.encode(r.PNG.sync.read(l),s).data),l}async resetViewport(){o.assert(!1,"Should not be called")}async getContentFrame(e){const t=await this._session.send("DOM.describeNode",{objectId:e._objectId});return t.contentFrameId?this._page._frameManager.frame(t.contentFrameId):null}async getOwnerFrame(e){if(!e._objectId)return null;return(await this._session.send("DOM.describeNode",{objectId:e._objectId})).ownerFrameId||null}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){const t=await this.getContentQuads(e);if(!t||!t.length)return null;let n=1/0,i=-1/0,s=1/0,r=-1/0;for(const e of t)for(const t of e)n=Math.min(n,t.x),i=Math.max(i,t.x),s=Math.min(s,t.y),r=Math.max(r,t.y);return{x:n,y:s,width:i-n,height:r-s}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";throw e})}rafCountForStablePosition(){return"win32"===process.platform?5:1}async getContentQuads(e){const t=await this._session.sendMayFail("DOM.getContentQuads",{objectId:e._objectId});return t?t.quads.map(e=>[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},{x:e[6],y:e[7]}]):null}async setInputFiles(e,t){const n=e._objectId,i=t.map(e=>({name:e.name,type:e.mimeType,data:e.buffer}));await this._session.send("DOM.setInputFiles",{objectId:n,files:i})}async adoptElementHandle(e,t){const n=await this._session.sendMayFail("DOM.resolveNode",{objectId:e._objectId,executionContextId:t._delegate._contextId});if(!n||"null"===n.object.subtype)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.object)}async getAccessibilityTree(e){return u.getAccessibilityTree(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=await this._page.selectors._queryAll(t,"iframe",void 0),i=await Promise.all(n.map(async e=>{const t=await e.contentFrame().catch(e=>null);return{handle:e,frame:t}})),s=i.find(t=>t.frame===e);if(i.map(e=>e===s?Promise.resolve():e.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle}_onRequestWillBeSent(e,t){if(t.request.url.startsWith("data:"))return;let n=null;if(t.redirectResponse){const e=this._requestIdToRequest.get(t.requestId);e&&(this._handleRequestRedirect(e,t.redirectResponse,t.timestamp),n=e.request)}const i=this._page._frameManager.frame(t.frameId),s="Document"===t.type?t.loaderId:void 0,r=this._page._needsRequestInterception()&&!n,o=new _.WKInterceptableRequest(e,r,i,t,n,s);this._requestIdToRequest.set(t.requestId,o),this._page._frameManager.requestStarted(o.request)}_handleRequestRedirect(e,t,n){const i=e.createResponse(t);i._requestFinished(t.timing?c.helper.secondsToRoundishMillis(n-e._timestamp):-1,"Response body is unavailable for redirect responses"),this._requestIdToRequest.delete(e._requestId),this._page._frameManager.requestReceivedResponse(i),this._page._frameManager.requestFinished(e.request)}_onRequestIntercepted(e){const t=this._requestIdToRequest.get(e.requestId);t&&(t._allowInterception?t._interceptedCallback():this._session.sendMayFail("Network.interceptWithRequest",{requestId:t._requestId}))}_onResponseReceived(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.createResponse(e.response);e.response.requestHeaders&&Object.keys(e.response.requestHeaders).length&&t.request.updateWithRawHeaders(o.headersObjectToArray(e.response.requestHeaders)),this._page._frameManager.requestReceivedResponse(n),204===n.status()&&this._onLoadingFailed({requestId:e.requestId,errorText:"Aborted: 204 No Content",timestamp:e.timestamp})}_onLoadingFinished(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n&&n._requestFinished(c.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),this._page._frameManager.requestFinished(t.request)}_onLoadingFailed(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n&&n._requestFinished(c.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,e.errorText.includes("cancelled"))}async _grantPermissions(e,t){const n=new Map([["geolocation","geolocation"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._pageProxySession.send("Emulation.grantPermissions",{origin:e,permissions:i})}async _clearPermissions(){await this._pageProxySession.send("Emulation.resetPermissions",{})}}t.WKPage=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const n=t?t._objectId:void 0,{axNode:i}=await e.send("Page.accessibilitySnapshot",{objectId:n}),s=new r(i);return{tree:s,needle:t?s._findNeedle():null}};const i=new Map(Object.entries({TextField:"textbox"})),s=new Map(Object.entries({WebArea:"HTML content",Summary:"summary",DescriptionList:"description list",ImageMap:"image map",ListMarker:"list marker",Video:"video playback",Mark:"highlighted",contentinfo:"content information",Details:"details",DescriptionListDetail:"description",DescriptionListTerm:"term",alertdialog:"web alert dialog",dialog:"web dialog",status:"application status",tabpanel:"tab panel",application:"web application"}));class r{constructor(e){this._payload=e,this._children=[];for(const e of this._payload.children||[])this._children.push(new r(e))}children(){return this._children}_findNeedle(){if(this._payload.found)return this;for(const e of this._children){const t=e._findNeedle();if(t)return t}return null}isControl(){switch(this._payload.role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"TextField":case"tree":return!0;default:return!1}}_isTextControl(){switch(this._payload.role){case"combobox":case"searchfield":case"textbox":case"TextField":return!0}return!1}_name(){return"text"===this._payload.role?this._payload.value||"":this._payload.name||""}isInteresting(e){const{role:t,focusable:n}=this._payload,i=this._name();return"ScrollArea"!==t&&("WebArea"===t||(!(!n&&"MenuListOption"!==t)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!i))))}_hasRendundantTextChild(){if(1!==this._children.length)return!1;const e=this._children[0];return"text"===e._payload.role&&this._payload.name===e._payload.value}isLeafNode(){return!this._children.length||(!!this._isTextControl()||!!this._hasRendundantTextChild())}serialize(){const e={role:i.get(this._payload.role)||this._payload.role,name:this._name()};if("description"in this._payload&&this._payload.description!==e.name&&(e.description=this._payload.description),"roledescription"in this._payload){const t=this._payload.roledescription;t!==this._payload.role&&s.get(this._payload.role)!==t&&(e.roledescription=t)}"value"in this._payload&&"text"!==this._payload.role&&("string"==typeof this._payload.value?e.valueString=this._payload.value:"number"==typeof this._payload.value&&(e.valueNumber=this._payload.value)),"checked"in this._payload&&(e.checked="true"===this._payload.checked?"checked":"false"===this._payload.checked?"unchecked":"mixed"),"pressed"in this._payload&&(e.pressed="true"===this._payload.pressed?"pressed":"false"===this._payload.pressed?"released":"mixed");const t=["keyshortcuts","valuetext"];for(const n of t)n in this._payload&&(e[n]=this._payload[n]);const n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const t of n){if("focused"===t&&("WebArea"===this._payload.role||"ScrollArea"===this._payload.role))continue;const n=this._payload[t];n&&(e[t]=n)}const r=["level","valuemax","valuemin"];for(const t of r)t in this._payload&&(e[t]=this._payload[t]);const o=["autocomplete","haspopup","invalid"];for(const t of o){const n=this._payload[t];n&&"false"!==n&&(e[t]=n)}const a=new Set(["ScrollArea","scrollbar","listbox","combobox","menu","tree","separator","slider","tablist","toolbar"]);return this._payload.orientation&&a.has(this._payload.role)&&(e.orientation=this._payload.orientation),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;const i=n(187),s=n(263),r=n(4);function o(e){let t=0;return e.has("Shift")&&(t|=1),e.has("Control")&&(t|=2),e.has("Alt")&&(t|=4),e.has("Meta")&&(t|=8),t}t.RawKeyboardImpl=class{constructor(e){this._pageProxySession=e}setSession(e){this._session=e}async keydown(e,t,n,a,l,c,d,h){const u=[];for(const t of["Shift","Control","Alt","Meta"])e.has(t)&&u.push(t);u.push(t);const p=u.join("+");let f=s.macEditingCommands[p];r.isString(f)&&(f=[f]),await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyDown",modifiers:o(e),windowsVirtualKeyCode:n,code:t,key:l,text:h,unmodifiedText:h,autoRepeat:d,macCommands:f,isKeypad:c===i.keypadLocation})}async keyup(e,t,n,s,r,a){await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:o(e),key:r,windowsVirtualKeyCode:n,code:t,isKeypad:a===i.keypadLocation})}async sendText(e){await this._session.send("Page.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._pageProxySession=e}async move(e,t,n,i,s){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"move",button:n,x:e,y:t,modifiers:o(s)})}async down(e,t,n,i,s,r){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"down",button:n,x:e,y:t,modifiers:o(s),clickCount:r})}async up(e,t,n,i,s,r){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"up",button:n,x:e,y:t,modifiers:o(s),clickCount:r})}};t.RawTouchscreenImpl=class{constructor(e){this._pageProxySession=e}async tap(e,t,n){await this._pageProxySession.send("Input.dispatchTapEvent",{x:e,y:t,modifiers:o(n)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKInterceptableRequest=void 0;const i=n(31),s=n(4),r={aborted:"Cancellation",accessdenied:"AccessControl",addressunreachable:"General",blockedbyclient:"Cancellation",blockedbyresponse:"General",connectionaborted:"General",connectionclosed:"General",connectionfailed:"General",connectionrefused:"General",connectionreset:"General",internetdisconnected:"General",namenotresolved:"General",timedout:"Timeout",failed:"General"};function o(e){return-1e3===e?-1:e<0?0:(1e3*e|0)/1e3}t.WKInterceptableRequest=class{constructor(e,t,n,r,o,a){this._interceptedCallback=()=>{},this._session=e,this._requestId=r.requestId,this._allowInterception=t;const l=r.type?r.type.toLowerCase():o?o.resourceType():"other";let c=null;this._timestamp=r.timestamp,this._wallTime=1e3*r.walltime,r.request.postData&&(c=Buffer.from(r.request.postData,"binary")),this.request=new i.Request(t?this:null,n,o,a,r.request.url,l,r.request.method,c,s.headersObjectToArray(r.request.headers)),this._interceptedPromise=new Promise(e=>this._interceptedCallback=e)}async abort(e){const t=r[e];s.assert(t,"Unknown error code: "+e),await this._interceptedPromise,await this._session.sendMayFail("Network.interceptRequestWithError",{requestId:this._requestId,errorType:t})}async fulfill(e){await this._interceptedPromise;let t=e.isBase64?"application/octet-stream":"text/plain";const n=s.headersArrayToObject(e.headers,!1),r=n["content-type"];r&&(t=r.split(";")[0].trim()),await this._session.sendMayFail("Network.interceptRequestWithResponse",{requestId:this._requestId,status:e.status,statusText:i.STATUS_TEXTS[String(e.status)],mimeType:t,headers:n,base64Encoded:e.isBase64,content:e.body})}async continue(e){await this._interceptedPromise,await this._session.sendMayFail("Network.interceptWithRequest",{requestId:this._requestId,method:e.method,headers:e.headers?s.headersArrayToObject(e.headers,!1):void 0,postData:e.postData?Buffer.from(e.postData).toString("base64"):void 0})}createResponse(e){const t=e.timing,n={startTime:this._wallTime,domainLookupStart:t?o(t.domainLookupStart):-1,domainLookupEnd:t?o(t.domainLookupEnd):-1,connectStart:t?o(t.connectStart):-1,secureConnectionStart:t?o(t.secureConnectionStart):-1,connectEnd:t?o(t.connectEnd):-1,requestStart:t?o(t.requestStart):-1,responseStart:t?o(t.responseStart):-1};return new i.Response(this.request,e.status,e.statusText,s.headersObjectToArray(e.headers),n,async()=>{const e=await this._session.send("Network.getResponseBody",{requestId:this._requestId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKProvisionalPage=void 0;const i=n(16),s=n(4);t.WKProvisionalPage=class{constructor(e,t){this._sessionListeners=[],this._mainFrameId=null,this._session=e,this._wkPage=t;const n=e=>t=>{t.frameId&&(t.frameId=this._wkPage._page._frameManager.mainFrame()._id),e(t)},s=this._wkPage;this._sessionListeners=[i.helper.addEventListener(e,"Network.requestWillBeSent",n(t=>s._onRequestWillBeSent(e,t))),i.helper.addEventListener(e,"Network.requestIntercepted",n(e=>s._onRequestIntercepted(e))),i.helper.addEventListener(e,"Network.responseReceived",n(e=>s._onResponseReceived(e))),i.helper.addEventListener(e,"Network.loadingFinished",n(e=>s._onLoadingFinished(e))),i.helper.addEventListener(e,"Network.loadingFailed",n(e=>s._onLoadingFailed(e)))],this.initializationPromise=this._wkPage._initializeSession(e,!0,({frameTree:e})=>this._handleFrameTree(e))}dispose(){i.helper.removeEventListeners(this._sessionListeners)}commit(){s.assert(this._mainFrameId),this._wkPage._onFrameAttached(this._mainFrameId,null)}_handleFrameTree(e){s.assert(!e.frame.parentId),this._mainFrameId=e.frame.id}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKWorkers=void 0;const i=n(16),s=n(17),r=n(102),o=n(272);t.WKWorkers=class{constructor(e){this._sessionListeners=[],this._workerSessions=new Map,this._page=e}setSession(e){i.helper.removeEventListeners(this._sessionListeners),this.clear(),this._sessionListeners=[i.helper.addEventListener(e,"Worker.workerCreated",t=>{const n=new s.Worker(t.url),i=new r.WKSession(e.connection,t.workerId,"Most likely the worker has been closed.",n=>{e.send("Worker.sendMessageToWorker",{workerId:t.workerId,message:JSON.stringify(n)}).catch(e=>{i.dispatchMessage({id:n.id,error:{message:e.message}})})});this._workerSessions.set(t.workerId,i),n._createExecutionContext(new o.WKExecutionContext(i,void 0)),this._page._addWorker(t.workerId,n),i.on("Console.messageAdded",e=>this._onConsoleMessage(n,e)),Promise.all([i.send("Runtime.enable"),i.send("Console.enable"),e.send("Worker.initialized",{workerId:t.workerId})]).catch(e=>{this._page._removeWorker(t.workerId)})}),i.helper.addEventListener(e,"Worker.dispatchMessageFromWorker",e=>{const t=this._workerSessions.get(e.workerId);t&&t.dispatchMessage(JSON.parse(e.message))}),i.helper.addEventListener(e,"Worker.workerTerminated",e=>{const t=this._workerSessions.get(e.workerId);t&&(t.dispose(),this._workerSessions.delete(e.workerId),this._page._removeWorker(e.workerId))})]}clear(){this._page._clearWorkers(),this._workerSessions.clear()}async initializeSession(e){await e.send("Worker.enable")}async _onConsoleMessage(e,t){const{type:n,level:i,text:s,parameters:r,url:o,line:a,column:l}=t.message;let c=n||"";"log"===n?c=i:"timing"===n&&(c="timeEnd");const d=(r||[]).map(t=>e._existingExecutionContext.createHandle(t)),h={url:o||"",lineNumber:(a||1)-1,columnNumber:(l||1)-1};this._page._addConsoleMessage(c,d,h,d.length?void 0:s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox=void 0;const i=n(8),s=n(0),r=n(2),o=n(491),a=n(192),l=n(128);class c extends l.BrowserType{_connectToTransport(e,t){return o.FFBrowser.connect(e,t)}_rewriteStartupError(e){return e}_amendEnvironment(e,t,n,s){return"linux"===i.platform()?{...e,LD_LIBRARY_PATH:`${r.dirname(n)}:${process.env.LD_LIBRARY_PATH}`}:e}_attemptToGracefullyCloseBrowser(e){const t={method:"Browser.close",params:{},id:a.kBrowserCloseMessageId};e.send(t)}_defaultArgs(e,t,n){const{args:i=[],devtools:o,headless:a}=e;o&&console.warn("devtools parameter is not supported as a launch argument in Firefox. You can launch the devtools window manually.");if(i.find(e=>e.startsWith("-profile")||e.startsWith("--profile")))throw new Error("Pass userDataDir parameter instead of specifying -profile argument");if(i.find(e=>e.startsWith("-juggler")))throw new Error("Use the port parameter instead of -juggler argument");const l=t?void 0:e.firefoxUserPrefs;if(l){const e=[];for(const[t,n]of Object.entries(l))e.push(`user_pref(${JSON.stringify(t)}, ${JSON.stringify(n)});`);s.writeFileSync(r.join(n,"user.js"),e.join("\n"))}const c=["-no-remote"];return a?c.push("-headless"):(c.push("-wait-for-browser"),c.push("-foreground")),c.push("-profile",n),c.push("-juggler-pipe"),c.push(...i),t?c.push("about:blank"):c.push("-silent"),c}}t.Firefox=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFBrowserContext=t.FFBrowser=void 0;const i=n(4),s=n(124),r=n(20),o=n(31),a=n(17),l=n(192),c=n(492);class d extends s.Browser{constructor(e,t){super(t),this._version="",this._connection=e,this._ffPages=new Map,this._contexts=new Map,this._connection.on(l.ConnectionEvents.Disconnected,()=>this._didClose()),this._connection.on("Browser.attachedToTarget",this._onAttachedToTarget.bind(this)),this._connection.on("Browser.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._connection.on("Browser.downloadCreated",this._onDownloadCreated.bind(this)),this._connection.on("Browser.downloadFinished",this._onDownloadFinished.bind(this)),this._connection.on("Browser.screencastFinished",this._onScreencastFinished.bind(this))}static async connect(e,t){const n=new l.FFConnection(e),i=new d(n,t),s=[n.send("Browser.enable",{attachToDefaultContext:!!t.persistent}),i._initVersion()];return t.persistent&&(i._defaultContext=new h(i,void 0,t.persistent),s.push(i._defaultContext._initialize())),t.proxy&&s.push(i._connection.send("Browser.setBrowserProxy",u(t.proxy))),await Promise.all(s),i}async _initVersion(){const e=await this._connection.send("Browser.getInfo");this._version=e.version.substring(e.version.indexOf("/")+1)}isConnected(){return!this._connection._closed}async newContext(e={}){if(r.validateBrowserContextOptions(e,this._options),e.isMobile)throw new Error("options.isMobile is not supported in Firefox");const{browserContextId:t}=await this._connection.send("Browser.createBrowserContext",{removeOnDetach:!0}),n=new h(this,t,e);return await n._initialize(),this._contexts.set(t,n),n}contexts(){return Array.from(this._contexts.values())}version(){return this._version}_onDetachedFromTarget(e){const t=this._ffPages.get(e.targetId);this._ffPages.delete(e.targetId),t.didClose()}_onAttachedToTarget(e){const{targetId:t,browserContextId:n,openerId:s,type:o}=e.targetInfo;i.assert("page"===o);const l=n?this._contexts.get(n):this._defaultContext;i.assert(l,`Unknown context id:${n}, _defaultContext: ${this._defaultContext}`);const d=this._connection.createSession(e.sessionId,o),h=s?this._ffPages.get(s):null,u=new c.FFPage(d,l,h);this._ffPages.set(t,u),u.pageOrError().then(async e=>{const t=u._page;if(e instanceof Error){if(l.isClosingOrClosed())return;t._setIsError()}if(l.emit(r.BrowserContext.Events.Page,t),!h)return;const n=await h.pageOrError();n instanceof a.Page&&!n.isClosed()&&n.emit(a.Page.Events.Popup,t)})}_onDownloadCreated(e){const t=this._ffPages.get(e.pageTargetId);if(i.assert(t),!t)return;let n=t._initializedPage;n||(t._pageCallback(new Error("Starting new page download")),t._opener&&(n=t._opener._initializedPage)),n&&this._downloadCreated(n,e.uuid,e.url,e.suggestedFileName)}_onDownloadFinished(e){const t=e.canceled?"canceled":e.error;this._downloadFinished(e.uuid,t)}_onScreencastFinished(e){this._videoFinished(e.screencastId)}}t.FFBrowser=d;class h extends r.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e}async _initialize(){i.assert(!this._ffPages().length);const e=this._browserContextId,t=[super._initialize()];if(this._browser._options.downloadsPath&&t.push(this._browser._connection.send("Browser.setDownloadOptions",{browserContextId:e,downloadOptions:{behavior:this._options.acceptDownloads?"saveToDisk":"cancel",downloadsDir:this._browser._options.downloadsPath}})),this._options.viewport){const n={viewportSize:{width:this._options.viewport.width,height:this._options.viewport.height},deviceScaleFactor:this._options.deviceScaleFactor||1};t.push(this._browser._connection.send("Browser.setDefaultViewport",{browserContextId:e,viewport:n}))}if(this._options.hasTouch&&t.push(this._browser._connection.send("Browser.setTouchOverride",{browserContextId:e,hasTouch:!0})),this._options.userAgent&&t.push(this._browser._connection.send("Browser.setUserAgentOverride",{browserContextId:e,userAgent:this._options.userAgent})),this._options.bypassCSP&&t.push(this._browser._connection.send("Browser.setBypassCSP",{browserContextId:e,bypassCSP:!0})),this._options.ignoreHTTPSErrors&&t.push(this._browser._connection.send("Browser.setIgnoreHTTPSErrors",{browserContextId:e,ignoreHTTPSErrors:!0})),!1===this._options.javaScriptEnabled&&t.push(this._browser._connection.send("Browser.setJavaScriptDisabled",{browserContextId:e,javaScriptDisabled:!0})),this._options.locale&&t.push(this._browser._connection.send("Browser.setLocaleOverride",{browserContextId:e,locale:this._options.locale})),this._options.timezoneId&&t.push(this._browser._connection.send("Browser.setTimezoneOverride",{browserContextId:e,timezoneId:this._options.timezoneId})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),(this._options.extraHTTPHeaders||this._options.locale)&&t.push(this.setExtraHTTPHeaders(this._options.extraHTTPHeaders||[])),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),this._options.colorScheme&&t.push(this._browser._connection.send("Browser.setColorScheme",{browserContextId:e,colorScheme:this._options.colorScheme})),this._options.recordVideo){const e=this._options.recordVideo.size||this._options.viewport||{width:1280,height:720};t.push(this._ensureVideosPath().then(()=>this._browser._connection.send("Browser.setScreencastOptions",{...e,dir:this._options.recordVideo.dir,browserContextId:this._browserContextId})))}this._options.proxy&&t.push(this._browser._connection.send("Browser.setContextProxy",{browserContextId:this._browserContextId,...u(this._options.proxy)})),await Promise.all(t)}_ffPages(){return Array.from(this._browser._ffPages.values()).filter(e=>e._browserContext===this)}pages(){return this._ffPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPage(){r.assertBrowserContextIsNotOwned(this);const{targetId:e}=await this._browser._connection.send("Browser.newPage",{browserContextId:this._browserContextId}).catch(e=>{if(e.message.includes("Failed to override timezone"))throw new Error("Invalid timezone ID: "+this._options.timezoneId);throw e}),t=this._browser._ffPages.get(e),n=await t.pageOrError();if(n instanceof a.Page){if(n.isClosed())throw new Error("Page has been closed.");return n}throw n}async _doCookies(e){const{cookies:t}=await this._browser._connection.send("Browser.getCookies",{browserContextId:this._browserContextId});return o.filterCookies(t.map(e=>{const t={...e};return delete t.size,delete t.session,t}),e)}async addCookies(e){await this._browser._connection.send("Browser.setCookies",{browserContextId:this._browserContextId,cookies:o.rewriteCookies(e)})}async clearCookies(){await this._browser._connection.send("Browser.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){const n=new Map([["geolocation","geo"],["persistent-storage","persistent-storage"],["push","push"],["notifications","desktop-notification"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._browser._connection.send("Browser.grantPermissions",{origin:e,browserContextId:this._browserContextId,permissions:i})}async _doClearPermissions(){await this._browser._connection.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){r.verifyGeolocation(e),this._options.geolocation=e,await this._browser._connection.send("Browser.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:e||null})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;let t=this._options.extraHTTPHeaders;this._options.locale&&(t=o.mergeHeaders([t,o.singleHeader("Accept-Language",this._options.locale)])),await this._browser._connection.send("Browser.setExtraHTTPHeaders",{browserContextId:this._browserContextId,headers:t})}async setOffline(e){this._options.offline=e,await this._browser._connection.send("Browser.setOnlineOverride",{browserContextId:this._browserContextId,override:e?"offline":"online"})}async _doSetHTTPCredentials(e){this._options.httpCredentials=e,await this._browser._connection.send("Browser.setHTTPCredentials",{browserContextId:this._browserContextId,credentials:e||null})}async _doAddInitScript(e){await this._browser._connection.send("Browser.addScriptToEvaluateOnNewDocument",{browserContextId:this._browserContextId,script:e})}async _doExposeBinding(e){await this._browser._connection.send("Browser.addBinding",{browserContextId:this._browserContextId,name:e.name,script:e.source})}async _doUpdateRequestInterception(){await this._browser._connection.send("Browser.setRequestInterception",{browserContextId:this._browserContextId,enabled:!!this._requestInterceptor})}async _doClose(){i.assert(this._browserContextId),await this._browser._connection.send("Browser.removeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}}function u(e){const t=new URL(e.server);let n=parseInt(t.port,10),i="http";return"socks5:"===t.protocol?i="socks":"socks4:"===t.protocol?i="socks4":"https:"===t.protocol&&(i="https"),""===t.port&&("http:"===t.protocol?n=80:"https:"===t.protocol&&(n=443)),{type:i,bypass:e.bypass?e.bypass.split(",").map(e=>e.trim()):[],host:t.hostname,port:n,username:e.username,password:e.password}}t.FFBrowserContext=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFPage=void 0;const i=n(190),s=n(125),r=n(16),o=n(4),a=n(17),l=n(261),c=n(493),d=n(192),h=n(494),u=n(495),p=n(496),f=n(25);function m(e,t){return`${e}---${t}`}t.FFPage=class{constructor(e,t,n){this.cspErrorsAsynchronousForInlineScipts=!0,this._pageCallback=()=>{},this._initializedPage=null,this._workers=new Map,this._session=e,this._opener=n,this.rawKeyboard=new u.RawKeyboardImpl(e),this.rawMouse=new u.RawMouseImpl(e),this.rawTouchscreen=new u.RawTouchscreenImpl(e),this._contextIdToContext=new Map,this._browserContext=t,this._page=new a.Page(this,t),this._networkManager=new p.FFNetworkManager(e,this._page),this._page.on(a.Page.Events.FrameDetached,e=>this._removeContextsForFrame(e)),this._eventListeners=[r.helper.addEventListener(this._session,"Page.eventFired",this._onEventFired.bind(this)),r.helper.addEventListener(this._session,"Page.frameAttached",this._onFrameAttached.bind(this)),r.helper.addEventListener(this._session,"Page.frameDetached",this._onFrameDetached.bind(this)),r.helper.addEventListener(this._session,"Page.navigationAborted",this._onNavigationAborted.bind(this)),r.helper.addEventListener(this._session,"Page.navigationCommitted",this._onNavigationCommitted.bind(this)),r.helper.addEventListener(this._session,"Page.navigationStarted",this._onNavigationStarted.bind(this)),r.helper.addEventListener(this._session,"Page.sameDocumentNavigation",this._onSameDocumentNavigation.bind(this)),r.helper.addEventListener(this._session,"Runtime.executionContextCreated",this._onExecutionContextCreated.bind(this)),r.helper.addEventListener(this._session,"Runtime.executionContextDestroyed",this._onExecutionContextDestroyed.bind(this)),r.helper.addEventListener(this._session,"Page.linkClicked",e=>this._onLinkClicked(e.phase)),r.helper.addEventListener(this._session,"Page.uncaughtError",this._onUncaughtError.bind(this)),r.helper.addEventListener(this._session,"Runtime.console",this._onConsole.bind(this)),r.helper.addEventListener(this._session,"Page.dialogOpened",this._onDialogOpened.bind(this)),r.helper.addEventListener(this._session,"Page.bindingCalled",this._onBindingCalled.bind(this)),r.helper.addEventListener(this._session,"Page.fileChooserOpened",this._onFileChooserOpened.bind(this)),r.helper.addEventListener(this._session,"Page.workerCreated",this._onWorkerCreated.bind(this)),r.helper.addEventListener(this._session,"Page.workerDestroyed",this._onWorkerDestroyed.bind(this)),r.helper.addEventListener(this._session,"Page.dispatchMessageFromWorker",this._onDispatchMessageFromWorker.bind(this)),r.helper.addEventListener(this._session,"Page.crashed",this._onCrashed.bind(this)),r.helper.addEventListener(this._session,"Page.screencastStarted",this._onScreencastStarted.bind(this)),r.helper.addEventListener(this._session,"Page.webSocketCreated",this._onWebSocketCreated.bind(this)),r.helper.addEventListener(this._session,"Page.webSocketClosed",this._onWebSocketClosed.bind(this)),r.helper.addEventListener(this._session,"Page.webSocketFrameReceived",this._onWebSocketFrameReceived.bind(this)),r.helper.addEventListener(this._session,"Page.webSocketFrameSent",this._onWebSocketFrameSent.bind(this))],this._pagePromise=new Promise(e=>this._pageCallback=e),e.once(d.FFSessionEvents.Disconnected,()=>this._page._didDisconnect()),this._session.once("Page.ready",()=>{this._pageCallback(this._page),this._initializedPage=this._page}),this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:"",worldName:"__playwright_utility_world__"}).catch(this._pageCallback)}async pageOrError(){return this._pagePromise}_onWebSocketCreated(e){this._page._frameManager.onWebSocketCreated(m(e.frameId,e.wsid),e.requestURL),this._page._frameManager.onWebSocketRequest(m(e.frameId,e.wsid))}_onWebSocketClosed(e){e.error&&this._page._frameManager.webSocketError(m(e.frameId,e.wsid),e.error),this._page._frameManager.webSocketClosed(m(e.frameId,e.wsid))}_onWebSocketFrameReceived(e){this._page._frameManager.webSocketFrameReceived(m(e.frameId,e.wsid),e.opcode,e.data)}_onWebSocketFrameSent(e){this._page._frameManager.onWebSocketFrameSent(m(e.frameId,e.wsid),e.opcode,e.data)}_onExecutionContextCreated(e){const{executionContextId:t,auxData:n}=e,i=this._page._frameManager.frame(n?n.frameId:null);if(!i)return;const r=new h.FFExecutionContext(this._session,t),o=new s.FrameExecutionContext(r,i);"__playwright_utility_world__"===n.name?i._contextCreated("utility",o):n.name||i._contextCreated("main",o),this._contextIdToContext.set(t,o)}_onExecutionContextDestroyed(e){const{executionContextId:t}=e,n=this._contextIdToContext.get(t);n&&(this._contextIdToContext.delete(t),n.frame._contextDestroyed(n))}_removeContextsForFrame(e){for(const[t,n]of this._contextIdToContext)n.frame===e&&this._contextIdToContext.delete(t)}_onLinkClicked(e){"before"===e?this._page._frameManager.frameWillPotentiallyRequestNavigation():this._page._frameManager.frameDidPotentiallyRequestNavigation()}_onNavigationStarted(e){this._page._frameManager.frameRequestedNavigation(e.frameId,e.navigationId)}_onNavigationAborted(e){this._page._frameManager.frameAbortedNavigation(e.frameId,e.errorText,e.navigationId)}_onNavigationCommitted(e){for(const[t,n]of this._workers)n.frameId===e.frameId&&this._onWorkerDestroyed({workerId:t});this._page._frameManager.frameCommittedNewDocumentNavigation(e.frameId,e.url,e.name||"",e.navigationId||"",!1)}_onSameDocumentNavigation(e){this._page._frameManager.frameCommittedSameDocumentNavigation(e.frameId,e.url)}_onFrameAttached(e){this._page._frameManager.frameAttached(e.frameId,e.parentFrameId)}_onFrameDetached(e){this._page._frameManager.frameDetached(e.frameId)}_onEventFired(e){const{frameId:t,name:n}=e;"load"===n&&this._page._frameManager.frameLifecycleEvent(t,"load"),"DOMContentLoaded"===n&&this._page._frameManager.frameLifecycleEvent(t,"domcontentloaded")}_onUncaughtError(e){const t=e.message.startsWith("Error: ")?e.message.substring(7):e.message,n=new Error(t);n.stack=e.stack,this._page.emit(a.Page.Events.PageError,n)}_onConsole(e){const{type:t,args:n,executionContextId:i,location:s}=e,r=this._contextIdToContext.get(i);this._page._addConsoleMessage(t,n.map(e=>r.createHandle(e)),s)}_onDialogOpened(e){this._page.emit(a.Page.Events.Dialog,new i.Dialog(e.type,e.message,async(t,n)=>{await this._session.sendMayFail("Page.handleDialog",{dialogId:e.dialogId,accept:t,promptText:n})},e.defaultValue))}async _onBindingCalled(e){const t=this._contextIdToContext.get(e.executionContextId);await this.pageOrError()instanceof Error||this._page._onBindingCalled(e.payload,t)}async _onFileChooserOpened(e){const{executionContextId:t,element:n}=e,i=this._contextIdToContext.get(t).createHandle(n).asElement();this._page._onFileChooserOpened(i)}async _onWorkerCreated(e){const t=e.workerId,n=new a.Worker(e.url),i=new d.FFSession(this._session._connection,"worker",t,n=>{this._session.send("Page.sendMessageToWorker",{frameId:e.frameId,workerId:t,message:JSON.stringify(n)}).catch(e=>{i.dispatchMessage({id:n.id,method:"",params:{},error:{message:e.message,data:void 0}})})});this._workers.set(t,{session:i,frameId:e.frameId}),this._page._addWorker(t,n),i.once("Runtime.executionContextCreated",e=>{n._createExecutionContext(new h.FFExecutionContext(i,e.executionContextId))}),i.on("Runtime.console",e=>{const{type:t,args:i,location:s}=e,r=n._existingExecutionContext;this._page._addConsoleMessage(t,i.map(e=>r.createHandle(e)),s)})}async _onWorkerDestroyed(e){const t=e.workerId,n=this._workers.get(t);n&&(n.session.dispose(),this._workers.delete(t),this._page._removeWorker(t))}async _onDispatchMessageFromWorker(e){const t=this._workers.get(e.workerId);t&&t.session.dispatchMessage(JSON.parse(e.message))}async _onCrashed(e){this._session.markAsCrashed(),this._page._didCrash()}_onScreencastStarted(e){this._browserContext._browser._videoStarted(this._browserContext,e.screencastId,e.file,this.pageOrError())}async exposeBinding(e){await this._session.send("Page.addBinding",{name:e.name,script:e.source})}didClose(){this._session.dispose(),r.helper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._page._didClose()}async navigateFrame(e,t,n){return{newDocumentId:(await this._session.send("Page.navigate",{url:t,referer:n,frameId:e._id})).navigationId||void 0}}async updateExtraHTTPHeaders(){await this._session.send("Network.setExtraHTTPHeaders",{headers:this._page._state.extraHTTPHeaders||[]})}async setViewportSize(e){o.assert(this._page._state.viewportSize===e),await this._session.send("Page.setViewportSize",{viewportSize:{width:e.width,height:e.height}})}async bringToFront(){await this._session.send("Page.bringToFront",{})}async updateEmulateMedia(){const e=this._page._state.colorScheme||this._browserContext._options.colorScheme||"light";await this._session.send("Page.setEmulatedMedia",{type:null===this._page._state.mediaType?"":this._page._state.mediaType,colorScheme:e})}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof a.Page&&!e.isClosed()?e:null}async reload(){await this._session.send("Page.reload",{frameId:this._page.mainFrame()._id})}async goBack(){const{success:e}=await this._session.send("Page.goBack",{frameId:this._page.mainFrame()._id});return e}async goForward(){const{success:e}=await this._session.send("Page.goForward",{frameId:this._page.mainFrame()._id});return e}async evaluateOnNewDocument(e){await this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:e})}async closePage(e){await this._session.send("Page.close",{runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){if(e)throw new Error("Not implemented")}async startScreencast(e){this._session.send("Page.startVideoRecording",{file:e.outputFile,width:e.width,height:e.height})}async stopScreencast(){await this._session.send("Page.stopVideoRecording")}async takeScreenshot(e,t,n,i){if(!t){const e=await this._page.mainFrame()._utilityContext(),i=await e.evaluateInternal(()=>({x:window.scrollX,y:window.scrollY}));t={x:n.x+i.x,y:n.y+i.y,width:n.width,height:n.height}}const{data:s}=await this._session.send("Page.screenshot",{mimeType:"image/"+e,clip:t}).catch(e=>{throw e instanceof Error&&e.message.includes("document.documentElement is null")&&f.rewriteErrorMessage(e,l.kScreenshotDuringNavigationError),e});return Buffer.from(s,"base64")}async resetViewport(){o.assert(!1,"Should not be called")}async getContentFrame(e){const{contentFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t?this._page._frameManager.frame(t):null}async getOwnerFrame(e){const{ownerFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t||null}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){const t=await this.getContentQuads(e);if(!t||!t.length)return null;let n=1/0,i=-1/0,s=1/0,r=-1/0;for(const e of t)for(const t of e)n=Math.min(n,t.x),i=Math.max(i,t.x),s=Math.min(s,t.y),r=Math.max(r,t.y);return{x:n,y:s,width:i-n,height:r-s}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("Page.scrollIntoViewIfNeeded",{frameId:e._context.frame._id,objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";throw e})}rafCountForStablePosition(){return 1}async getContentQuads(e){const t=await this._session.sendMayFail("Page.getContentQuads",{frameId:e._context.frame._id,objectId:e._objectId});return t?t.quads.map(e=>[e.p1,e.p2,e.p3,e.p4]):null}async setInputFiles(e,t){await e._evaluateInUtility(([e,t,n])=>e.setInputFiles(t,n),t)}async adoptElementHandle(e,t){const n=await this._session.send("Page.adoptNode",{frameId:e._context.frame._id,objectId:e._objectId,executionContextId:t._delegate._executionContextId});if(!n.remoteObject)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.remoteObject)}async getAccessibilityTree(e){return c.getAccessibilityTree(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=await this._page.selectors._queryAll(t,"iframe",void 0),i=await Promise.all(n.map(async e=>{const t=await e.contentFrame().catch(e=>null);return{handle:e,frame:t}})),s=i.find(t=>t.frame===e);if(i.map(e=>e===s?Promise.resolve():e.handle.dispose()),!s)throw new Error("Frame has been detached.");return s.handle}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const n=t?t._objectId:void 0,{tree:i}=await e.send("Accessibility.getFullAXTree",{objectId:n}),r=new s(i);return{tree:r,needle:t?r._findNeedle():null}};const i=new Map(Object.entries({pushbutton:"button",checkbutton:"checkbox",editcombobox:"combobox","content deletion":"deletion",footnote:"doc-footnote","non-native document":"document",grouping:"group",graphic:"img","content insertion":"insertion",animation:"marquee","flat equation":"math",menupopup:"menu","check menu item":"menuitemcheckbox","radio menu item":"menuitemradio","listbox option":"option",radiobutton:"radio",statusbar:"status",pagetab:"tab",pagetablist:"tablist",propertypage:"tabpanel",entry:"textbox",outline:"tree","tree table":"treegrid",outlineitem:"treeitem"}));class s{constructor(e){this._payload=e,this._children=(e.children||[]).map(e=>new s(e)),this._editable=!!e.editable,this._richlyEditable=this._editable&&"textarea"!==e.tag&&"input"!==e.tag,this._focusable=!!e.focusable,this._expanded=!!e.expanded,this._name=this._payload.name,this._role=this._payload.role,this._cachedHasFocusableChild}_isPlainTextField(){return!this._richlyEditable&&(!!this._editable||"entry"===this._role)}_isTextOnlyObject(){const e=this._role;return"text leaf"===e||"text"===e||"statictext"===e}_hasFocusableChild(){if(void 0===this._cachedHasFocusableChild){this._cachedHasFocusableChild=!1;for(const e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findNeedle(){if(this._payload.foundObject)return this;for(const e of this._children){const t=e._findNeedle();if(t)return t}return null}isLeafNode(){if(!this._children.length)return!0;if(this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"graphic":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!this._hasFocusableChild()&&(!(!this._focusable||"document"===this._role||!this._name)||!("heading"!==this._role||!this._name))}isControl(){switch(this._role){case"checkbutton":case"check menu item":case"check rich option":case"combobox":case"combobox option":case"color chooser":case"listbox":case"listbox option":case"listbox rich option":case"popup menu":case"menupopup":case"menuitem":case"menubar":case"button":case"pushbutton":case"radiobutton":case"radio menuitem":case"scrollbar":case"slider":case"spinbutton":case"switch":case"pagetab":case"entry":case"tree table":return!0;default:return!1}}isInteresting(e){return!(!this._focusable&&!this._richlyEditable)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!this._name.trim()))}serialize(){const e={role:i.get(this._role)||this._role,name:this._name||""},t=["name","description","roledescription","valuetext","keyshortcuts"];for(const n of t)n in this._payload&&(e[n]=this._payload[n]);const n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const t of n){if("document"===this._role&&"focused"===t)continue;const n=this._payload[t];n&&(e[t]=n)}const s=["level"];for(const t of s)t in this._payload&&(e[t]=this._payload[t]);const r=["autocomplete","haspopup","invalid","orientation"];for(const t of r){const n=this._payload[t];n&&"false"!==n&&(e[t]=n)}const o=e;return o.valueString=this._payload.value,"checked"in this._payload&&(o.checked=!0===this._payload.checked?"checked":"mixed"===this._payload.checked?"mixed":"unchecked"),"pressed"in this._payload&&(o.pressed=!0===this._payload.pressed?"pressed":"released"),o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFExecutionContext=void 0;const i=n(56),s=n(70),r=n(25),o=n(126);function a(e){if(e)throw e.value?new Error("Evaluation failed: "+JSON.stringify(e.value)):new Error("Evaluation failed: "+e.text+"\n"+e.stack)}function l(e){if(e.message.includes("cyclic object value")||e.message.includes("Object is not serializable"))return{result:{type:"undefined",value:void 0}};if(e.message.includes("Failed to find execution context with id")||e.message.includes("Execution context was destroyed!"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&r.rewriteErrorMessage(e,e.message+" Are you passing a nested JSHandle?"),e}t.FFExecutionContext=class{constructor(e,t){this._session=e,this._executionContextId=t}async rawEvaluate(e){const t=await this._session.send("Runtime.evaluate",{expression:s.ensureSourceUrl(e),returnByValue:!1,executionContextId:this._executionContextId}).catch(l);return a(t.exceptionDetails),t.result.objectId}async evaluateWithArguments(e,t,n,i,s){const r=await this._session.send("Runtime.callFunction",{functionDeclaration:e,args:[{objectId:n._objectId,value:void 0},...i.map(e=>({value:e})),...s.map(e=>({objectId:e,value:void 0}))],returnByValue:t,executionContextId:this._executionContextId}).catch(l);return a(r.exceptionDetails),t?o.parseEvaluationResultValue(r.result.value):n._context.createHandle(r.result)}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._session.send("Runtime.getObjectProperties",{executionContextId:this._executionContextId,objectId:t}),i=new Map;for(const t of n.properties)i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){return new i.JSHandle(e,t.subtype||t.type||"",t.objectId,function(e){const t=e.value,n=e.unserializableValue;return n?i.parseUnserializableValue(n):t}(t))}async releaseHandle(e){e._objectId&&await this._session.send("Runtime.disposeObject",{executionContextId:this._executionContextId,objectId:e._objectId}).catch(e=>{})}}},function(e,t,n){"use strict";function i(e){let t=0;return e.has("Alt")&&(t|=1),e.has("Control")&&(t|=2),e.has("Shift")&&(t|=4),e.has("Meta")&&(t|=8),t}function s(e){return"left"===e?0:"middle"===e?1:"right"===e?2:0}function r(e){let t=0;return e.has("left")&&(t|=1),e.has("right")&&(t|=2),e.has("middle")&&(t|=4),t}Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;t.RawKeyboardImpl=class{constructor(e){this._client=e}async keydown(e,t,n,i,s,r,o,a){"MetaLeft"===t&&(t="OSLeft"),"MetaRight"===t&&(t="OSRight"),"\r"===a&&(a=""),await this._client.send("Page.dispatchKeyEvent",{type:"keydown",keyCode:i,code:t,key:s,repeat:o,location:r,text:a})}async keyup(e,t,n,i,s,r){"MetaLeft"===t&&(t="OSLeft"),"MetaRight"===t&&(t="OSRight"),await this._client.send("Page.dispatchKeyEvent",{type:"keyup",key:s,keyCode:i,code:t,location:r,repeat:!1})}async sendText(e){await this._client.send("Page.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._client=e}async move(e,t,n,s,o){await this._client.send("Page.dispatchMouseEvent",{type:"mousemove",button:0,buttons:r(s),x:e,y:t,modifiers:i(o)})}async down(e,t,n,o,a,l){await this._client.send("Page.dispatchMouseEvent",{type:"mousedown",button:s(n),buttons:r(o),x:e,y:t,modifiers:i(a),clickCount:l})}async up(e,t,n,o,a,l){await this._client.send("Page.dispatchMouseEvent",{type:"mouseup",button:s(n),buttons:r(o),x:e,y:t,modifiers:i(a),clickCount:l})}};t.RawTouchscreenImpl=class{constructor(e){this._client=e}async tap(e,t,n){await this._client.send("Page.dispatchTapEvent",{x:e,y:t,modifiers:i(n)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFNetworkManager=void 0;const i=n(16),s=n(31);t.FFNetworkManager=class{constructor(e,t){this._startTime=0,this._session=e,this._requests=new Map,this._page=t,this._eventListeners=[i.helper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this)),i.helper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),i.helper.addEventListener(e,"Network.requestFinished",this._onRequestFinished.bind(this)),i.helper.addEventListener(e,"Network.requestFailed",this._onRequestFailed.bind(this))]}dispose(){i.helper.removeEventListeners(this._eventListeners)}async setRequestInterception(e){await this._session.send("Network.setRequestInterception",{enabled:e})}_onRequestWillBeSent(e){const t=e.redirectedFrom&&this._requests.get(e.redirectedFrom)||null,n=t?t.request.frame():e.frameId?this._page._frameManager.frame(e.frameId):null;if(!n)return;t&&this._requests.delete(t._id);const i=new a(this._session,n,t,e);this._requests.set(i._id,i),this._page._frameManager.requestStarted(i.request)}_onResponseReceived(e){const t=this._requests.get(e.requestId);if(!t)return;this._startTime=e.timing.startTime;const n={startTime:this._startTime/1e3,domainLookupStart:this._relativeTiming(e.timing.domainLookupStart),domainLookupEnd:this._relativeTiming(e.timing.domainLookupEnd),connectStart:this._relativeTiming(e.timing.connectStart),secureConnectionStart:this._relativeTiming(e.timing.secureConnectionStart),connectEnd:this._relativeTiming(e.timing.connectEnd),requestStart:this._relativeTiming(e.timing.requestStart),responseStart:this._relativeTiming(e.timing.responseStart)},i=new s.Response(t.request,e.status,e.statusText,e.headers,n,async()=>{const e=await this._session.send("Network.getResponseBody",{requestId:t._id});if(e.evicted)throw new Error(`Response body for ${t.request.method()} ${t.request.url()} was evicted!`);return Buffer.from(e.base64body,"base64")});this._page._frameManager.requestReceivedResponse(i)}_onRequestFinished(e){const t=this._requests.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n.status()>=300&&n.status()<=399?n._requestFinished(this._relativeTiming(e.responseEndTime),"Response body is unavailable for redirect responses"):(this._requests.delete(t._id),n._requestFinished(this._relativeTiming(e.responseEndTime))),this._page._frameManager.requestFinished(t.request)}_onRequestFailed(e){const t=this._requests.get(e.requestId);if(!t)return;this._requests.delete(t._id);const n=t.request._existingResponse();n&&n._requestFinished(-1),t.request._setFailureText(e.errorCode),this._page._frameManager.requestFailed(t.request,"NS_BINDING_ABORTED"===e.errorCode)}_relativeTiming(e){return e?(e-this._startTime)/1e3:-1}};const r={TYPE_INVALID:"other",TYPE_OTHER:"other",TYPE_SCRIPT:"script",TYPE_IMAGE:"image",TYPE_STYLESHEET:"stylesheet",TYPE_OBJECT:"other",TYPE_DOCUMENT:"document",TYPE_SUBDOCUMENT:"document",TYPE_REFRESH:"document",TYPE_XBL:"other",TYPE_PING:"other",TYPE_XMLHTTPREQUEST:"xhr",TYPE_OBJECT_SUBREQUEST:"other",TYPE_DTD:"other",TYPE_FONT:"font",TYPE_MEDIA:"media",TYPE_WEBSOCKET:"websocket",TYPE_CSP_REPORT:"other",TYPE_XSLT:"other",TYPE_BEACON:"other",TYPE_FETCH:"fetch",TYPE_IMAGESET:"images",TYPE_WEB_MANIFEST:"manifest"},o={TYPE_INTERNAL_EVENTSOURCE:"eventsource"};class a{constructor(e,t,n,i){this._id=i.requestId,this._session=e;let a=null;i.postData&&(a=Buffer.from(i.postData,"base64")),this.request=new s.Request(i.isIntercepted?this:null,t,n?n.request:null,i.navigationId,i.url,o[i.internalCause]||r[i.cause]||"other",i.method,a,i.headers)}async continue(e){await this._session.sendMayFail("Network.resumeInterceptedRequest",{requestId:this._id,method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData).toString("base64"):void 0})}async fulfill(e){const t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._session.sendMayFail("Network.fulfillInterceptedRequest",{requestId:this._id,status:e.status,statusText:s.STATUS_TEXTS[String(e.status)]||"",headers:e.headers,base64body:t})}async abort(e){await this._session.sendMayFail("Network.abortInterceptedRequest",{requestId:this._id,errorCode:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupInProcess=void 0;const i=n(12),s=n(498),r=n(279),o=n(519),a=n(520),l=n(522),c=n(525);t.setupInProcess=function(e){a.installDebugController(),l.installTracer(),c.installHarTracer();const t=new r.Connection,n=new i.DispatcherConnection;n.onmessage=e=>t.dispatch(e),t.onmessage=e=>n.dispatch(e),new s.PlaywrightDispatcher(n.rootDispatcher(),e);const d=t.getObjectWithKnownName("Playwright");return d.chromium._serverLauncher=new o.BrowserServerLauncherImpl(e.chromium),d.firefox._serverLauncher=new o.BrowserServerLauncherImpl(e.firefox),d.webkit._serverLauncher=new o.BrowserServerLauncherImpl(e.webkit),n.onmessage=e=>setImmediate(()=>t.dispatch(e)),t.onmessage=e=>setImmediate(()=>n.dispatch(e)),d._toImpl=e=>n._dispatchers.get(e._guid)._object,d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaywrightDispatcher=void 0;const i=n(499),s=n(12),r=n(504),o=n(507),a=n(278);class l extends s.Dispatcher{constructor(e,t){const n=t.electron,s=Object.entries(o.DeviceDescriptors).map(([e,t])=>({name:e,descriptor:t}));super(e,t,"Playwright",{chromium:new i.BrowserTypeDispatcher(e,t.chromium),clank:new i.BrowserTypeDispatcher(e,t.clank),firefox:new i.BrowserTypeDispatcher(e,t.firefox),webkit:new i.BrowserTypeDispatcher(e,t.webkit),electron:n?new r.ElectronDispatcher(e,n):void 0,deviceDescriptors:s,selectors:new a.SelectorsDispatcher(e,t.selectors)},!1,"Playwright")}}t.PlaywrightDispatcher=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTypeDispatcher=void 0;const i=n(274),s=n(12),r=n(194);class o extends s.Dispatcher{constructor(e,t){super(e,t,"BrowserType",{executablePath:t.executablePath(),name:t.name()},!0)}async launch(e){const t=await this._object.launch(e);return{browser:new i.BrowserDispatcher(this._scope,t)}}async launchPersistentContext(e){const t=await this._object.launchPersistentContext(e.userDataDir,e);return{context:new r.BrowserContextDispatcher(this._scope,t)}}}t.BrowserTypeDispatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCallDispatcher=t.WorkerDispatcher=t.PageDispatcher=void 0;const i=n(20),s=n(17),r=n(12),o=n(57),a=n(501),l=n(502),c=n(503),d=n(276),h=n(195),u=n(131),p=n(103);class f extends r.Dispatcher{constructor(e,t){super(e,t,"Page",{mainFrame:d.FrameDispatcher.from(e,t.mainFrame()),videoRelativePath:t._video?t._video._relativePath:void 0,viewportSize:t.viewportSize()||void 0,isClosed:t.isClosed()},!0),this._page=t,t.on(s.Page.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(s.Page.Events.Console,e=>this._dispatchEvent("console",{message:new a.ConsoleMessageDispatcher(this._scope,e)})),t.on(s.Page.Events.Crash,()=>this._dispatchEvent("crash")),t.on(s.Page.Events.DOMContentLoaded,()=>this._dispatchEvent("domcontentloaded")),t.on(s.Page.Events.Dialog,e=>this._dispatchEvent("dialog",{dialog:new l.DialogDispatcher(this._scope,e)})),t.on(s.Page.Events.Download,t=>this._dispatchEvent("download",{download:new c.DownloadDispatcher(e,t)})),this._page.on(s.Page.Events.FileChooser,e=>this._dispatchEvent("fileChooser",{element:new p.ElementHandleDispatcher(this._scope,e.element()),isMultiple:e.isMultiple()})),t.on(s.Page.Events.FrameAttached,e=>this._onFrameAttached(e)),t.on(s.Page.Events.FrameDetached,e=>this._onFrameDetached(e)),t.on(s.Page.Events.Load,()=>this._dispatchEvent("load")),t.on(s.Page.Events.PageError,e=>this._dispatchEvent("pageError",{error:o.serializeError(e)})),t.on(s.Page.Events.Popup,e=>this._dispatchEvent("popup",{page:r.lookupDispatcher(e)})),t.on(s.Page.Events.Request,e=>this._dispatchEvent("request",{request:h.RequestDispatcher.from(this._scope,e)})),t.on(s.Page.Events.RequestFailed,e=>this._dispatchEvent("requestFailed",{request:h.RequestDispatcher.from(this._scope,e),failureText:e._failureText,responseEndTiming:e._responseEndTiming})),t.on(s.Page.Events.RequestFinished,t=>this._dispatchEvent("requestFinished",{request:h.RequestDispatcher.from(e,t),responseEndTiming:t._responseEndTiming})),t.on(s.Page.Events.Response,e=>this._dispatchEvent("response",{response:new h.ResponseDispatcher(this._scope,e)})),t.on(s.Page.Events.VideoStarted,e=>this._dispatchEvent("video",{relativePath:e._relativePath})),t.on(s.Page.Events.WebSocket,e=>this._dispatchEvent("webSocket",{webSocket:new h.WebSocketDispatcher(this._scope,e)})),t.on(s.Page.Events.Worker,e=>this._dispatchEvent("worker",{worker:new m(this._scope,e)}))}async setDefaultNavigationTimeoutNoReply(e){this._page.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e){this._page.setDefaultTimeout(e.timeout)}async opener(){return{page:r.lookupNullableDispatcher(await this._page.opener())}}async exposeBinding(e){await this._page.exposeBinding(e.name,!!e.needsHandle,(t,...n)=>{const i=new _(this._scope,e.name,!!e.needsHandle,t,n);return this._dispatchEvent("bindingCall",{binding:i}),i.promise()})}async setExtraHTTPHeaders(e){await this._page.setExtraHTTPHeaders(e.headers)}async reload(e,t){return await i.runAction(async t=>({response:r.lookupNullableDispatcher(await this._page.reload(t,e))}),{...t,type:"reload",page:this._page})}async goBack(e,t){return await i.runAction(async t=>({response:r.lookupNullableDispatcher(await this._page.goBack(t,e))}),{...t,type:"goBack",page:this._page})}async goForward(e,t){return await i.runAction(async t=>({response:r.lookupNullableDispatcher(await this._page.goForward(t,e))}),{...t,type:"goForward",page:this._page})}async emulateMedia(e){await this._page.emulateMedia({media:"null"===e.media?null:e.media,colorScheme:"null"===e.colorScheme?null:e.colorScheme})}async setViewportSize(e){await this._page.setViewportSize(e.viewportSize)}async addInitScript(e){await this._page._addInitScriptExpression(e.source)}async setNetworkInterceptionEnabled(e){e.enabled?this._page._setRequestInterceptor((e,t)=>{this._dispatchEvent("route",{route:new h.RouteDispatcher(this._scope,e),request:h.RequestDispatcher.from(this._scope,t)})}):await this._page._setRequestInterceptor(void 0)}async screenshot(e){return{binary:(await this._page.screenshot(e)).toString("base64")}}async close(e){await this._page.close(e)}async setFileChooserInterceptedNoReply(e){await this._page._setFileChooserIntercepted(e.intercepted)}async setWebSocketFramesReportingEnabledNoReply(e){this._page._setWebSocketFramesReportingEnabled(e.enabled)}async keyboardDown(e){await this._page.keyboard.down(e.key)}async keyboardUp(e){await this._page.keyboard.up(e.key)}async keyboardInsertText(e){await this._page.keyboard.insertText(e.text)}async keyboardType(e){await this._page.keyboard.type(e.text,e)}async keyboardPress(e){await this._page.keyboard.press(e.key,e)}async mouseMove(e){await this._page.mouse.move(e.x,e.y,e)}async mouseDown(e){await this._page.mouse.down(e)}async mouseUp(e){await this._page.mouse.up(e)}async mouseClick(e){await this._page.mouse.click(e.x,e.y,e)}async touchscreenTap(e){await this._page.touchscreen.tap(e.x,e.y)}async accessibilitySnapshot(e){return{rootAXNode:await this._page.accessibility.snapshot({interestingOnly:e.interestingOnly,root:e.root?e.root._elementHandle:void 0})||void 0}}async pdf(e){if(!this._page.pdf)throw new Error("PDF generation is only supported for Headless Chromium");return{pdf:(await this._page.pdf(e)).toString("base64")}}async bringToFront(){await this._page.bringToFront()}async crStartJSCoverage(e){const t=this._page.coverage;await t.startJSCoverage(e)}async crStopJSCoverage(){const e=this._page.coverage;return{entries:await e.stopJSCoverage()}}async crStartCSSCoverage(e){const t=this._page.coverage;await t.startCSSCoverage(e)}async crStopCSSCoverage(){const e=this._page.coverage;return{entries:await e.stopCSSCoverage()}}_onFrameAttached(e){this._dispatchEvent("frameAttached",{frame:d.FrameDispatcher.from(this._scope,e)})}_onFrameDetached(e){this._dispatchEvent("frameDetached",{frame:r.lookupDispatcher(e)})}}t.PageDispatcher=f;class m extends r.Dispatcher{constructor(e,t){super(e,t,"Worker",{url:t.url()}),t.on(s.Worker.Events.Close,()=>this._dispatchEvent("close"))}async evaluateExpression(e){return{value:u.serializeResult(await this._object._evaluateExpression(e.expression,e.isFunction,u.parseArgument(e.arg)))}}async evaluateExpressionHandle(e){return{handle:p.createHandle(this._scope,await this._object._evaluateExpressionHandle(e.expression,e.isFunction,u.parseArgument(e.arg)))}}}t.WorkerDispatcher=m;class _ extends r.Dispatcher{constructor(e,t,n,i,s){super(e,{},"BindingCall",{frame:r.lookupDispatcher(i.frame),name:t,args:n?void 0:s.map(u.serializeResult),handle:n?new u.JSHandleDispatcher(e,s[0]):void 0}),this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}promise(){return this._promise}async resolve(e){this._resolve(u.parseArgument(e.result))}async reject(e){this._reject(o.parseError(e.error))}}t.BindingCallDispatcher=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessageDispatcher=void 0;const i=n(12),s=n(103);class r extends i.Dispatcher{constructor(e,t){super(e,t,"ConsoleMessage",{type:t.type(),text:t.text(),args:t.args().map(t=>s.createHandle(e,t)),location:t.location()})}}t.ConsoleMessageDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogDispatcher=void 0;const i=n(12);class s extends i.Dispatcher{constructor(e,t){super(e,t,"Dialog",{type:t.type(),message:t.message(),defaultValue:t.defaultValue()})}async accept(e){await this._object.accept(e.promptText)}async dismiss(){await this._object.dismiss()}}t.DialogDispatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadDispatcher=void 0;const i=n(12),s=n(275),r=n(0),o=n(1),a=n(4);class l extends i.Dispatcher{constructor(e,t){super(e,t,"Download",{url:t.url(),suggestedFilename:t.suggestedFilename()})}async path(){return{value:await this._object.localPath()||void 0}}async saveAs(e){return await new Promise((t,n)=>{this._object.saveAs(async(i,s)=>{if(void 0===s)try{await a.mkdirIfNeeded(e.path),await o.promisify(r.copyFile)(i,e.path),t()}catch(e){n(e)}else n(s)})})}async saveAsStream(){return await new Promise((e,t)=>{this._object.saveAs(async(n,i)=>{if(void 0===i)try{const t=r.createReadStream(n);await new Promise(e=>t.on("readable",e));const i=new s.StreamDispatcher(this._scope,t);e({stream:i}),await new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}catch(e){t(e)}else t(i)})})}async stream(){const e=await this._object.localPath();if(!e)return{};const t=r.createReadStream(e);return await new Promise(e=>t.on("readable",e)),{stream:new s.StreamDispatcher(this._scope,t)}}async failure(){return{error:await this._object.failure()||void 0}}async delete(){await this._object.delete()}}t.DownloadDispatcher=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronApplicationDispatcher=t.ElectronDispatcher=void 0;const i=n(12),s=n(505),r=n(194),o=n(131),a=n(103);class l extends i.Dispatcher{constructor(e,t){super(e,t,"Electron",{},!0)}async launch(e){const t=await this._object.launch(e.executablePath,e);return{electronApplication:new c(this._scope,t)}}}t.ElectronDispatcher=l;class c extends i.Dispatcher{constructor(e,t){super(e,t,"ElectronApplication",{},!0),this._dispatchEvent("context",{context:new r.BrowserContextDispatcher(this._scope,t.context())}),t.on(s.ElectronApplication.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(s.ElectronApplication.Events.Window,e=>{this._dispatchEvent("window",{page:i.lookupDispatcher(e),browserWindow:a.createHandle(this._scope,e.browserWindow)})})}async newBrowserWindow(e){const t=await this._object.newBrowserWindow(o.parseArgument(e.arg));return{page:i.lookupDispatcher(t)}}async evaluateExpression(e){const t=this._object._nodeElectronHandle;return{value:o.serializeResult(await t._evaluateExpression(e.expression,e.isFunction,!0,o.parseArgument(e.arg)))}}async evaluateExpressionHandle(e){const t=this._object._nodeElectronHandle,n=await t._evaluateExpression(e.expression,e.isFunction,!1,o.parseArgument(e.arg));return{handle:a.createHandle(this._scope,n)}}async close(){await this._object.close()}}t.ElectronApplicationDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Electron=t.ElectronApplication=void 0;const i=n(8),s=n(123),r=n(101),o=n(189),a=n(56),l=n(17),c=n(39),d=n(506),h=n(191),u=n(20),p=n(44),f=n(5),m=n(16),_=n(65);class g extends f.EventEmitter{constructor(e,t){super(),this._windows=new Set,this._lastWindowId=0,this._timeoutSettings=new c.TimeoutSettings,this._browserContext=e._defaultContext,this._browserContext.on(u.BrowserContext.Events.Close,()=>{Promise.resolve().then(()=>this.emit(g.Events.Close))}),this._browserContext.on(u.BrowserContext.Events.Page,e=>this._onPage(e)),this._nodeConnection=t,this._nodeSession=t.rootSession}async _onPage(e){const t=++this._lastWindowId;e.on(l.Page.Events.Close,()=>{e.browserWindow.dispose(),this._windows.delete(e)}),e._browserWindowId=t,this._windows.add(e);const n=await this._nodeElectronHandle.evaluateHandle(({BrowserWindow:e},t)=>e.fromId(t),t).catch(e=>{});n&&(e.browserWindow=n,await p.runAbortableTask(t=>e.mainFrame()._waitForLoadState(t,"domcontentloaded"),e._timeoutSettings.navigationTimeout({})).catch(e=>{}),this.emit(g.Events.Window,e))}async newBrowserWindow(e){const t=await this._nodeElectronHandle.evaluate(async({BrowserWindow:e},t)=>{const n=new e(t);return n.loadURL("about:blank"),n.id},e);for(const e of this._windows)if(e._browserWindowId===t)return e;return await this._waitForEvent(g.Events.Window,e=>e._browserWindowId===t)}context(){return this._browserContext}async close(){const e=this._waitForEvent(g.Events.Close);await this._nodeElectronHandle.evaluate(({app:e})=>e.quit()),this._nodeConnection.close(),await e}async _waitForEvent(e,t){const n=new p.ProgressController;return e!==g.Events.Close&&this._browserContext._closePromise.then(e=>n.abort(e)),n.run(n=>m.helper.waitForEvent(n,this,e,t).promise,this._timeoutSettings.timeout({}))}async _init(){this._nodeSession.on("Runtime.executionContextCreated",e=>{e.context.auxData&&e.context.auxData.isDefault&&(this._nodeExecutionContext=new a.ExecutionContext(new o.CRExecutionContext(this._nodeSession,e.context)))}),await this._nodeSession.send("Runtime.enable",{}).catch(e=>{}),this._nodeElectronHandle=await a.evaluate(this._nodeExecutionContext,!1,"process.mainModule.require('electron')")}}t.ElectronApplication=g,g.Events={Close:"close",Window:"window"};function w(e,t,n){return new Promise((i,s)=>{const r=_.createInterface({input:t.stderr}),o=new Error("Process failed to launch!"),a=[m.helper.addEventListener(r,"line",(function(e){const t=e.match(n);if(!t)return;l(),i(t)})),m.helper.addEventListener(r,"close",s.bind(null,o)),m.helper.addEventListener(t,"exit",s.bind(null,o)),m.helper.addEventListener(t,"error",s.bind(null,o))];function l(){m.helper.removeEventListeners(a)}e.cleanupWhenAborted(l)})}t.Electron=class{async launch(e,t={}){const{args:n=[],handleSIGINT:o=!0,handleSIGTERM:a=!0,handleSIGHUP:l=!0}=t,u=new p.ProgressController;return u.setLogName("browser"),u.run(async c=>{let u=void 0;const p=["--inspect=0","--remote-debugging-port=0",...n];if("linux"===i.platform()){process.geteuid&&0===process.geteuid()&&-1===p.indexOf("--no-sandbox")&&p.push("--no-sandbox")}const{launchedProcess:f,gracefullyClose:m,kill:_}=await h.launchProcess({executablePath:e,args:p,env:t.env?h.envArrayToObject(t.env):process.env,handleSIGINT:o,handleSIGTERM:a,handleSIGHUP:l,progress:c,stdio:"pipe",cwd:t.cwd,tempDirectories:[],attemptToGracefullyClose:()=>u.close(),onExit:()=>{}}),b=await w(c,f,/^Debugger listening on (ws:\/\/.*)$/),y=await d.WebSocketTransport.connect(c,b[1]),v=new r.CRConnection(y),x=await w(c,f,/^DevTools listening on (ws:\/\/.*)$/),S=await d.WebSocketTransport.connect(c,x[1]),E={onclose:void 0,process:f,close:m,kill:_},k=await s.CRBrowser.connect(S,{name:"electron",headful:!0,persistent:{noDefaultViewport:!0},browserProcess:E});return u=new g(k,v),await u._init(),u},c.TimeoutSettings.timeout(t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketTransport=void 0;const i=n(71),s=n(4);class r{constructor(e,t){this._ws=new i(t,[],{perMessageDeflate:!1,maxPayload:268435456,handshakeTimeout:e.timeUntilDeadline()}),this._progress=e;const n=s.makeWaitForNextTask();this._ws.addEventListener("message",e=>{n(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(e.data))})}),this._ws.addEventListener("close",e=>{this._progress&&this._progress.log("<ws disconnected> "+t),this.onclose&&this.onclose.call(null)}),this._ws.addEventListener("error",()=>{})}static async connect(e,t){e.log("<ws connecting> "+t);const n=new r(e,t);let i=!1;return e.aborted.then(()=>{i||n.closeAndWait().catch(e=>null)}),await new Promise((i,s)=>{n._ws.addEventListener("open",async()=>{e.log("<ws connected> "+t),i(n)}),n._ws.addEventListener("error",i=>{e.log(`<ws connect error> ${t} ${i.message}`),s(new Error("WebSocket error: "+i.message)),n._ws.close()})}),i=!0,n}send(e){this._ws.send(JSON.stringify(e))}close(){this._progress&&this._progress.log("<ws disconnecting> "+this._ws.url),this._ws.close()}async closeAndWait(){const e=new Promise(e=>this.onclose=e);return this.close(),e}}t.WebSocketTransport=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceDescriptors=void 0,t.DeviceDescriptors={"Blackberry PlayBook":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Blackberry PlayBook landscape":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30 landscape":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S5":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"iPad (gen 6)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11 landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"JioPhone 2":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"JioPhone 2 landscape":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"Kindle Fire HDX":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX landscape":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"LG Optimus L70":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"LG Optimus L70 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520 landscape":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia N9":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Nokia N9 landscape":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Pixel 2":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"}}},function(e,t,n){"use strict";function i(e){const t={...e,value:void 0!==e.valueNumber?e.valueNumber:e.valueString,checked:"checked"===e.checked||"unchecked"!==e.checked&&e.checked,pressed:"pressed"===e.pressed||"released"!==e.pressed&&e.pressed,children:e.children?e.children.map(i):void 0};return delete t.valueNumber,delete t.valueString,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Accessibility=void 0;t.Accessibility=class{constructor(e){this._channel=e}async snapshot(e={}){const t=e.root?e.root._elementChannel:void 0,n=await this._channel.accessibilitySnapshot({interestingOnly:e.interestingOnly,root:t});return n.rootAXNode?i(n.rootAXNode):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kLifecycleEvents=void 0,t.kLifecycleEvents=new Set(["load","domcontentloaded","networkidle"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Touchscreen=t.Mouse=t.Keyboard=void 0;t.Keyboard=class{constructor(e){this._channel=e}async down(e){await this._channel.keyboardDown({key:e})}async up(e){await this._channel.keyboardUp({key:e})}async insertText(e){await this._channel.keyboardInsertText({text:e})}async type(e,t={}){await this._channel.keyboardType({text:e,...t})}async press(e,t={}){await this._channel.keyboardPress({key:e,...t})}};t.Mouse=class{constructor(e){this._channel=e}async move(e,t,n={}){await this._channel.mouseMove({x:e,y:t,...n})}async down(e={}){await this._channel.mouseDown({...e})}async up(e={}){await this._channel.mouseUp(e)}async click(e,t,n={}){await this._channel.mouseClick({x:e,y:t,...n})}async dblclick(e,t,n={}){await this.click(e,t,{...n,clickCount:2})}};t.Touchscreen=class{constructor(e){this._channel=e}async tap(e,t){await this._channel.touchscreenTap({x:e,y:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChooser=void 0;t.FileChooser=class{constructor(e,t,n){this._page=e,this._elementHandle=t,this._isMultiple=n}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}async setFiles(e,t){return this._elementHandle.setInputFiles(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumCoverage=void 0;t.ChromiumCoverage=class{constructor(e){this._channel=e}async startJSCoverage(e={}){await this._channel.crStartJSCoverage(e)}async stopJSCoverage(){return(await this._channel.crStopJSCoverage()).entries}async startCSSCoverage(e={}){await this._channel.crStartCSSCoverage(e)}async stopCSSCoverage(){return(await this._channel.crStopCSSCoverage()).entries}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Video=void 0;const i=n(2);t.Video=class{constructor(e){this._page=e,this._pathPromise=new Promise(e=>this._pathCallback=e)}_setRelativePath(e){this._pathCallback(i.join(this._page.context()._options.recordVideo.dir,e))}path(){return this._pathPromise}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Playwright=void 0;const i=n(283),s=n(18),r=n(199),o=n(284),a=n(40);class l extends s.ChannelOwner{constructor(e,t,n,s){super(e,t,n,s),this.chromium=i.BrowserType.from(s.chromium),this.firefox=i.BrowserType.from(s.firefox),this.webkit=i.BrowserType.from(s.webkit),this._clank=i.BrowserType.from(s.clank),s.electron&&(this.electron=o.Electron.from(s.electron)),this.devices={};for(const{name:e,descriptor:t}of s.deviceDescriptors)this.devices[e]=t;this.selectors=r.sharedSelectors,this.errors={TimeoutError:a.TimeoutError},this.selectors._addChannel(r.SelectorsOwner.from(s.selectors))}}t.Playwright=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumBrowser=void 0;const i=n(200),s=n(73);class r extends s.Browser{async newBrowserCDPSession(){return this._wrapApiCall("chromiumBrowser.newBrowserCDPSession",async()=>i.CDPSession.from((await this._channel.crNewBrowserCDPSession()).session))}async startTracing(e,t={}){return this._wrapApiCall("chromiumBrowser.startTracing",async()=>{await this._channel.crStartTracing({...t,page:e?e._channel:void 0})})}async stopTracing(){return this._wrapApiCall("chromiumBrowser.stopTracing",async()=>Buffer.from((await this._channel.crStopTracing()).binary,"base64"))}}t.ChromiumBrowser=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumBrowserContext=void 0;const i=n(132),s=n(200),r=n(41),o=n(198),a=n(104);class l extends a.BrowserContext{constructor(e,t,n,s){super(e,t,n,s,"chromium"),this._backgroundPages=new Set,this._serviceWorkers=new Set,this._channel.on("crBackgroundPage",({page:e})=>{const t=i.Page.from(e);this._backgroundPages.add(t),this.emit(r.Events.ChromiumBrowserContext.BackgroundPage,t)}),this._channel.on("crServiceWorker",({worker:e})=>{const t=o.Worker.from(e);t._context=this,this._serviceWorkers.add(t),this.emit(r.Events.ChromiumBrowserContext.ServiceWorker,t)})}backgroundPages(){return[...this._backgroundPages]}serviceWorkers(){return[...this._serviceWorkers]}async newCDPSession(e){return this._wrapApiCall("chromiumBrowserContext.newCDPSession",async()=>{const t=await this._channel.crNewCDPSession({page:e._channel});return s.CDPSession.from(t.session)})}}t.ChromiumBrowserContext=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebKitBrowser=void 0;const i=n(73);class s extends i.Browser{}t.WebKitBrowser=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirefoxBrowser=void 0;const i=n(73);class s extends i.Browser{}t.FirefoxBrowser=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserServerImpl=t.BrowserServerLauncherImpl=void 0;const i=n(71),s=n(0),r=n(71),o=n(12),a=n(274),l=n(59),c=n(4),d=n(278),h=n(188),u=n(20),p=n(275);t.BrowserServerLauncherImpl=class{constructor(e){this._browserType=e}async launchServer(e={}){const t=await this._browserType.launch({...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?l.envObjectToArray(e.env):void 0});return new f(t,e.port)}};class f extends r.EventEmitter{constructor(e,t=0){super(),this._browser=e;const n=c.createGuid();this._server=new i.Server({port:t});const s=this._server.address();this._wsEndpoint="string"==typeof s?`${s}/${n}`:`ws://127.0.0.1:${s.port}/${n}`,this._process=e._options.browserProcess.process,this._server.on("connection",(e,t)=>{t.url==="/"+n?this._clientAttached(e):e.close()}),e._options.browserProcess.onclose=(e,t)=>{this._server.close(),this.emit("close",e,t)}}process(){return this._process}wsEndpoint(){return this._wsEndpoint}async close(){await this._browser._options.browserProcess.close()}async kill(){await this._browser._options.browserProcess.kill()}_clientAttached(e){const t=new o.DispatcherConnection;t.onmessage=t=>{e.readyState!==i.CLOSING&&e.send(JSON.stringify(t))},e.on("message",e=>{t.dispatch(JSON.parse(Buffer.from(e).toString()))}),e.on("error",()=>{});const n=new h.Selectors,s=t.rootDispatcher(),r=new m(s,this._browser,n);e.on("close",()=>{t.onmessage=()=>{},r.connectedBrowser.close().catch(e=>{})})}}t.BrowserServerImpl=f;class m extends o.Dispatcher{constructor(e,t,n){const i=new _(e,t,n);super(e,{},"RemoteBrowser",{selectors:new d.SelectorsDispatcher(e,n),browser:i},!1,"remoteBrowser"),this.connectedBrowser=i,i._remoteBrowser=this}}class _ extends a.BrowserDispatcher{constructor(e,t,n){super(e,t),this._contexts=[],this._closed=!1,this._selectors=n}async newContext(e){e.recordVideo&&(e.recordVideo.dir=this._object._options.downloadsPath);const t=await super.newContext(e),n=t.context;return n._object.on(u.BrowserContext.Events.VideoStarted,e=>this._sendVideo(n,e)),n._object._setSelectors(this._selectors),this._contexts.push(n),t}async close(){await Promise.all(this._contexts.map(e=>e.close())),this._didClose()}_didClose(){this._closed||(this._closed=!0,super._didClose())}_sendVideo(e,t){t._waitForCallbackOnFinish(async()=>{const n=s.createReadStream(t._path);await new Promise(e=>n.on("readable",e));const i=new p.StreamDispatcher(this._remoteBrowser._scope,n);this._remoteBrowser._dispatchEvent("video",{stream:i,context:e,relativePath:t._relativePath}),await new Promise(e=>{n.on("close",e),n.on("end",e),n.on("error",e)})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installDebugController=void 0;const i=n(20),s=n(17),r=n(4),o=n(521);t.installDebugController=function(){i.contextListeners.add(new a)};class a{async ensureInstalledInFrame(e){try{await e.extendInjectedScript(o.source)}catch(e){}}async onContextCreated(e){r.isDebugMode()&&e.on(i.BrowserContext.Events.Page,e=>{for(const t of e.frames())this.ensureInstalledInFrame(t);e.on(s.Page.Events.FrameNavigated,e=>this.ensureInstalledInFrame(e))})}async onContextWillDestroy(e){}async onContextDidDestroy(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="(/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/debug/injected/debugScript.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/debug/injected/consoleApi.ts\":\n/*!******************************************!*\\\n  !*** ./src/debug/injected/consoleApi.ts ***!\n  \\******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConsoleAPI = void 0;\nconst selectorParser_1 = __webpack_require__(/*! ../../server/common/selectorParser */ \"./src/server/common/selectorParser.ts\");\nclass ConsoleAPI {\n    constructor(injectedScript) {\n        this._injectedScript = injectedScript;\n        window.playwright = {\n            $: (selector) => this._querySelector(selector),\n            $$: (selector) => this._querySelectorAll(selector),\n            inspect: (selector) => this._inspect(selector),\n        };\n    }\n    _checkSelector(parsed) {\n        for (const { name } of parsed.parts) {\n            if (!this._injectedScript.engines.has(name))\n                throw new Error(`Unknown engine \"${name}\"`);\n        }\n    }\n    _querySelector(selector) {\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.query('Playwright >> selector').`);\n        const parsed = selectorParser_1.parseSelector(selector);\n        this._checkSelector(parsed);\n        const elements = this._injectedScript.querySelectorAll(parsed, document);\n        return elements[0];\n    }\n    _querySelectorAll(selector) {\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.$$('Playwright >> selector').`);\n        const parsed = selectorParser_1.parseSelector(selector);\n        this._checkSelector(parsed);\n        const elements = this._injectedScript.querySelectorAll(parsed, document);\n        return elements;\n    }\n    _inspect(selector) {\n        if (typeof window.inspect !== 'function')\n            return;\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.inspect('Playwright >> selector').`);\n        window.inspect(this._querySelector(selector));\n    }\n}\nexports.ConsoleAPI = ConsoleAPI;\n\n\n/***/ }),\n\n/***/ \"./src/debug/injected/debugScript.ts\":\n/*!*******************************************!*\\\n  !*** ./src/debug/injected/debugScript.ts ***!\n  \\*******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst consoleApi_1 = __webpack_require__(/*! ./consoleApi */ \"./src/debug/injected/consoleApi.ts\");\nclass DebugScript {\n    constructor(injectedScript) {\n        if (window.playwright)\n            return;\n        this.consoleAPI = new consoleApi_1.ConsoleAPI(injectedScript);\n    }\n}\nexports.default = DebugScript;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/selectorParser.ts\":\n/*!*********************************************!*\\\n  !*** ./src/server/common/selectorParser.ts ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseSelector = void 0;\nfunction parseSelector(selector) {\n    let index = 0;\n    let quote;\n    let start = 0;\n    const result = { parts: [] };\n    const append = () => {\n        const part = selector.substring(start, index).trim();\n        const eqIndex = part.indexOf('=');\n        let name;\n        let body;\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\n            name = part.substring(0, eqIndex).trim();\n            body = part.substring(eqIndex + 1);\n        }\n        else if (part.length > 1 && part[0] === '\"' && part[part.length - 1] === '\"') {\n            name = 'text';\n            body = part;\n        }\n        else if (part.length > 1 && part[0] === \"'\" && part[part.length - 1] === \"'\") {\n            name = 'text';\n            body = part;\n        }\n        else if (/^\\(*\\/\\//.test(part) || part.startsWith('..')) {\n            // If selector starts with '//' or '//' prefixed with multiple opening\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\n            // If selector starts with '..', consider xpath as well.\n            name = 'xpath';\n            body = part;\n        }\n        else {\n            name = 'css';\n            body = part;\n        }\n        let capture = false;\n        if (name[0] === '*') {\n            capture = true;\n            name = name.substring(1);\n        }\n        result.parts.push({ name, body });\n        if (capture) {\n            if (result.capture !== undefined)\n                throw new Error(`Only one of the selectors can capture using * modifier`);\n            result.capture = result.parts.length - 1;\n        }\n    };\n    while (index < selector.length) {\n        const c = selector[index];\n        if (c === '\\\\' && index + 1 < selector.length) {\n            index += 2;\n        }\n        else if (c === quote) {\n            quote = undefined;\n            index++;\n        }\n        else if (!quote && (c === '\"' || c === '\\'' || c === '`')) {\n            quote = c;\n            index++;\n        }\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\n            append();\n            index += 2;\n            start = index;\n        }\n        else {\n            index++;\n        }\n    }\n    append();\n    return result;\n}\nexports.parseSelector = parseSelector;\n\n\n/***/ })\n\n/******/ })).default"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installTracer=void 0;const i=n(20),s=n(2),r=n(1),o=n(0),a=n(4),l=n(17),c=n(523),d=n(16),h=n(39),u=r.promisify(o.writeFile.bind(o)),p=r.promisify(o.appendFile.bind(o)),f=r.promisify(o.access.bind(o));t.installTracer=function(){i.contextListeners.add(new m)};class m{constructor(){this._contextTracers=new Map}async onContextCreated(e){if(!e._options._tracePath)return;const t=e._options._traceResourcesPath||s.join(s.dirname(e._options._tracePath),"trace-resources"),n=new _(e,t,e._options._tracePath);this._contextTracers.set(e,n)}async onContextWillDestroy(e){}async onContextDidDestroy(e){const t=this._contextTracers.get(e);t&&(await t.dispose().catch(e=>{}),this._contextTracers.delete(e))}}class _{constructor(e,t,n){this._disposed=!1,this._pageToId=new Map,this._context=e,this._contextId="context@"+a.createGuid(),this._traceStoragePromise=a.mkdirIfNeeded(s.join(t,"sha1")).then(()=>t),this._appendEventChain=a.mkdirIfNeeded(n).then(()=>n),this._writeArtifactChain=Promise.resolve();const r={type:"context-created",browserName:e._browser._options.name,contextId:this._contextId,isMobile:!!e._options.isMobile,deviceScaleFactor:e._options.deviceScaleFactor||1,viewportSize:e._options.viewport||void 0};this._appendTraceEvent(r),this._snapshotter=new c.Snapshotter(e,this),this._eventListeners=[d.helper.addEventListener(e,i.BrowserContext.Events.Page,this._onPage.bind(this))],this._context._actionListeners.add(this)}onBlob(e){this._writeArtifact(e.sha1,e.buffer)}onResource(e){const t={type:"resource",contextId:this._contextId,pageId:e.pageId,frameId:e.frameId,url:e.url,contentType:e.contentType,responseHeaders:e.responseHeaders,sha1:e.sha1};this._appendTraceEvent(t)}pageId(e){return this._pageToId.get(e)}async onAfterAction(e,t){try{const n=await this._takeSnapshot(t.page,"string"==typeof t.target?void 0:t.target),i={type:"action",contextId:this._contextId,pageId:this._pageToId.get(t.page),action:t.type,selector:"string"==typeof t.target?t.target:void 0,value:t.value,snapshot:n,startTime:e.startTime,endTime:e.endTime,stack:t.stack,logs:e.logs.slice(),error:e.error?e.error.stack:void 0};this._appendTraceEvent(i)}catch(e){}}_onPage(e){const t="page@"+a.createGuid();this._pageToId.set(e,t);const n={type:"page-created",contextId:this._contextId,pageId:t};this._appendTraceEvent(n),e.on(l.Page.Events.VideoStarted,e=>{if(this._disposed)return;const n={type:"page-video",contextId:this._contextId,pageId:t,fileName:s.basename(e._path)};this._appendTraceEvent(n)}),e.once(l.Page.Events.Close,()=>{if(this._pageToId.delete(e),this._disposed)return;const n={type:"page-destroyed",contextId:this._contextId,pageId:t};this._appendTraceEvent(n)})}async _takeSnapshot(e,t,n=0){n||(n=(e._timeoutSettings.timeout({})||h.DEFAULT_TIMEOUT)/5);const i=a.monotonicTime(),s=await this._snapshotter.takeSnapshot(e,t,n);if(!s)return;const r=Buffer.from(JSON.stringify(s)),o=a.calculateSha1(r);return this._writeArtifact(o,r),{sha1:o,duration:a.monotonicTime()-i}}async dispose(){this._disposed=!0,this._context._actionListeners.delete(this),d.helper.removeEventListeners(this._eventListeners),this._pageToId.clear(),this._snapshotter.dispose();const e={type:"context-destroyed",contextId:this._contextId};this._appendTraceEvent(e),await this._appendEventChain,await this._writeArtifactChain}_writeArtifact(e,t){const n=this._innerWriteArtifact(e,t);this._writeArtifactChain=this._writeArtifactChain.then(()=>n)}async _innerWriteArtifact(e,t){const n=await this._traceStoragePromise,i=s.join(n,e);try{await f(i)}catch(e){await u(i,t)}}_appendTraceEvent(e){const t=a.monotonicTime();this._appendEventChain=this._appendEventChain.then(async n=>(await p(n,JSON.stringify({...e,timestamp:t})+"\n"),n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Snapshotter=void 0;const i=n(20),s=n(17),r=n(16),o=n(44),a=n(32),l=n(56),c=n(524),d=n(4);function h(e){try{const t=new URL(e);return t.hash="",t.toString()}catch(t){return e}}t.Snapshotter=class{constructor(e,t){this._context=e,this._delegate=t,this._eventListeners=[r.helper.addEventListener(this._context,i.BrowserContext.Events.Page,this._onPage.bind(this))]}dispose(){r.helper.removeEventListeners(this._eventListeners)}_onPage(e){this._eventListeners.push(r.helper.addEventListener(e,s.Page.Events.Response,t=>{this._saveResource(e,t).catch(e=>a.debugLogger.log("error",e))}))}async _saveResource(e,t){if(t.status()>=300&&t.status()<=399)return;let n=t.request();for(;n.redirectedFrom();)n=n.redirectedFrom();const i=n.url();let s="";for(const{name:e,value:n}of t.headers())"content-type"===e.toLowerCase()&&(s=n);const r=await t.body().catch(e=>a.debugLogger.log("error",e)),o=r?d.calculateSha1(r):"none",l={pageId:this._delegate.pageId(e),frameId:t.frame()._id,url:i,contentType:s,responseHeaders:t.headers(),sha1:o};this._delegate.onResource(l),r&&this._delegate.onBlob({sha1:o,buffer:r})}async takeSnapshot(e,t,n){d.assert(e.context()===this._context);const i=e.frames(),s=i.map(async e=>{const i=await o.runAbortableTask(n=>this._snapshotFrame(n,t,e),n).catch(e=>null);if(i)return i;return{snapshot:{frameId:e._id,url:h(e.url()),html:"<body>Snapshot is not available</body>",resourceOverrides:[]},mapping:new Map}}),r=await this._getViewportSize(e,n),a=await Promise.all(s);if(!r)return null;const l=a[0];l.snapshot.url.startsWith("http")||(l.snapshot.url="http://playwright.snapshot/");const c=new Map;for(const e of a)for(const[t,n]of e.mapping)c.set(t,n);const u=[];for(let e=1;e<a.length;e++){const t=a[e],n=i[e];if(!c.has(n))continue;const s=t.snapshot;s.url=c.get(n),u.push(s)}return{viewportSize:r,frames:[l.snapshot,...u]}}async _getViewportSize(e,t){return o.runAbortableTask(async t=>{const n=e.viewportSize();if(n)return n;return(await e.mainFrame()._utilityContext()).evaluateInternal(()=>({width:Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),height:Math.max(document.body.offsetHeight,document.documentElement.offsetHeight)}))},t).catch(e=>null)}async _snapshotFrame(e,t,n){if(!e.isRunning())return null;t&&await t.ownerFrame()!==n&&(t=void 0);const i=await n._utilityContext(),s=d.createGuid(),r=!n._page.context()._options.javaScriptEnabled,o=await l.evaluate(i,!1,c.takeSnapshotInFrame,s,r,t);if(!e.isRunning())return null;const a=await o.getProperties(),u=await a.get("data").jsonValue(),p=await a.get("frameElements").getProperties();o.dispose();const f={frameId:n._id,url:h(n.url()),html:u.html,resourceOverrides:[]},m=new Map;for(const{url:e,content:t}of u.resourceOverrides){const n=Buffer.from(t),i=d.calculateSha1(n);this._delegate.onBlob({sha1:i,buffer:n}),f.resourceOverrides.push({url:e,sha1:i})}for(let e=0;e<u.frameUrls.length;e++){const t=p.get(String(e)).asElement();if(!t)continue;const n=await t.contentFrame().catch(e=>null);n&&m.set(n,u.frameUrls[e])}return{snapshot:f,mapping:m}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeSnapshotInFrame=void 0,t.takeSnapshotInFrame=function(e,t,n){const i=window,s=i.document,r=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=e=>e.replace(/[&<>"']/gu,e=>o[e]),l=e=>e.replace(/[&<]/gu,e=>o[e]),c=new Map,d=new Map,h=new Map,u=new Map;let p=0;const f=()=>e+ ++p,m=e=>e.startsWith("javascript:")?"":e,_=e=>e.split(",").map(e=>{const t=(e=e.trim()).lastIndexOf(" ");return-1===t?m(e):m(e.substring(0,t).trim())+e.substring(t)}).join(","),g=e=>{try{for(const t of e.cssRules)t.styleSheet&&g(t.styleSheet);const t=(e=>{const t=[];for(const n of e.cssRules)t.push(n.cssText);return t.join("\n")})(e);if(e.ownerNode&&"STYLE"===e.ownerNode.nodeName)h.set(e.ownerNode,t);else if(null!==e.href){const n=((e,t)=>{if(""===t)return"";try{return new URL(t,e).href}catch(e){return t}})((e=>{let t=e;for(;t.parentStyleSheet;)t=t.parentStyleSheet;return t.ownerNode?t.ownerNode.baseURI:document.baseURI})(e),e.href);u.set(n,t)}}catch(e){}},w=(e,s)=>{const o=e.nodeName,u=e.nodeType;if(u!==Node.DOCUMENT_TYPE_NODE)if(u!==Node.TEXT_NODE){if(u===Node.ELEMENT_NODE||u===Node.DOCUMENT_NODE||u===Node.DOCUMENT_FRAGMENT_NODE){if(u===Node.DOCUMENT_NODE||u===Node.DOCUMENT_FRAGMENT_NODE){const t=e;for(const e of t.styleSheets)g(e)}if("SCRIPT"!==o&&"BASE"!==o&&(!t||"NOSCRIPT"!==o)){if("STYLE"===o){const t=h.get(e)||e.textContent||"";return s.push("<style>"),s.push(t),void s.push("</style>")}if(u===Node.ELEMENT_NODE){const t=e;s.push("<"),s.push(o),e===n&&s.push(' __playwright_target__="true"');for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;let r=t.attributes[e].value;if(("value"!==n||"INPUT"!==o&&"TEXTAREA"!==o)&&("checked"!==n&&"disabled"!==n&&"checked"!==n&&("LINK"!==o||"integrity"!==n))){if("src"!==n||"IFRAME"!==o&&"FRAME"!==o)"src"===n&&"IMG"===o?r=m(r):"srcset"===n&&"IMG"===o||"srcset"===n&&"SOURCE"===o?r=_(r):"href"===n&&"LINK"===o?r=m(r):n.startsWith("on")&&(r="");else{let e=i.location.protocol;e.startsWith("http")||(e="http:"),r=e+"//"+f()+"/",d.set(r,t)}s.push(" "),s.push(n),s.push('="'),s.push(a(r)),s.push('"')}}if("INPUT"===o&&(s.push(' value="'),s.push(a(t.value)),s.push('"')),t.checked&&s.push(" checked"),t.disabled&&s.push(" disabled"),t.readOnly&&s.push(" readonly"),t.shadowRoot){const e=[];w(t.shadowRoot,e);const n=f();c.set(n,e.join("")),s.push(" "),s.push("playwright-shadow-root"),s.push('="'),s.push(n),s.push('"')}s.push(">")}if("HEAD"===o){let t,n=document.baseURI;for(let i=e.firstChild;i;i=i.nextSibling)"BASE"===i.nodeName&&(n=i.href,t=i.target);s.push('<base href="'),s.push(a(n)),s.push('"'),t&&(s.push(' target="'),s.push(a(t)),s.push('"')),s.push(">")}if("TEXTAREA"===o)s.push(l(e.value));else for(let t=e.firstChild;t;t=t.nextSibling)w(t,s);if("BODY"===e.nodeName&&c.size){s.push("<script>");const e=Array.from(c).map(([e,t])=>{return`  ['${e}', '${n=t,n.replace(/'/g,"\\'")}']`;var n}).join(",\n"),t=`\n(${b.toString()})('playwright-shadow-root', new Map([\n${e}\n]))\n`;s.push(t),s.push("<\/script>")}u!==Node.ELEMENT_NODE||r.has(o)||(s.push("</"),s.push(o),s.push(">"))}}}else s.push(l(e.nodeValue||""));else{const t=e;s.push(`<!DOCTYPE ${t.name}>`)}};function b(e,t){const n=i=>{const s=i.querySelectorAll(`[${e}]`);for(let i=0;i<s.length;i++){const r=s[i],o=r.getAttribute(e);r.removeAttribute(e);const a=r.attachShadow({mode:"open"}),l=t.get(o);l&&(a.innerHTML=l,n(a))}};n(document)}const y=[];return w(s,y),{data:{html:y.join(""),frameUrls:Array.from(d.keys()),resourceOverrides:Array.from(u).map(([e,t])=>({url:e,content:t}))},frameElements:Array.from(d.values())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installHarTracer=void 0;const i=n(0),s=n(1),r=n(20),o=n(16),a=n(17),l=s.promisify(i.writeFile.bind(i));t.installHarTracer=function(){r.contextListeners.add(new c)};class c{constructor(){this._contextTracers=new Map}async onContextCreated(e){if(!e._options.recordHar)return;const t=new d(e,e._options.recordHar);this._contextTracers.set(e,t)}async onContextWillDestroy(e){const t=this._contextTracers.get(e);t&&(this._contextTracers.delete(e),await t.flush())}async onContextDidDestroy(e){}}class d{constructor(e,t){this._pageEntries=new Map,this._entries=new Map,this._lastPage=0,this._barrierPromises=new Set,this._options=t,this._log={version:"1.2",creator:{name:"Playwright",version:n(526).version},browser:{name:e._browser._options.name,version:e._browser.version()},pages:[],entries:[]},e.on(r.BrowserContext.Events.Page,e=>this._onPage(e))}_onPage(e){const t={startedDateTime:new Date,id:"page_"+this._lastPage++,title:"",pageTimings:{onContentLoad:-1,onLoad:-1}};this._pageEntries.set(e,t),this._log.pages.push(t),e.on(a.Page.Events.Request,t=>this._onRequest(e,t)),e.on(a.Page.Events.Response,t=>this._onResponse(e,t)),e.on(a.Page.Events.DOMContentLoaded,()=>{const n=e.mainFrame()._evaluateExpression(String(()=>({title:document.title,domContentLoaded:performance.timing.domContentLoadedEventStart})),!0,void 0,"utility").then(e=>{t.title=e.title,t.pageTimings.onContentLoad=e.domContentLoaded}).catch(()=>{});this._addBarrier(e,n)}),e.on(a.Page.Events.Load,()=>{const n=e.mainFrame()._evaluateExpression(String(()=>({title:document.title,loaded:performance.timing.loadEventStart})),!0,void 0,"utility").then(e=>{t.title=e.title,t.pageTimings.onLoad=e.loaded}).catch(()=>{});this._addBarrier(e,n)})}_addBarrier(e,t){const n=Promise.race([new Promise(t=>e.on("close",()=>{this._barrierPromises.delete(n),t()})),t]);this._barrierPromises.add(n)}_onRequest(e,t){const n=this._pageEntries.get(e),i=new URL(t.url()),s={pageref:n.id,startedDateTime:new Date,time:-1,request:{method:t.method(),url:t.url(),httpVersion:"HTTP/1.1",cookies:[],headers:[],queryString:[...i.searchParams].map(e=>({name:e[0],value:e[1]})),postData:void 0,headersSize:-1,bodySize:-1},response:{status:-1,statusText:"",httpVersion:"HTTP/1.1",cookies:[],headers:[],content:{size:-1,mimeType:t.headerValue("content-type")||"application/octet-stream"},headersSize:-1,bodySize:-1,redirectURL:""},cache:{beforeRequest:null,afterRequest:null},timings:{send:-1,wait:-1,receive:-1}};if(t.redirectedFrom()){this._entries.get(t.redirectedFrom()).response.redirectURL=t.url()}this._log.entries.push(s),this._entries.set(t,s)}_onResponse(e,t){const n=this._pageEntries.get(e),i=this._entries.get(t.request()),s=t.request();i.request.headers=s.headers().map(e=>({name:e.name,value:e.value})),i.request.cookies=h(s.headerValue("cookie"),";"),i.request.postData=function(e){const t=e.postDataBuffer();if(!t)return null;const n=e.headerValue("content-type")||"application/octet-stream",i={mimeType:n,text:"application/octet-stream"===n?"":t.toString(),params:[]};if("application/x-www-form-urlencoded"===n){const e=new URLSearchParams(t.toString());for(const[t,n]of e.entries())i.params.push({name:t,value:n})}return i}(s)||void 0,i.response={status:t.status(),statusText:t.statusText(),httpVersion:"HTTP/1.1",cookies:h(t.headerValue("set-cookie"),"\n"),headers:t.headers().map(e=>({name:e.name,value:e.value})),content:{size:-1,mimeType:t.headerValue("content-type")||"application/octet-stream"},headersSize:-1,bodySize:-1,redirectURL:""};const r=t.timing();if(n.startedDateTime.valueOf()>r.startTime&&(n.startedDateTime=new Date(r.startTime)),i.timings={dns:-1!==r.domainLookupEnd?o.helper.millisToRoundishMillis(r.domainLookupEnd-r.domainLookupStart):-1,connect:-1!==r.connectEnd?o.helper.millisToRoundishMillis(r.connectEnd-r.connectStart):-1,ssl:-1!==r.connectEnd?o.helper.millisToRoundishMillis(r.connectEnd-r.secureConnectionStart):-1,send:0,wait:-1!==r.responseStart?o.helper.millisToRoundishMillis(r.responseStart-r.requestStart):-1,receive:-1!==t.request()._responseEndTiming?o.helper.millisToRoundishMillis(t.request()._responseEndTiming-r.responseStart):-1},!this._options.omitContent&&200===t.status()){const n=t.body().then(e=>{i.response.content.text=e.toString("base64"),i.response.content.encoding="base64"}).catch(()=>{});this._addBarrier(e,n)}}async flush(){await Promise.all(this._barrierPromises);for(const e of this._log.pages)e.pageTimings.onContentLoad>=0?e.pageTimings.onContentLoad-=e.startedDateTime.valueOf():e.pageTimings.onContentLoad=-1,e.pageTimings.onLoad>=0?e.pageTimings.onLoad-=e.startedDateTime.valueOf():e.pageTimings.onLoad=-1;await l(this._options.path,JSON.stringify({log:this._log},void 0,2))}}function h(e,t){return e?e.split(t).map(e=>function(e){const t={name:"",value:""};let n=!0;for(const i of e.split(/; */)){const e=i.indexOf("="),s=-1!==e?i.substr(0,e).trim():i.trim(),r=-1!==e?i.substr(e+1,i.length).trim():"";n?(n=!1,t.name=s,t.value=r):("Domain"===s&&(t.domain=r),"Expires"===s&&(t.expires=new Date(r)),"HttpOnly"===s&&(t.httpOnly=!0),"Max-Age"===s&&(t.expires=new Date(Date.now()+1e3*+r)),"Path"===s&&(t.path=r),"SameSite"===s&&(t.sameSite=r),"Secure"===s&&(t.secure=!0))}return t}(e)):[]}},function(e){e.exports=JSON.parse('{"name":"playwright-core","version":"1.6.1","description":"A high-level API to automate web browsers","repository":"github:Microsoft/playwright","engines":{"node":">=10.17.0"},"homepage":"https://playwright.dev","main":"index.js","exports":{".":{"import":"./index.mjs","require":"./index.js"},"./":"./"},"scripts":{"install":"node install.js"},"author":{"name":"Microsoft Corporation"},"license":"Apache-2.0","dependencies":{"debug":"^4.1.1","extract-zip":"^2.0.1","https-proxy-agent":"^5.0.0","jpeg-js":"^0.4.2","mime":"^2.4.6","pngjs":"^5.0.0","progress":"^2.0.3","proper-lockfile":"^4.1.1","proxy-from-env":"^1.1.0","rimraf":"^3.0.2","ws":"^7.3.1"}}')},function(e){e.exports=JSON.parse('{"comment":"Do not edit this file, use utils/roll_browser.js","browsers":[{"name":"chromium","revision":"823944","download":false},{"name":"firefox","revision":"1205","download":false},{"name":"webkit","revision":"1383","download":false}]}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return void 0===process.env.IS_LOCAL&&["AWS_LAMBDA_FUNCTION_NAME","FUNCTION_NAME","FUNCTION_TARGET"].some(e=>void 0!==process.env[e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=async function(e){try{return await i.promises.access(e),!0}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AWS_FONT_DIR=t.AWS_TMP_DIR=void 0;const i=n(0),s=n(2),r=n(285);t.AWS_TMP_DIR="/tmp/aws",t.AWS_FONT_DIR="/tmp/fonts";const o=t.AWS_TMP_DIR+"/lib";t.default=async function(){if(!r.default())return{};const e={};return!process.env.FONTCONFIG_PATH&&i.existsSync(t.AWS_FONT_DIR)?(e.FONTCONFIG_PATH=t.AWS_FONT_DIR,await i.promises.writeFile(s.join(t.AWS_FONT_DIR,"fonts.conf"),`<?xml version="1.0"?>\n<!DOCTYPE fontconfig SYSTEM "fonts.dtd">\n<fontconfig>\n  <dir>${t.AWS_FONT_DIR}</dir>\n  <cachedir>/tmp/fonts-cache/</cachedir>\n  <config></config>\n</fontconfig>`)):e.FONTCONFIG_PATH=t.AWS_TMP_DIR,process.env.LD_LIBRARY_PATH?process.env.LD_LIBRARY_PATH.startsWith(o)||(e.LD_LIBRARY_PATH=[...new Set([o,...process.env.LD_LIBRARY_PATH.split(":")])].join(":")):e.LD_LIBRARY_PATH=o,e}},function(e,t,n){"use strict";(function(t){const i=n(0),s=n(8),r=n(2),o=n(532),a=n(7);class l{static get brotli(){if(void 0!==a.createBrotliDecompress)return a.createBrotliDecompress;if(!0!==this.hasOwnProperty("_brotli")){let e="iltorb";"AWS_Lambda_nodejs8.10"===process.env.AWS_EXECUTION_ENV&&(e=r.join(t,"iltorb"));try{this._brotli=n(550)(e).decompressStream}catch(e){if("MODULE_NOT_FOUND"===e.code)throw new Error("Failed to load 'iltorb' package.");throw e}}return this._brotli}static deflate(e){let t=r.join(s.tmpdir(),[r.basename(e),i.statSync(e).isDirectory()?"tar.gz":"gz"].join("."));return new Promise((n,s)=>{let r=t.endsWith(".tar.gz")?o.pack(e):i.createReadStream(e,{highWaterMark:2**23}),l=i.createWriteStream(t,{mode:420});r.once("error",e=>s(e)),l.once("error",e=>s(e)),l.once("close",()=>n(t)),r.pipe(a.createGzip({chunkSize:2**21})).pipe(l)})}static inflate(e){let t=r.join(s.tmpdir(),r.basename(e).replace(/[.](?:t(?:ar(?:[.](?:br|gz))?|br|gz)|br|gz)$/i,""));return new Promise((n,s)=>{if(!0===i.existsSync(t))return n(t);let r=i.createReadStream(e,{highWaterMark:2**23}),c=null;!0===/[.](?:t(?:ar(?:[.](?:br|gz))?|br|gz))$/i.test(e)?(c=o.extract(t),c.once("finish",()=>n(t))):c=i.createWriteStream(t,{mode:448}),r.once("error",e=>s(e)),c.once("error",e=>s(e)),c.once("close",()=>n(t)),!0===/(?:br|gz)$/i.test(e)?r.pipe(/br$/i.test(e)?l.brotli({chunkSize:2**21}):a.createUnzip({chunkSize:2**21})).pipe(c):r.pipe(c)})}}e.exports=l}).call(this,"/")},function(e,t,n){var i=n(533),s=n(534),r=n(548),o=n(549),a=n(0),l=n(2),c="win32"===n(8).platform(),d=function(){},h=function(e){return e},u=c?function(e){return e.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")}:h,p=function(e,t){return function(n){n.name=n.name.split("/").slice(t).join("/");var i=n.linkname;return i&&("link"===n.type||l.isAbsolute(i))&&(n.linkname=i.split("/").slice(t).join("/")),e(n)}};t.pack=function(e,t){e||(e="."),t||(t={});var n=t.fs||a,i=t.ignore||t.filter||d,o=t.map||d,c=t.mapStream||h,m=function(e,t,n,i,s,r){var o=s||["."];return function(s){if(!o.length)return s();var a=o.shift(),c=l.join(n,a);t(c,(function(t,d){return t?s(t):d.isDirectory()?void e.readdir(c,(function(e,t){if(e)return s(e);r&&t.sort();for(var c=0;c<t.length;c++)i(l.join(n,a,t[c]))||o.push(l.join(a,t[c]));s(null,a,d)})):s(null,a,d)}))}}(n,t.dereference?n.stat:n.lstat,e,i,t.entries,t.sort),_=!1!==t.strict,g="number"==typeof t.umask?~t.umask:~f(),w="number"==typeof t.dmode?t.dmode:0,b="number"==typeof t.fmode?t.fmode:0,y=t.pack||s.pack(),v=t.finish||d;t.strip&&(o=p(o,t.strip)),t.readable&&(w|=parseInt(555,8),b|=parseInt(444,8)),t.writable&&(w|=parseInt(333,8),b|=parseInt(222,8));var x=function(i,s,a){if(i)return y.destroy(i);if(!s)return!1!==t.finalize&&y.finalize(),v(y);if(a.isSocket())return S();var d={name:u(s),mode:(a.mode|(a.isDirectory()?w:b))&g,mtime:a.mtime,size:a.size,type:"file",uid:a.uid,gid:a.gid};if(a.isDirectory())return d.size=0,d.type="directory",d=o(d)||d,y.entry(d,S);if(a.isSymbolicLink())return d.size=0,d.type="symlink",function(t,i){n.readlink(l.join(e,t),(function(e,t){if(e)return y.destroy(e);i.linkname=u(t),y.entry(i,S)}))}(s,d=o(d)||d);if(d=o(d)||d,!a.isFile())return _?y.destroy(new Error("unsupported type for "+s)):S();var h=y.entry(d,S);if(h){var p=c(n.createReadStream(l.join(e,s)),d);p.on("error",(function(e){h.destroy(e)})),r(p,h)}},S=function(e){if(e)return y.destroy(e);m(x)};return S(),y};var f=function(){return process.umask?process.umask():0};function m(e,t,n){o(e,{fs:t.fs},(function(e,s){!e&&s&&t.own?i(s,t.uid,t.gid,n):n(e)}))}t.extract=function(e,t){e||(e="."),t||(t={});var n=t.fs||a,i=t.ignore||t.filter||d,o=t.map||d,_=t.mapStream||h,g=!1!==t.chown&&!c&&0===(process.getuid?process.getuid():-1),w=t.extract||s.extract(),b=[],y=new Date,v="number"==typeof t.umask?~t.umask:~f(),x="number"==typeof t.dmode?t.dmode:0,S="number"==typeof t.fmode?t.fmode:0,E=!1!==t.strict;t.strip&&(o=p(o,t.strip)),t.readable&&(x|=parseInt(555,8),S|=parseInt(444,8)),t.writable&&(x|=parseInt(333,8),S|=parseInt(222,8));var k=function(e,t){for(var i,s;(i=(s=b).length?s[s.length-1]:null)&&e.slice(0,i[0].length)!==i[0];)b.pop();if(!i)return t();n.utimes(i[0],y,i[1],t)};return w.on("entry",(function(s,a,d){(s=o(s)||s).name=u(s.name);var h=l.join(e,l.join("/",s.name));if(i(h,s))return a.resume(),d();var p=function(e){if(e)return d(e);!function(e,i,s){!1===t.utimes?s():"directory"===i.type?n.utimes(e,y,i.mtime,s):"symlink"===i.type?k(e,s):n.utimes(e,y,i.mtime,(function(t){if(t)return s(t);k(e,s)}))}(h,s,(function(e){return e?d(e):c?d():void function(e,t,i){var s="symlink"===t.type,r=s?n.lchmod:n.chmod,o=s?n.lchown:n.chown;if(!r)return i();var a=(t.mode|("directory"===t.type?x:S))&v;r(e,a,(function(n){return n?i(n):g&&o?void o(e,t.uid,t.gid,i):i()}))}(h,s,d)}))},f=function(){var e=n.createWriteStream(h),t=_(a,s);e.on("error",(function(e){t.destroy(e)})),r(t,e,(function(t){if(t)return d(t);e.on("close",p)}))};if("directory"===s.type)return b.push([h,s.mtime]),m(h,{fs:n,own:g,uid:s.uid,gid:s.gid},p);var w=l.dirname(h);!function e(t,n,i,s){if(n===i)return s(null,!0);t.lstat(n,(function(r,o){return r&&"ENOENT"!==r.code?s(r):r||o.isDirectory()?e(t,l.join(n,".."),i,s):void s(null,!1)}))}(n,w,l.join(e,"."),(function(i,r){return i?d(i):r?void m(w,{fs:n,own:g,uid:s.uid,gid:s.gid},(function(i){if(i)return d(i);switch(s.type){case"file":return f();case"link":return function(){if(c)return d();n.unlink(h,(function(){var i=l.join(e,l.join("/",s.linkname));n.link(i,h,(function(e){if(e&&"EPERM"===e.code&&t.hardlinkAsFilesFallback)return a=n.createReadStream(i),f();p(e)}))}))}();case"symlink":return function(){if(c)return d();n.unlink(h,(function(){n.symlink(s.linkname,h,p)}))}()}if(E)return d(new Error("unsupported type for "+h+" ("+s.type+")"));a.resume(),d()})):d(new Error(w+" is not a valid path"))}))})),t.finish&&w.on("finish",t.finish),w}},function(e,t,n){"use strict";const i=n(0),s=n(2),r=i.lchown?"lchown":"chown",o=i.lchownSync?"lchownSync":"chownSync",a=i.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),l=a?(e,t,n,s)=>r=>{r&&"EISDIR"===r.code?i.chown(e,t,n,s):s(r)}:(e,t,n,i)=>i,c=a?(e,t,n)=>{try{return i[o](e,t,n)}catch(s){if("EISDIR"!==s.code)throw s;i.chownSync(e,t,n)}}:i[o],d=process.version;let h=(e,t,n)=>i.readdir(e,t,n);/^v4\./.test(d)&&(h=(e,t,n)=>i.readdir(e,n));const u=(e,t,n,o,a)=>{if("string"==typeof t)return i.lstat(s.resolve(e,t),(i,s)=>{if(i)return a(i);s.name=t,u(e,s,n,o,a)});if(t.isDirectory())p(s.resolve(e,t.name),n,o,c=>{if(c)return a(c);const d=s.resolve(e,t.name);i[r](d,n,o,l(d,n,o,a))});else{const c=s.resolve(e,t.name);i[r](c,n,o,l(c,n,o,a))}},p=(e,t,n,s)=>{h(e,{withFileTypes:!0},(o,a)=>{if(o&&"ENOTDIR"!==o.code&&"ENOTSUP"!==o.code)return s(o);if(o||!a.length)return i[r](e,t,n,l(e,t,n,s));let c=a.length,d=null;const h=o=>{if(!d)return o?s(d=o):0==--c?i[r](e,t,n,l(e,t,n,s)):void 0};a.forEach(i=>u(e,i,t,n,h))})},f=(e,t,n)=>{let r;try{r=((e,t)=>i.readdirSync(e,t))(e,{withFileTypes:!0})}catch(i){if(i&&"ENOTDIR"===i.code&&"ENOTSUP"!==i.code)return c(e,t,n);throw i}return r.length&&r.forEach(r=>((e,t,n,r)=>{if("string"==typeof t){const n=i.lstatSync(s.resolve(e,t));n.name=t,t=n}t.isDirectory()&&f(s.resolve(e,t.name),n,r),c(s.resolve(e,t.name),n,r)})(e,r,t,n)),c(e,t,n)};e.exports=p,p.sync=f},function(e,t,n){t.extract=n(535),t.pack=n(545)},function(e,t,n){var i=n(1),s=n(536),r=n(293),o=n(106).Writable,a=n(106).PassThrough,l=function(){},c=function(e){return(e&=511)&&512-e},d=function(e,t){this._parent=e,this.offset=t,a.call(this)};i.inherits(d,a),d.prototype.destroy=function(e){this._parent.destroy(e)};var h=function(e){if(!(this instanceof h))return new h(e);o.call(this,e),e=e||{},this._offset=0,this._buffer=s(),this._missing=0,this._partial=!1,this._onparse=l,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,n=t._buffer,i=function(){t._continue()},a=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||i()},u=function(){t._stream=null;var e=c(t._header.size);e?t._parse(e,p):t._parse(512,w),t._locked||i()},p=function(){t._buffer.consume(c(t._header.size)),t._parse(512,w),i()},f=function(){var e=t._header.size;t._paxGlobal=r.decodePax(n.slice(0,e)),n.consume(e),u()},m=function(){var e=t._header.size;t._pax=r.decodePax(n.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),n.consume(e),u()},_=function(){var i=t._header.size;this._gnuLongPath=r.decodeLongPath(n.slice(0,i),e.filenameEncoding),n.consume(i),u()},g=function(){var i=t._header.size;this._gnuLongLinkPath=r.decodeLongPath(n.slice(0,i),e.filenameEncoding),n.consume(i),u()},w=function(){var s,o=t._offset;try{s=t._header=r.decode(n.slice(0,512),e.filenameEncoding)}catch(e){t.emit("error",e)}return n.consume(512),s?"gnu-long-path"===s.type?(t._parse(s.size,_),void i()):"gnu-long-link-path"===s.type?(t._parse(s.size,g),void i()):"pax-global-header"===s.type?(t._parse(s.size,f),void i()):"pax-header"===s.type?(t._parse(s.size,m),void i()):(t._gnuLongPath&&(s.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(s.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=s=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(s,t._pax),t._pax=null),t._locked=!0,s.size&&"directory"!==s.type?(t._stream=new d(t,o),t.emit("entry",s,t._stream,a),t._parse(s.size,u),void i()):(t._parse(512,w),void t.emit("entry",s,function(e,t){var n=new d(e,t);return n.end(),n}(t,o),a))):(t._parse(512,w),void i())};this._onheader=w,this._parse(512,w)};i.inherits(h,o),h.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},h.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},h.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=l,this._overflow?this._write(this._overflow,void 0,e):e()}},h.prototype._write=function(e,t,n){if(!this._destroyed){var i=this._stream,s=this._buffer,r=this._missing;if(e.length&&(this._partial=!0),e.length<r)return this._missing-=e.length,this._overflow=null,i?i.write(e,n):(s.append(e),n());this._cb=n,this._missing=0;var o=null;e.length>r&&(o=e.slice(r),e=e.slice(0,r)),i?i.end(e):s.append(e),this._overflow=o,this._onparse()}},h.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},e.exports=h},function(e,t,n){"use strict";var i=n(106).Duplex;function s(e){if(!(this instanceof s))return new s(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);i.call(this)}n(1).inherits(s,i),s.prototype._offset=function(e){var t,n=0,i=0;if(0===e)return[0,0];for(;i<this._bufs.length;i++){if(e<(t=n+this._bufs[i].length)||i==this._bufs.length-1)return[i,e-n];n=t}},s.prototype._reverseOffset=function(e){for(var t=e[0],n=e[1],i=0;i<t;i++)n+=this._bufs[i].length;return n},s.prototype.append=function(e){var t=0;if(Buffer.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof s)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(Buffer.from(e)));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},s.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||Buffer.alloc(0);if(i<=0)return e||Buffer.alloc(0);var s,r,o=!!e,a=this._offset(n),l=i-n,c=l,d=o&&t||0,h=a[1];if(0===n&&i==this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(r=0;r<this._bufs.length;r++)this._bufs[r].copy(e,d),d+=this._bufs[r].length;return e}if(c<=this._bufs[a[0]].length-h)return o?this._bufs[a[0]].copy(e,t,h,h+c):this._bufs[a[0]].slice(h,h+c);for(o||(e=Buffer.allocUnsafe(l)),r=a[0];r<this._bufs.length;r++){if(!(c>(s=this._bufs[r].length-h))){this._bufs[r].copy(e,d,h,h+c);break}this._bufs[r].copy(e,d,h),d+=s,c-=s,h&&(h=0)}return e},s.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return new s;var n=this._offset(e),i=this._offset(t),r=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,i[1]),0!=n[1]&&(r[0]=r[0].slice(n[1])),new s(r)},s.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},s.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var e=0,t=new s;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=Buffer.from([e]):"string"==typeof e?e=Buffer.from(e,n):e instanceof s?e=e.slice():Buffer.isBuffer(e)||(e=Buffer.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var i=this._offset(t),r=i[0],o=i[1];r<this._bufs.length;r++){for(var a=this._bufs[r];o<a.length;){if(a.length-o>=e.length){var l=a.indexOf(e,o);if(-1!==l)return this._reverseOffset([r,l]);o=a.length-e.length+1}else{var c=this._reverseOffset([r,o]);if(this._match(c,e))return c;o++}}o=0}return-1},s.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){s.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=s},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(10).Buffer,r=n(1).inspect,o=r&&r.custom||"inspect";e.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return s.alloc(0);for(var t,n,i,r=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=r,i=a,s.prototype.copy.call(t,n,i),a+=o.data.length,o=o.next;return r},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var s=t.data,r=e>s.length?s.length:e;if(r===s.length?i+=s:i+=s.slice(0,e),0===(e-=r)){r===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(r));break}++n}return this.length-=n,i},t._getBuffer=function(e){var t=s.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,o=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,o),0===(e-=o)){o===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,t},t[o]=function(e,t){return r(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){i(e,t,n[t])}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t,n){"use strict";var i=new Set;e.exports.emitExperimentalWarning=process.emitWarning?function(e){if(!i.has(e)){var t=e+" is an experimental feature. This feature could change at any time";i.add(e),process.emitWarning(t,"ExperimentalWarning")}}:function(){}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=n(1).deprecate},function(e,t,n){var i=n(10),s=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return s(e,t,n)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=o),o.prototype=Object.create(s.prototype),r(s,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=s(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";var i;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(201),o=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),u=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[o];if(null!==t){var n=e[u].read();null!==n&&(e[d]=null,e[o]=null,e[a]=null,t(p(n,!1)))}}function m(e){process.nextTick(f,e)}var _=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((s(i={get stream(){return this[u]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[u].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(p(void 0,!0))}))}));var n,i=this[d];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[c]?n(p(void 0,!0)):t[h](n,i)}),i)}}(i,this));else{var s=this[u].read();if(null!==s)return Promise.resolve(p(s,!1));n=new Promise(this[h])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),s(i,"return",(function(){var e=this;return new Promise((function(t,n){e[u].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),i),_);e.exports=function(e){var t,n=Object.create(g,(s(t={},u,{value:e,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:e._readableState.endEmitted,writable:!0}),s(t,h,{value:function(e,t){var i=n[u].read();i?(n[d]=null,n[o]=null,n[a]=null,e(p(i,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[d]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[d]=null,n[o]=null,n[a]=null,t(e)),void(n[l]=e)}var i=n[o];null!==i&&(n[d]=null,n[o]=null,n[a]=null,i(p(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}},function(e,t,n){"use strict";e.exports=s;var i=n(292);function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}n(75)(s,i),s.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var i;var s=n(74).codes,r=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e,t,s,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(201)),i(e,{readable:t,writable:s},(function(e){if(e)return r(e);a=!0,r()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new o("pipe"))}}function c(e){e()}function d(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,s=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new r("streams");var o=t.map((function(e,n){var r=n<t.length-1;return l(e,r,n>0,(function(e){i||(i=e),e&&o.forEach(c),r||(o.forEach(c),s(i))}))}));return t.reduce(d)}},function(e,t,n){var i=n(546),s=n(294),r=n(75),o=Buffer.alloc,a=n(106).Readable,l=n(106).Writable,c=n(155).StringDecoder,d=n(293),h=parseInt("755",8),u=parseInt("644",8),p=o(1024),f=function(){},m=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))};var _=function(e){l.call(this),this.written=0,this._to=e,this._destroyed=!1};r(_,l),_.prototype._write=function(e,t,n){if(this.written+=e.length,this._to.push(e))return n();this._to._drain=n},_.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var g=function(){l.call(this),this.linkname="",this._decoder=new c("utf-8"),this._destroyed=!1};r(g,l),g.prototype._write=function(e,t,n){this.linkname+=this._decoder.write(e),n()},g.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var w=function(){l.call(this),this._destroyed=!1};r(w,l),w.prototype._write=function(e,t,n){n(new Error("No body allowed for this entry"))},w.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var b=function(e){if(!(this instanceof b))return new b(e);a.call(this,e),this._drain=f,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};r(b,a),b.prototype.entry=function(e,t,n){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(n=t,t=null),n||(n=f);var r=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&i.S_IFMT){case i.S_IFBLK:return"block-device";case i.S_IFCHR:return"character-device";case i.S_IFDIR:return"directory";case i.S_IFIFO:return"fifo";case i.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?h:u),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=Buffer.from(t)),Buffer.isBuffer(t))return e.size=t.length,this._encode(e),this.push(t),m(r,e.size),process.nextTick(n),new w;if("symlink"===e.type&&!e.linkname){var o=new g;return s(o,(function(t){if(t)return r.destroy(),n(t);e.linkname=o.linkname,r._encode(e),n()})),o}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return process.nextTick(n),new w;var a=new _(this);return this._stream=a,s(a,(function(t){return r._stream=null,t?(r.destroy(),n(t)):a.written!==e.size?(r.destroy(),n(new Error("size mismatch"))):(m(r,e.size),r._finalizing&&r.finalize(),void n())})),a}},b.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},b.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},b.prototype._encode=function(e){if(!e.pax){var t=d.encode(e);if(t)return void this.push(t)}this._encodePax(e)},b.prototype._encodePax=function(e){var t=d.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(d.encode(n)),this.push(t),m(this,t.length),n.size=e.size,n.type=e.type,this.push(d.encode(n))},b.prototype._read=function(e){var t=this._drain;this._drain=f,t()},e.exports=b},function(e,t,n){e.exports=n(0).constants||n(154)},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),s=e[e.length-1];return"function"==typeof i&&i!==s&&Object.keys(s).forEach((function(e){i[e]=s[e]})),i}}},function(e,t,n){var i=n(295),s=n(294),r=n(0),o=function(){},a=/^v?\.0/.test(process.version),l=function(e){return"function"==typeof e},c=function(e,t,n,c){c=i(c);var d=!1;e.on("close",(function(){d=!0})),s(e,{readable:t,writable:n},(function(e){if(e)return c(e);d=!0,c()}));var h=!1;return function(t){if(!d&&!h)return h=!0,function(e){return!!a&&(!!r&&((e instanceof(r.ReadStream||o)||e instanceof(r.WriteStream||o))&&l(e.close)))}(e)?e.close(o):function(e){return e.setHeader&&l(e.abort)}(e)?e.abort():l(e.destroy)?e.destroy():void c(t||new Error("stream was destroyed"))}},d=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=l(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var i=t.map((function(s,r){var o=r<t.length-1;return c(s,o,r>0,(function(t){e||(e=t),t&&i.forEach(d),o||(i.forEach(d),n(e))}))}));return t.reduce(h)}},function(e,t,n){var i=n(2),s=n(0),r=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var l=t.mode,c=t.fs||s;void 0===l&&(l=r&~process.umask()),a||(a=null);var d=n||function(){};e=i.resolve(e),c.mkdir(e,l,(function(n){if(!n)return d(null,a=a||e);switch(n.code){case"ENOENT":o(i.dirname(e),t,(function(n,i){n?d(n,i):o(e,t,d,i)}));break;default:c.stat(e,(function(e,t){e||!t.isDirectory()?d(n,a):d(null,a)}))}}))}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,l=n.fs||s;void 0===a&&(a=r&~process.umask()),o||(o=null),t=i.resolve(t);try{l.mkdirSync(t,a),o=o||t}catch(s){switch(s.code){case"ENOENT":o=e(i.dirname(t),n,o),e(t,n,o);break;default:var c;try{c=l.statSync(t)}catch(e){throw s}if(!c.isDirectory())throw s}}return o}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=550}]));